{"version":3,"sources":["db/index.ts","types/models.ts","assets/img/workflow-logo-white-text.svg","assets/img/workflow-logo.svg","@primer/components/AlertTransition.tsx","@primer/utils/alert.tsx","@primer/components/Divider.tsx","@primer/components/AutoHeight.tsx","@primer/types/index.ts","@primer/components/Stack.tsx","@primer/hooks/useAutoFocus.ts","@primer/components/Button.tsx","@primer/alerts/Confirm.tsx","@primer/alerts/Slideout.tsx","@primer/utils/toast.tsx","@primer/utils/constants.ts","config.ts","@primer/hooks/usePopper.tsx","@primer/hooks/useDismissable.ts","@primer/components/CustomMenu.tsx","@primer/components/ActionMenu.tsx","@primer/components/Inline.tsx","@primer/components/Actions.tsx","@primer/components/BasicTruncate.tsx","@primer/components/Table.tsx","@primer/utils/funcs.tsx","@primer/components/Icon.tsx","@primer/components/Loader.tsx","@primer/hooks/useLocalStorage.ts","@primer/components/Tooltip.tsx","@primer/components/Sidebar.tsx","@primer/hooks/useDarkMode.ts","@primer/components/Topbar.tsx","@primer/components/MobileMenu.tsx","assets/img/ICRA_WhiteRev.png","@primer/components/OnRouteChange.tsx","@primer/utils/versions.ts","@primer/components/Layouts/PageSidebar.tsx","@primer/components/Layouts/PageTopbar.tsx","@primer/components/Card.tsx","@primer/components/ButtonSpacer.tsx","@primer/components/PageHeading.tsx","@primer/components/PageContent.tsx","db/seed.ts","pages/Home.tsx","assets/img/undraw_not_found_60pq.svg","pages/NotFound.tsx","utils/funcs.tsx","pages/Entities/Entities.tsx","@primer/components/DataListColumns.tsx","pages/Entities/ViewEntity.tsx","@primer/components/Form2/Form.tsx","@primer/components/Form2/utils.ts","@primer/components/Form2/FormInput.tsx","@primer/components/Form2/FormSelect.tsx","@primer/components/Form2/FormDate.tsx","@primer/components/Form2/FormToggle.tsx","pages/Entities/EntityForm.tsx","pages/Settings/Settings.tsx","@primer/components/NavList.tsx","@primer/components/PageNavbar.tsx","@primer/components/Badge.tsx","@primer/components/SectionHeader.tsx","pages/Settings/Notifications/Notifications.tsx","@primer/components/Form2/FormLabel.tsx","@primer/components/Form2/FormSection.tsx","@primer/components/Tabs.tsx","pages/Settings/Notifications/utils/options.tsx","@primer/components/Form2/useFieldArray.ts","@primer/components/Form2/FormEditor.tsx","@primer/components/Expandable.tsx","pages/Settings/Templates/utils/actions.tsx","components/FormTemplateEditor.tsx","pages/Settings/Notifications/NotificationForm.tsx","pages/Settings/Templates/Templates.tsx","pages/Settings/Templates/TemplateForm.tsx","pages/Settings/Roles/Roles.tsx","@primer/components/Form2/FormCheckbox.tsx","@primer/components/CardHeader.tsx","@primer/components/TableFrame.tsx","pages/Settings/Roles/RoleForm.tsx","pages/Settings/EntityTypes/EntityTypes.tsx","@primer/components/Suspender.tsx","@primer/hooks/openSlideout.tsx","@primer/components/Form2/FormInputRaw.tsx","slideouts/openEntityField.tsx","@primer/components/Well.tsx","slideouts/openEntityAction.tsx","slideouts/openEntityConnection.tsx","pages/Settings/EntityTypes/EntityTypeForm.tsx","pages/Settings/Modules/Modules.tsx","@primer/components/Checkbox.tsx","pages/Settings/Modules/AddModule.tsx","pages/Settings/SiteSettings/SiteSettings.tsx","assets/img/layout-sidebar.svg","assets/img/layout-topbar.svg","pages/Settings/SiteSettings/SiteSettingsForm.tsx","pages/Test.tsx","Router.tsx","App.tsx","index.tsx"],"names":["initialSettings","title","layout","storage","siteSettings","entities","entityValues","entityTypes","entityTypePermissions","entityFields","entityFieldPermissions","entityActions","entityActionPermissions","entityConnections","entityConnectionPermissions","notifications","templates","roles","renderContainer","current","dataActions","prop","all","filter","Array","prototype","call","find","id","x","save","data","uuid","created","Date","toISOString","push","persist","added","map","remove","set","key","val","get","localStorage","setItem","JSON","stringify","clear","removeItem","parse","getItem","restore","AlertTransition","show","className","children","div","clsx","style","originY","variants","hidden","y","visible","transition","type","ease","duration","initial","animate","exit","BackdropTransition","opacity","mountedAlerts","alert","DialogContent","Promise","resolvePromise","alertRoot","document","createElement","body","appendChild","ReactDOM","resolve","close","splice","findIndex","contains","removeChild","Divider","AutoHeight","useState","initialState","setInitialState","isAnimating","setAnimating","isVisible","setVisible","useEffect","setTimeout","padding","margin","overflow","height","onAnimationComplete","isNotNone","undefined","isLinkActionType","action","to","isButtonActionType","onClick","isSubmitActionType","isActionMenuActionType","actions","isCustomMenuActionType","menu","isLinkRouteConfig","isAnchorRouteConfig","url","isLinkTabType","isButtonTabType","spaces","0","1","2","3","4","6","8","Stack","space","dividers","filteredItems","Children","toArray","reduce","list","i","props","omit","Fragment","concat","item","useAutoFocus","enabled","ref","useRef","focus","sizes","xs","sm","md","lg","xl","inline","roundedness","none","rounded","full","intents","primary","span","button","secondary","light","danger","borderless","invisible","Button","forwardRef","intent","size","disabled","isLoading","as","Comp","attrs","Confirm","message","buttonLabel","dismissable","onAccept","open","setOpen","loading","setLoading","autoFocusRef","closeAlert","handleAccept","a","e","target","stroke","fill","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","buttonIntents","buttonRoundness","buttonSizes","tabIndex","confirm","answer","Slideout","mode","React","closeSlideout","useCallback","backdropRef","slideout","toastRoot","holidays","name","date","site","process","REACT_APP_ENV","REACT_APP_SITE","usePopper","options","reference","popper","cleanupCallback","instantiatePopper","createPopper","modifiers","flip","offset","preventOverflow","destroy","useMemo","referenceDomNode","popperDomNode","useDismissable","Math","floor","random","ignoreClass","onClose","prevState","setPrevState","onOpen","handle","window","addEventListener","removeEventListener","useClickOutside","CustomMenu","placement","maxWidth","strategy","tooltip","scale","submit","cancel","anchor","ActionInner","side","iconSide","icon","ActionMenu","hoverable","isHover","setHover","hoverTimer","setHoverTimer","actionList","index","divider","prevOpen","onMouseOver","clearTimeout","onMouseOut","dispatchEvent","Event","ButtonIntents","ButtonRoundness","ButtonSizes","Items","static","Item","active","state","replace","console","log","disableDismiss","preventDefault","stopPropagation","isDividerActionType","wrapper","Inline","items","Actions","render","isRenderActionType","BasicTruncate","timer","isOverflowing","setOverflowing","check","clientWidth","clientHeight","scrollWidth","scrollHeight","handler","colSpan","5","7","9","10","11","12","breakpoints","xxl","visibilities","pass","vis","visibility","Table","schema","getKey","_","isStriped","queries","mediaQueryLists","q","matchMedia","getValue","mql","matches","value","setValue","forEach","addListener","removeListener","useMedia","Object","values","mqs","cols","responsive","tmplCols","width","join","gridTemplateColumns","col","j","truncate","onlyText","length","smartReplaceClasses","fixes","names","split","fix","pattern","test","defaultValue","isValidDate","isNaN","valueOf","ensureDate","getReservedDate","isSameDay","ordinal","k","slugify","trim","toLowerCase","fixClasses","Spinner","xmlns","cx","cy","r","Loader","spin","useLocalStorage","initialValue","error","storedValue","setStoredValue","valueToStore","Function","Tooltip","hover","X","setX","Y","setY","offsetLeft","offsetWidth","offsetTop","left","top","originX","link","inactive","white","getProps","route","min","isCurrent","isPartiallyCurrent","exact","MenuLink","href","rel","NavLink","loc","useLocation","pathname","indexOf","Sidebar","header","footer","links","setMin","changeDarkMode","querySelector","classList","useDarkMode","setDarkMode","matchesMedia","func","hasOwnProperty","Topbar","logout","darkMode","MobileMenu","withTopbar","src","alt","block","OnRouteChangeWorker","prevProps","this","location","Component","OnRouteChange","versions","number","new","change","bug","PageSidebar","releases","sort","b","semver","gt","db","mainNav","entityType","plural","smallLogo","logo","fallback","scrollTo","PageTopbar","CardWrapper","CardContent","CardFooter","Card","ButtonSpacer","PageHeading","pageTitle","infoList","info","PageContent","seed","userEntityType","caseEntityType","eventEntityType","entityTypeId","changes","relationId","triggerType","triggerRepeat","triggerEvery","triggerYearIn","triggerMonthOn","triggerWeekOn","triggerDayAt","triggerAction","obeyTriggerTiming","triggerTimingType","triggerTiming","triggerDate","ruleGroups","rules","entity","field","operator","subject","content","adminRole","caseManagerRole","reviewerRole","applicantRole","role","roleId","view","modify","entityField","entityFieldId","entityAction","entityActionId","perform","entityConnection","entityConnectionId","Home","NotFound","illustration","getEntityFieldValue","stringValue","dateValue","format","numberValue","booleanValue","sortValuesByLatest","Entities","fields","visibleFields","setVisibleFields","includes","entityId","f","columnClassNames","DataListColumns","columns","lists","ViewEntity","Form","context","useForm","onSubmit","handleSubmit","formData","helpers","setSubmitting","useFormik","validate","validations","required","max","watch","watchPath","path","getIn","FormInput","label","autoFocus","hideOptional","placeholder","description","inputProps","isRequired","useField","touched","setTouched","formik","useFormikContext","uuidv4","token","extraClassName","extraProps","onChange","onBlur","isSubmitting","FormSelect","clearable","onChangeProp","option","autoComplete","autoCorrect","spellCheck","classNamePrefix","isClearable","isDisabled","menuPlacement","components","ClearIndicator","hasValue","innerProps","restInnerProps","DropdownIndicator","weekDays","isDate","FormDate","minDate","maxDate","inputDisabled","disableHolidays","inputClassName","display","setDisplay","startOfMonth","setContext","prevValue","setPrevValue","ensuredDate","dismissableRef","preDays","getISODay","subDays","endOfMonth","subMonths","reverse","postDays","addDays","addMonths","days","getDaysInMonth","composeRefs","onKeyDown","event","displayDate","c","day","select","isBefore","isAfter","Toggle","checked","color","aria-checked","aria-hidden","FormCheckbox","EntityForm","foundField","initialValues","formContext","newEntity","entries","navigate","FormToggle","Admin","toggle","NavList","PageNavbar","themes","gray","red","orange","yellow","green","teal","blue","indigo","purple","pink","Badge","SectionHeader","subtitle","Notifications","FormLabel","isOptional","FormSection","vertical","dark","border","tab","tabInactive","tabActive","card","buttons","Tabs","theme","activeIndex","getActiveIndex","tabs","simpleTitle","errors","types","repeatOptions","weekOnOptions","yearInOptions","generateMonthList","getMonthOnOptions","str","january","february","march","april","may","june","july","august","september","october","november","december","entityTiming","entityTimingType","useFieldArray","fieldName","setFieldValue","getFieldProps","meta","getFieldMeta","fieldArray","update","$push","swap","indexA","indexB","swapA","swapB","$splice","move","from","toMove","insert","unshift","$unshift","removedItem","pop","lastIndex","poppedItem","arrayHelpers","defaultEditorModules","toolbar","align","FormEditor","modules","readOnly","Expandable","isExpanded","setExpanded","templateTagActions","insertFn","level","FormTemplateEditor","insertTag","editor","getEditor","selection","getSelection","text","getText","deleteText","insertText","RuleGroup","appendRule","removeRule","prefix","Rule","string","boolean","users","user","NotificationForm","originalNotification","enabledDate","appendRuleGroup","removeRuleGroup","Infinity","Templates","CreateTemplate","originalTemplate","Roles","CardHeader","TableFrame","RoleForm","originalRole","connections","formValues","entityTypeKey","EntityTypes","ErrorBoundary","Sentry","dir","defaultError","Suspender","loader","withSuspense","SlideoutInner","SlideoutHeader","SlideoutContent","openSlideout","typeOptions","permissions","optionsHelpers","permissionsSchema","FormInputRaw","openEntityField","Well","changesHelpers","userDefined","openEntityAction","connectionTypeOptions","oppositeConnectionTypeOptions","openEntityConnection","EntityTypeForm","original","originalEntityFields","originalEntityActions","originalEntityConnections","formSchema","newEntityType","toDelete","entityFieldHelpers","entityActionsHelpers","entityConnectionsHelpers","setToDelete","entityFieldSchema","editedEntityField","produce","draft","entityActionsSchema","editedEntityAction","connectionSchema","editedEntityConnection","template","newEntityField","newEntityAction","newConnection","Modules","Checkbox","AddModule","selected","setSelected","s","SiteSettingsForm","LayoutSidebar","LayoutTopbar","fruitOptions","Test","newsletter","fruit","dates","Route","Router2","Wrapper","basepath","noThrow","default","Settings","TemplateForm","SiteSettings","App","useReducer","dispatch","Router","getElementById"],"mappings":"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","file":"static/js/main.bb5f1ad9.chunk.js","sourcesContent":["import {\n\tEntityTypeModel,\n\tEntityFieldModel,\n\tEntityActionModel,\n\tEntityConnectionModel,\n\tUnsaved,\n\tisUnsaved,\n\tNotificationModel,\n\tTemplateModel,\n\tRoleModel,\n\tEntityActionPermissionModel,\n\tEntityConnectionPermissionModel,\n\tEntityFieldPermissionModel,\n\tEntityTypePermissionModel,\n\tEntityModel,\n\tEntityValueModel,\n\tSiteSettings,\n} from 'types/models'\nimport { v4 as uuid } from 'uuid'\n\ninterface Storage {\n\tsiteSettings: SiteSettings\n\tentities: EntityModel[]\n\tentityValues: EntityValueModel[]\n\tentityTypes: EntityTypeModel[]\n\tentityTypePermissions: EntityTypePermissionModel[]\n\tentityFields: EntityFieldModel[]\n\tentityFieldPermissions: EntityFieldPermissionModel[]\n\tentityActions: EntityActionModel[]\n\tentityActionPermissions: EntityActionPermissionModel[]\n\tentityConnections: EntityConnectionModel[]\n\tentityConnectionPermissions: EntityConnectionPermissionModel[]\n\tnotifications: NotificationModel[]\n\ttemplates: TemplateModel[]\n\troles: RoleModel[]\n}\n\nconst initialSettings: SiteSettings = { title: 'NZDRC2', layout: 'sidebar' }\n\nconst storage: Storage = {\n\tsiteSettings: initialSettings,\n\tentities: [],\n\tentityValues: [],\n\tentityTypes: [],\n\tentityTypePermissions: [],\n\tentityFields: [],\n\tentityFieldPermissions: [],\n\tentityActions: [],\n\tentityActionPermissions: [],\n\tentityConnections: [],\n\tentityConnectionPermissions: [],\n\tnotifications: [],\n\ttemplates: [],\n\troles: [],\n}\n\nexport const renderContainer = {\n\tcurrent: () => {},\n}\n\nconst dataActions = <T extends Storage[K][0], K extends keyof Omit<Storage, 'siteSettings'>>(prop: K) => ({\n\tall: (filter?: (x: T) => boolean): T[] => {\n\t\tif (filter && storage[prop]) return Array.prototype.filter.call(storage[prop], filter)\n\t\t// @ts-ignore\n\t\treturn storage[prop] || []\n\t},\n\tfind: (id?: string | ((x: T) => boolean)): T | undefined => {\n\t\treturn Array.prototype.find.call(storage[prop], typeof id === 'function' ? id : (x) => x.id === id)\n\t},\n\tsave: (data: T | Unsaved<T>) => {\n\t\tif (isUnsaved<T>(data)) {\n\t\t\tlet x = {\n\t\t\t\t...data,\n\t\t\t\tid: uuid(),\n\t\t\t\tcreated: new Date().toISOString(),\n\t\t\t}\n\t\t\tArray.prototype.push.call(storage[prop], x)\n\t\t\tpersist()\n\t\t\trenderContainer.current()\n\t\t\treturn x\n\t\t} else {\n\t\t\tlet added = false\n\n\t\t\t// @ts-ignore\n\t\t\tstorage[prop] = storage[prop].map((x) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (x.id === data.id) {\n\t\t\t\t\tadded = true\n\t\t\t\t\treturn data\n\t\t\t\t}\n\t\t\t\treturn x\n\t\t\t})\n\n\t\t\tif (!added) Array.prototype.push.call(storage[prop], data)\n\n\t\t\tpersist()\n\t\t\trenderContainer.current()\n\t\t\treturn data\n\t\t}\n\t},\n\tremove: (id: string) => {\n\t\t// @ts-ignore\n\t\tstorage[prop] = storage[prop].filter((x) => x.id !== id)\n\t\tpersist()\n\t\trenderContainer.current()\n\t},\n})\n\nconst data = {\n\tsiteSettings: {\n\t\tset: <K extends keyof SiteSettings>(key: K, val: SiteSettings[K]) => {\n\t\t\tstorage.siteSettings[key] = val\n\t\t\trenderContainer.current()\n\t\t\tpersist()\n\t\t},\n\t\tget: <K extends keyof SiteSettings>(key: K) => {\n\t\t\treturn storage.siteSettings[key]\n\t\t},\n\t},\n\tentities: dataActions('entities'),\n\tentityValues: dataActions('entityValues'),\n\tentityTypes: dataActions('entityTypes'),\n\tentityTypePermissions: dataActions('entityTypePermissions'),\n\tentityFields: dataActions('entityFields'),\n\tentityFieldPermissions: dataActions('entityFieldPermissions'),\n\tentityActions: dataActions('entityActions'),\n\tentityActionPermissions: dataActions('entityActionPermissions'),\n\tentityConnections: dataActions('entityConnections'),\n\tentityConnectionPermissions: dataActions('entityConnectionPermissions'),\n\tnotifications: dataActions('notifications'),\n\ttemplates: dataActions('templates'),\n\troles: dataActions('roles'),\n}\n\nexport const persist = () => localStorage.setItem('data', JSON.stringify(storage))\n\nexport const restore = () => {\n\tconst data = JSON.parse(localStorage.getItem('data') || 'null')\n\n\tif (data) {\n\t\tstorage.siteSettings = data.siteSettings || {}\n\t\tstorage.entities = data.entities || []\n\t\tstorage.entityValues = data.entityValues || []\n\t\tstorage.entityTypes = data.entityTypes || []\n\t\tstorage.entityTypePermissions = data.entityTypePermissions || []\n\t\tstorage.entityFields = data.entityFields || []\n\t\tstorage.entityFieldPermissions = data.entityFieldPermissions || []\n\t\tstorage.entityActions = data.entityActions || []\n\t\tstorage.entityActionPermissions = data.entityActionPermissions || []\n\t\tstorage.entityConnections = data.entityConnections || []\n\t\tstorage.entityConnectionPermissions = data.entityConnectionPermissions || []\n\t\tstorage.notifications = data.notifications || []\n\t\tstorage.templates = data.templates || []\n\t\tstorage.roles = data.roles || []\n\t}\n}\n\nexport const clear = () => {\n\tlocalStorage.removeItem('data')\n\n\tstorage.siteSettings = initialSettings\n\tstorage.entities = []\n\tstorage.entityValues = []\n\tstorage.entityTypes = []\n\tstorage.entityTypePermissions = []\n\tstorage.entityFields = []\n\tstorage.entityFieldPermissions = []\n\tstorage.entityActions = []\n\tstorage.entityActionPermissions = []\n\tstorage.entityConnections = []\n\tstorage.entityConnectionPermissions = []\n\tstorage.notifications = []\n\tstorage.templates = []\n\tstorage.roles = []\n}\n\nrestore()\n\nexport default data\n","export type Unsaved<T> = Omit<T, 'id'>\n\nexport const isUnsaved = <T>(x: any): x is Unsaved<T> => typeof x === 'object' && typeof x.id === 'undefined'\nexport const isSaved = <T>(x: any): x is Unsaved<T> => typeof x === 'object' && typeof x.id === 'string'\n\nexport interface SiteSettings {\n\ttitle: string\n\tlayout: 'sidebar' | 'topbar'\n}\n\nexport interface Model {\n\tid: string\n\tcreated?: string\n}\n\nexport interface EntityTypeModel extends Model {\n\tkey: string\n\tname: string\n\tplural?: string\n\tmainNav: boolean\n}\n\nexport interface EntityModel extends Model {\n\tentityTypeId: string\n}\n\nexport type EntityField = 'string' | 'number' | 'date' | 'boolean' | 'option'\n\nexport interface EntityFieldModel extends Model {\n\tentityTypeId: string\n\tkey: string\n\tname: string\n\tplural?: string\n\ttemplate?: string\n\ttype: EntityField\n\toptions: string[]\n\tdefaultValue?: string\n}\n\nexport interface EntityValueModel extends Model {\n\tentityFieldId: string\n\tentityId: string\n\tstringValue?: string\n\tdateValue?: Date\n\tbooleanValue?: boolean\n\tnumberValue?: number\n}\n\nexport interface EntityActionModel extends Model {\n\tentityTypeId: string\n\tkey: string\n\tname: string\n\tchanges?: EntityActionChangeModel[]\n}\n\nexport interface EntityActionChangeModel extends Model {\n\tentityActionId: string\n\tentityFieldId: string\n\tuserDefined: boolean\n}\n\nexport type ConnectionType = 'one-to-one' | 'one-to-many' | 'many-to-many'\n\nexport interface EntityConnectionModel extends Model {\n\tkey: string\n\tname: string\n\tentityTypeId: string\n\trelationId: string\n\ttype: ConnectionType\n}\n\nexport interface NotificationModel extends Model {\n\tname: string\n\tfocus: string\n\tenabled: boolean\n\tenabledDate?: Date\n\ttriggerType: string\n\ttriggerRepeat: number\n\ttriggerEvery: string\n\ttriggerYearIn: string\n\ttriggerMonthOn: string\n\ttriggerWeekOn: string\n\ttriggerDayAt: string\n\ttriggerAction: string\n\tobeyTriggerTiming: boolean\n\ttriggerTimingType: string\n\ttriggerTiming: string\n\ttriggerDate: string\n\tsubject: string\n\tcontent: string\n\truleGroups: NotificationRuleGroup[]\n}\n\nexport interface NotificationRuleGroup {\n\trules: NotificationRule[]\n}\n\nexport interface NotificationRule {\n\tentity: string\n\tfield: string\n\toperator: string\n\tvalue: string\n}\n\nexport interface TemplateModel {\n\tid: string\n\tname: string\n\tcontent: string\n}\n\nexport interface RoleModel extends Model {\n\tname: string\n}\n\nexport interface EntityTypePermissionModel extends Model {\n\troleId: string\n\tentityTypeId: string\n\tview: boolean\n\tmodify: boolean\n\tremove: boolean\n}\n\nexport interface EntityFieldPermissionModel extends Model {\n\troleId: string\n\tentityFieldId: string\n\tview: boolean\n\tmodify: boolean\n}\n\nexport interface EntityActionPermissionModel extends Model {\n\troleId: string\n\tentityActionId: string\n\tperform: boolean\n}\n\nexport interface EntityConnectionPermissionModel extends Model {\n\troleId: string\n\tentityConnectionId: string\n\tview: boolean\n\tmodify: boolean\n\tremove: boolean\n}\n","export default __webpack_public_path__ + \"static/media/workflow-logo-white-text.c64a9d8e.svg\";","export default __webpack_public_path__ + \"static/media/workflow-logo.b7adb00c.svg\";","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\n\ninterface AlertTransitionProps {\n\tshow: boolean\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nexport const AlertTransition: FC<AlertTransitionProps> = ({ show, className, children }) => (\n\t<motion.div\n\t\tclassName={clsx(className, 'relative z-40')}\n\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\tvariants={{\n\t\t\thidden: { y: -24 },\n\t\t\tvisible: { y: 0 },\n\t\t}}\n\t\ttransition={{\n\t\t\ttype: 'tween',\n\t\t\tease: 'easeOut',\n\t\t\tduration: 0.2,\n\t\t}}\n\t\tinitial=\"hidden\"\n\t\tanimate=\"visible\"\n\t\texit=\"hidden\"\n\t>\n\t\t{children}\n\t</motion.div>\n)\n\nexport const BackdropTransition: FC<AlertTransitionProps> = ({ show, className, children }) => (\n\t<AnimatePresence>\n\t\t{show && (\n\t\t\t<motion.div\n\t\t\t\tclassName={clsx(className, 'relative z-40')}\n\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\tvariants={{\n\t\t\t\t\thidden: { opacity: 0 },\n\t\t\t\t\tvisible: { opacity: 1 },\n\t\t\t\t}}\n\t\t\t\ttransition={{\n\t\t\t\t\ttype: 'tween',\n\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\tduration: 0.2,\n\t\t\t\t}}\n\t\t\t\tinitial=\"hidden\"\n\t\t\t\tanimate=\"visible\"\n\t\t\t\texit=\"hidden\"\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</motion.div>\n\t\t)}\n\t</AnimatePresence>\n)\n\ninterface SlideoutTransitionProps {\n\tshow: boolean\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nexport const SlideoutTransition: FC<SlideoutTransitionProps> = ({ show, className, children }) => (\n\t<motion.div\n\t\tclassName={clsx(className)}\n\t\tvariants={{\n\t\t\thidden: { opacity: 0 },\n\t\t\tvisible: { opacity: 1 },\n\t\t}}\n\t\ttransition={{\n\t\t\ttype: 'tween',\n\t\t\tease: 'easeOut',\n\t\t\tduration: 0.2,\n\t\t}}\n\t\tinitial=\"hidden\"\n\t\tanimate=\"visible\"\n\t\texit=\"hidden\"\n\t>\n\t\t{children}\n\t</motion.div>\n)\n\ninterface ToastTransitionProps {\n\tshow: boolean\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nexport const ToastTransition: FC<ToastTransitionProps> = ({ show, className, children }) => (\n\t<AnimatePresence>\n\t\t{show && (\n\t\t\t<motion.div\n\t\t\t\tclassName={clsx(className, 'z-40')}\n\t\t\t\tstyle={{ originY: 1, originX: 1 } as MotionStyle}\n\t\t\t\tvariants={{\n\t\t\t\t\thidden: { scale: 0.95, opacity: 0 },\n\t\t\t\t\tvisible: { scale: 1, opacity: 1 },\n\t\t\t\t}}\n\t\t\t\ttransition={{\n\t\t\t\t\ttype: 'tween',\n\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\tduration: 0.3,\n\t\t\t\t}}\n\t\t\t\tinitial=\"hidden\"\n\t\t\t\tanimate=\"visible\"\n\t\t\t\texit=\"hidden\"\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</motion.div>\n\t\t)}\n\t</AnimatePresence>\n)\n","import React, { FC } from 'react'\nimport * as ReactDOM from 'react-dom'\n\nconst mountedAlerts: HTMLDivElement[] = []\n\ninterface DialogContentType<T> {\n\tresolve: (x?: T) => void\n\tclose: () => void\n}\n\nfunction alert<T>(DialogContent: FC<DialogContentType<T>>): Promise<T | undefined> {\n\treturn new Promise((resolvePromise) => {\n\t\tconst alertRoot = document.createElement('div')\n\t\tconst body = document.body\n\t\tbody.appendChild(alertRoot)\n\t\tmountedAlerts.push(alertRoot)\n\n\t\tconst close = () => {\n\t\t\tReactDOM.unmountComponentAtNode(alertRoot)\n\t\t\tmountedAlerts.splice(\n\t\t\t\tmountedAlerts.findIndex((x) => x === alertRoot),\n\t\t\t\t1\n\t\t\t)\n\t\t\tif (document.contains(alertRoot)) {\n\t\t\t\tdocument.body.removeChild(alertRoot)\n\t\t\t}\n\t\t}\n\n\t\tconst resolve = (x?: T) => resolvePromise(x)\n\n\t\tReactDOM.render(<DialogContent resolve={resolve} close={close} />, alertRoot)\n\t})\n}\n\nexport default alert\n","import React, { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface DividerProps {\n\tclassName?: ClassValue\n}\n\nconst Divider: FC<DividerProps> = ({ className }) => (\n\t<div\n\t\tclassName={clsx('border-t border-black dark:border-white border-opacity-10 dark:border-opacity-10', className)}\n\t/>\n)\n\nexport default Divider\n","import React, { FC, ReactNode, useEffect, useState } from 'react'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\n\ninterface AutoHeightProps {\n\tshow: boolean\n\tchildren: ReactNode\n\tstyle?: { [x: string]: string }\n}\n\nconst AutoHeight: FC<AutoHeightProps> = ({ show, style, children }) => {\n\tconst [initialState, setInitialState] = useState(show)\n\tconst [isAnimating, setAnimating] = useState(false)\n\tconst [isVisible, setVisible] = useState<boolean>(show)\n\n\tuseEffect(() => {\n\t\tif (show) {\n\t\t\tsetAnimating(true)\n\t\t\tsetTimeout(() => setVisible(true), 1)\n\t\t\tsetTimeout(() => setAnimating(false), 400)\n\t\t} else {\n\t\t\tsetAnimating(true)\n\t\t\tsetTimeout(() => setVisible(false), 1)\n\t\t\tsetTimeout(() => setAnimating(false), 400)\n\t\t}\n\t}, [show])\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{isVisible && (\n\t\t\t\t<motion.div\n\t\t\t\t\tstyle={\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toriginY: 0,\n\t\t\t\t\t\t\tpadding: '0.5rem',\n\t\t\t\t\t\t\tmargin: '-0.5rem',\n\t\t\t\t\t\t\toverflow: isAnimating ? 'hidden' : 'visible',\n\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t} as MotionStyle\n\t\t\t\t\t}\n\t\t\t\t\tvariants={{\n\t\t\t\t\t\thidden: { height: 0 },\n\t\t\t\t\t\tvisible: { height: 'auto' },\n\t\t\t\t\t}}\n\t\t\t\t\ttransition={{\n\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\tduration: 0.3,\n\t\t\t\t\t}}\n\t\t\t\t\tonAnimationComplete={() => setInitialState(false)}\n\t\t\t\t\tinitial={initialState ? 'visible' : 'hidden'}\n\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\texit=\"hidden\"\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</motion.div>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t)\n}\n\nexport default AutoHeight\n","import { ReactNode, SetStateAction } from 'react'\nimport { AxiosError } from 'axios'\nimport { Placement } from '@popperjs/core/index'\n\nexport const isAxiosError = (obj: any): obj is AxiosError => typeof obj === 'object' && obj.isAxiosError === true\n\nexport type IntentType =\n\t| 'primary'\n\t| 'secondary'\n\t| 'light'\n\t| 'save'\n\t| 'danger'\n\t| 'menu'\n\t| 'menu-danger'\n\t| 'sidebar-menu'\n\t| 'sub-menu'\n\t| 'borderless'\n\t| 'invisible'\n\t| 'none'\n\nexport type ButtonSize = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'inline'\n\nexport type ButtonRoundness = 'none' | 'sm' | 'rounded' | 'md' | 'lg' | 'full'\n\nexport type None = undefined | '' | false | null\n\nexport const isNotNone = <T>(x: T | None): x is T => {\n\treturn x !== undefined && x !== '' && x !== false && x !== null\n}\n\nexport type Nullish = undefined | null\n\nexport const isNotNullish = <T>(x: T | Nullish): x is T => {\n\treturn typeof x !== 'undefined' && x !== null\n}\n\nexport interface BaseActionType {\n\ttitle?: ReactNode\n\tintent?: IntentType\n\tclassName?: string\n\ticon?: ReactNode\n\ticonSide?: 'left' | 'right'\n\tdisabled?: boolean\n\tsize?: ButtonSize\n\trounded?: ButtonRoundness\n}\n\nexport interface LinkActionType extends BaseActionType {\n\tto: string\n\tstate?: { [x: string]: any }\n\treplace?: boolean\n}\n\nexport const isLinkActionType = (action: any): action is LinkActionType => typeof action.to === 'string'\n\nexport interface ButtonActionType extends BaseActionType {\n\tonClick: (e: any) => void\n\ttype?: 'button' | 'submit'\n\tisLoading?: boolean\n\tdisableDismiss?: boolean\n}\n\nexport const isButtonActionType = (action: any): action is ButtonActionType => typeof action.onClick === 'function'\n\nexport interface SubmitActionType extends BaseActionType {\n\ttype: 'submit'\n\tisLoading?: boolean\n}\n\nexport const isSubmitActionType = (action: any): action is ButtonActionType => action.type === 'submit'\n\nexport interface DividerActionType extends BaseActionType {\n\tdivider: true\n}\n\nexport const isDividerActionType = (action: any): action is DividerActionType => action?.divider === true\n\nexport interface ActionMenuActionType extends BaseActionType {\n\tactions: ActionType[] | (ActionType[] | None)[]\n\tplacement?: Placement\n\toffset?: number | [number, number]\n\thoverable?: boolean\n}\n\nexport const isActionMenuActionType = (action: any): action is ActionMenuActionType => action.actions instanceof Array\n\nexport interface CustomMenuActionType extends BaseActionType {\n\tmenu: ReactNode\n\tmaxWidth?: number\n\tplacement?: Placement\n}\n\nexport const isCustomMenuActionType = (action: any): action is CustomMenuActionType => !!action.menu\n\nexport interface RenderActionType extends BaseActionType {\n\trender: ReactNode\n}\n\nexport const isRenderActionType = (action: any): action is RenderActionType => !!action.render\n\nexport type ActionType =\n\t| LinkActionType\n\t| ButtonActionType\n\t| SubmitActionType\n\t| ActionMenuActionType\n\t| CustomMenuActionType\n\t| DividerActionType\n\t| RenderActionType\n\t| None\n\nexport interface RouteConfig {\n\ttitle: string\n\ticon: ReactNode\n\tshow?: () => boolean\n\texact: boolean\n\tchildren?: RouteConfig[]\n\ttooltip?: ReactNode\n}\n\nexport interface LinkRouteConfig extends RouteConfig {\n\tto: string\n}\n\nexport const isLinkRouteConfig = (x: any): x is LinkRouteConfig => typeof x.to !== 'undefined'\n\nexport interface AnchorRouteConfig extends RouteConfig {\n\turl: string\n}\n\nexport const isAnchorRouteConfig = (x: any): x is AnchorRouteConfig => typeof x.url !== 'undefined'\n\nexport type SetState<T> = (x: SetStateAction<T>) => void\n\nexport interface BaseTabType {\n\ttitle: ReactNode\n\tsimpleTitle?: string\n\terrors?: number\n\tkey?: number | string\n}\n\nexport interface LinkTabType extends BaseTabType {\n\tto: string\n\tstate?: { [x: string]: any }\n\treplace?: boolean\n}\n\nexport const isLinkTabType = (action: any): action is LinkTabType => typeof action.to === 'string'\n\nexport interface ButtonTabType extends BaseTabType {\n\tonClick: (item: TabType, n: number) => void\n}\n\nexport const isButtonTabType = (action: any): action is ButtonTabType => typeof action.onClick === 'function'\n\nexport type TabType = LinkTabType | ButtonTabType\n\nexport interface PaginatedSet<T> {\n\titems: T[]\n\tpageNumber: number\n\tpageSize: number\n\ttotalCount: number\n\ttotalPages: number\n}\n\nexport interface FilterFormProps {\n\tclear: () => void\n}\n\nexport const isFile = (x: any): x is File => x instanceof File\n\nexport type RefetchFn = () => Promise<unknown>\n\nexport type ModalResolveFn<T = unknown> = (answer?: T) => void\nexport type SlideoutResolveFn<T = unknown> = (answer?: T) => void\n\nexport interface PresetValue<T> {\n\tvalue: T\n\tlocked?: boolean\n}\n\nexport type Keyed<T> = T & { key: string }\n\nexport interface PaginationSearch {\n\t[x: string]: any\n}\n\nexport interface PaginationState {\n\tpage: number\n\tpageSize: number\n\torderBy?: string\n\torderDir: number\n\tsearch?: PaginationSearch\n}\n\nexport interface InitialPaginationState {\n\tpage?: number\n\tpageSize?: number\n\torderBy?: string\n\torderDir?: number\n\tsearch?: PaginationSearch\n}\n","import React, { Children, FC, Fragment, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport Divider from '@primer/components/Divider'\nimport AutoHeight from '@primer/components/AutoHeight'\nimport { omit } from 'ramda'\nimport { isNotNone } from '@primer/types'\n\ninterface StackProps {\n\tspace?: SpaceType\n\tdividers?: boolean\n\tchildren: ReactNode\n\tclassName?: ClassValue\n}\n\ntype SpaceType = 0 | 1 | 2 | 3 | 4 | 6 | 8\n\nconst spaces = {\n\t0: '',\n\t1: 'pt-1',\n\t2: 'pt-2',\n\t3: 'pt-3',\n\t4: 'pt-4',\n\t6: 'pt-6',\n\t8: 'pt-8',\n}\n\nconst Stack: FC<StackProps> = ({ space = 6, dividers, className, children }: StackProps) => {\n\tconst items = Children.toArray(children)\n\n\tconst filteredItems = items.reduce<ReactNode[]>((list, x, i) => {\n\t\t// @ts-ignore\n\t\tconst type = x?.type\n\t\t// @ts-ignore\n\t\tconst children: ReactNode[] | null = x?.props?.children || null\n\t\t// @ts-ignore\n\t\tconst props = omit(['children', 'show'], x.props) || null\n\t\t// @ts-ignore\n\t\tconst show = x?.props?.show || null\n\n\t\tif (type === Fragment) {\n\t\t\treturn list.concat(children)\n\t\t}\n\n\t\treturn [\n\t\t\t...list,\n\t\t\ttype === AutoHeight ? (\n\t\t\t\t<AutoHeight show={show} {...props}>\n\t\t\t\t\t<div className={clsx(i > 0 && spaces[space || 0])}>\n\t\t\t\t\t\t{dividers && i > 0 && <Divider className={spaces[space || 0]} />}\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</div>\n\t\t\t\t</AutoHeight>\n\t\t\t) : (\n\t\t\t\tx\n\t\t\t),\n\t\t]\n\t}, [])\n\n\treturn (\n\t\t<div className={clsx(`flex flex-col`, className)}>\n\t\t\t{filteredItems.filter(isNotNone).map((item, i) =>\n\t\t\t\t// @ts-ignore\n\t\t\t\titem.type === AutoHeight ? (\n\t\t\t\t\t<Fragment key={i}>{item}</Fragment>\n\t\t\t\t) : (\n\t\t\t\t\t<div key={i} className={clsx(i > 0 && spaces[space || 0])}>\n\t\t\t\t\t\t{dividers && i > 0 && <Divider className={spaces[space || 0]} />}\n\t\t\t\t\t\t{item}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default Stack\n","import { useEffect, useRef } from \"react\"\n\nconst useAutoFocus = <T = HTMLElement>(enabled: boolean = true) => {\n\tconst ref = useRef<T>(null)\n\n\tuseEffect(() => {\n\t\tif (ref.current && enabled) { \n\t\t\t// @ts-ignore\n\t\t\tif (typeof ref.current?.focus === 'function') {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tref.current?.focus()\n\t\t\t\t}, 100)\n\t\t\t}\n\t\t}\n\t}, [enabled])\n\n\treturn ref\n}\n\nexport default useAutoFocus","import React, { ReactNode, MouseEvent, forwardRef, ElementType } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { IntentType, ButtonSize, ButtonRoundness } from '@primer/types'\nimport { Spinner } from './Icon'\n\nexport const sizes = {\n\txs: 'px-2.5 py-1.5 text-xs leading-4',\n\tsm: 'px-3 py-2 text-sm leading-4',\n\tmd: 'px-4 py-2 text-sm leading-5',\n\tlg: 'px-4 py-2 text-base leading-6',\n\txl: 'px-6 py-3 text-base leading-6',\n\tinline: '',\n}\n\nexport const roundedness = {\n\tnone: '',\n\tsm: 'rounded-sm',\n\trounded: 'rounded',\n\tmd: 'rounded-md',\n\tlg: 'rounded-lg',\n\tfull: 'rounded-full',\n}\n\nexport const intents = {\n\tprimary: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-white dark:text-white',\n\t\t\t'border-0 border-primary-500',\n\t\t\t'bg-primary-600 hover:bg-primary-700 dark:bg-primary-600 dark:hover:bg-primary-500 active:bg-primary-700 dark:active:bg-primary-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-primary-300 dark:focus:ring-primary-300 dark:ring-offset-gray-800',\n\t\t\t'disabled:opacity-50'\n\t\t),\n\t},\n\tsecondary: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'border-gray-300 focus:border-primary-500 dark:border-gray-600 dark:focus:border-primary-500',\n\t\t\t'text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white',\n\t\t\t'bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-1 focus:ring-primary-500 dark:focus:ring-primary-500',\n\t\t\t'disabled:opacity-50'\n\t\t),\n\t},\n\tlight: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-gray-800 dark:text-white',\n\t\t\t'border-0 border-gray-500',\n\t\t\t'bg-gray-100 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-500 active:bg-gray-300 dark:active:bg-gray-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-300 dark:ring-offset-gray-800',\n\t\t\t'disabled:opacity-50'\n\t\t),\n\t},\n\tsave: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-white dark:text-white',\n\t\t\t'border-0',\n\t\t\t'bg-emerald-500 hover:bg-emerald-600 dark:bg-emerald-500 hover:bg-emerald-400 dark:hover:bg-emerald-400 active:bg-emerald-600 dark:active:bg-emerald-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-emerald-300 dark:focus:ring-emerald-700'\n\t\t),\n\t},\n\tdanger: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-white dark:text-white',\n\t\t\t'border-0',\n\t\t\t'bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-500 active:bg-red-700 dark:active:bg-red-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-red-300 dark:focus:ring-red-300'\n\t\t),\n\t},\n\tmenu: {\n\t\tspan: 'flex',\n\t\tbutton: clsx(\n\t\t\t'w-8 h-8 inline-flex items-center justify-center rounded-full',\n\t\t\t'bg-transparent hover:bg-primary-300 hover:bg-opacity-25 dark:hover:bg-primary-300 dark:hover:bg-opacity-25 focus:bg-primary-200',\n\t\t\t'text-gray-400 hover:text-gray-500 focus:text-gray-500 dark:hover:text-gray-300',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t'transition ease-in-out duration-100',\n\t\t\t'dark:hover:bg-gray-800 dark:focus:bg-gray-900 dark:hover:text-gray-400'\n\t\t),\n\t},\n\t'menu-danger': {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'w-8 h-8 inline-flex items-center justify-center rounded-full',\n\t\t\t'bg-transparent hover:bg-red-300 hover:bg-opacity-25 dark:hover:bg-red-300 dark:hover:bg-opacity-25 focus:bg-red-200',\n\t\t\t'text-red-400 hover:text-red-500 focus:text-red-500 dark:hover:text-red-300',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t'transition ease-in-out duration-100',\n\t\t\t'dark:hover:bg-red-800 dark:focus:bg-red-900 dark:hover:text-red-400'\n\t\t),\n\t},\n\t'sidebar-menu': {\n\t\tspan: 'flex',\n\t\tbutton: clsx(\n\t\t\t'w-8 h-8 inline-flex items-center justify-center rounded-full',\n\t\t\t'bg-transparent hover:bg-gray-700 focus:bg-gray-600',\n\t\t\t'text-gray-400 hover:text-gray-300 focus:text-gray-200',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t'transition ease-in-out duration-100',\n\t\t\t'dark:hover:bg-gray-800 dark:focus:bg-gray-900 dark:hover:text-gray-400'\n\t\t),\n\t},\n\t'sub-menu': {\n\t\tspan: 'flex',\n\t\tbutton: 'flex items-center justify-between text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out font-normal dark:text-gray-200 dark:hover:bg-gray-800 dark:focus:bg-gray-750',\n\t},\n\tborderless: {\n\t\tspan: 'inline hover', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline text-left border border-transparent hover:border-gray-300 focus:bg-gray-50 transition ease-in-out duration-150 dark:hover:border-gray-600 dark:focus:bg-gray-750',\n\t\t\t'focus:border-primary-500 dark:focus:border-primary-500',\n\t\t\t'focus:outline-none focus:ring-1 focus:ring-primary-500'\n\t\t),\n\t},\n\tinvisible: {\n\t\tspan: 'inline',\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center text-left border border-transparent',\n\t\t\t'hover:bg-gray-800 dark:hover:bg-gray-100 bg-opacity-10 hover:bg-opacity-10 dark:hover:bg-opacity-10',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500'\n\t\t),\n\t},\n\tnone: {\n\t\tspan: '',\n\t\tbutton: '',\n\t},\n}\n\ninterface ButtonProps {\n\tonClick?: (e: MouseEvent) => void\n\tchildren: ReactNode\n\tclassName?: ClassValue\n\tintent?: IntentType\n\ttype?: 'button' | 'submit'\n\tdisabled?: boolean\n\tisLoading?: boolean\n\tsize?: ButtonSize\n\trounded?: ButtonRoundness\n\tas?: ElementType\n}\n\nconst Button = forwardRef<HTMLElement, ButtonProps>(\n\t(\n\t\t{\n\t\t\tonClick,\n\t\t\ttype = 'button',\n\t\t\tintent = 'secondary',\n\t\t\tsize = 'md',\n\t\t\trounded = 'rounded',\n\t\t\tdisabled,\n\t\t\tisLoading,\n\t\t\tclassName,\n\t\t\tas = 'button',\n\t\t\tchildren,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst Comp = as\n\n\t\tconst attrs = {}\n\n\t\tif (as === 'button') {\n\t\t\t// @ts-ignore\n\t\t\tattrs.type = type\n\t\t}\n\n\t\treturn (\n\t\t\t<span className={clsx('inline-flex select-none', intents[intent].span, roundedness[rounded])} ref={ref}>\n\t\t\t\t<Comp\n\t\t\t\t\t{...attrs}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'focus:outline-none',\n\t\t\t\t\t\tintents[intent].button,\n\t\t\t\t\t\tsizes[size],\n\t\t\t\t\t\troundedness[rounded],\n\t\t\t\t\t\tclassName\n\t\t\t\t\t)}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tdisabled={disabled || isLoading || false}\n\t\t\t\t>\n\t\t\t\t\t{isLoading && <Spinner className=\"animate-spin -ml-1 mr-3 h-4 w-4\" />}\n\t\t\t\t\t{children}\n\t\t\t\t</Comp>\n\t\t\t</span>\n\t\t)\n\t}\n)\n\nexport default Button\n","import React, { FC, ReactNode, useState, useRef, MouseEvent } from 'react'\nimport { BackdropTransition, AlertTransition } from '@primer/components/AlertTransition'\nimport alert from '@primer/utils/alert'\nimport { Spinner } from '@primer/components/Icon'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport {\n\tintents as buttonIntents,\n\troundedness as buttonRoundness,\n\tsizes as buttonSizes,\n} from '@primer/components/Button'\nimport clsx from 'clsx'\n\ntype ConfirmIntent = 'danger' | 'primary'\n\ninterface ConfirmProps {\n\tresolve: (x?: boolean | undefined) => void\n\tclose: () => void\n\ttitle: ReactNode\n\tmessage?: ReactNode\n\tbuttonLabel?: ReactNode\n\tdismissable?: boolean\n\tintent?: ConfirmIntent\n\tonAccept?: () => Promise<any> | void\n}\n\nconst Confirm: FC<ConfirmProps> = ({\n\tresolve,\n\tclose,\n\ttitle,\n\tmessage,\n\tbuttonLabel = 'Yes',\n\tdismissable = true,\n\tintent = 'danger',\n\tonAccept,\n}) => {\n\tconst [open, setOpen] = useState(true)\n\tconst [loading, setLoading] = useState(false)\n\tconst ref = useRef<HTMLDivElement>(null)\n\n\tconst autoFocusRef = useAutoFocus<HTMLButtonElement>()\n\n\tconst closeAlert = (x: boolean) => {\n\t\tsetOpen(false)\n\t\tresolve(x)\n\t\tsetTimeout(() => {\n\t\t\tclose()\n\t\t}, 300)\n\t}\n\n\tconst handleAccept = async () => {\n\t\tif (onAccept) {\n\t\t\tsetLoading(true)\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 500))\n\t\t\tawait onAccept()\n\t\t\tcloseAlert(true)\n\t\t} else {\n\t\t\tcloseAlert(true)\n\t\t}\n\t}\n\n\treturn (\n\t\t<BackdropTransition show={open}>\n\t\t\t<div\n\t\t\t\tclassName=\"fixed inset-0 w-screen h-screen flex p-4 justify-center bg-black bg-opacity-50 overflow-y-auto z-60 backdrop-filter backdrop-grayscale\"\n\t\t\t\tonClick={(e: MouseEvent) => {\n\t\t\t\t\tif (e.target === ref.current) {\n\t\t\t\t\t\tdismissable && !loading && closeAlert(false)\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tref={ref}\n\t\t\t>\n\t\t\t\t<AlertTransition\n\t\t\t\t\tshow={open}\n\t\t\t\t\tclassName=\"w-full pointer-events-none sm:flex sm:justify-center sm:items-start\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"bg-white dark:bg-gray-700 rounded-lg overflow-hidden shadow-xl sm:max-w-lg sm:w-full pointer-events-auto\"\n\t\t\t\t\t\tref={dismissable ? ref : undefined}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"bg-white dark:bg-gray-700 px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n\t\t\t\t\t\t\t<div className=\"sm:flex sm:items-start\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-red-100 text-red-600': intent === 'danger',\n\t\t\t\t\t\t\t\t\t\t\t'bg-indigo-100 text-indigo-600': intent === 'primary',\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg className=\"h-6 w-6\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n\t\t\t\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{message && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2 text-sm leading-5 text-gray-500 dark:text-gray-300\">\n\t\t\t\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"bg-gray-50 dark:bg-gray-750 px-4 py-3 sm:px-6 flex flex-col-reverse sm:flex-row justify-end sm:space-x-3\">\n\t\t\t\t\t\t\t<span className={clsx(buttonIntents.danger.span, buttonRoundness.md)}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={() => closeAlert(false)}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t// className=\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring transition ease-in-out duration-150 sm:text-sm sm:leading-5 antialiased disabled:opacity-50 disabled:cursor-not-allowed dark:border-gray-600 dark:text-gray-200 dark:bg-gray-700 dark:hover:text-white dark:focus:bg-gray-700\"\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\tbuttonIntents.secondary.button,\n\t\t\t\t\t\t\t\t\t\tbuttonSizes.md,\n\t\t\t\t\t\t\t\t\t\tbuttonRoundness.md,\n\t\t\t\t\t\t\t\t\t\t'w-full sm:w-auto justify-center'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t\ttabIndex={1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<span className={clsx(buttonIntents[intent].span, buttonRoundness.md)}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={handleAccept}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t// className=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-red-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-red-500 focus:outline-none focus:border-red-700 focus:ring-red transition ease-in-out duration-150 sm:text-sm sm:leading-5 antialiased\"\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\tbuttonIntents[intent].button,\n\t\t\t\t\t\t\t\t\t\tbuttonSizes.md,\n\t\t\t\t\t\t\t\t\t\tbuttonRoundness.md,\n\t\t\t\t\t\t\t\t\t\t'w-full sm:w-auto justify-center mb-3 sm:mb-0'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t\tref={autoFocusRef}\n\t\t\t\t\t\t\t\t\ttabIndex={2}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t{loading && <Spinner className=\"animate-spin -ml-1 mr-3 w-4 h-4\" />}\n\t\t\t\t\t\t\t\t\t\t{buttonLabel}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</AlertTransition>\n\t\t\t</div>\n\t\t</BackdropTransition>\n\t)\n}\n\nexport default Confirm\n\nexport const confirm = async ({\n\ttitle,\n\tmessage,\n\tintent,\n\tbuttonLabel,\n\tonAccept,\n}: {\n\ttitle: ReactNode\n\tmessage?: ReactNode\n\tintent?: ConfirmIntent\n\tbuttonLabel?: ReactNode\n\tonAccept?: () => Promise<any> | void\n}) => {\n\tconst answer = await alert<boolean>(({ resolve, close }) => (\n\t\t<Confirm\n\t\t\tresolve={resolve}\n\t\t\tclose={close}\n\t\t\ttitle={title}\n\t\t\tmessage={message}\n\t\t\tbuttonLabel={buttonLabel}\n\t\t\tonAccept={onAccept}\n\t\t\tdismissable={true}\n\t\t\tintent={intent}\n\t\t/>\n\t))\n\n\treturn answer\n}\n","import React, { ReactNode, useRef, MouseEvent, useCallback } from 'react'\n// import { BackdropTransition, SlideoutTransition } from '@primer/components/AlertTransition'\nimport alert from '@primer/utils/alert'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\nimport { SlideoutResolveFn } from '@primer/types'\nimport clsx from 'clsx'\n\nconst sizes = {\n\tsm: 'max-w-sm',\n\tmd: 'max-w-md',\n\tlg: 'max-w-lg',\n\txl: 'max-w-xl',\n\t'2xl': 'max-w-2xl',\n}\n\nexport type SizeValue = keyof typeof sizes\n\ninterface SlideoutProps<T> {\n\tresolve: SlideoutResolveFn<T>\n\tclose: () => void\n\tdismissable?: boolean\n\tsize?: SizeValue\n\tmode?: 'dark' | ''\n\tchildren: (close: SlideoutResolveFn<T>) => ReactNode\n}\n\nfunction Slideout<T>({ close, resolve, children, size = 'md', mode = '', dismissable = true }: SlideoutProps<T>) {\n\tconst [open, setOpen] = React.useState(true)\n\n\tconst closeSlideout = useCallback(\n\t\t(x) => {\n\t\t\tresolve(x)\n\n\t\t\tsetOpen(false)\n\t\t\tsetTimeout(() => {\n\t\t\t\tclose()\n\t\t\t}, 500)\n\t\t},\n\t\t[close, resolve]\n\t)\n\n\tconst backdropRef = useRef<HTMLDivElement>(null)\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{open && (\n\t\t\t\t<motion.div\n\t\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\t\tvariants={{\n\t\t\t\t\t\thidden: { opacity: 0 },\n\t\t\t\t\t\tvisible: { opacity: 1 },\n\t\t\t\t\t}}\n\t\t\t\t\ttransition={{\n\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\tduration: 0.2,\n\t\t\t\t\t}}\n\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\texit=\"hidden\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('fixed z-40 inset-0 overflow-hidden', mode)}\n\t\t\t\t\t\tonClick={(e: MouseEvent) => {\n\t\t\t\t\t\t\tif (e.target === backdropRef.current) {\n\t\t\t\t\t\t\t\tdismissable && closeSlideout(false)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={backdropRef}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"absolute z-40 inset-0 overflow-hidden\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"absolute z-40 inset-0 bg-black bg-opacity-50 transition-opacity backdrop-filter backdrop-grayscale\"\n\t\t\t\t\t\t\t\tonClick={() => closeSlideout(false)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<section className={clsx('absolute z-40 inset-y-0 right-0 w-full flex', sizes[size])}>\n\t\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none flex-1\"\n\t\t\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\t\t\thidden: { x: '100%' },\n\t\t\t\t\t\t\t\t\t\tvisible: { x: '0%' },\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\t\t\tduration: 0.2,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"pointer-events-auto h-full w-full\">{children(closeSlideout)}</div>\n\t\t\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</motion.div>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t)\n}\n\nexport default Slideout\n\ninterface slideoutProps<T> {\n\tdismissable?: boolean\n\tsize?: SizeValue\n\tmode: 'dark' | ''\n\tchildren: (close: SlideoutResolveFn<T>) => ReactNode\n}\n\nexport function slideout<T = boolean>({ dismissable, size, mode = '', children }: slideoutProps<T>) {\n\treturn alert<T>(({ resolve, close }) => {\n\t\treturn (\n\t\t\t<Slideout\n\t\t\t\tresolve={resolve}\n\t\t\t\tclose={close}\n\t\t\t\tchildren={children}\n\t\t\t\tdismissable={dismissable}\n\t\t\t\tsize={size}\n\t\t\t\tmode={mode}\n\t\t\t/>\n\t\t)\n\t})\n}\n","import React, { ReactElement } from 'react'\nimport * as ReactDOM from 'react-dom'\n\nconst toastRoot = document.createElement('div')\ntoastRoot.className = 'flex flex-col justify-start fixed inset-0 pointer-events-none z-50'\ndocument.body.appendChild(toastRoot)\n\nconst toast = (DialogContent: (props: { giveAnswer: (answer: boolean) => void }) => ReactElement): Promise<boolean> =>\n\tnew Promise((res) => {\n\t\tconst toastContainer = document.createElement('div')\n\t\ttoastRoot.appendChild(toastContainer)\n\n\t\tconst giveAnswer = (answer: boolean) => {\n\t\t\tReactDOM.unmountComponentAtNode(toastContainer)\n\t\t\tres(answer)\n\t\t}\n\n\t\tReactDOM.render(<DialogContent giveAnswer={giveAnswer} />, toastContainer)\n\t})\n\nexport default toast\n","export const holidays = [\n\t{ name: \"New Year's Day\", date: new Date('1 Jan 2021') },\n\t{ name: \"Day after New Year's Day\", date: new Date('4 Jan 2021') },\n\t{ name: 'Waitangi Day', date: new Date('8 Feb 2021') },\n\t{ name: 'Good Friday', date: new Date('2 Apr 2021') },\n\t{ name: 'Easter Monday', date: new Date('5 Apr 2021') },\n\t{ name: 'Anzac Day', date: new Date('26 Apr 2021') },\n\t{ name: \"Queen's Birthday\", date: new Date('7 Jun 2021') },\n\t{ name: 'Labour Day', date: new Date('25 Oct 2021') },\n\t{ name: 'Christmas Day', date: new Date('27 Dec 2021') },\n\t{ name: 'Boxing Day', date: new Date('28 Dec 2021') },\n\n\t{ name: \"New Year's Day\", date: new Date('3 Jan 2022') },\n\t{ name: \"Day after New Year's Day\", date: new Date('4 Jan 2022') },\n\t{ name: 'Waitangi Day', date: new Date('7 Feb 2022') },\n\t{ name: 'Good Friday', date: new Date('15 Apr 2022') },\n\t{ name: 'Easter Monday', date: new Date('18 Apr 2022') },\n\t{ name: 'Anzac Day', date: new Date('25 Apr 2022') },\n\t{ name: \"Queen's Birthday\", date: new Date('6 Jun 2022') },\n\t{ name: 'Matariki', date: new Date('24 Jun 2022') },\n\t{ name: 'Labour Day', date: new Date('24 Oct 2022') },\n\t{ name: 'Christmas Day', date: new Date('26 Dec 2022') },\n\t{ name: 'Boxing Day', date: new Date('27 Dec 2022') },\n]\n","export const env = process.env.REACT_APP_ENV || 'dev'\nexport const site = process.env.REACT_APP_SITE || 'dev'\n\nconst registry = 'nzdrc-icra.azurewebsites.net'\n\ninterface Environment {\n\turl: string\n\tregistry: string\n}\n\nconst environments: { [x: string]: Environment } = {\n\tdev: {\n\t\turl: 'https://nzdrc-api-dev.azurewebsites.net/api',\n\t\tregistry,\n\t},\n\tstaging: {\n\t\turl: 'https://nzdrc-api-stage.azurewebsites.net/api',\n\t\tregistry,\n\t},\n\tdemo: {\n\t\turl: 'https://nzdrc-api-demo.azurewebsites.net/api',\n\t\tregistry,\n\t},\n\tlivetest: {\n\t\turl: 'https://nzdrc-api.azurewebsites.net/api', //temporary\n\t\tregistry,\n\t},\n\tproduction: {\n\t\turl: 'https://nzdrc-api.azurewebsites.net/api',\n\t\tregistry,\n\t},\n}\n\nexport default environments[site]\n","import React from 'react'\nimport { createPopper, Options } from '@popperjs/core/lib/popper-lite'\nimport flip from '@popperjs/core/lib/modifiers/flip'\nimport offset from '@popperjs/core/lib/modifiers/offset'\nimport preventOverflow from '@popperjs/core/lib/modifiers/preventOverflow'\n\n/**\n * Example implementation to use Popper: https://popper.js.org/\n */\nexport function usePopper(\n\toptions?: Partial<Options>\n): [React.RefCallback<Element | null>, React.RefCallback<HTMLElement | null>] {\n\tconst reference = React.useRef<Element | null>(null)\n\tconst popper = React.useRef<HTMLElement | null>(null)\n\n\tconst cleanupCallback = React.useRef(() => {})\n\n\tconst instantiatePopper = React.useCallback(() => {\n\t\tif (!reference.current) return\n\t\tif (!popper.current) return\n\n\t\tif (cleanupCallback.current) cleanupCallback.current()\n\n\t\tcleanupCallback.current = createPopper(reference.current, popper.current, {\n\t\t\t...options,\n\t\t\tmodifiers: [flip, offset, preventOverflow, ...(options?.modifiers || [])],\n\t\t}).destroy\n\t}, [reference, popper, cleanupCallback, options])\n\n\treturn React.useMemo(\n\t\t() => [\n\t\t\t(referenceDomNode) => {\n\t\t\t\treference.current = referenceDomNode\n\t\t\t\tinstantiatePopper()\n\t\t\t},\n\t\t\t(popperDomNode) => {\n\t\t\t\tpopper.current = popperDomNode\n\t\t\t\tinstantiatePopper()\n\t\t\t},\n\t\t],\n\t\t[reference, popper, instantiatePopper]\n\t)\n}\n","import { useState, useEffect, useCallback } from 'react'\nimport useClickOutside from 'react-cool-onclickoutside'\n\ninterface DismissableOptions {\n\tonOpen?: () => void\n\tonClose?: () => void\n}\n\nconst useDismissable = (options: DismissableOptions = {}) => {\n\tconst [open, setOpen] = useState(false)\n\n\tconst [ignoreClass] = useState(`ignore-dismissable-${Math.floor(Math.random() * 999999)}`)\n\n\tconst close = useCallback(() => {\n\t\toptions.onClose && options.onClose()\n\t\tsetOpen(false)\n\t}, [options])\n\n\tconst [prevState, setPrevState] = useState(open)\n\tuseEffect(() => {\n\t\tif (open !== prevState) {\n\t\t\toptions.onOpen && open && options.onOpen()\n\t\t\tsetPrevState(open)\n\t\t}\n\t}, [open, options, prevState])\n\n\tuseEffect(() => {\n\t\tconst handle = (e: KeyboardEvent) => e.key === 'Escape' && setOpen(false)\n\n\t\tif (open) {\n\t\t\twindow.addEventListener('keyup', handle)\n\t\t} else {\n\t\t\twindow.removeEventListener('keyup', handle)\n\t\t}\n\n\t\treturn () => window.removeEventListener('keyup', handle)\n\t}, [open, close])\n\n\tconst ref = useClickOutside(\n\t\t(e) => {\n\t\t\tsetOpen(false)\n\t\t},\n\t\t{ ignoreClass }\n\t)\n\n\treturn { open, setOpen, ignoreClass, ref }\n}\n\nexport default useDismissable\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { usePopper } from '@primer/hooks/usePopper'\nimport { Placement } from '@popperjs/core/index'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\nimport useDismissable from '@primer/hooks/useDismissable'\n\ninterface CustomMenuProps {\n\tmenu: ReactNode\n\tchildren: (x: { onClick: () => void }) => ReactNode\n\tclassName?: ClassValue\n\tplacement?: Placement\n\tmaxWidth?: number\n}\n\nconst CustomMenu: FC<CustomMenuProps> = ({ placement = 'bottom-end', className, children, menu, maxWidth }) => {\n\tconst [reference, tooltip] = usePopper({\n\t\tplacement,\n\t\tstrategy: 'fixed',\n\t\tmodifiers: [\n\t\t\t{\n\t\t\t\tname: 'offset',\n\t\t\t\toptions: { offset: [0, 0] },\n\t\t\t},\n\t\t],\n\t})\n\n\tconst { open, setOpen, ignoreClass, ref } = useDismissable()\n\n\treturn (\n\t\t<div className={clsx('block text-left', className)}>\n\t\t\t{/*\n\t\t\t\t// @ts-ignore */}\n\t\t\t<div ref={reference} className={ignoreClass}>\n\t\t\t\t{children({ onClick: () => setOpen((x) => !x) })}\n\t\t\t</div>\n\n\t\t\t<div ref={tooltip} className=\"z-20\">\n\t\t\t\t<div ref={ref}>\n\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t{open && (\n\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\tclassName={clsx(className, 'relative z-60')}\n\t\t\t\t\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\t\thidden: { scale: 0.95, opacity: 0 },\n\t\t\t\t\t\t\t\t\tvisible: { scale: 1, opacity: 1 },\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\t\tduration: 0.2,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"mt-2 rounded-md shadow-lg focus:outline-none\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tmaxWidth: maxWidth\n\t\t\t\t\t\t\t\t\t\t\t? typeof maxWidth === 'number'\n\t\t\t\t\t\t\t\t\t\t\t\t? maxWidth + 'px'\n\t\t\t\t\t\t\t\t\t\t\t\t: maxWidth\n\t\t\t\t\t\t\t\t\t\t\t: 'auto',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"rounded-md ring-1 ring-black ring-opacity-5 whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t{menu}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</AnimatePresence>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default CustomMenu\n","import React, { FC, ReactNode, useRef, useState } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { usePopper } from '@primer/hooks/usePopper'\nimport { Placement } from '@popperjs/core/index'\nimport { Menu } from '@headlessui/react'\nimport { AnimatePresence, motion, MotionStyle } from 'framer-motion'\nimport { Link } from '@reach/router'\nimport {\n\tActionType,\n\tisActionMenuActionType,\n\tisButtonActionType,\n\tisSubmitActionType,\n\tisLinkActionType,\n\tisCustomMenuActionType,\n\tisDividerActionType,\n\tisNotNone,\n\tIntentType,\n\tButtonSize,\n\tButtonRoundness as ButtonRoundnessType,\n\tNone,\n} from '@primer/types'\nimport Button, {\n\tintents as ButtonIntents,\n\tsizes as ButtonSizes,\n\troundedness as ButtonRoundness,\n} from '@primer/components/Button'\nimport CustomMenu from '@primer/components/CustomMenu'\n\nconst intents = {\n\tprimary:\n\t\t'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:bg-gray-750 h-10',\n\tsecondary:\n\t\t'rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-primary-300 hover:bg-opacity-25 dark:hover:bg-primary-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:focus:bg-gray-750 active:bg-gray-200 dark:active:bg-gray-700 h-10',\n\tsave: 'rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-green-300 hover:bg-opacity-25 dark:hover:bg-green-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-green-100 hover:text-green-600 font-normal dark:text-green-200 dark:hover:bg-opacity-50 dark:hover:text-green-100 dark:focus:bg-green-400 active:bg-green-200 dark:active:bg-green-300 h-10',\n\tdanger: 'rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-red-300 hover:bg-opacity-25 dark:hover:bg-red-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-red-100 hover:text-red-600 font-normal dark:text-red-200 dark:hover:bg-opacity-50 dark:hover:text-red-100 dark:focus:bg-red-400 active:bg-red-200 dark:active-bg-red-300 h-10',\n\tsubmit: 'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal h-10',\n\tcancel: 'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal',\n\tmenu: 'block',\n\t'sidebar-menu': '',\n\t'sub-menu':\n\t\t'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:hover:bg-gray-800 dark:focus:bg-gray-750',\n\tanchor: 'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal',\n\tborderless:\n\t\t'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal',\n\tinvisible: '',\n\tnone: '',\n\tlight: '',\n\t'menu-danger': '',\n}\n\ninterface ActionMenuProps {\n\tactions: ActionType[] | (ActionType[] | None)[]\n\tintent?: IntentType\n\tplacement?: Placement\n\toffset?: number | [number, number]\n\thoverable?: boolean\n\tdisabled?: boolean\n\tsize?: ButtonSize\n\trounded?: ButtonRoundnessType\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nconst ActionMenu: FC<ActionMenuProps> = ({\n\tactions,\n\tintent,\n\tplacement = 'bottom-end',\n\toffset = 10,\n\thoverable = false,\n\tdisabled = false,\n\tsize,\n\trounded = 'rounded',\n\tclassName,\n\tchildren,\n}) => {\n\tconst [reference, tooltip] = usePopper({\n\t\tplacement,\n\t\tstrategy: 'fixed',\n\t\tmodifiers: [\n\t\t\t{\n\t\t\t\tname: 'offset',\n\t\t\t\toptions: { offset: offset instanceof Array ? offset : [0, offset] },\n\t\t\t},\n\t\t],\n\t})\n\n\tconst [isHover, setHover] = useState(false)\n\tconst [hoverTimer, setHoverTimer] = useState<ReturnType<typeof setTimeout> | null>()\n\n\tconst isDeepArray = (x: Array<any>): x is (ActionType[] | None)[] => x.filter(isNotNone)[0] instanceof Array\n\n\tconst actionList: ActionType[] = isDeepArray(actions)\n\t\t? actions.filter(isNotNone).reduce((list: ActionType[], actions: ActionType[], index) => {\n\t\t\t\tif (index === 0) return [...actions]\n\t\t\t\treturn [...list, { divider: true }, ...actions.filter(isNotNone)]\n\t\t  }, [])\n\t\t: actions.filter(isNotNone)\n\n\tconst prevOpen = useRef(false)\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('block text-left w-full', className)}\n\t\t\tonMouseOver={() => {\n\t\t\t\tif (hoverable) {\n\t\t\t\t\tsetHover(true)\n\t\t\t\t\tif (hoverTimer) {\n\t\t\t\t\t\tclearTimeout(hoverTimer)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonMouseOut={() => {\n\t\t\t\tif (hoverable) {\n\t\t\t\t\tsetHoverTimer(\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetHover(false)\n\t\t\t\t\t\t}, 100)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t<Menu>\n\t\t\t\t{({ open }) => {\n\t\t\t\t\t/// I dunno man, triggering a window resize event fixes this usePopper hook, which I think is jank af\n\t\t\t\t\tif (open !== prevOpen.current) {\n\t\t\t\t\t\tprevOpen.current = open\n\t\t\t\t\t\tif (open) {\n\t\t\t\t\t\t\twindow.dispatchEvent(new Event('resize'))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className={clsx(intent && ButtonIntents[intent].span, ButtonRoundness[rounded])}>\n\t\t\t\t\t\t\t\t<Menu.Button\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\tintent && ButtonIntents[intent].button,\n\t\t\t\t\t\t\t\t\t\tsize && ButtonSizes[size],\n\t\t\t\t\t\t\t\t\t\tButtonRoundness[rounded]\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tref={reference}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t</Menu.Button>\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<div ref={tooltip} className=\"z-20 whitespace-nowrap\">\n\t\t\t\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t\t\t\t{(open || isHover) && !disabled && (\n\t\t\t\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\t\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\t\t\t\t\thidden: { scale: 0.95, opacity: 0 },\n\t\t\t\t\t\t\t\t\t\t\t\tvisible: { scale: 1, opacity: 1 },\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 0.3,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Menu.Items\n\t\t\t\t\t\t\t\t\t\t\t\tstatic\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"max-w-screen origin-top-right bg-white dark:bg-gray-900 rounded-md shadow-lg outline-none\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 rounded-md ring-1 ring-black ring-opacity-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{actionList.filter(isNotNone).map((action, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisLinkActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item key={i} disabled={action.disabled}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${action.to}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex items-center',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={action.state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treplace={action.replace}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isButtonActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!action.disabled && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('menu.item click')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (action.disableDismiss) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.onClick(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isSubmitActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!action.disabled && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item key={i} disabled={action.disabled}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isActionMenuActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactions={action.actions}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintent={action.intent || 'sub-menu'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toffset={action.offset || [-4, -1]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thoverable={action.hoverable}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item disabled={action.disabled}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex items-center',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ActionMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isCustomMenuActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmenu={action.menu}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth={action.maxWidth}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ onClick }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"block\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintent={action.intent || 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CustomMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isDividerActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"border-t border-gray-100 dark:border-gray-700 my-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Menu.Items>\n\t\t\t\t\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</AnimatePresence>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Menu>\n\t\t</div>\n\t)\n}\n\ninterface ActionInnerProps {\n\taction: ActionType\n}\n\nconst ActionInner: FC<ActionInnerProps> = ({ action }) => {\n\tif (!isNotNone(action)) return null\n\n\tlet side = action.iconSide || 'left'\n\n\treturn (\n\t\t<div className=\"flex items-center justify-between\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t{side === 'left' && action.icon ? (\n\t\t\t\t\t<span className={clsx(action.title ? '-ml-1 mr-3 opacity-75' : '-ml-1 -mr-1')}>{action.icon}</span>\n\t\t\t\t) : null}\n\t\t\t\t{action.title}\n\t\t\t</div>\n\t\t\t{side === 'right' && action.icon ? <span className=\"-mr-1 ml-2\">{action.icon}</span> : null}\n\t\t</div>\n\t)\n}\n\nexport default ActionMenu\n","import React, { Children, FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface InlineProps {\n\tspace?: SpaceType\n\tchildren: ReactNode\n\tclassName?: ClassValue\n}\n\ntype SpaceType = 0 | 1 | 2 | 3 | 4 | 6 | 8\n\nconst spaces = {\n\t0: {\n\t\twrapper: '',\n\t\titem: '',\n\t},\n\t1: {\n\t\twrapper: '-ml-1 -mt-1',\n\t\titem: 'pl-1 pt-1',\n\t},\n\t2: {\n\t\twrapper: '-ml-2 -mt-2',\n\t\titem: 'pl-2 pt-2',\n\t},\n\t3: {\n\t\twrapper: '-ml-3 -mt-3',\n\t\titem: 'pl-3 pt-3',\n\t},\n\t4: {\n\t\twrapper: '-ml-4 -mt-4',\n\t\titem: 'pl-4 pt-4',\n\t},\n\t6: {\n\t\twrapper: '-ml-6 -mt-6',\n\t\titem: 'pl-6 pt-6',\n\t},\n\t8: {\n\t\twrapper: '-ml-8 -mt-8',\n\t\titem: 'pl-8 pt-8',\n\t},\n}\n\nconst Inline: FC<InlineProps> = ({ space = 3, children, className }) => {\n\tconst items = Children.toArray(children)\n\n\treturn (\n\t\t<div className={clsx('flex flex-wrap', spaces[space || 0].wrapper, className)}>\n\t\t\t{items.map((item, i) => (\n\t\t\t\t<div key={i} className={clsx('flex items-center', spaces[space || 0].item)}>\n\t\t\t\t\t{item}\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t)\n}\n\nexport default Inline\n","import React, { FC } from 'react'\nimport { Link } from '@reach/router'\nimport {\n\tActionType,\n\tisActionMenuActionType,\n\tisButtonActionType,\n\tisSubmitActionType,\n\tisLinkActionType,\n\tisCustomMenuActionType,\n\tisNotNone,\n\tisRenderActionType,\n} from '@primer/types'\nimport ActionMenu from './ActionMenu'\nimport CustomMenu from './CustomMenu'\nimport Inline from './Inline'\nimport Button from './Button'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface ActionsProps {\n\tactions?: ActionType[] | ActionType\n\tclassName?: ClassValue\n}\n\nconst Actions: FC<ActionsProps> = ({ actions = [], className }) => {\n\tconst actionList = (actions instanceof Array ? actions : [actions]).filter(isNotNone)\n\n\treturn (\n\t\t<Inline className={clsx('inline-flex', className)}>\n\t\t\t{actionList.map((action, i) =>\n\t\t\t\tisLinkActionType(action) ? (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${action.to}`}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\tstate={action.state}\n\t\t\t\t\t\treplace={action.replace}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button intent={action.intent} size={action.size} rounded={action.rounded}>\n\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Link>\n\t\t\t\t) : isButtonActionType(action) ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tintent={action.intent}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\taction.onClick && action.onClick(e)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={action.disabled || action.isLoading || false}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\ttype={action.type}\n\t\t\t\t\t\tisLoading={action.isLoading}\n\t\t\t\t\t\tsize={action.size}\n\t\t\t\t\t\trounded={action.rounded}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t</Button>\n\t\t\t\t) : isSubmitActionType(action) ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tintent={action.intent}\n\t\t\t\t\t\tdisabled={action.disabled || action.isLoading || false}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\ttype={action.type}\n\t\t\t\t\t\tisLoading={action.isLoading}\n\t\t\t\t\t\tsize={action.size}\n\t\t\t\t\t\trounded={action.rounded}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t</Button>\n\t\t\t\t) : isActionMenuActionType(action) ? (\n\t\t\t\t\t<ActionMenu\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tactions={action.actions}\n\t\t\t\t\t\tintent={action.intent || 'secondary'}\n\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\toffset={action.offset}\n\t\t\t\t\t\thoverable={action.hoverable}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\tsize={action.size || 'md'}\n\t\t\t\t\t\trounded={action.rounded}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t</ActionMenu>\n\t\t\t\t) : isCustomMenuActionType(action) ? (\n\t\t\t\t\t<CustomMenu\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tmenu={action.menu}\n\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\tmaxWidth={action.maxWidth}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ onClick }) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tintent={action.intent}\n\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\tsize={action.size}\n\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</CustomMenu>\n\t\t\t\t) : isRenderActionType(action) ? (\n\t\t\t\t\t<div key={i}>{action.render}</div>\n\t\t\t\t) : null\n\t\t\t)}\n\t\t</Inline>\n\t)\n}\n\ninterface ActionInnerProps {\n\taction: ActionType\n}\n\nconst ActionInner: FC<ActionInnerProps> = ({ action }) => {\n\tif (!isNotNone(action)) return null\n\n\tif ((isButtonActionType(action) || isSubmitActionType(action)) && action.isLoading) return <>{action.title}</>\n\n\treturn (\n\t\t<>\n\t\t\t{(action.iconSide === 'left' || !action.iconSide) && action.icon ? (\n\t\t\t\t<span className={clsx(action.title ? '-ml-1 mr-2' : '')}>{action.icon}</span>\n\t\t\t) : null}\n\t\t\t{action.title}\n\t\t\t{action.iconSide === 'right' && action.icon ? <span className=\"-mr-1 ml-2\">{action.icon}</span> : null}\n\t\t</>\n\t)\n}\n\nexport default Actions\n","import React, { FC, useState, useRef, useCallback, useEffect, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface BasicTruncateProps {\n\ttitle: string\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nconst BasicTruncate: FC<BasicTruncateProps> = ({ title, className, children }) => {\n\tconst ref = useRef<HTMLSpanElement>(null)\n\tconst timer = useRef<NodeJS.Timeout | undefined>(undefined)\n\tconst [isOverflowing, setOverflowing] = useState(false)\n\n\tconst check = useCallback(() => {\n\t\tif (ref.current) {\n\t\t\tconst { clientWidth, clientHeight, scrollWidth, scrollHeight } = ref.current\n\t\t\tsetOverflowing(scrollHeight > clientHeight || scrollWidth > clientWidth)\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tconst handler = () => {\n\t\t\tif (timer.current) clearTimeout(timer.current)\n\t\t\ttimer.current = setTimeout(check, 500)\n\t\t}\n\t\twindow.addEventListener('resize', handler)\n\t\treturn () => window.removeEventListener('resize', handler)\n\t}, [check])\n\n\tuseEffect(check, [check])\n\n\treturn (\n\t\t<span\n\t\t\tref={ref}\n\t\t\tclassName={clsx('overflow-ellipsis overflow-hidden', className)}\n\t\t\ttitle={isOverflowing ? title : ''}\n\t\t>\n\t\t\t{children}\n\t\t</span>\n\t)\n}\n\nexport default BasicTruncate\n","import React, { useEffect, useState, useCallback, useMemo, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport Actions from '@primer/components/Actions'\nimport Truncate from '@primer/components/BasicTruncate'\nimport { ActionType, isNotNone, None } from '@primer/types'\nimport { onlyText } from 'react-children-utilities'\n\nconst colSpan: { [key: number]: string } = {\n\t1: 'col-span-1',\n\t2: 'col-span-2',\n\t3: 'col-span-3',\n\t4: 'col-span-4',\n\t5: 'col-span-5',\n\t6: 'col-span-6',\n\t7: 'col-span-7',\n\t8: 'col-span-8',\n\t9: 'col-span-9',\n\t10: 'col-span-10',\n\t11: 'col-span-11',\n\t12: 'col-span-12',\n}\n\nconst useMedia = (queries: string[]) => {\n\tconst mediaQueryLists = useMemo(() => queries.map((q) => window.matchMedia(q)), [queries])\n\n\tconst getValue = useCallback(() => {\n\t\tconst matches = mediaQueryLists.map((mql) => mql.matches)\n\t\treturn matches\n\t}, [mediaQueryLists])\n\n\tconst [value, setValue] = useState<boolean[]>(getValue)\n\n\tuseEffect(() => {\n\t\tconst handler = () => setValue(getValue)\n\t\tmediaQueryLists.forEach((mql) => mql.addListener(handler))\n\t\treturn () => mediaQueryLists.forEach((mql) => mql.removeListener(handler))\n\t}, [getValue, mediaQueryLists])\n\n\treturn value\n}\n\nconst breakpoints = {\n\tsm: '640px',\n\tmd: '768px',\n\tlg: '1024px',\n\txl: '1280px',\n\txxl: '1536px',\n}\n\ntype Breakpoint = 'sm' | 'md' | 'lg' | 'xl' | 'xxl'\n\ntype OnClickParams = { [x: string]: any }\n\nexport const isVisible =\n\t(visibilities: Array<Visibility | None>) =>\n\t<T,>(x: TableCol<T>) =>\n\t\tvisibilities.reduce<boolean>((pass, vis) => pass || x.visibility === vis, false)\n\ntype Visibility = 'copy-only' | 'screen-only' | 'all'\n\nexport interface TableCol<T> {\n\ttitle: ReactNode\n\tvalue: (x: T, i: number) => ReactNode\n\tcopyValue?: (x: T, i: number) => string\n\ttruncate?: boolean\n\twidth?: string\n\tclassName?: ClassValue\n\tresponsive?: Breakpoint\n\tonClick?: (x: string, y: OnClickParams) => void\n\tvisibility?: Visibility\n}\n\nexport interface TableSchema<T> {\n\tcols: (TableCol<T> | None)[]\n\tactions?: (x: T, i: number) => ActionType[] | None\n}\n\ninterface TableProps<T> {\n\tschema: TableSchema<T>\n\titems: T[]\n\tgetKey?: (x: T, i: number) => number | string\n\tisStriped?: boolean\n\tclassName?: ClassValue\n}\n\nconst Table = <T,>({ schema, items, getKey = (_, i) => i, isStriped = false, className }: TableProps<T>) => {\n\tconst [sm, md, lg, xl, xxl] = useMedia(Object.values(breakpoints).map((x) => `(min-width: ${x})`))\n\tconst mqs = { sm, md, lg, xl, xxl }\n\n\tconst cols = schema.cols\n\t\t.filter(isNotNone)\n\t\t.filter(isVisible([undefined, 'all', 'screen-only']))\n\t\t.filter((x) => {\n\t\t\tif (x.responsive) {\n\t\t\t\treturn mqs[x.responsive]\n\t\t\t}\n\n\t\t\treturn true\n\t\t})\n\n\tconst tmplCols = cols.map((x) => x.width || 'minmax(0, auto)').join(' ')\n\n\tconst actions = schema.actions\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div\n\t\t\t\tclassName=\"grid border-t border-gray-200 dark:border-gray-600\"\n\t\t\t\tstyle={{\n\t\t\t\t\tgridTemplateColumns: isNotNone(actions) ? tmplCols.concat(' minmax(auto, max-content)') : tmplCols,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{cols.map((col, i) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap dark:border-gray-600 dark:bg-gray-750 dark:text-gray-300',\n\t\t\t\t\t\t\tcol.className\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{col.title}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\n\t\t\t\t{isNotNone(actions) && (\n\t\t\t\t\t<div className=\"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap dark:border-gray-600 dark:bg-gray-750 dark:text-gray-300\"></div>\n\t\t\t\t)}\n\n\t\t\t\t{items.map((item, i) => (\n\t\t\t\t\t<div key={getKey(item, i)} className=\"contents group\">\n\t\t\t\t\t\t{cols.map((col, j) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={j}\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'min-h-11 whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 group-hover:text-gray-700 dark:group-hover:text-gray-100 flex items-center border-b border-gray-100 dark:border-gray-600 group-hover:bg-primary-50 dark:group-hover:bg-gray-600',\n\t\t\t\t\t\t\t\t\tj === 0 && 'font-medium',\n\t\t\t\t\t\t\t\t\t!col.truncate && 'px-5 py-4',\n\t\t\t\t\t\t\t\t\tisStriped && i % 2 && 'bg-gray-50 dark:bg-gray-750',\n\t\t\t\t\t\t\t\t\tcol.className\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{col.truncate ? (\n\t\t\t\t\t\t\t\t\t<Truncate title={onlyText(col.value(item, i))} className=\"px-6 py-4\">\n\t\t\t\t\t\t\t\t\t\t{col.value(item, i)}\n\t\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t\t) : col.value ? (\n\t\t\t\t\t\t\t\t\tcol.value(item, i)\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{actions?.length ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'px-5 whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 group-hover:text-gray-700 dark:group-hover:text-gray-100 flex items-center justify-center border-b border-gray-100 dark:border-gray-600 group-hover:bg-primary-50 dark:group-hover:bg-gray-600',\n\t\t\t\t\t\t\t\t\tisStriped && i % 2 && 'bg-gray-50 dark:bg-gray-750'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Actions actions={actions(item, i)} className=\"flex-nowrap\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\n\t\t\t\t{items.length === 0 && (\n\t\t\t\t\t<div className=\"contents group\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\tcolSpan[cols.length + (actions?.length ? 1 : 0)],\n\t\t\t\t\t\t\t\t'px-6 py-3',\n\t\t\t\t\t\t\t\t'whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 flex items-center justify-center border-b border-gray-100 dark:border-gray-600 select-none'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNo items\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Table\n","import React, { ReactNode } from 'react'\nimport { AxiosError } from 'axios'\nimport { warning } from '../alerts'\nimport { WindowLocation } from '@reach/router'\nimport { isNotNone, None } from '@primer/types'\nimport { differenceInDays, format, formatRelative, parseISO, isSameDay } from 'date-fns'\nimport { holidays } from './constants'\nimport { env } from 'config'\nimport * as Sentry from '@sentry/react'\nimport { utcToZonedTime, format as formatTZ } from 'date-fns-tz'\nimport { TableSchema, isVisible } from '@primer/components/Table'\nimport { onlyText } from 'react-children-utilities'\n\nexport const nzDate = (x: Date) => utcToZonedTime(x, 'Pacific/Auckland')\nexport const isNZ = () => formatTZ(new Date(), 'zzzz').indexOf('New Zealand') > -1\n\ninterface ClassFixType {\n\tpattern: RegExp\n\tdefaultValue: string\n}\n\nexport const smartReplaceClasses = (className: string, fixes: ClassFixType[]) => {\n\tlet names = className.split(' ')\n\n\tfor (let i = 0; i < fixes.length; i++) {\n\t\tlet fix = fixes[i]\n\t\tif (!names.find((x) => fix.pattern.test(x))) names.push(fix.defaultValue)\n\t}\n\n\treturn names.join(' ')\n}\n\nexport const handleError = (error: AxiosError) => {\n\tlet message: ReactNode = null\n\n\tif (error?.response?.data.title) {\n\t\tmessage = <p>{error.response.data.title}</p>\n\t}\n\n\tif (error?.response?.data.errors) {\n\t\t// @ts-ignore\n\t\tmessage = Object.values(error.response.data.errors).map((x: string, i: number) => <p key={i}>{x}</p>)\n\t}\n\n\twarning({ title: 'An error occurred', message })\n}\n\nexport const enumToOption = (item: any) => {\n\treturn Object.keys(item)\n\t\t.filter((x) => isNaN(+x))\n\t\t.map((label) => ({ label, value: item[label] }))\n}\n\n// https://stackoverflow.com/questions/10420352/converting-file-size-in-bytes-to-human-readable-string\nexport const humanFileSize = (bytes: number, si = true) => {\n\tvar thresh = si ? 1000 : 1024\n\tif (Math.abs(bytes) < thresh) {\n\t\treturn bytes + ' B'\n\t}\n\tvar units = si\n\t\t? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\t\t: ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\n\tvar u = -1\n\tdo {\n\t\tbytes /= thresh\n\t\t++u\n\t} while (Math.abs(bytes) >= thresh && u < units.length - 1)\n\treturn bytes.toFixed(1) + ' ' + units[u]\n}\n\nexport const getState = <T,>(location?: WindowLocation) => location?.state as T | null\n\nexport const queryString = (obj: Object) => {\n\treturn Object.entries(obj)\n\t\t.filter(([_, val]) => !!val)\n\t\t.map(([key, val]) => [key, encodeURIComponent(val)].join('='))\n\t\t.join('&')\n}\n\nexport const getDateFromTime = (time: string, rootDate?: Date) =>\n\tnew Date(`${rootDate ? format(rootDate, 'yyyy-MM-dd') : '1970-01-01'} ` + time)\n\nexport const blobUrl = (blob: Blob) => {\n\treturn window.URL.createObjectURL(blob)\n}\n\nexport const series = async <T,>(items: T[], fn: (x: T) => Promise<any>) => {\n\tlet output = []\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\toutput.push(await fn(items[i]))\n\t}\n\n\treturn output\n}\n\nexport function isValidDate(d: Date) {\n\treturn !isNaN(d.valueOf())\n}\n\nexport const last = <T,>(arr: T[]): T => arr[arr.length - 1]\n\nexport const detectIE = () => {\n\tvar ua = window.navigator.userAgent\n\n\tvar msie = ua.indexOf('MSIE ')\n\tif (msie > 0) {\n\t\t// IE 10 or older => return version number\n\t\treturn parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10)\n\t}\n\n\tvar trident = ua.indexOf('Trident/')\n\tif (trident > 0) {\n\t\t// IE 11 => return version number\n\t\tvar rv = ua.indexOf('rv:')\n\t\treturn parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10)\n\t}\n\n\t// other browser\n\treturn false\n}\n\nconst errorIsStatus = (error: AxiosError, status: number) => {\n\treturn error.response && error.response.status === status\n}\n\nexport const getErrorMessage = (error: AxiosError) => {\n\tlet data = error ? (error.response ? error.response.data : null) : null\n\tlet message = []\n\n\tif (errorIsStatus(error, 404)) {\n\t\tmessage.push('Not found')\n\t}\n\n\tif (data) {\n\t\tif (data.title) {\n\t\t\tmessage.push(data.title)\n\t\t}\n\n\t\tif (data.errors instanceof Array) {\n\t\t\tmessage.push(data.errors[0].message.split(', ')[0])\n\t\t} else if (data.errors && typeof data.errors === 'object') {\n\t\t\tObject.values(data.errors).forEach((msg) => {\n\t\t\t\tmessage.push(msg)\n\t\t\t})\n\t\t}\n\t}\n\n\treturn message.join('\\n')\n}\n\nexport const reportError = (request: any, error: AxiosError) => {\n\tSentry.withScope((scope) => {\n\t\tscope.setExtra('request', request)\n\t\tif (error && error.response) {\n\t\t\tscope.setExtra('response', {\n\t\t\t\tdata: error.response.data,\n\t\t\t\tstatus: error.response.status,\n\t\t\t\tstatusText: error.response.statusText,\n\t\t\t\theaders: error.response.headers,\n\t\t\t})\n\t\t} else {\n\t\t\tscope.setExtra('error', error)\n\t\t}\n\n\t\tSentry.captureException(new Error('Request Failure'))\n\t})\n\n\tif (env === 'dev') {\n\t\tconsole.group('Captured Error')\n\t\tconsole.log('request', request)\n\t\tif (error && error.response) {\n\t\t\tconsole.log(\n\t\t\t\t'response',\n\t\t\t\tJSON.stringify(\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: error.response.data,\n\t\t\t\t\t\tstatus: error.response.status,\n\t\t\t\t\t\tstatusText: error.response.statusText,\n\t\t\t\t\t\theaders: error.response.headers,\n\t\t\t\t\t},\n\t\t\t\t\tnull,\n\t\t\t\t\t4\n\t\t\t\t)\n\t\t\t)\n\t\t} else {\n\t\t\tconsole.log('error', error)\n\t\t}\n\t\tconsole.groupEnd()\n\t}\n}\n\n// this thing is insane, type it later\nexport const includer = (data: any, map: any): any => {\n\tif (map instanceof Array) {\n\t\treturn data.reduce((res: any, val: any, i: any) => {\n\t\t\treturn map[i] ? [...res, includer(val, map[i])] : res\n\t\t}, [])\n\t} else if (typeof map === 'object') {\n\t\treturn Object.keys(map).reduce((res, key) => {\n\t\t\treturn map[key] ? { ...res, [key]: includer(data[key], map[key]) } : res\n\t\t}, {})\n\t} else if (typeof map === 'boolean') {\n\t\tif (map) return data\n\t}\n}\n\nexport const parseQueryCode = (str: string): { [x: string]: string } => {\n\treturn str\n\t\t.replace('?', '')\n\t\t.split('&')\n\t\t.reduce((a, x) => {\n\t\t\tlet [key, val] = x.split('=')\n\t\t\treturn { ...a, [key]: val }\n\t\t}, {})\n}\n\nexport const ensureDate = (val: string | Date | None): Date => (val instanceof Date ? val : new Date(val || ''))\n\nexport const split = (str: string) => {\n\treturn str.replace(/\\[/g, '.').replace(/\\]/g, '').split('.')\n}\n\nexport const getGSTfromIncl = (x: number) => (x * 3) / 23\n\nexport const createNumberedFileName = (filename: string) => {\n\tconst reg = /\\(([\\d]+)\\)$/\n\tconst match = filename.match(reg)\n\tif (!match) return `${filename} (2)`\n\treturn filename.replace(reg, `(${+match[1] + 1})`)\n}\n\nexport const fixedFormatRelative = (x: string) => {\n\tlet target = parseISO(x)\n\n\tlet diff = differenceInDays(new Date(), target)\n\n\tif (diff >= 6) {\n\t\treturn format(target, 'dd/MM/yyyy')\n\t} else {\n\t\treturn formatRelative(target, new Date())\n\t}\n}\n\nexport const getReservedDate = (d: Date) => {\n\treturn holidays.find((x) => isSameDay(x.date, d))?.name\n}\n\nexport const copyTabularData = async <T,>(schema: TableSchema<T>, items: T[]) => {\n\tconst rows: string[] = []\n\n\tconst cols = schema.cols.filter(isNotNone).filter(isVisible([undefined, 'all', 'copy-only']))\n\n\trows.push(cols.map((x) => onlyText(x.title)).join('\\t'))\n\n\titems.forEach((item) => {\n\t\trows.push(cols.map((x, i) => onlyText(!!x.copyValue ? x.copyValue(item, i) : x.value(item, i))).join('\\t'))\n\t})\n\n\t// it doesn't like clipboard-write as an option\n\t// @ts-ignore\n\tawait navigator.permissions.query({ name: 'clipboard-write' })\n\n\tnavigator.clipboard.writeText(rows.join('\\n'))\n}\n\nexport const ordinal = (i: number) => {\n\tvar j = i % 10,\n\t\tk = i % 100\n\tif (j === 1 && k !== 11) {\n\t\treturn i + 'st'\n\t}\n\tif (j === 2 && k !== 12) {\n\t\treturn i + 'nd'\n\t}\n\tif (j === 3 && k !== 13) {\n\t\treturn i + 'rd'\n\t}\n\treturn i + 'th'\n}\n\nexport const slugify = (name: string) => name.trim().replace(/\\s/g, '-').toLowerCase()\n","import React, { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { smartReplaceClasses } from '@primer/utils/funcs'\n\ninterface IconProps {\n\tclassName?: ClassValue\n}\n\nconst fixClasses = (className = '') =>\n\tsmartReplaceClasses(className, [\n\t\t{ pattern: /^w-\\d+$/, defaultValue: 'w-5' },\n\t\t{ pattern: /^h-\\d+$/, defaultValue: 'h-5' },\n\t])\n\nexport const Spinner: FC<IconProps> = ({ className }) => (\n\t<svg className={fixClasses(clsx(className))} xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t<circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n\t\t<path\n\t\t\tclassName=\"opacity-75\"\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FilePlus: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\tclassName={fixClasses(clsx(className))}\n\t\tfill=\"none\"\n\t\tstrokeLinecap=\"round\"\n\t\tstrokeLinejoin=\"round\"\n\t\tstrokeWidth=\"1\"\n\t\tstroke=\"currentColor\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<path d=\"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n\t</svg>\n)\n\nexport const History: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\tclassName={fixClasses(clsx(className))}\n\t\tfill=\"currentColor\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 512 512\"\n\t>\n\t\t<g transform=\"scale(0.8)\" style={{ transformOrigin: 'center' }}>\n\t\t\t<path d=\"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z\" />\n\t\t</g>\n\t</svg>\n)\n\nexport const Undo: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 512 512\"\n\t>\n\t\t<g transform=\"scale(0.8)\" style={{ transformOrigin: 'center' }}>\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z\"\n\t\t\t/>\n\t\t</g>\n\t</svg>\n)\n\nexport const FilePdf: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileImage: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M384 121.941V128H256V0h6.059a24 24 0 0 1 16.97 7.029l97.941 97.941a24.002 24.002 0 0 1 7.03 16.971zM248 160c-13.2 0-24-10.8-24-24V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248zm-135.455 16c26.51 0 48 21.49 48 48s-21.49 48-48 48-48-21.49-48-48 21.491-48 48-48zm208 240h-256l.485-48.485L104.545 328c4.686-4.686 11.799-4.201 16.485.485L160.545 368 264.06 264.485c4.686-4.686 12.284-4.686 16.971 0L320.545 304v112z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileWord: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileText: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileArchive: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zM128.4 336c-17.9 0-32.4 12.1-32.4 27 0 15 14.6 27 32.5 27s32.4-12.1 32.4-27-14.6-27-32.5-27zM224 136V0h-63.6v32h-32V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM95.9 32h32v32h-32zm32.3 384c-33.2 0-58-30.4-51.4-62.9L96.4 256v-32h32v-32h-32v-32h32v-32h-32V96h32V64h32v32h-32v32h32v32h-32v32h32v32h-32v32h22.1c5.7 0 10.7 4.1 11.8 9.7l17.3 87.7c6.4 32.4-18.4 62.6-51.4 62.6z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileExcel: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const File: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileIcon: FC<IconProps & { type: string }> = ({ type, className }) =>\n\ttype === '.pdf' ? (\n\t\t<FilePdf className={className} />\n\t) : type === '.xlsx' ? (\n\t\t<FileExcel className={className} />\n\t) : type === '.docx' ? (\n\t\t<FileWord className={className} />\n\t) : type === '.jpg' || type === '.png' || type === '.gif' ? (\n\t\t<FileImage className={className} />\n\t) : type === '.zip' || type === '.7z' || type === '.rar' ? (\n\t\t<FileArchive className={className} />\n\t) : (\n\t\t<File className={className} />\n\t)\n","import React from 'react'\nimport { Spinner } from '@primer/components/Icon'\n\nconst Loader = ({ size = '3x', spin = true, className = '', ...props }) => {\n\treturn (\n\t\t<div className={`flex flex-col justify-center items-center p-2 ${className}`} {...props}>\n\t\t\t<Spinner className=\"w-10 h-10 animate-spin\" />\n\t\t</div>\n\t)\n}\nexport default Loader\n","import { useState } from 'react'\n\n// https://usehooks.com/useLocalStorage\n\nfunction useLocalStorage<T = any>(key: string, initialValue: T) {\n\tconst [storedValue, setStoredValue] = useState(() => {\n\t\ttry {\n\t\t\tconst item = window.localStorage.getItem(key)\n\t\t\treturn item ? JSON.parse(item) : initialValue\n\t\t} catch (error) {\n\t\t\treturn initialValue\n\t\t}\n\t})\n\n\tconst setValue = (value: T) => {\n\t\tconst valueToStore = value instanceof Function ? value(storedValue) : value\n\t\tsetStoredValue(valueToStore)\n\t\twindow.localStorage.setItem(key, JSON.stringify(valueToStore))\n\t}\n\n\treturn [storedValue, setValue]\n}\n\nexport default useLocalStorage\n","import React, { FC, ReactNode, useRef, useState } from 'react'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\nimport clsx from 'clsx'\n\ninterface TooltipProps {\n\tmessage: ReactNode\n\tenabled?: boolean\n\tintent?: 'light' | 'dark'\n\tchildren: ReactNode\n}\n\nconst Tooltip: FC<TooltipProps> = ({ message, enabled = true, intent = 'light', children }) => {\n\tlet ref = useRef<HTMLDivElement>(null)\n\tconst [hover, setHover] = useState(false)\n\tconst [X, setX] = useState(0)\n\tconst [Y, setY] = useState(0)\n\n\tconst show = () => {\n\t\tif (!ref.current) return null\n\t\tif (!enabled) return null\n\n\t\tsetX(ref.current.offsetLeft + ref.current.offsetWidth)\n\t\tsetY(ref.current.offsetTop)\n\t\tsetHover(true)\n\t}\n\n\tconst hide = () => {\n\t\tsetHover(false)\n\t}\n\n\treturn (\n\t\t<div ref={ref} onMouseOver={show} onMouseOut={hide}>\n\t\t\t<div>{children}</div>\n\n\t\t\t<div\n\t\t\t\tclassName=\"flex items-center absolute z-10 ml-6 w-80 pointer-events-none\"\n\t\t\t\tstyle={{\n\t\t\t\t\tleft: `${X}px`,\n\t\t\t\t\ttop: `${Y}px`,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<AnimatePresence>\n\t\t\t\t\t{hover && (\n\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\tstyle={{ originX: 0 } as MotionStyle}\n\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\thidden: { opacity: 0, x: -30 },\n\t\t\t\t\t\t\t\tvisible: { opacity: 1, x: 0 },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\tduration: 0.1,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx('rounded px-3 py-2 text-sm font-medium shadow-lg', {\n\t\t\t\t\t\t\t\t\t'bg-white text-gray-900 dark:bg-primary-900 dark:text-white': intent === 'light',\n\t\t\t\t\t\t\t\t\t'bg-primary-900 text-white dark:bg-primary-200 dark:text-primary-900 antialiased':\n\t\t\t\t\t\t\t\t\t\tintent === 'dark',\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t)}\n\t\t\t\t</AnimatePresence>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Tooltip\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { Link, LinkGetProps, useLocation } from '@reach/router'\nimport useLocalStorage from '@primer/hooks/useLocalStorage'\nimport { RouteConfig, isLinkRouteConfig, isAnchorRouteConfig, isNotNone } from '@primer/types'\nimport { ExternalLinkIcon } from '@heroicons/react/outline'\nimport Tooltip from '@primer/components/Tooltip'\n\ntype IntentValue = 'primary' | 'secondary' | 'white'\n\nconst intents = {\n\tprimary: {\n\t\twrapper: 'bg-gray-800 dark:bg-gray-900 antialiased',\n\t\tlink: {\n\t\t\tactive: 'text-white bg-gradient-to-r from-primary-600 to-primary-500 text-white dark:bg-gray-700 focus:bg-gray-900 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-200 hover:text-white hover:bg-gray-700 focus:text-white focus:bg-gray-700 dark:hover:bg-gray-800',\n\t\t},\n\t},\n\tsecondary: {\n\t\twrapper: 'bg-white dark:bg-gray-700 antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 focus:bg-gray-200 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-600 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-200 dark:hover:bg-gray-900 hover:bg-gray-100 focus:text-gray-900 focus:bg-gray-100',\n\t\t},\n\t},\n\twhite: {\n\t\twrapper: 'bg-white antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-gray-900 bg-gray-50 focus:bg-gray-200',\n\t\t\tinactive: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:text-gray-900 focus:bg-gray-100',\n\t\t},\n\t},\n}\n\nconst getProps =\n\t(route: RouteConfig, min: boolean, intent: IntentValue) =>\n\t({ isCurrent, isPartiallyCurrent }: LinkGetProps) => {\n\t\treturn (route.exact ? isCurrent : isPartiallyCurrent)\n\t\t\t? {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center py-2 px-2.5 text-sm font-medium leading-5 rounded focus:outline-none transition ease-in-out duration-150',\n\t\t\t\t\t\tmin && 'justify-center',\n\t\t\t\t\t\tintents[intent].link.active\n\t\t\t\t\t),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center py-2 px-2.5 text-sm font-medium leading-5 rounded focus:outline-none transition ease-in-out duration-150',\n\t\t\t\t\t\tmin && 'justify-center',\n\t\t\t\t\t\tintents[intent].link.inactive\n\t\t\t\t\t),\n\t\t\t  }\n\t}\n\nconst MenuLink = ({\n\troute,\n\tmin,\n\tintent,\n\tchildren,\n}: {\n\troute: RouteConfig\n\tmin: boolean\n\tintent: IntentValue\n\tchildren: ReactNode\n}) => {\n\treturn isAnchorRouteConfig(route) ? (\n\t\t<a\n\t\t\thref={route.url}\n\t\t\tclassName={clsx(\n\t\t\t\t'group flex items-center justify-center py-2 px-2.5 text-sm leading-5 rounded focus:outline-none transition ease-in-out duration-150',\n\t\t\t\tintents[intent].link.inactive,\n\t\t\t\tmin && 'justify-center'\n\t\t\t)}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noopener noreferrer\"\n\t\t>\n\t\t\t<div className=\"flex items-center justify-center\">{children}</div>\n\t\t\t{!min && (\n\t\t\t\t<div className=\"flex-1 flex justify-end\">\n\t\t\t\t\t<ExternalLinkIcon className=\"opacity-25 w-4 h-4\" />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</a>\n\t) : isLinkRouteConfig(route) ? (\n\t\t<Link to={`${process.env.PUBLIC_URL}${route.to}`} getProps={getProps(route, min, intent)}>\n\t\t\t{children}\n\t\t</Link>\n\t) : null\n}\n\ninterface SidebarProps {\n\theader?: (min: boolean) => ReactNode\n\tfooter?: (min: boolean) => ReactNode\n\tlinks: RouteConfig[]\n\tintent: IntentValue\n\tname: string\n\tclassName?: ClassValue\n}\n\nconst Sidebar: FC<SidebarProps> = ({ header, footer, links, intent, name, className }) => {\n\tconst [min, setMin] = useLocalStorage(`sidebar-${name}-min`, false)\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'flex flex-col h-screen relative',\n\t\t\t\tmin ? 'w-16' : 'w-64',\n\t\t\t\tintents[intent].wrapper,\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx('absolute right-0 top-0 h-full -mr-2 w-4 z-40 group', {\n\t\t\t\t\t'cursor-right': min,\n\t\t\t\t\t'cursor-left': !min,\n\t\t\t\t})}\n\t\t\t\tonClick={() => setMin((x: boolean) => !x)}\n\t\t\t>\n\t\t\t\t<div className=\"group-hover:opacity-100 opacity-0 transition-opacity ease-in-out duration-200 w-1 h-full ml-1.5 bg-primary-600\" />\n\t\t\t</div>\n\n\t\t\t<div className=\"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto overflow-x-visible\">\n\t\t\t\t{header && header(min)}\n\n\t\t\t\t<nav className=\"mt-5 flex-1 px-3 space-y-1\">\n\t\t\t\t\t{links.filter(isNotNone).map((link, i) => (\n\t\t\t\t\t\t<NavLink key={i} link={link} intent={intent} min={min} />\n\t\t\t\t\t))}\n\t\t\t\t</nav>\n\t\t\t</div>\n\n\t\t\t{footer && footer(min)}\n\t\t</div>\n\t)\n}\n\ninterface NavLinkProps {\n\tlink: RouteConfig\n\tmin: boolean\n\tintent: IntentValue\n}\n\nconst NavLink: FC<NavLinkProps> = ({ link, min, intent }) => {\n\tconst loc = useLocation()\n\n\tconst matches = isLinkRouteConfig(link) ? loc.pathname.indexOf(link.to) === 0 : false\n\n\treturn (\n\t\t<div>\n\t\t\t{link && (\n\t\t\t\t<Tooltip message={link.tooltip || link.title} enabled={min}>\n\t\t\t\t\t<MenuLink route={link} min={min} intent={intent}>\n\t\t\t\t\t\t<div className={clsx('opacity-75 pointer-events-none', min ? 'mr-0' : 'mr-3')}>{link.icon}</div>\n\t\t\t\t\t\t{!min && link.title}\n\t\t\t\t\t</MenuLink>\n\t\t\t\t</Tooltip>\n\t\t\t)}\n\t\t\t{matches && link.children && link.children.length > 0 && (\n\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t<div className=\"p-1 rounded-md space-y-1 border-2 border-gray-700\">\n\t\t\t\t\t\t{link.children\n\t\t\t\t\t\t\t.filter((x) => x)\n\t\t\t\t\t\t\t.map((link, i) => (\n\t\t\t\t\t\t\t\t<NavLink key={i} link={link} intent={intent} min={min} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default Sidebar\n","import { useEffect, useState } from 'react'\n\ntype MediaChange = (this: MediaQueryList, ev: MediaQueryListEvent) => any\n\nconst changeDarkMode = (x: boolean) => document.querySelector('html')?.classList[x ? 'add' : 'remove']('dark')\n\nconst useDarkMode = (): [boolean | null, (x: boolean | null) => void] => {\n\t// const [value, setDarkMode] = useStore((store) => [store.darkMode, store.setDarkMode])\n\tconst [value, setDarkMode] = useState<boolean | null>(false)\n\tconst matchesMedia = window.matchMedia('(prefers-color-scheme: dark)')\n\n\tuseEffect(() => {\n\t\tif (value !== null) {\n\t\t\tchangeDarkMode(value)\n\t\t} else {\n\t\t\tconst func: MediaChange = (e) => changeDarkMode(e.matches)\n\t\t\tchangeDarkMode(matchesMedia.matches)\n\n\t\t\tif (matchesMedia.hasOwnProperty('addEventListener')) {\n\t\t\t\tmatchesMedia.addEventListener('change', func)\n\t\t\t\treturn () => matchesMedia.removeEventListener('change', func)\n\t\t\t}\n\t\t}\n\t}, [value, matchesMedia])\n\n\treturn [value, setDarkMode]\n}\n\nexport default useDarkMode\n","import React, { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { ChevronDownIcon, CheckIcon, ChevronLeftIcon, LogoutIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport useDarkMode from '@primer/hooks/useDarkMode'\n// import { useLocation } from '@reach/router'\n\ninterface TopbarProps {\n\tintent?: 'light' | 'dark'\n\tclassName?: ClassValue\n}\n\nconst Topbar: FC<TopbarProps> = ({ intent = 'light', className }) => {\n\tconst profile = {}\n\n\tconst logout = async () => {\n\t\t// store.getState().logout()\n\t}\n\n\tconst [darkMode, setDarkMode] = useDarkMode()\n\n\t// const location = useLocation()\n\t// const state = location?.state as { term?: string } | null\n\t// const [search, setSearch] = useState(state?.term || '')\n\t// const timer = useRef<NodeJS.Timeout | undefined>()\n\n\t// useEffect(() => {\n\t// \tsetSearch(state?.term || '')\n\t// }, [state?.term])\n\n\treturn (\n\t\t<div className={clsx('max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex items-center justify-end', className)}>\n\t\t\t{profile && (\n\t\t\t\t<div className=\"flex items-center space-x-2\">\n\t\t\t\t\t<Actions\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: (\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-4\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'text-sm font-medium',\n\t\t\t\t\t\t\t\t\t\t\t\tintent === 'dark' && 'text-gray-200 antialiased'\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tYour Name\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t<ChevronDownIcon\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('w-5 h-5 opacity-75', intent === 'dark' && 'text-white')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\tplacement: 'bottom-end',\n\t\t\t\t\t\t\t\tsize: 'xs',\n\t\t\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Colour Scheme',\n\t\t\t\t\t\t\t\t\t\t\ticon: <ChevronLeftIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\tplacement: 'left-start',\n\t\t\t\t\t\t\t\t\t\t\thoverable: true,\n\t\t\t\t\t\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Dark Mode',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'w-4 h-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarkMode === true ? 'opacity-100' : 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => setDarkMode(true),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Light Mode',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'w-4 h-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarkMode === false ? 'opacity-100' : 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => setDarkMode(false),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'System Preference',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'w-4 h-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarkMode === null ? 'opacity-100' : 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => setDarkMode(null),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\t\t\t\t// \ttitle: 'Manage Devices',\n\t\t\t\t\t\t\t\t\t\t// \ticon: <DeviceMobileIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t// \ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t// \tto: '/devices',\n\t\t\t\t\t\t\t\t\t\t// },\n\t\t\t\t\t\t\t\t\t],\n\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Logout',\n\t\t\t\t\t\t\t\t\t\t\ticon: <LogoutIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\tonClick: logout,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default Topbar\n","import React, { FC, useState } from 'react'\nimport clsx from 'clsx'\nimport { Link } from '@reach/router'\nimport logo from 'assets/img/ICRA_WhiteRev.png'\nimport { RouteConfig, isLinkRouteConfig, isAnchorRouteConfig, isNotNone } from '@primer/types'\nimport AutoHeight from '@primer/components/AutoHeight'\nimport Topbar from '@primer/components/Topbar'\n\ninterface MobileMenuProps {\n\tlinks: RouteConfig[]\n\twithTopbar?: boolean\n}\n\nconst MobileMenu: FC<MobileMenuProps> = ({ links, withTopbar = false }) => {\n\tconst [open, setOpen] = useState(false)\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"md:hidden bg-gray-800 dark:bg-gray-900 flex justify-between p-4\">\n\t\t\t\t<Link to=\"/dashboard\">\n\t\t\t\t\t<img src={logo} alt=\"ICRA\" className=\"h-10\" />\n\t\t\t\t</Link>\n\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:bg-gray-700 focus:text-white\"\n\t\t\t\t\tonClick={() => setOpen((x) => !x)}\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tclassName={clsx('h-6 w-6', { block: !open, hidden: open })}\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\td=\"M4 6h16M4 12h16M4 18h16\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\n\t\t\t\t\t<svg\n\t\t\t\t\t\tclassName={clsx('h-6 w-6', { block: open, hidden: !open })}\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div className={clsx('md:hidden bg-gray-800 dark:bg-gray-900 antialiased')}>\n\t\t\t\t<AutoHeight show={open}>\n\t\t\t\t\t<div className=\"px-2 pt-2 pb-3 sm:px-3\">\n\t\t\t\t\t\t{links.filter(isNotNone).map((link, i) =>\n\t\t\t\t\t\t\tisLinkRouteConfig(link) ? (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tto={link.to}\n\t\t\t\t\t\t\t\t\tgetProps={({ isCurrent }) => ({\n\t\t\t\t\t\t\t\t\t\tclassName: clsx({\n\t\t\t\t\t\t\t\t\t\t\t'flex items-center px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700':\n\t\t\t\t\t\t\t\t\t\t\t\t!isCurrent,\n\t\t\t\t\t\t\t\t\t\t\t'flex items-center px-3 py-2 rounded-md text-base font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700':\n\t\t\t\t\t\t\t\t\t\t\t\tisCurrent,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={() => setOpen(false)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"mr-3\">{link.icon}</div>\n\t\t\t\t\t\t\t\t\t{link.title}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : isAnchorRouteConfig(link) ? (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\thref={link.url}\n\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"mr-3\">{link.icon}</div>\n\t\t\t\t\t\t\t\t\t{link.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{withTopbar && <Topbar intent=\"dark\" />}\n\t\t\t\t\t</div>\n\t\t\t\t</AutoHeight>\n\t\t\t</div>\n\t\t</>\n\t)\n}\n\nexport default MobileMenu\n","export default \"data:image/png;base64,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\"","import React, { FC, Component } from 'react'\nimport { Location, WindowLocation } from '@reach/router'\n\ninterface OnRouteChangeProps {\n\taction: () => void\n}\n\nconst OnRouteChange: FC<OnRouteChangeProps> = ({ action }) => (\n\t<Location>\n\t\t{({ location }: { location: WindowLocation }) => <OnRouteChangeWorker location={location} action={action} />}\n\t</Location>\n)\n\ninterface OnRouteChangeWorkerProps {\n\tlocation: WindowLocation\n\taction: () => void\n}\n\nclass OnRouteChangeWorker extends Component<OnRouteChangeWorkerProps, {}> {\n\tcomponentDidUpdate(prevProps: OnRouteChangeWorkerProps) {\n\t\tif (this.props.location.pathname !== prevProps.location.pathname) {\n\t\t\tthis.props.action()\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null\n\t}\n}\n\nexport default OnRouteChange\n","interface Version {\n\tnumber: string\n\tdate: string\n\tnew: string[]\n\tchange: string[]\n\tbug: string[]\n}\n\nconst versions: Version[] = [\n\t{\n\t\tnumber: '0.0.0',\n\t\tdate: '2021-07-29',\n\t\tnew: ['Everything is new'],\n\t\tchange: [],\n\t\tbug: []\n\t},\n\t\n]\n\nexport default versions\n","import React, { FC, Suspense, useMemo, useRef } from 'react'\nimport clsx from 'clsx'\nimport { RouteComponentProps, Link } from '@reach/router'\nimport logo from 'assets/img/workflow-logo-white-text.svg'\nimport smallLogo from 'assets/img/workflow-logo.svg'\nimport Loader from '@primer/components/Loader'\nimport Sidebar from '@primer/components/Sidebar'\nimport MobileMenu from '@primer/components/MobileMenu'\nimport { CogIcon, QuestionMarkCircleIcon, ViewGridIcon } from '@heroicons/react/outline'\nimport Topbar from '@primer/components/Topbar'\nimport OnRouteChange from '@primer/components/OnRouteChange'\nimport versions from '@primer/utils/versions'\nimport semver from 'semver'\nimport { site } from 'config'\nimport db from 'db'\n\nconst PageSidebar: FC<RouteComponentProps> = ({ children }) => {\n\tconst releases = versions.sort((a, b) => (semver.gt(a.number, b.number) ? -1 : 1))\n\n\tconst ref = useRef<HTMLDivElement>(null)\n\n\tconst entityTypes = db.entityTypes.all()\n\n\tconst links = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\ttitle: 'Home',\n\t\t\t\tto: '/home',\n\t\t\t\ticon: <ViewGridIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: true,\n\t\t\t},\n\t\t\t...entityTypes\n\t\t\t\t.filter((x) => x.mainNav)\n\t\t\t\t.map((entityType) => ({\n\t\t\t\t\ttitle: entityType.plural || entityType.name,\n\t\t\t\t\tto: `/${entityType.key}`,\n\t\t\t\t\ticon: <QuestionMarkCircleIcon className=\"w-5 h-5\" />,\n\t\t\t\t\texact: true,\n\t\t\t\t})),\n\t\t\t{\n\t\t\t\ttitle: 'Settings',\n\t\t\t\tto: '/settings',\n\t\t\t\ticon: <CogIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: false,\n\t\t\t},\n\t\t],\n\t\t[entityTypes]\n\t)\n\n\treturn (\n\t\t<div className=\"h-screen flex flex-col md:flex-row md:overflow-hidden bg-gray-200 dark:bg-gray-800\">\n\t\t\t<MobileMenu links={links} />\n\t\t\t<Sidebar\n\t\t\t\tname=\"main\"\n\t\t\t\tintent=\"primary\"\n\t\t\t\tlinks={links}\n\t\t\t\tclassName=\"hidden md:flex\"\n\t\t\t\theader={(min) => (\n\t\t\t\t\t<div className={clsx('flex items-center', min ? 'justify-center' : 'pl-5')}>\n\t\t\t\t\t\t<Link to={`${process.env.PUBLIC_URL}/dashboard`}>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={min ? smallLogo : logo}\n\t\t\t\t\t\t\t\talt=\"ICRA\"\n\t\t\t\t\t\t\t\tclassName={clsx('my-5 h-12', min ? 'ml-2' : '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooter={(min) => (\n\t\t\t\t\t<div className={clsx('flex justify-between items-center', min ? 'flex-col space-y-2' : 'p-4')}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'text-gray-400 text-sm font-medium cursor-default',\n\t\t\t\t\t\t\t\tmin ? 'text-center' : ''\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!min ? `Version: ${releases[0].number}` : `v${releases[0].number}`}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{site === 'livetest' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-red-300 bg-red-400 dark:bg-red-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tLiveTest\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : site === 'demo' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-green-300 bg-green-400 dark:bg-green-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDemo\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : site === 'staging' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-green-300 bg-green-400 dark:bg-green-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tStaging\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : site === 'dev' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-indigo-300 bg-indigo-400 dark:bg-indigo-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDev\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\n\t\t\t<div className=\"flex flex-col flex-1 md:w-0 md:overflow-hidden\">\n\t\t\t\t<main className=\"flex-1 relative z-0 md:overflow-y-auto focus:outline-none\" ref={ref}>\n\t\t\t\t\t<div className=\"max-w-7xl mx-auto\">\n\t\t\t\t\t\t<div className=\"border-b border-gray-300 dark:border-gray-700\">\n\t\t\t\t\t\t\t<Topbar />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Suspense\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<div className=\"flex justify-center items-center h-screen\">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative z-10\">{children}</div>\n\t\t\t\t\t</Suspense>\n\t\t\t\t</main>\n\t\t\t</div>\n\n\t\t\t<OnRouteChange\n\t\t\t\taction={() => {\n\t\t\t\t\tif (ref?.current?.scrollTo) ref.current.scrollTo(0, 0)\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\nexport default PageSidebar\n","import React, { FC, Suspense, useMemo, useRef } from 'react'\nimport { RouteComponentProps, Link } from '@reach/router'\nimport logo from 'assets/img/workflow-logo-white-text.svg'\nimport Loader from '@primer/components/Loader'\nimport Topbar from '@primer/components/Topbar'\nimport OnRouteChange from '@primer/components/OnRouteChange'\nimport MobileMenu from '@primer/components/MobileMenu'\nimport { isNotNone } from '@primer/types'\nimport { CogIcon, QuestionMarkCircleIcon, ViewGridIcon } from '@heroicons/react/outline'\nimport db from 'db'\n\nconst PageTopbar: FC<RouteComponentProps> = ({ children }) => {\n\tconst ref = useRef<HTMLDivElement>(null)\n\n\tconst entityTypes = db.entityTypes.all()\n\n\tconst links = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\ttitle: 'Home',\n\t\t\t\tto: '/home',\n\t\t\t\ticon: <ViewGridIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: true,\n\t\t\t},\n\t\t\t...entityTypes\n\t\t\t\t.filter((x) => x.mainNav)\n\t\t\t\t.map((entityType) => ({\n\t\t\t\t\ttitle: entityType.plural || entityType.name,\n\t\t\t\t\tto: `/${entityType.key}`,\n\t\t\t\t\ticon: <QuestionMarkCircleIcon className=\"w-5 h-5\" />,\n\t\t\t\t\texact: true,\n\t\t\t\t})),\n\t\t\t{\n\t\t\t\ttitle: 'Settings',\n\t\t\t\tto: '/settings',\n\t\t\t\ticon: <CogIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: false,\n\t\t\t},\n\t\t],\n\t\t[entityTypes]\n\t)\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"min-h-screen bg-gray-200 dark:bg-gray-800\">\n\t\t\t\t<MobileMenu links={links.filter(isNotNone)} withTopbar />\n\n\t\t\t\t<div className=\"bg-gray-800 dark:bg-gray-900 hidden md:block\">\n\t\t\t\t\t<nav className=\"bg-gray-800 dark:bg-gray-900\">\n\t\t\t\t\t\t<div className=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between h-16 px-4 sm:px-0\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<Link to={`${process.env.PUBLIC_URL}/dashboard`}>\n\t\t\t\t\t\t\t\t\t\t\t<img src={logo} alt=\"ICRA\" className=\"h-10\" />\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"hidden md:block\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-10 flex items-baseline space-x-4\">\n\t\t\t\t\t\t\t\t\t\t\t{links.filter(isNotNone).map((x, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${x.to}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{x.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"hidden md:block\">\n\t\t\t\t\t\t\t\t\t<Topbar intent=\"dark\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</nav>\n\t\t\t\t</div>\n\n\t\t\t\t<main ref={ref} className=\"relative z-0\">\n\t\t\t\t\t<Suspense\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<div className=\"flex justify-center items-center h-screen\">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative z-20\">{children}</div>\n\t\t\t\t\t</Suspense>\n\t\t\t\t</main>\n\t\t\t</div>\n\n\t\t\t<OnRouteChange\n\t\t\t\taction={() => {\n\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\tref?.current?.scrollTo(0, 0)\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t)\n}\n\nexport default PageTopbar\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface CardProps {\n\tclassName?: ClassValue\n\theader?: ReactNode\n\tfooter?: ReactNode\n\tchildren?: ReactNode\n}\n\nconst Card: FC<CardProps> = ({ className, header, footer, children }) => (\n\t<CardWrapper className={clsx(className)}>\n\t\t{header}\n\t\t{children && <CardContent>{children}</CardContent>}\n\t\t{footer && <CardFooter>{footer}</CardFooter>}\n\t</CardWrapper>\n)\n\nexport const CardWrapper: FC<{ children: ReactNode; className?: ClassValue }> = ({ className, children }) => (\n\t<div className={clsx('bg-white dark:bg-gray-700 shadow rounded-none sm:rounded-md', className)}>{children}</div>\n)\n\nexport const CardContent: FC<{ children: ReactNode; className?: ClassValue }> = ({ className, children }) => (\n\t<div className={clsx('px-4 py-5 sm:p-6', className)}>{children}</div>\n)\n\nexport const CardFooter: FC<{ children: ReactNode; className?: ClassValue }> = ({ className, children }) => (\n\t<div className={clsx('bg-gray-50 dark:bg-gray-750 sm:rounded-b-md px-4 py-4 sm:px-6', className)}>{children}</div>\n)\n\nexport default Card\n","import React, { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface ButtonSpacerProps {\n\tclassName?: ClassValue\n}\n\nconst ButtonSpacer: FC<ButtonSpacerProps> = ({ className }) => (\n\t<div className={clsx('px-4 py-2 text-sm opacity-0 leading-5 pointer-events-none', className)}>&nbsp;</div>\n)\n\nexport default ButtonSpacer\n","import React, { FC, ReactNode, useEffect } from 'react'\nimport Actions from '@primer/components/Actions'\nimport ButtonSpacer from '@primer/components/ButtonSpacer'\nimport { ActionType, isNotNone, None } from '@primer/types'\nimport clsx, { ClassValue } from 'clsx'\nimport db from 'db'\n\ninterface PageInfo {\n\ttitle: ReactNode\n\ticon?: ReactNode\n}\n\ntype PageInfoType = PageInfo | None\n\ninterface PageHeadingProps {\n\ttitle?: ReactNode\n\tpageTitle?: string\n\tactions?: ActionType[]\n\tinfoList?: PageInfoType[]\n\tclassName?: ClassValue\n}\n\nconst PageHeading: FC<PageHeadingProps> = ({ title = '', pageTitle, actions = [], infoList, className }) => {\n\tuseEffect(() => {\n\t\tconst value = pageTitle || title\n\t\tdocument.title = `${value} - ${db.siteSettings.get('title')}`\n\t}, [title, pageTitle])\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div className=\"pt-3 lg:pt-6 antialiased\">\n\t\t\t\t<div className=\"max-w-7xl mx-auto px-4 mb-8 sm:px-6 lg:px-8\">\n\t\t\t\t\t<div className=\"md:flex md:items-start md:justify-between flex-wrap\">\n\t\t\t\t\t\t<div className=\"mr-4 my-3 flex-1 mb-6 md:mb-0\">\n\t\t\t\t\t\t\t<h2 className=\"flex items-center text-2xl leading-8 font-bold text-gray-900 dark:text-white sm:text-3xl sm:leading-9 whitespace-nowrap\">\n\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t{infoList && (\n\t\t\t\t\t\t\t\t<div className=\"mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap\">\n\t\t\t\t\t\t\t\t\t{infoList.filter(isNotNone).map((info, i) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2 flex items-center text-sm leading-5 text-gray-600 dark:text-gray-300 sm:mr-6\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{info.icon && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 mr-1.5 text-gray-500 dark:text-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{info.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{info.title}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{actions.filter(isNotNone).length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"my-3 flex\">\n\t\t\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"my-3 hidden md:block\">\n\t\t\t\t\t\t\t\t<ButtonSpacer />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default PageHeading\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { smartReplaceClasses } from '@primer/utils/funcs'\n\nconst fixClasses = (className = '') =>\n\tsmartReplaceClasses(className, [{ pattern: /^max-w-\\dxl$/, defaultValue: 'max-w-7xl' }])\n\ninterface PageContentProps {\n\tclassName?: ClassValue\n\twidth?: number\n\tchildren: ReactNode\n}\n\nconst PageContent: FC<PageContentProps> = ({ className, children }) => {\n\treturn <div className={fixClasses(clsx('w-full mx-auto pb-8 sm:px-6 lg:px-8', className))}>{children}</div>\n}\n\nexport default PageContent\n","import { EntityActionModel, EntityTypeModel, EntityFieldModel, RoleModel } from 'types/models'\nimport { v4 as id } from 'uuid'\nimport db, { clear, persist } from './index'\n\nexport const seed = () => {\n\tclear()\n\tpersist()\n\n\tdb.siteSettings.set('title', 'NZDRC2')\n\tdb.siteSettings.set('layout', 'sidebar')\n\n\t// ENTITY TYPES\n\n\tconst userEntityType: EntityTypeModel = {\n\t\tid: id(),\n\t\tkey: 'user',\n\t\tname: 'User',\n\t\tplural: 'Users',\n\t\tmainNav: true,\n\t}\n\n\tconst caseEntityType: EntityTypeModel = {\n\t\tid: id(),\n\t\tkey: 'case',\n\t\tname: 'Case',\n\t\tplural: 'Cases',\n\t\tmainNav: true,\n\t}\n\n\tconst eventEntityType: EntityTypeModel = {\n\t\tid: id(),\n\t\tkey: 'event',\n\t\tname: 'Event',\n\t\tplural: 'Events',\n\t\tmainNav: false,\n\t}\n\n\tdb.entityTypes.save(userEntityType)\n\tdb.entityTypes.save(caseEntityType)\n\tdb.entityTypes.save(eventEntityType)\n\n\t// META TYPES\n\n\t// CASE\n\n\tconst caseEntityFields: EntityFieldModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: caseEntityType.id,\n\t\t\tkey: 'case-number',\n\t\t\tname: 'Case Number',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: caseEntityType.id,\n\t\t\tkey: 'type',\n\t\t\tname: 'Type',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Review', 'Mediation', 'Hybrid'],\n\t\t\tdefaultValue: 'Review',\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: caseEntityType.id,\n\t\t\tkey: 'claim-number',\n\t\t\tname: 'Claim Number',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: caseEntityType.id,\n\t\t\tkey: 'complexity',\n\t\t\tname: 'Complexity',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Standard', 'Complex'],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: caseEntityType.id,\n\t\t\tkey: 'closed-date',\n\t\t\tname: 'Closed Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: caseEntityType.id,\n\t\t\tkey: 'status',\n\t\t\tname: 'Status',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Pending', 'Open', 'Closed'],\n\t\t},\n\t]\n\n\tcaseEntityFields.forEach(db.entityFields.save)\n\n\t// EVENTS\n\n\tconst eventEntityFields: EntityFieldModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: eventEntityType.id,\n\t\t\tkey: 'start-date',\n\t\t\tname: 'Start Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: eventEntityType.id,\n\t\t\tkey: 'end-date',\n\t\t\tname: 'End Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: eventEntityType.id,\n\t\t\tkey: 'type',\n\t\t\tname: 'Type',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Review', 'Mediation', 'CMC'],\n\t\t\tdefaultValue: 'CMC',\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: eventEntityType.id,\n\t\t\tkey: 'decision-date',\n\t\t\tname: 'Decision Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: eventEntityType.id,\n\t\t\tkey: 'postponed',\n\t\t\tname: 'Postponed',\n\t\t\ttype: 'boolean',\n\t\t\toptions: [],\n\t\t},\n\t]\n\n\teventEntityFields.forEach(db.entityFields.save)\n\n\t// USERS\n\n\tconst userEntityFields: EntityFieldModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: userEntityType.id,\n\t\t\tkey: 'first-name',\n\t\t\tname: 'First Name',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: userEntityType.id,\n\t\t\tkey: 'last-name',\n\t\t\tname: 'Last Name',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: userEntityType.id,\n\t\t\tkey: 'email',\n\t\t\tname: 'Email',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: userEntityType.id,\n\t\t\tkey: 'phone',\n\t\t\tname: 'Phone',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: userEntityType.id,\n\t\t\tkey: 'active',\n\t\t\tname: 'Active',\n\t\t\ttype: 'boolean',\n\t\t\toptions: [],\n\t\t\tdefaultValue: 'true',\n\t\t},\n\t]\n\n\tuserEntityFields.forEach(db.entityFields.save)\n\n\t// ACTIONS\n\n\t// CASE\n\n\tconst caseActions: EntityActionModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityTypeId: caseEntityType.id,\n\t\t\tkey: 'close-case',\n\t\t\tname: 'Close Case',\n\t\t\tchanges: [],\n\t\t},\n\t]\n\n\tcaseActions.forEach(db.entityActions.save)\n\n\t// EVENTS\n\n\tconst eventActions: EntityActionModel[] = []\n\n\teventActions.forEach(db.entityActions.save)\n\n\t// CONNECTIONS\n\n\tdb.entityConnections.save({\n\t\tid: id(),\n\t\tkey: 'events',\n\t\tname: 'Events',\n\t\tentityTypeId: caseEntityType.id,\n\t\trelationId: eventEntityType.id,\n\t\ttype: 'one-to-many',\n\t})\n\n\tdb.entityConnections.save({\n\t\tid: id(),\n\t\tkey: 'attendees',\n\t\tname: 'Attendees',\n\t\tentityTypeId: eventEntityType.id,\n\t\trelationId: userEntityType.id,\n\t\ttype: 'one-to-many',\n\t})\n\n\tdb.entityConnections.save({\n\t\tid: id(),\n\t\tkey: 'applicant',\n\t\tname: 'Applicant',\n\t\tentityTypeId: userEntityType.id,\n\t\trelationId: caseEntityType.id,\n\t\ttype: 'one-to-many',\n\t})\n\n\t// NOTIFICATIONS\n\n\tdb.notifications.save({\n\t\tid: id(),\n\t\tname: 'Event Reminder 2 days',\n\t\tfocus: eventEntityType.id,\n\t\tenabled: true,\n\t\ttriggerType: 'date',\n\t\ttriggerRepeat: 2,\n\t\ttriggerEvery: '',\n\t\ttriggerYearIn: '',\n\t\ttriggerMonthOn: '',\n\t\ttriggerWeekOn: '',\n\t\ttriggerDayAt: '',\n\t\ttriggerAction: '',\n\t\tobeyTriggerTiming: true,\n\t\ttriggerTimingType: 'before',\n\t\ttriggerTiming: 'day',\n\t\ttriggerDate:\n\t\t\tdb.entityFields.find((x) => x.entityTypeId === eventEntityType.id && x.key === 'start-date')?.id || '',\n\t\truleGroups: [\n\t\t\t{\n\t\t\t\trules: [\n\t\t\t\t\t{\n\t\t\t\t\t\tentity: eventEntityType.id,\n\t\t\t\t\t\tfield:\n\t\t\t\t\t\t\tdb.entityFields.find((x) => x.entityTypeId === eventEntityType.id && x.key === 'postponed')\n\t\t\t\t\t\t\t\t?.id || '',\n\t\t\t\t\t\toperator: 'false',\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tsubject: 'Upcoming Conference',\n\t\tcontent:\n\t\t\t'<h1>Hello {{recipient-first-name}}</h1><p><br></p><p>You have a {{event-type}} coming up on {{event-start-date}}</p>',\n\t})\n\n\tdb.templates.save({\n\t\tid: id(),\n\t\tname: 'Event Reminder 2 days',\n\t\tcontent:\n\t\t\t'<h1>Hello {{recipient-first-name}}</h1><p><br></p><p>You have a {{event-type}} coming up on {{event-start-date}}</p>',\n\t})\n\n\tconst adminRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Administrator',\n\t})\n\n\tconst caseManagerRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Case Manager',\n\t})\n\n\tconst reviewerRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Reviewer',\n\t})\n\n\tconst applicantRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Applicant',\n\t})\n\n\t;([adminRole, caseManagerRole, reviewerRole] as RoleModel[]).forEach((role) => {\n\t\tdb.entityTypes.all().forEach((entityType) => {\n\t\t\tdb.entityTypePermissions.save({\n\t\t\t\tid: id(),\n\t\t\t\tentityTypeId: entityType.id,\n\t\t\t\troleId: role.id,\n\t\t\t\tview: true,\n\t\t\t\tmodify: true,\n\t\t\t\tremove: true,\n\t\t\t})\n\n\t\t\tdb.entityFields\n\t\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t\t.forEach((entityField) => {\n\t\t\t\t\tdb.entityFieldPermissions.save({\n\t\t\t\t\t\tid: id(),\n\t\t\t\t\t\tentityFieldId: entityField.id,\n\t\t\t\t\t\troleId: role.id,\n\t\t\t\t\t\tview: true,\n\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\tdb.entityActions\n\t\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t\t.forEach((entityAction) => {\n\t\t\t\t\tdb.entityActionPermissions.save({\n\t\t\t\t\t\tid: id(),\n\t\t\t\t\t\tentityActionId: entityAction.id,\n\t\t\t\t\t\troleId: role.id,\n\t\t\t\t\t\tperform: true,\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\tdb.entityConnections\n\t\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t\t.forEach((entityConnection) => {\n\t\t\t\t\tdb.entityConnectionPermissions.save({\n\t\t\t\t\t\tid: id(),\n\t\t\t\t\t\tentityConnectionId: entityConnection.id,\n\t\t\t\t\t\troleId: role.id,\n\t\t\t\t\t\tview: true,\n\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\tremove: true,\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t})\n\t})\n\n\tdb.entityTypes.all().forEach((entityType) => {\n\t\tdb.entityTypePermissions.save({\n\t\t\tid: id(),\n\t\t\tentityTypeId: entityType.id,\n\t\t\troleId: applicantRole.id,\n\t\t\tview: true,\n\t\t\tmodify: false,\n\t\t\tremove: false,\n\t\t})\n\n\t\tdb.entityFields\n\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t.forEach((entityField) => {\n\t\t\t\tdb.entityFieldPermissions.save({\n\t\t\t\t\tid: id(),\n\t\t\t\t\tentityFieldId: entityField.id,\n\t\t\t\t\troleId: applicantRole.id,\n\t\t\t\t\tview: true,\n\t\t\t\t\tmodify: false,\n\t\t\t\t})\n\t\t\t})\n\n\t\tdb.entityActions\n\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t.forEach((entityAction) => {\n\t\t\t\tdb.entityActionPermissions.save({\n\t\t\t\t\tid: id(),\n\t\t\t\t\tentityActionId: entityAction.id,\n\t\t\t\t\troleId: applicantRole.id,\n\t\t\t\t\tperform: false,\n\t\t\t\t})\n\t\t\t})\n\n\t\tdb.entityConnections\n\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t.forEach((entityConnection) => {\n\t\t\t\tdb.entityConnectionPermissions.save({\n\t\t\t\t\tid: id(),\n\t\t\t\t\tentityConnectionId: entityConnection.id,\n\t\t\t\t\troleId: applicantRole.id,\n\t\t\t\t\tview: true,\n\t\t\t\t\tmodify: false,\n\t\t\t\t\tremove: false,\n\t\t\t\t})\n\t\t\t})\n\t})\n}\n\nif (!localStorage.getItem('data')) {\n\tseed()\n}\n","import React, { FC } from 'react'\nimport Card from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport { RouteComponentProps } from '@reach/router'\nimport Actions from '@primer/components/Actions'\nimport { clear } from 'db'\nimport { seed } from 'db/seed'\nimport Stack from '@primer/components/Stack'\n\nconst Home: FC<RouteComponentProps> = () => {\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Home\" />\n\n\t\t\t<PageContent>\n\t\t\t\t<Card>\n\t\t\t\t\t<Stack>\n\t\t\t\t\t\t<div className=\"rounded-md bg-red-400 text-red-800 dark:bg-red-500 dark:text-red-300 bg-opacity-25 dark:bg-opacity-25 p-4\">\n\t\t\t\t\t\t\t<span className=\"font-medium\">Note:</span> Modules haven't been properly figured out yet, so\n\t\t\t\t\t\t\tthat stuff is only a visual mockup\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"rounded-md bg-primary-400 text-primary-800 dark:bg-primary-500 dark:text-primary-300 bg-opacity-25 dark:bg-opacity-25 p-4 space-y-3\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tFeel free to play around with the forms, create stuff, edit stuff, delete stuff. You can\n\t\t\t\t\t\t\t\tcome back to this page to reset the data.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>Any changes you make are contained within your browser, so nothing is real.</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Clear Database',\n\t\t\t\t\t\t\t\t\tonClick: () => clear(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Reset Database',\n\t\t\t\t\t\t\t\t\tonClick: () => seed(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Card>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default Home\n","export default __webpack_public_path__ + \"static/media/undraw_not_found_60pq.faf05e44.svg\";","import React, { FC } from 'react'\nimport { RouteComponentProps } from '@reach/router'\nimport illustration from 'assets/img/undraw_not_found_60pq.svg'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\n\nconst NotFound: FC<RouteComponentProps> = () => {\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Not Found\" />\n\n\t\t\t<PageContent>\n\t\t\t\t<div className=\"p-4\">\n\t\t\t\t\t<img src={illustration} alt=\"not found\" width=\"500\" className=\"mx-auto\" />\n\t\t\t\t</div>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default NotFound\n","import React from 'react'\nimport { CheckIcon, XIcon } from '@heroicons/react/outline'\nimport { format } from 'date-fns'\nimport db from 'db'\nimport { EntityValueModel } from 'types/models'\n\nexport const getEntityFieldValue = (val?: EntityValueModel) => {\n\tif (!val) return\n\n\tlet field = db.entityFields.find(val.entityFieldId)\n\n\tswitch (field?.type) {\n\t\tcase 'string':\n\t\tcase 'option':\n\t\t\treturn val.stringValue\n\t\tcase 'date':\n\t\t\treturn val.dateValue ? format(val.dateValue, 'dd/MM/yyyy') : undefined\n\t\tcase 'number':\n\t\t\treturn val.numberValue\n\t\tcase 'boolean':\n\t\t\treturn val.booleanValue ? <CheckIcon className=\"w-4 h-4\" /> : <XIcon className=\"w-4 h-4\" />\n\t}\n}\n\nexport const sortValuesByLatest = (a: EntityValueModel, b: EntityValueModel) => {\n\tif (a.created && b.created) return new Date(b.created).valueOf() - new Date(a.created).valueOf()\n\treturn 0\n}\n","import React, { FC, useState } from 'react'\nimport { CardWrapper } from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport { Link, RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { EntityFieldModel, EntityModel } from 'types/models'\nimport { AdjustmentsIcon, CheckIcon, DotsHorizontalIcon, PencilIcon, TrashIcon } from '@heroicons/react/outline'\nimport { confirm } from '@primer/alerts'\nimport { getEntityFieldValue, sortValuesByLatest } from 'utils/funcs'\nimport Actions from '@primer/components/Actions'\n\nconst Entities: FC<RouteComponentProps<{ entityTypeId: string }>> = ({ entityTypeId }) => {\n\tconst entityType = db.entityTypes.find(entityTypeId)\n\n\tconst fields = db.entityFields.all((x) => x.entityTypeId === entityTypeId)\n\n\tconst getValue = (entity: EntityModel, field?: EntityFieldModel) =>\n\t\tdb.entityValues\n\t\t\t.all((y) => y.entityId === entity.id && y.entityFieldId === field?.id)\n\t\t\t.sort(sortValuesByLatest)[0]\n\n\tconst [visibleFields, setVisibleFields] = useState(fields)\n\n\tconst schema: TableSchema<EntityModel> = {\n\t\tcols: fields\n\t\t\t.filter((x) => visibleFields.includes(x))\n\t\t\t.map((field, i) => ({\n\t\t\t\ttitle: field.name,\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tlet val = getEntityFieldValue(getValue(x, field))\n\t\t\t\t\treturn i === 0 ? (\n\t\t\t\t\t\t<Link to={x.id} className=\"anchor\">\n\t\t\t\t\t\t\t{val || '-'}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tval || '-'\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t})),\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: `Edit ${entityType?.name}`,\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/${entityType?.key}/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: `Delete ${entityType?.name}`,\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.entities.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\ttitle={entityType?.plural || entityType?.name || '-'}\n\t\t\t\tactions={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: `Create ${entityType?.name}`,\n\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\tto: `/${entityType?.key}/create`,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<CardWrapper className=\"overflow-hidden\">\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t<div className=\"absolute top-0 right-0 h-[42px] flex items-center mr-1\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\ticon: <AdjustmentsIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\tintent: 'menu',\n\t\t\t\t\t\t\t\t\tactions: fields.map((x) => ({\n\t\t\t\t\t\t\t\t\t\ttitle: x.name,\n\t\t\t\t\t\t\t\t\t\ticon: visibleFields.includes(x) ? (\n\t\t\t\t\t\t\t\t\t\t\t<CheckIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\tdisableDismiss: true,\n\t\t\t\t\t\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t\t\t\t\t\tsetVisibleFields((f) =>\n\t\t\t\t\t\t\t\t\t\t\t\tvisibleFields.includes(x) ? f.filter((y) => y !== x) : [...f, x]\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\tschema={schema}\n\t\t\t\t\t\t\titems={db.entities.all((x) => x.entityTypeId === entityType?.id)}\n\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</CardWrapper>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default Entities\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { isNotNone, None } from '@primer/types'\n\ninterface DataItemType {\n\ttitle: string\n\tvalue?: ReactNode\n}\n\ninterface DataListColumnsProps {\n\titems: (DataItemType | None)[]\n\tcolumns?: 1 | 2 | 3\n\tclassName?: ClassValue\n}\n\nconst columnClassNames = {\n\t1: '',\n\t2: 'sm:w-1/2',\n\t3: 'sm:w-1/3',\n}\n\nconst DataListColumns: FC<DataListColumnsProps> = ({ items, columns = 2, className }) => {\n\tconst cols = items\n\t\t.filter(isNotNone)\n\t\t.filter((x) => x.value)\n\t\t.reduce(\n\t\t\t(list: DataItemType[][], item: DataItemType) => {\n\t\t\t\tif (list[list.length - 1].length < columns) {\n\t\t\t\t\tlist[list.length - 1].push(item)\n\t\t\t\t\treturn list\n\t\t\t\t} else {\n\t\t\t\t\treturn [...list, [item]]\n\t\t\t\t}\n\t\t\t},\n\t\t\t[[]]\n\t\t)\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<dl className=\"flex flex-col space-y-8\">\n\t\t\t\t{cols.map((lists, i) => (\n\t\t\t\t\t<div key={i} className=\"flex flex-col sm:flex-row sm:space-x-8 space-y-8 sm:space-y-0\">\n\t\t\t\t\t\t{lists.map((item, j) => (\n\t\t\t\t\t\t\t<div key={j} className={clsx('w-full', columnClassNames[columns])}>\n\t\t\t\t\t\t\t\t<dt className=\"text-sm leading-5 text-gray-500 dark:text-gray-300\">{item.title}</dt>\n\t\t\t\t\t\t\t\t<dd className=\"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white\">\n\t\t\t\t\t\t\t\t\t{item.value}\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</dl>\n\t\t</div>\n\t)\n}\n\nexport default DataListColumns\n","import React, { FC } from 'react'\nimport { RouteComponentProps } from '@reach/router'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport db from 'db'\nimport Actions from '@primer/components/Actions'\nimport { ArrowLeftIcon } from '@heroicons/react/outline'\nimport DataListColumns from '@primer/components/DataListColumns'\nimport { getEntityFieldValue, sortValuesByLatest } from 'utils/funcs'\n\nconst ViewEntity: FC<RouteComponentProps<{ entityTypeId: string; id: string }>> = ({ entityTypeId, id }) => {\n\tconst entityType = db.entityTypes.find(entityTypeId)\n\tconst fields = db.entityFields.all((x) => x.entityTypeId === entityTypeId)\n\tconst values = fields.map((x) => db.entityValues.all((y) => y.entityFieldId === x.id).sort(sortValuesByLatest)[0])\n\n\tconst title = `View ${entityType?.name}`\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: `/${entityType?.key}`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Card>\n\t\t\t\t\t<DataListColumns\n\t\t\t\t\t\titems={fields.map((x, i) => ({\n\t\t\t\t\t\t\ttitle: x.name,\n\t\t\t\t\t\t\tvalue: getEntityFieldValue(values[i]),\n\t\t\t\t\t\t}))}\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default ViewEntity\n","import React, { ReactNode } from 'react'\nimport { FormikConfig, Form as FormikForm, FormikProps, FormikHelpers, FormikProvider, useFormik } from 'formik'\n\ntype FormikRenderProp<T> = (props: FormikProps<T>) => ReactNode\n\nexport function isFormikRenderProp<T>(prop: any): prop is FormikRenderProp<T> {\n\treturn typeof prop === 'function'\n}\n\ninterface FormProps<T> {\n\tchildren: ReactNode | FormikRenderProp<T>\n\tcontext: FormikProps<T>\n\tclassName?: string\n}\n\nexport function Form<T>({ children, className, context }: FormProps<T>) {\n\treturn (\n\t\t<FormikProvider value={context}>\n\t\t\t<FormikForm className={className}>\n\t\t\t\t{isFormikRenderProp<T>(children) ? children(context) : children}\n\t\t\t</FormikForm>\n\t\t</FormikProvider>\n\t)\n}\n\nexport default Form\n\nexport const useForm = <T,>({ onSubmit, ...props }: FormikConfig<T>) => {\n\t// https://github.com/formium/formik/issues/739\n\tconst handleSubmit = async (formData: T, helpers: FormikHelpers<T>) => {\n\t\tawait onSubmit(formData, helpers)\n\t\thelpers.setSubmitting(false)\n\t}\n\n\tconst context = useFormik({\n\t\tonSubmit: handleSubmit,\n\t\t...props,\n\t})\n\n\treturn context\n}\n","import { FormikContextType, getIn } from 'formik'\n\nexport interface FormValidations {\n\trequired?: string\n\tmin?: {\n\t\tvalue: number\n\t\tmessage: string\n\t}\n\tmax?: {\n\t\tvalue: number\n\t\tmessage: string\n\t}\n}\n\nexport const validate =\n\t(validations?: FormValidations) =>\n\t(value: any): string | undefined => {\n\t\tif (validations?.required && !value) {\n\t\t\treturn validations.required\n\t\t}\n\n\t\tif (validations?.min && +value < +validations.min.value) {\n\t\t\treturn validations.min.message\n\t\t}\n\n\t\tif (validations?.max && +value > +validations.max.value) {\n\t\t\treturn validations.max.message\n\t\t}\n\n\t\treturn undefined\n\t}\n\nexport function watch<T, K extends keyof T>(context: FormikContextType<T>, name: K) {\n\treturn context.values[name]\n}\n\nexport function watchPath<T>(context: FormikContextType<T>, path: string) {\n\treturn getIn(context.values, path) as unknown\n}\n","import React, { ChangeEvent, ElementType, FC, ReactNode, useState } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport { FormValidations, validate } from './utils'\nimport { v4 as uuidv4 } from 'uuid'\n\ninterface FormInputProps {\n\tas?: ElementType | string\n\tname: string\n\tlabel?: ReactNode\n\ttype?: string\n\tclassName?: ClassValue\n\tautoFocus?: boolean\n\thideOptional?: boolean\n\tvalidations?: FormValidations\n\tplaceholder?: string\n\tdisabled?: boolean\n\tstep?: number\n\tdescription?: string\n\tinputProps?: {\n\t\tmin?: number\n\t\tmax?: number\n\t\tstep?: number\n\t\tclassName?: string\n\t}\n}\n\nconst FormInput: FC<FormInputProps> = ({\n\tas = 'input',\n\tname,\n\tlabel,\n\ttype = 'text',\n\tclassName,\n\tautoFocus = false,\n\thideOptional = false,\n\tvalidations = {},\n\tplaceholder,\n\tdisabled = false,\n\tdescription,\n\tinputProps = {},\n}) => {\n\tconst isRequired = validations?.required\n\n\tconst ref = useAutoFocus<HTMLInputElement>(autoFocus)\n\n\tconst Comp = as\n\n\tconst [{ value }, { error, touched }, { setValue, setTouched }] = useField({\n\t\tname,\n\t\ttype,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [token] = useState(uuidv4())\n\n\tconst { className: extraClassName, ...extraProps } = inputProps\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t{label && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default\"\n\t\t\t\t\tonClick={() => ref.current?.focus()}\n\t\t\t\t>\n\t\t\t\t\t{label}{' '}\n\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className=\"text-[0px] leading-none select-none\">{token}</div>\n\n\t\t\t<div className={clsx('relative rounded-md', label && 'mt-1')}>\n\t\t\t\t<Comp\n\t\t\t\t\tref={ref}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={(e: ChangeEvent<HTMLInputElement>) => setValue(e.target.value)}\n\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t}}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'form-input block w-full sm:text-sm sm:leading-5',\n\t\t\t\t\t\textraClassName,\n\t\t\t\t\t\terror &&\n\t\t\t\t\t\t\ttouched &&\n\t\t\t\t\t\t\t'pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500'\n\t\t\t\t\t)}\n\t\t\t\t\t{...(Comp === 'input' ? extraProps : {})}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{description && <p className=\"mt-2 text-xs text-gray-500\">{description}</p>}\n\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t</div>\n\t)\n}\n\nexport default FormInput\n","import React, { FC, ReactNode, useState } from 'react'\nimport Select from 'react-select'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport { XIcon } from '@heroicons/react/outline'\nimport { v4 as uuidv4 } from 'uuid'\nimport { FormValidations, validate } from './utils'\n\nexport interface Option {\n\tlabel: string\n\tvalue: any\n}\n\ninterface FormSelectProps {\n\tname: string\n\tlabel?: ReactNode\n\toptions: Option[]\n\tclearable?: boolean\n\tdisabled?: boolean\n\tdescription?: string\n\tplaceholder?: string\n\tvalidations?: FormValidations\n\thideOptional?: boolean\n\tclassName?: ClassValue\n\tautoFocus?: boolean\n\tonChange?: (value: any) => void\n}\n\nconst FormSelect: FC<FormSelectProps> = ({\n\tname,\n\tlabel,\n\toptions,\n\tclearable,\n\tdisabled = false,\n\tdescription,\n\tplaceholder,\n\tvalidations = {},\n\thideOptional = false,\n\tclassName,\n\tautoFocus,\n\tonChange: onChangeProp,\n}) => {\n\tconst isRequired = validations?.required\n\n\tconst [{ value, onBlur }, { error, touched }, { setValue, setTouched }] = useField({\n\t\tname,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [token] = useState(uuidv4())\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<label className=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200\">\n\t\t\t\t{label && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{label}{' '}\n\t\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"text-[0px] leading-none select-none\">{token}</div>\n\n\t\t\t\t<Select\n\t\t\t\t\toptions={options}\n\t\t\t\t\tvalue={\n\t\t\t\t\t\toptions.find((x) => {\n\t\t\t\t\t\t\t// console.log('x.value', x.value, name)\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tx.value === value ||\n\t\t\t\t\t\t\t\t(value !== null && x.value === +value) ||\n\t\t\t\t\t\t\t\t(x.value?.id !== undefined && x.value?.id === value?.id)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}) || null\n\t\t\t\t\t}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\tsetValue(option ? option.value : null)\n\t\t\t\t\t\tif (onChangeProp) onChangeProp(option ? option.value : null)\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={(e) => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\tonBlur(e)\n\t\t\t\t\t}}\n\t\t\t\t\tinputProps={{ autoComplete: 'none', autoCorrect: 'off', spellCheck: 'off' }}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'react-select-container font-normal',\n\t\t\t\t\t\tlabel && 'mt-1',\n\t\t\t\t\t\terror && touched && 'react-select-container-error'\n\t\t\t\t\t)}\n\t\t\t\t\tclassNamePrefix=\"react-select\"\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tisClearable={clearable}\n\t\t\t\t\tisDisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tautoFocus={autoFocus}\n\t\t\t\t\tmenuPlacement=\"auto\"\n\t\t\t\t\tcomponents={{\n\t\t\t\t\t\tClearIndicator: ({ hasValue, innerProps: { ref, ...restInnerProps } }) => {\n\t\t\t\t\t\t\treturn hasValue ? (\n\t\t\t\t\t\t\t\t<span ref={ref} {...restInnerProps}>\n\t\t\t\t\t\t\t\t\t<XIcon className=\"mr-8 w-5 h-5 cursor-pointer text-gray-400 hover:text-red-500\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t},\n\t\t\t\t\t\tDropdownIndicator: ({ innerProps: { ref } }) => null,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</label>\n\n\t\t\t{description && !error && !touched && <p className=\"mt-2 text-sm text-gray-500\">{description}</p>}\n\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t</div>\n\t)\n}\n\nexport default FormSelect\n","import React, { FC, useEffect, useState } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport { usePopper } from '@primer/hooks/usePopper'\nimport { Placement } from '@popperjs/core/index'\nimport { ArrowLeftIcon, ArrowRightIcon } from '@heroicons/react/outline'\nimport useDismissable from '@primer/hooks/useDismissable'\nimport {\n\taddDays,\n\taddMonths,\n\tendOfMonth,\n\tformat,\n\tgetDaysInMonth,\n\tgetISODay,\n\tisAfter,\n\tisBefore,\n\tisSameDay,\n\tparse,\n\tstartOfMonth,\n\tsubDays,\n\tsubMonths,\n} from 'date-fns'\nimport { ensureDate, getReservedDate, isValidDate } from '@primer/utils/funcs'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport composeRefs from '@seznam/compose-react-refs'\nimport { FormValidations, validate } from './utils'\n\nconst weekDays = ['Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa', 'Su']\n\nconst isDate = (x: any): x is Date => x && x instanceof Date && isValidDate(x)\n\ninterface FormDateProps {\n\tname: string\n\tlabel?: string\n\tdescription?: string\n\tplaceholder?: string\n\thideOptional?: boolean\n\tvalidations?: FormValidations\n\tplacement?: Placement\n\toffset?: number | [number, number]\n\tdisabled?: boolean\n\tminDate?: Date\n\tmaxDate?: Date\n\tdisableHolidays?: boolean\n\tinputDisabled?: boolean\n\tautoFocus?: boolean\n\tclassName?: ClassValue\n\tinputClassName?: ClassValue\n}\n\nconst FormDate: FC<FormDateProps> = ({\n\tname,\n\tlabel,\n\tdescription,\n\tplaceholder = 'DD/MM/YYYY',\n\thideOptional,\n\tvalidations = {},\n\tplacement = 'bottom-end',\n\toffset = 10,\n\tdisabled,\n\tminDate,\n\tmaxDate,\n\tinputDisabled,\n\tdisableHolidays = false,\n\tautoFocus = false,\n\tclassName,\n\tinputClassName,\n}) => {\n\tconst isRequired = validations?.required\n\n\tconst [{ value, onBlur }, { error, touched }, { setValue, setTouched }] = useField({\n\t\tname,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [display, setDisplay] = useState(isDate(value) ? format(value, 'dd/MM/yyyy') : '')\n\tconst [context, setContext] = useState<Date>(startOfMonth(isDate(value) ? value : new Date()))\n\tconst [prevValue, setPrevValue] = useState<Date | null | undefined>()\n\n\tuseEffect(() => {\n\t\tif (prevValue !== value) {\n\t\t\tif (value) {\n\t\t\t\tlet ensuredDate = ensureDate(value)\n\t\t\t\tsetDisplay(isDate(ensuredDate) ? format(ensuredDate, 'dd/MM/yyyy') : '')\n\t\t\t\tsetPrevValue(value)\n\t\t\t} else {\n\t\t\t\tsetDisplay('')\n\t\t\t\tsetContext(new Date())\n\t\t\t}\n\t\t}\n\t}, [prevValue, value])\n\n\tconst {\n\t\topen,\n\t\tsetOpen,\n\t\tignoreClass,\n\t\tref: dismissableRef,\n\t} = useDismissable({\n\t\tonOpen: () => {\n\t\t\ttry {\n\t\t\t\tif (value) {\n\t\t\t\t\tlet dateValue = ensureDate(value)\n\t\t\t\t\tsetDisplay(format(dateValue, 'dd/MM/yyyy'))\n\t\t\t\t\tsetContext(dateValue)\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log('error', error)\n\t\t\t\tsetDisplay('')\n\t\t\t\tsetContext(new Date())\n\t\t\t}\n\t\t},\n\t})\n\n\tconst [reference, tooltip] = usePopper({\n\t\tplacement,\n\t\tstrategy: 'fixed',\n\t\tmodifiers: [\n\t\t\t{\n\t\t\t\tname: 'offset',\n\t\t\t\toptions: { offset: offset instanceof Array ? offset : [0, offset] },\n\t\t\t},\n\t\t],\n\t})\n\n\tconst preDays = new Array(getISODay(startOfMonth(context)) - 1)\n\t\t.fill(null)\n\t\t.map((_, i) => subDays(endOfMonth(subMonths(context, 1)), i))\n\t\t.reverse()\n\n\tconst postDays = new Array(7 - getISODay(endOfMonth(context)))\n\t\t.fill(null)\n\t\t.map((_, i) => addDays(startOfMonth(addMonths(context, 1)), i))\n\n\tconst days = new Array(getDaysInMonth(context)).fill(null).map((_, i) => addDays(startOfMonth(context), i))\n\n\tconst select = (day: Date) => {\n\t\tsetValue(day)\n\t\tsetTouched(true)\n\t\tsetOpen(false)\n\n\t\tsetDisplay(format(day, 'dd/MM/yyyy'))\n\t}\n\n\tconst autoFocusRef = useAutoFocus<HTMLInputElement>(autoFocus)\n\n\treturn (\n\t\t<div className={clsx(className)} ref={dismissableRef}>\n\t\t\t<label>\n\t\t\t\t{label && (\n\t\t\t\t\t<div className=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200\">\n\t\t\t\t\t\t{label}{' '}\n\t\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className={clsx('relative rounded-md', label && 'mt-1')}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={display}\n\t\t\t\t\t\tonChange={(e) => setDisplay(e.target.value)}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\tdisabled={formik.isSubmitting || disabled}\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tref={composeRefs(reference, autoFocusRef)}\n\t\t\t\t\t\tonClick={() => setOpen(true)}\n\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\tif (inputDisabled) {\n\t\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetOpen(false)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonBlur={(event) => {\n\t\t\t\t\t\t\tif (!display) {\n\t\t\t\t\t\t\t\tsetValue(null)\n\t\t\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet displayDate = parse(display, 'dd/MM/yyyy', new Date())\n\n\t\t\t\t\t\t\t\tif (isValidDate(displayDate)) {\n\t\t\t\t\t\t\t\t\tsetValue(displayDate)\n\t\t\t\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetDisplay(isDate(value) ? format(value, 'dd/MM/yyyy') : '')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tonBlur(event)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'form-input block w-full sm:text-sm sm:leading-5',\n\t\t\t\t\t\t\terror &&\n\t\t\t\t\t\t\t\ttouched &&\n\t\t\t\t\t\t\t\t'pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500',\n\t\t\t\t\t\t\tinputClassName,\n\t\t\t\t\t\t\tignoreClass\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className={clsx(!open && 'hidden', 'z-10')} ref={tooltip}>\n\t\t\t\t\t\t<div className=\"mt rounded-md shadow-lg bg-white dark:bg-gray-700 w-80 overflow-hidden\">\n\t\t\t\t\t\t\t<div className=\"flex items-center dark:bg-gray-750 p-4 border-b border-gray-100 dark:border-gray-600\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => setContext((c) => subMonths(c, 1))}\n\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ArrowLeftIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<div className=\"flex-1 flex items-center justify-center text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t{format(context, 'MMMM yyyy')}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => setContext((c) => addMonths(c, 1))}\n\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ArrowRightIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"p-4 grid grid-cols-7\">\n\t\t\t\t\t\t\t\t{weekDays.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName=\"col-span-1 w-8 h-8 flex items-center justify-center rounded m-1 cursor-default text-sm text-gray-400\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{day}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{preDays.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName=\"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(day, 'd')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{days.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'col-span-1 w-7 h-7 flex items-center justify-center rounded m-2 cursor-pointer disabled:pointer-events-none text-sm font-medium hover:bg-indigo-100 dark:hover:bg-gray-800 disabled:opacity-50',\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(new Date(), day) && 'text-indigo-400 ring-2 ring-indigo-300',\n\t\t\t\t\t\t\t\t\t\t\tvalue && isSameDay(ensureDate(value), day) && 'bg-indigo-600 text-white'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => select(day)}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t(minDate && isBefore(day, minDate)) ||\n\t\t\t\t\t\t\t\t\t\t\t(maxDate && isAfter(day, maxDate)) ||\n\t\t\t\t\t\t\t\t\t\t\t(disableHolidays && !!getReservedDate(day))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttitle={getReservedDate(day)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(day, 'd')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{postDays.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName=\"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(day, 'd')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</label>\n\n\t\t\t{description && !error && !touched && <p className=\"mt-2 text-sm text-gray-500\">{description}</p>}\n\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t</div>\n\t)\n}\n\nexport default FormDate\n","import React, { FC, ReactNode } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface FormCheckboxProps {\n\tname: string\n\tlabel?: ReactNode\n\tdefaultValue?: any\n\tdisabled?: boolean\n\tinputClassName?: ClassValue\n\tclassName?: ClassValue\n\tcolor?: string\n\tautoFocus?: boolean\n}\n\nconst FormCheckbox: FC<FormCheckboxProps> = ({\n\tname,\n\tlabel,\n\tdisabled,\n\tcolor = 'bg-primary-500 dark:bg-primary-500',\n\tclassName,\n\tautoFocus,\n}) => {\n\t// helpers: {setValue: ƒ, setTouched: ƒ, setError: ƒ}\n\tconst [field] = useField({\n\t\tname,\n\t\ttype: 'checkbox',\n\t})\n\n\tconst { value } = field\n\n\tconst formik = useFormikContext()\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<label className=\"text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-center cursor-pointer\">\n\t\t\t\t<Toggle checked={value} color={color} />\n\t\t\t\t{label && <span className=\"ml-3\">{label}</span>}\n\t\t\t\t<input\n\t\t\t\t\t{...field}\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tclassName=\"hidden\"\n\t\t\t\t\tautoFocus={autoFocus}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t)\n}\n\ninterface ToggleProps {\n\tchecked: boolean\n\tcolor: string\n}\n\nconst Toggle: FC<ToggleProps> = ({ checked, color }) => {\n\treturn (\n\t\t<span\n\t\t\trole=\"checkbox\"\n\t\t\ttabIndex={0}\n\t\t\taria-checked=\"false\"\n\t\t\tclassName={clsx(\n\t\t\t\t'relative inline-block flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:shadow-outline',\n\t\t\t\t{\n\t\t\t\t\t[color]: checked,\n\t\t\t\t\t'bg-gray-200 dark:bg-gray-800': !checked,\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<span\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'translate-x-0 inline-block h-5 w-5 rounded-full shadow transform transition ease-in-out duration-200',\n\t\t\t\t\t{\n\t\t\t\t\t\t'translate-x-5 bg-white dark:bg-white': checked,\n\t\t\t\t\t\t'translate-x-0 bg-white dark:bg-gray-400': !checked,\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t></span>\n\t\t</span>\n\t)\n}\n\nexport default FormCheckbox\n","import React, { FC, useState } from 'react'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport FormSelect from '@primer/components/Form2/FormSelect'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport db from 'db'\nimport Actions from '@primer/components/Actions'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Stack from '@primer/components/Stack'\nimport FormDate from '@primer/components/Form2/FormDate'\nimport FormToggle from '@primer/components/Form2/FormToggle'\nimport { sortValuesByLatest } from 'utils/funcs'\n\ninterface FormSchema {\n\tfields: {\n\t\t[x: string]: {\n\t\t\tid?: string\n\t\t\tstringValue?: string\n\t\t\tdateValue?: Date\n\t\t\tbooleanValue?: boolean\n\t\t\tnumberValue?: number\n\t\t}\n\t}\n}\n\nconst EntityForm: FC<RouteComponentProps<{ entityTypeId: string; mode: 'create' | 'edit'; id: string }>> = ({\n\tentityTypeId,\n\tmode,\n\tid,\n}) => {\n\tconst entityType = db.entityTypes.find(entityTypeId)\n\tconst fields = db.entityFields.all((x) => x.entityTypeId === entityTypeId)\n\n\tconst [initialValues] = useState<FormSchema>({\n\t\tfields: fields.reduce((list, field) => {\n\t\t\tlet foundField = db.entityValues\n\t\t\t\t.all((x) => x.entityFieldId === field.id && x.entityId === id)\n\t\t\t\t.sort(sortValuesByLatest)[0]\n\n\t\t\treturn {\n\t\t\t\t...list,\n\t\t\t\t[field.key]: {\n\t\t\t\t\tid: foundField?.id || undefined,\n\t\t\t\t\tstringValue: foundField?.stringValue || '',\n\t\t\t\t\tdateValue: foundField?.dateValue || '',\n\t\t\t\t\tbooleanValue: foundField?.booleanValue || false,\n\t\t\t\t\tnumberValue: foundField?.numberValue || '',\n\t\t\t\t},\n\t\t\t}\n\t\t}, {}),\n\t})\n\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues,\n\t\tonSubmit: (formData) => {\n\t\t\tif (!entityTypeId) return\n\n\t\t\tlet newEntity = db.entities.save({ entityTypeId, ...(id ? { id } : {}) })\n\n\t\t\tObject.entries(formData.fields).forEach(([key, field]) => {\n\t\t\t\tlet entityField = db.entityFields.find((x) => x.key === key)\n\n\t\t\t\tif (!entityField) return\n\n\t\t\t\tlet save = false\n\n\t\t\t\tswitch (entityField.type) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\tcase 'option':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].stringValue !== field.stringValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'number':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].numberValue !== field.numberValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].booleanValue !== field.booleanValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].dateValue !== field.dateValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tif (save || !field.id) {\n\t\t\t\t\tdb.entityValues.save({\n\t\t\t\t\t\t...field,\n\t\t\t\t\t\tid: undefined,\n\t\t\t\t\t\tentityId: newEntity.id,\n\t\t\t\t\t\tentityFieldId: entityField?.id,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/${entityType?.key}`)\n\t\t},\n\t})\n\n\tconst title = mode === 'create' ? `Create ${entityType?.plural}` : `Edit ${entityType?.plural}`\n\n\treturn (\n\t\t<Form context={formContext}>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: `/${entityType?.key}`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Stack>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t{fields.map((field) =>\n\t\t\t\t\t\t\t\tfield.type === 'string' ? (\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tkey={field.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field.key}.stringValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field.type === 'number' ? (\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tkey={field.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field.key}.numberValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field.name}\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field.type === 'date' ? (\n\t\t\t\t\t\t\t\t\t<FormDate\n\t\t\t\t\t\t\t\t\t\tkey={field.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field.key}.dateValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field.type === 'boolean' ? (\n\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\tkey={field.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field.key}.booleanValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field.type === 'option' ? (\n\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\tkey={field.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field.key}.stringValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field.name}\n\t\t\t\t\t\t\t\t\t\toptions={field.options.map((x) => ({ label: x, value: x }))}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</Card>\n\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\tdisabled: formContext.isSubmitting,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageContent>\n\t\t</Form>\n\t)\n}\n\nexport default EntityForm\n","import React, { FC } from 'react'\nimport { useLocation, navigate, RouteComponentProps } from '@reach/router'\nimport { MailIcon, AcademicCapIcon, CubeIcon, PuzzleIcon, DocumentTextIcon, CogIcon } from '@heroicons/react/outline'\n\nexport const links = [\n\t{\n\t\ttitle: 'Entity Types',\n\t\tto: '/settings/entity-types',\n\t\ticon: <CubeIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Roles',\n\t\tto: `/settings/roles`,\n\t\ticon: <AcademicCapIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Templates',\n\t\tto: `/settings/templates`,\n\t\ticon: <DocumentTextIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Notifications',\n\t\tto: '/settings/notifications',\n\t\ticon: <MailIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Modules',\n\t\tto: '/settings/modules',\n\t\ticon: <PuzzleIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Site Settings',\n\t\tto: '/settings/site-settings',\n\t\ticon: <CogIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n]\n\nconst Admin: FC<RouteComponentProps> = ({ children }) => {\n\tconst location = useLocation()\n\n\tif (location.pathname === '/settings') {\n\t\tnavigate(links[0].to)\n\t\treturn null\n\t}\n\n\treturn <>{children}</>\n}\n\nexport default Admin\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { isAnchorRouteConfig, isLinkRouteConfig, isNotNone, RouteConfig } from '@primer/types'\nimport { LinkGetProps, Link } from '@reach/router'\nimport { ExternalLinkIcon } from '@heroicons/react/outline'\nimport Tooltip from './Tooltip'\n\ntype IntentValue = 'primary' | 'secondary' | 'white'\n\nconst intents = {\n\tprimary: {\n\t\twrapper: 'bg-gray-800 dark:bg-gray-900 antialiased',\n\t\tlink: {\n\t\t\tactive: 'text-white bg-gray-700 dark:bg-gray-700 focus:bg-gray-900 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-200 hover:text-white hover:bg-gray-900 focus:text-white focus:bg-gray-700 dark:hover:bg-gray-800',\n\t\t},\n\t\ttoggle: 'text-gray-400 hover:text-gray-300 hover:bg-gray-700',\n\t},\n\tsecondary: {\n\t\twrapper: 'bg-white dark:bg-gray-700 antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-primary-900 dark:text-gray-100 bg-primary-100 dark:bg-gray-800 focus:bg-gray-200 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-600 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-200 dark:hover:bg-gray-600 hover:bg-primary-50 focus:text-gray-900 focus:bg-gray-100 dark:focus:bg-gray-800 dark:focus:text-gray-200',\n\t\t},\n\t\ttoggle: 'text-gray-400 hover:text-gray-500 hover:bg-gray-100',\n\t},\n\twhite: {\n\t\twrapper: 'bg-white antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-gray-900 bg-gray-50 focus:bg-gray-200',\n\t\t\tinactive: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:text-gray-900 focus:bg-gray-100',\n\t\t},\n\t\ttoggle: 'text-gray-400 hover:text-gray-500 hover:bg-gray-100',\n\t},\n}\n\ninterface NavListProps {\n\tlinks: RouteConfig[]\n\tintent?: IntentValue\n\tmin?: boolean\n\tclassName?: ClassValue\n}\n\nconst NavList: FC<NavListProps> = ({ links, intent = 'secondary', min = false, className = null }) => {\n\treturn (\n\t\t<nav className={clsx('space-y-1', className)}>\n\t\t\t{links.filter(isNotNone).map((link, i) => (\n\t\t\t\t<NavLink key={i} link={link} intent={intent} min={min} />\n\t\t\t))}\n\t\t</nav>\n\t)\n}\n\ninterface NavLinkProps {\n\tlink: RouteConfig\n\tintent: IntentValue\n\tmin?: boolean\n}\n\nconst NavLink: FC<NavLinkProps> = ({ link, intent, min = false }) => {\n\treturn (\n\t\t<div>\n\t\t\t{link && (\n\t\t\t\t<Tooltip message={link.tooltip || link.title} enabled={min} intent=\"dark\">\n\t\t\t\t\t<MenuLink route={link} intent={intent}>\n\t\t\t\t\t\t<div className=\"opacity-75 pointer-events-none mr-3\">{link.icon}</div>\n\t\t\t\t\t\t<div className={clsx(min && 'lg:hidden')}>{link.title}</div>\n\t\t\t\t\t</MenuLink>\n\t\t\t\t</Tooltip>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nconst getProps =\n\t(route: RouteConfig, intent: IntentValue) =>\n\t({ isCurrent, isPartiallyCurrent }: LinkGetProps) => {\n\t\treturn (route.exact ? isCurrent : isPartiallyCurrent)\n\t\t\t? {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center p-2 text-sm font-medium leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t\t\t\tintents[intent].link.active\n\t\t\t\t\t),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center p-2 text-sm font-medium leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t\t\t\tintents[intent].link.inactive\n\t\t\t\t\t),\n\t\t\t  }\n\t}\n\nconst MenuLink = ({ route, intent, children }: { route: RouteConfig; intent: IntentValue; children: ReactNode }) => {\n\treturn isAnchorRouteConfig(route) ? (\n\t\t<a\n\t\t\thref={route.url}\n\t\t\tclassName={clsx(\n\t\t\t\t'group flex items-center justify-center p-2 text-sm leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t\tintents[intent].link.inactive,\n\t\t\t\t'justify-center'\n\t\t\t)}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noopener noreferrer\"\n\t\t>\n\t\t\t<div className=\"flex items-center justify-center\">{children}</div>\n\n\t\t\t<div className=\"flex-1 flex justify-end\">\n\t\t\t\t<ExternalLinkIcon className=\"opacity-25 w-4 h-4\" />\n\t\t\t</div>\n\t\t</a>\n\t) : isLinkRouteConfig(route) ? (\n\t\t<Link to={`${process.env.PUBLIC_URL}${route.to}`} getProps={getProps(route, intent)}>\n\t\t\t{children}\n\t\t</Link>\n\t) : null\n}\n\nexport default NavList\n","import React, { FC, ReactNode } from 'react'\nimport { RouteConfig } from '@primer/types'\nimport NavList from '@primer/components/NavList'\nimport PageContent from '@primer/components/PageContent'\nimport { CardWrapper } from '@primer/components/Card'\nimport clsx, { ClassValue } from 'clsx'\nimport useLocalStorage from '@primer/hooks/useLocalStorage'\n\ninterface PageNavbarProps {\n\tlinks: RouteConfig[]\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nconst PageNavbar: FC<PageNavbarProps> = ({ links, className, children }) => {\n\tconst [min, setMin] = useLocalStorage('case-min', false)\n\n\treturn (\n\t\t<PageContent className={className}>\n\t\t\t<CardWrapper className=\"relative\">\n\t\t\t\t<div className=\"max-w-full\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'grid grid-cols-1 max-w-full',\n\t\t\t\t\t\t\tmin ? 'md:grid-cols-[62px,minmax(0,1fr)]' : 'md:grid-cols-[20rem,minmax(0,1fr)]'\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"p-3\">\n\t\t\t\t\t\t\t<NavList links={links} min={min} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"relative mt-6 lg:mt-0 border-t lg:border-t-0 lg:border-l border-gray-200 dark:border-gray-600\">\n\t\t\t\t\t\t\t<div className=\"absolute top-0 left-0 h-full group z-10\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'w-1 -ml-0.5 h-full bg-primary-600 opacity-0 group-hover:opacity-100 transition-opacity duration-100 ease-linear',\n\t\t\t\t\t\t\t\t\t\tmin ? 'cursor-right' : 'cursor-left'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => setMin(!min)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>{children}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CardWrapper>\n\t\t</PageContent>\n\t)\n}\n\nexport default PageNavbar\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ntype SizeType = 'sm' | 'md'\n\nconst sizes = {\n\tsm: 'px-2 py-0.5 -my-0.5 text-xs leading-5',\n\tmd: 'px-2.5 py-0.5 -my-0.5 text-sm leading-6',\n}\n\ntype ThemeType = 'gray' | 'red' | 'green' | 'yellow' | 'green' | 'teal' | 'blue' | 'indigo' | 'purple' | 'pink'\n\nexport const themes = {\n\tgray: 'bg-gray-400 text-gray-800 dark:bg-gray-500 dark:text-gray-300 bg-opacity-25 dark:bg-opacity-25',\n\tred: 'bg-red-400 text-red-800 dark:bg-red-500 dark:text-red-300 bg-opacity-25 dark:bg-opacity-25',\n\torange: 'bg-green-400 text-green-800 dark:bg-green-500 dark:text-green-300 bg-opacity-25 dark:bg-opacity-25',\n\tyellow: 'bg-yellow-400 text-yellow-800 dark:bg-yellow-500 dark:text-yellow-300 bg-opacity-25 dark:bg-opacity-25',\n\tgreen: 'bg-green-400 text-green-800 dark:bg-green-500 dark:text-green-300 bg-opacity-25 dark:bg-opacity-25',\n\tteal: 'bg-teal-400 text-teal-800 dark:bg-teal-500 dark:text-teal-300 bg-opacity-25 dark:bg-opacity-25',\n\tblue: 'bg-blue-400 text-blue-800 dark:bg-blue-500 dark:text-blue-300 bg-opacity-25 dark:bg-opacity-25',\n\tindigo: 'bg-indigo-400 text-indigo-800 dark:bg-indigo-500 dark:text-indigo-300 bg-opacity-25 dark:bg-opacity-25',\n\tpurple: 'bg-purple-400 text-purple-800 dark:bg-purple-500 dark:text-purple-300 bg-opacity-25 dark:bg-opacity-25',\n\tpink: 'bg-pink-400 text-pink-800 dark:bg-pink-500 dark:text-pink-300 bg-opacity-25 dark:bg-opacity-25',\n}\n\nexport interface BadgeProps {\n\tcolor: ThemeType\n\tsize?: SizeType\n\ticon?: ReactNode\n\tclassName?: ClassValue\n\tchildren?: ReactNode\n}\n\nconst Badge: FC<BadgeProps> = ({ color, size = 'md', icon, className, children }) => {\n\treturn (\n\t\t<span\n\t\t\tclassName={clsx(`inline-flex items-center font-medium`, themes[color], sizes[size], 'rounded', className)}\n\t\t>\n\t\t\t{icon !== undefined ? (\n\t\t\t\ticon\n\t\t\t) : (\n\t\t\t\t<svg className=\"mr-2 h-2 w-2\" fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t\t<circle cx=\"4\" cy=\"4\" r=\"3\" />\n\t\t\t\t</svg>\n\t\t\t)}\n\t\t\t{children}\n\t\t</span>\n\t)\n}\n\nexport default Badge\n","import React, { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport Actions from './Actions'\nimport { ActionType, isNotNone } from '@primer/types'\nimport ButtonSpacer from './ButtonSpacer'\n\ninterface SectionHeaderProps {\n\ttitle: ReactNode\n\tsubtitle?: ReactNode\n\tactions?: ActionType[]\n\tclassName?: ClassValue\n}\n\nconst SectionHeader: FC<SectionHeaderProps> = ({ title, subtitle, actions, className }) => (\n\t<div className={clsx('flex justify-between items-center flex-wrap sm:flex-nowrap', className)}>\n\t\t<div>\n\t\t\t<h3 className=\"text-lg leading-5 font-medium text-gray-900 dark:text-white\">{title}</h3>\n\t\t\t{subtitle && <p className=\"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-300\">{subtitle}</p>}\n\t\t</div>\n\t\t<div className=\"flex-shrink-0\">\n\t\t\t{actions && actions.filter(isNotNone).length > 0 ? <Actions actions={actions} /> : <ButtonSpacer />}\n\t\t</div>\n\t</div>\n)\n\nexport default SectionHeader\n","import React, { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport {\n\tBeakerIcon,\n\tCheckIcon,\n\tDotsHorizontalIcon,\n\tPencilIcon,\n\tPlusIcon,\n\tTrashIcon,\n\tXIcon,\n} from '@heroicons/react/outline'\nimport Badge from '@primer/components/Badge'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport db from 'db'\nimport { NotificationModel } from 'types/models'\nimport { confirm } from '@primer/alerts'\n\nconst Notifications: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<NotificationModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Enabled',\n\t\t\t\tvalue: (x) => (\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tcolor={x.enabled ? 'green' : 'red'}\n\t\t\t\t\t\ticon={x.enabled ? <CheckIcon className=\"w-5 h-5\" /> : <XIcon className=\"w-5 h-5\" />}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/notifications/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.notifications.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Notifications\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Notification',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/notifications/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.notifications.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Notifications\n","import React, { FC } from 'react'\n\ninterface FormLabelProps {\n\tonClick?: () => void\n\tisOptional?: boolean\n}\n\nconst FormLabel: FC<FormLabelProps> = ({ children, isOptional, onClick }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default\"\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t{children && (\n\t\t\t\t<>\n\t\t\t\t\t{children}{' '}\n\t\t\t\t\t{isOptional && (\n\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default FormLabel\n","import React, { FC, ReactNode } from 'react'\nimport clsx from 'clsx'\nimport { ActionType } from '@primer/types'\nimport Actions from '@primer/components/Actions'\n\ninterface FormSectionProps {\n\ttitle: ReactNode\n\tsubtitle?: ReactNode\n\tactions?: ActionType | ActionType[]\n\tvertical?: boolean\n\tchildren: ReactNode\n}\n\nconst FormSection: FC<FormSectionProps> = ({ title, subtitle, actions, vertical = false, children }) => {\n\treturn (\n\t\t<div className={clsx(vertical ? 'flex flex-col space-y-6' : 'md:grid md:grid-cols-3 md:gap-6')}>\n\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t<h3 className=\"-mt-1 text-lg font-medium leading-6 text-gray-900 dark:text-white\">{title}</h3>\n\t\t\t\t{subtitle && <div className=\"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-300\">{subtitle}</div>}\n\t\t\t\t{actions && (\n\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"mt-5 md:mt-0 md:col-span-2\">{children}</div>\n\t\t</div>\n\t)\n}\n\nexport default FormSection\n","import React, { FC, ChangeEvent } from 'react'\nimport { Link, navigate } from '@reach/router'\nimport { TabType, isLinkTabType, isButtonTabType, None, isNotNone } from '@primer/types'\nimport Badge from './Badge'\nimport clsx, { ClassValue } from 'clsx'\n\nconst themes = {\n\tdark: {\n\t\tborder: 'border-b border-gray-600',\n\t\ttab: '',\n\t\ttabInactive:\n\t\t\t'whitespace-nowrap py-2 border-b border-transparent font-medium text-sm leading-5 text-white hover:text-gray-100 hover:border-gray-500 focus:outline-none focus:text-gray-100 focus:border-gray-300 antialiased',\n\t\ttabActive:\n\t\t\t'whitespace-nowrap py-2 border-b border-indigo-500 font-medium text-sm leading-5 text-indigo-300 focus:outline-none focus:text-indigo-600 focus:border-indigo-400 antialiased',\n\t},\n\tlight: {\n\t\tborder: 'border-b border-gray-300 dark:border-gray-600 font-medium text-sm leading-5',\n\t\ttab: 'whitespace-nowrap py-4 px-4 border-b -mb-px',\n\t\ttabInactive:\n\t\t\t'border-transparent text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300',\n\t\ttabActive:\n\t\t\t'border-indigo-600 text-indigo-600 dark:border-white dark:text-white focus:outline-none focus:text-indigo-800 dark:focus:text-indigo-400 focus:border-indigo-700',\n\t},\n\tcard: {\n\t\tborder: '',\n\t\ttab: 'whitespace-nowrap px-4 py-3 dark:bg-gray-700 rounded-tl-md rounded-tr-md px-4 mr-2 font-medium text-sm leading-5 shadow',\n\t\ttabInactive:\n\t\t\t'bg-gray-100 dark:bg-gray-750 hover:bg-white transition transition-background text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 relative z-10',\n\t\ttabActive:\n\t\t\t'bg-white text-black dark:text-white focus:outline-none focus:text-indigo-800 focus:border-indigo-700 relative z-20',\n\t},\n\tbuttons: {\n\t\tborder: '',\n\t\ttab: 'whitespace-nowrap px-4 py-2 rounded-md mr-2 font-medium text-sm leading-5',\n\t\ttabInactive:\n\t\t\t'bg-gray-200 hover:bg-white transition transition-background text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300',\n\t\ttabActive:\n\t\t\t'bg-gray-700 text-white dark:text-white focus:outline-none focus:text-indigo-800 focus:border-indigo-700',\n\t},\n\tlinks: {\n\t\tborder: '',\n\t\ttab: 'whitespace-nowrap px-4 py-2 rounded-md mr-2 font-medium text-sm leading-5',\n\t\ttabInactive:\n\t\t\t'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none focus:text-gray-700',\n\t\ttabActive: 'text-indigo-600 dark:text-indigo-300 focus:outline-none focus:text-indigo-800',\n\t},\n}\n\ninterface TabsProps {\n\titems: (TabType | None)[]\n\tactiveIndex?: number\n\ttheme?: 'light' | 'dark' | 'card' | 'buttons' | 'links'\n\tgetActiveIndex?: (x: TabType[]) => number\n\tclassName?: ClassValue\n}\n\nconst Tabs: FC<TabsProps> = ({ items, theme = 'dark', activeIndex, getActiveIndex, className }) => {\n\tlet tabs = items.filter(isNotNone)\n\tlet index = getActiveIndex !== undefined ? getActiveIndex(tabs) : activeIndex || 0\n\n\tconst handleSelect = (e: ChangeEvent<HTMLSelectElement>) => {\n\t\tlet index = +e.target.value\n\t\tlet item = tabs[index]\n\n\t\tif (isLinkTabType(item)) {\n\t\t\tnavigate(item.to, { state: item.state, replace: item.replace })\n\t\t} else if (isButtonTabType(item)) {\n\t\t\titem.onClick(item, index)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div className=\"sm:hidden\">\n\t\t\t\t<select\n\t\t\t\t\tclassName=\"form-input block w-full dark:bg-gray-800 dark:placeholder-gray-400 dark:border-gray-600\"\n\t\t\t\t\tvalue={index}\n\t\t\t\t\tonChange={handleSelect}\n\t\t\t\t>\n\t\t\t\t\t{tabs.map((item, i) => (\n\t\t\t\t\t\t<option key={i} value={i}>\n\t\t\t\t\t\t\t{item.simpleTitle || item.title}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"hidden sm:block py-2\">\n\t\t\t\t<div className={themes[theme].border}>\n\t\t\t\t\t<div className=\"flex items-end overflow-x-auto px-2 -m-2 overflow-y-hidden -mb-2\">\n\t\t\t\t\t\t{tabs.map((item, i) =>\n\t\t\t\t\t\t\tisLinkTabType(item) ? (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${item.to}`}\n\t\t\t\t\t\t\t\t\tstate={item.state}\n\t\t\t\t\t\t\t\t\treplace={item.replace}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\tthemes[theme].tab,\n\t\t\t\t\t\t\t\t\t\t\ti === index ? themes[theme].tabActive : themes[theme].tabInactive\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t\t\t\t\t{item.errors && item.errors > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge color=\"red\" className=\"ml-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{item.errors}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : isButtonTabType(item) ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\tthemes[theme].tab,\n\t\t\t\t\t\t\t\t\t\t(item.key !== undefined ? item.key : i) === index\n\t\t\t\t\t\t\t\t\t\t\t? themes[theme].tabActive\n\t\t\t\t\t\t\t\t\t\t\t: themes[theme].tabInactive\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => item.onClick(item, i)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t\t\t\t{item.errors && item.errors > 0 && (\n\t\t\t\t\t\t\t\t\t\t<Badge color=\"red\" className=\"ml-2\">\n\t\t\t\t\t\t\t\t\t\t\t{item.errors}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Tabs\n","import { CalendarIcon, CursorClickIcon, RefreshIcon } from '@heroicons/react/outline'\nimport { ordinal } from '@primer/utils/funcs'\nimport React from 'react'\n\nexport const types = [\n\t{\n\t\tlabel: (\n\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t<CursorClickIcon className=\"w-5 h-5 text-gray-500\" />\n\t\t\t\t<div>Action</div>\n\t\t\t</div>\n\t\t),\n\t\tvalue: 'action',\n\t},\n\t{\n\t\tlabel: (\n\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t<RefreshIcon className=\"w-5 h-5 text-gray-500\" />\n\t\t\t\t<div>Repeat</div>\n\t\t\t</div>\n\t\t),\n\t\tvalue: 'repeat',\n\t},\n\t{\n\t\tlabel: (\n\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t<CalendarIcon className=\"w-5 h-5 text-gray-500\" />\n\t\t\t\t<div>Date</div>\n\t\t\t</div>\n\t\t),\n\t\tvalue: 'date',\n\t},\n]\n\nexport const repeatOptions = [\n\t{ label: 'day', value: 'day' },\n\t{ label: 'week', value: 'week' },\n\t{ label: 'month', value: 'month' },\n\t{ label: 'year', value: 'year' },\n]\n\nexport const weekOnOptions = [\n\t{ label: 'monday', value: 'monday' },\n\t{ label: 'tuesday', value: 'tuesday' },\n\t{ label: 'wednesday', value: 'wednesday' },\n\t{ label: 'thursday', value: 'thursday' },\n\t{ label: 'friday', value: 'friday' },\n\t{ label: 'saturday', value: 'saturday' },\n\t{ label: 'sunday', value: 'sunday' },\n]\n\nexport const yearInOptions = [\n\t{ label: 'january', value: 'january' },\n\t{ label: 'february', value: 'february' },\n\t{ label: 'march', value: 'march' },\n\t{ label: 'april', value: 'april' },\n\t{ label: 'may', value: 'may' },\n\t{ label: 'june', value: 'june' },\n\t{ label: 'july', value: 'july' },\n\t{ label: 'august', value: 'august' },\n\t{ label: 'september', value: 'september' },\n\t{ label: 'october', value: 'october' },\n\t{ label: 'november', value: 'november' },\n\t{ label: 'december', value: 'december' },\n]\n\nexport const generateMonthList = (length: number) =>\n\tnew Array(length).fill(null).map((_, i) => ({ label: ordinal(i + 1), value: i + 1 }))\n\nexport const getMonthOnOptions = (str: string) => {\n\t// @ts-ignore\n\treturn {\n\t\tjanuary: generateMonthList(31),\n\t\tfebruary: generateMonthList(28),\n\t\tmarch: generateMonthList(31),\n\t\tapril: generateMonthList(30),\n\t\tmay: generateMonthList(31),\n\t\tjune: generateMonthList(30),\n\t\tjuly: generateMonthList(31),\n\t\taugust: generateMonthList(31),\n\t\tseptember: generateMonthList(30),\n\t\toctober: generateMonthList(31),\n\t\tnovember: generateMonthList(30),\n\t\tdecember: generateMonthList(31),\n\t}[str]\n}\n\nexport const entityTiming = [\n\t{ label: 'minute', value: 'minute' },\n\t{ label: 'hour', value: 'hour' },\n\t{ label: 'day', value: 'day' },\n\t{ label: 'week', value: 'week' },\n\t{ label: 'month', value: 'month' },\n\t{ label: 'year', value: 'year' },\n]\n\nexport const entityTimingType = [\n\t{ label: 'before', value: 'before' },\n\t{ label: 'after', value: 'after' },\n]\n\nexport const getRuleOperatorOptions = (str: string) => {\n\t// @ts-ignore\n\treturn {\n\t\tdate: [\n\t\t\t{ label: 'is before', value: 'isBefore' },\n\t\t\t{ label: 'is after', value: 'isAfter' },\n\t\t\t{ label: 'is same minute as', value: 'sameMinute' },\n\t\t\t{ label: 'is same hour as', value: 'sameHour' },\n\t\t\t{ label: 'is same day as', value: 'sameDay' },\n\t\t],\n\t\tstring: [\n\t\t\t{ label: 'is', value: 'stringIs' },\n\t\t\t{ label: 'is not', value: 'stringNot' },\n\t\t\t{ label: 'includes', value: 'stringIncludes' },\n\t\t\t{ label: \"doesn't include\", value: 'stringNotIncludes' },\n\t\t\t{ label: 'starts with', value: 'stringStarts' },\n\t\t\t{ label: 'ends with', value: 'stringEnds' },\n\t\t\t{ label: 'is empty', value: 'stringEmpty' },\n\t\t\t{ label: 'is not empty', value: 'stringNotEmpty' },\n\t\t],\n\t\tnumber: [\n\t\t\t{ label: 'is', value: 'numberEquals' },\n\t\t\t{ label: 'is greater than', value: 'numberGT' },\n\t\t\t{ label: 'is at least', value: 'numberGTE' },\n\t\t\t{ label: 'is lesser than', value: 'numberLT' },\n\t\t\t{ label: 'is at most', value: 'numberLTE' },\n\t\t],\n\t\tboolean: [\n\t\t\t{ label: 'is true', value: 'true' },\n\t\t\t{ label: 'is false', value: 'false' },\n\t\t],\n\t\tusers: [\n\t\t\t{ label: 'includes', value: 'collectionIncludes' },\n\t\t\t{ label: \"doesn't include\", value: 'collectionNotIncludes' },\n\t\t],\n\t\tuser: [\n\t\t\t{ label: 'is', value: 'stringIs' },\n\t\t\t{ label: 'is not', value: 'stringNot' },\n\t\t],\n\t\toption: [\n\t\t\t{ label: 'is', value: 'stringIs' },\n\t\t\t{ label: 'is not', value: 'stringNot' },\n\t\t],\n\t}[str]\n}\n","import { useCallback, useRef, useEffect } from 'react'\nimport { FormikContextType } from 'formik'\nimport update from 'immutability-helper'\n\n// research into infer, keyof, etc etc\n// https://itnext.io/typescript-extract-unpack-a-type-from-a-generic-baca7af14e51\n// https://artsy.github.io/blog/2018/11/21/conditional-types-in-typescript/\n// https://stackoverflow.com/questions/58666092/get-typescript-interface-property-type-given-property-name-only\n// https://stackoverflow.com/questions/45546159/type-test-cannot-be-used-to-index-type-t\n// https://javascript.plainenglish.io/typescript-infer-keyword-explained-76f4a7208cb0\ntype UnpackArrayType<T> = T extends (infer R)[] ? R : T\n\n// problem: https://github.com/formium/formik/issues/1476\n// solution: https://gist.github.com/joshsalverda/d808d92f46a7085be062b2cbde978ae6\nconst useFieldArray = <T, K extends keyof T>(fieldName: K | string, context: FormikContextType<T>) => {\n\tlet setFieldValue = context.setFieldValue\n\n\tlet field = context.getFieldProps<UnpackArrayType<T[K]>[]>(fieldName)\n\tlet meta = context.getFieldMeta(field.name)\n\n\tlet fieldArray = useRef(field.value)\n\n\tuseEffect(() => {\n\t\tfieldArray.current = field.value\n\t}, [field.value])\n\n\tconst push = useCallback(\n\t\t(value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$push: [value],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst swap = useCallback(\n\t\t(indexA, indexB) => {\n\t\t\tconst swapA = fieldArray.current[indexA]\n\t\t\tconst swapB = fieldArray.current[indexB]\n\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [\n\t\t\t\t\t[indexA, 1, swapB],\n\t\t\t\t\t[indexB, 1, swapA],\n\t\t\t\t],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst move = useCallback(\n\t\t(from, to) => {\n\t\t\tconst toMove = fieldArray.current[from]\n\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [\n\t\t\t\t\t[from, 1],\n\t\t\t\t\t[to, 0, toMove],\n\t\t\t\t],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst insert = useCallback(\n\t\t(index, value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [[index, 0, value]],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst unshift = useCallback(\n\t\t(value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$unshift: [value],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t\treturn fieldArray.current.length\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst remove = useCallback(\n\t\t(index) => {\n\t\t\tconst removedItem = fieldArray.current[index]\n\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [[index, 1]],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t\treturn removedItem\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst pop = useCallback(() => {\n\t\tconst lastIndex = fieldArray.current.length - 1\n\t\tconst poppedItem = fieldArray.current[lastIndex]\n\n\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t$splice: [[lastIndex, 1]],\n\t\t})\n\n\t\tsetFieldValue(field.name, fieldArray.current)\n\t\treturn poppedItem\n\t}, [field.name, setFieldValue])\n\n\tconst replace = useCallback(\n\t\t(index, value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [[index, 1, value]],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\treturn {\n\t\tfield,\n\t\t// this is kind of weird, if the type of this field in your form is an array, then cool.\n\t\t// If you're trying to use useFieldArray on a field in your form that is not an array, then, you're an idiot\n\t\t// and the \"values\" property will be incorrectly typed as an arrayed version of the fields type\n\t\tvalues: field.value || [],\n\t\tmeta,\n\t\tarrayHelpers: {\n\t\t\tpush,\n\t\t\tswap,\n\t\t\tmove,\n\t\t\tinsert,\n\t\t\tunshift,\n\t\t\tremove,\n\t\t\tpop,\n\t\t\treplace,\n\t\t},\n\t}\n}\n\nexport default useFieldArray\n","import React, { forwardRef } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport ReactQuill from 'react-quill'\nimport Actions from '../Actions'\nimport { ActionType } from '@primer/types'\nimport { useField, useFormikContext } from 'formik'\nimport { FormValidations, validate } from './utils'\n\nexport const defaultEditorModules = {\n\ttoolbar: [\n\t\t[{ header: [1, 2, false] }],\n\t\t['bold', 'italic', { color: [] }],\n\t\t[{ list: 'ordered' }, { list: 'bullet' }],\n\t\t[{ align: [] }],\n\t\t['clean'],\n\t],\n}\n\ninterface FormEditorProps {\n\tname: string\n\tlabel?: string\n\tclassName?: ClassValue\n\tvalidations?: FormValidations\n\thideOptional?: boolean\n\tdisabled?: boolean\n\tmodules?: any\n\tactions?: ActionType[]\n}\n\nconst FormEditor = forwardRef<ReactQuill, FormEditorProps>(\n\t({ name, label, className, validations = {}, hideOptional, disabled, modules, actions }, ref) => {\n\t\tconst formik = useFormikContext()\n\n\t\tconst [{ value }, { error, touched }, { setValue, setTouched }] = useField({\n\t\t\tname,\n\t\t\tvalidate: validate(validations),\n\t\t})\n\n\t\tconst isRequired = !!validations.required\n\n\t\treturn (\n\t\t\t<div className={clsx(className)}>\n\t\t\t\t{label && (\n\t\t\t\t\t<div className=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default\">\n\t\t\t\t\t\t{label}{' '}\n\t\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className={clsx('relative h-full', label && 'mt-1')}>\n\t\t\t\t\t{actions && (\n\t\t\t\t\t\t<div className=\"absolute top-0 right-0 mr-1.5 h-11 flex items-center\">\n\t\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ReactQuill\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tvalue={value || ''}\n\t\t\t\t\t\tonChange={(content) => {\n\t\t\t\t\t\t\t// setTouched(true)\n\t\t\t\t\t\t\tsetValue(content)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonBlur={(e) => {\n\t\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tmodules={modules || defaultEditorModules}\n\t\t\t\t\t\treadOnly={disabled || formik.isSubmitting}\n\t\t\t\t\t\tclassName=\"h-full\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t\t</div>\n\t\t)\n\t}\n)\n\nexport default FormEditor\n","import React, { Dispatch, FC, ReactNode, SetStateAction, useState } from 'react'\nimport clsx from 'clsx'\n\ninterface ExpandableProps {\n\tchildren: (setOpen: Dispatch<SetStateAction<boolean>>, isExpanded: boolean) => ReactNode\n}\n\nconst Expandable: FC<ExpandableProps> = ({ children }) => {\n\tconst [isExpanded, setExpanded] = useState(false)\n\n\treturn (\n\t\t<div className={clsx(isExpanded ? 'fixed z-[9999] w-screen h-screen' : 'static', 'top-0 left-0')}>\n\t\t\t{children(setExpanded, isExpanded)}\n\t\t</div>\n\t)\n}\n\nexport default Expandable\n","import React from 'react'\nimport { ChevronLeftIcon } from '@heroicons/react/outline'\nimport { ActionType } from '@primer/types'\nimport db from 'db'\n\nexport const templateTagActions = (insertFn: (x: string) => void, level: string): ActionType[] => {\n\tlet userEntityType = db.entityTypes.find((x) => x.key === 'user')\n\n\treturn [\n\t\t{\n\t\t\ttitle: 'Recipient',\n\t\t\ticon: <ChevronLeftIcon className=\"w-4 h-4\" />,\n\t\t\ticonSide: 'left',\n\t\t\thoverable: true,\n\t\t\tplacement: 'left-start',\n\t\t\tactions: db.entityFields\n\t\t\t\t.all((x) => x.entityTypeId === userEntityType?.id)\n\t\t\t\t.map((x) => ({\n\t\t\t\t\ttitle: x.name,\n\t\t\t\t\tonClick: () => insertFn(`{{recipient-${x.key}}}`),\n\t\t\t\t})),\n\t\t},\n\t\t...db.entityTypes.all().map<ActionType>((entity) => ({\n\t\t\ttitle: entity.name,\n\t\t\ticon: <ChevronLeftIcon className=\"w-4 h-4\" />,\n\t\t\ticonSide: 'left',\n\t\t\thoverable: true,\n\t\t\tplacement: 'left-start',\n\t\t\tactions: db.entityFields\n\t\t\t\t.all((x) => x.entityTypeId === entity.id)\n\t\t\t\t.map((x) => ({\n\t\t\t\t\ttitle: x.name,\n\t\t\t\t\tonClick: () => insertFn(`{{${entity.key}-${x.key}}}`),\n\t\t\t\t})),\n\t\t})),\n\t]\n}\n","import React, { FC, ReactNode, useRef } from 'react'\nimport clsx from 'clsx'\nimport ReactQuill from 'react-quill'\nimport { ArrowsExpandIcon, ChevronDownIcon, XIcon } from '@heroicons/react/outline'\nimport { FormValidations } from '@primer/components/Form2/utils'\nimport FormEditor from '@primer/components/Form2/FormEditor'\nimport FormLabel from '@primer/components/Form2/FormLabel'\nimport Expandable from '@primer/components/Expandable'\nimport { templateTagActions } from 'pages/Settings/Templates/utils/actions'\n\ninterface FormTemplateEditorProps {\n\tname: string\n\tlabel?: ReactNode\n\tvalidations?: FormValidations\n\tfocus: string\n}\n\nconst FormTemplateEditor: FC<FormTemplateEditorProps> = ({ name, label, validations, focus }) => {\n\tconst ref = useRef<ReactQuill>(null)\n\n\tconst insertTag = (str: string) => {\n\t\tlet editor = ref.current?.getEditor()\n\t\tlet selection = editor?.getSelection()\n\t\tlet text = editor?.getText()\n\n\t\tif (!editor || !text) return\n\n\t\tconst index = selection?.index\n\t\tconst length = selection?.length\n\n\t\tif (!index) {\n\t\t\teditor.insertText(editor.getText().length - 1, str)\n\t\t} else {\n\t\t\tif (length) editor.deleteText(index, length)\n\t\t\teditor.insertText(index, str)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Expandable>\n\t\t\t{(setExpanded, isExpanded) => (\n\t\t\t\t<div className={clsx(isExpanded && 'bg-white h-full')}>\n\t\t\t\t\t{!isExpanded && label && <FormLabel>{label}</FormLabel>}\n\n\t\t\t\t\t<FormEditor\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalidations={validations}\n\t\t\t\t\t\tclassName={clsx(!isExpanded && label && 'mt-1', isExpanded && 'h-full pb-10')}\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: 'Insert Tag',\n\t\t\t\t\t\t\t\ticon: <ChevronDownIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\t\t\tactions: templateTagActions(insertTag, focus) || [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: isExpanded ? (\n\t\t\t\t\t\t\t\t\t<XIcon className=\"w-4 h-4 -mx-1\" />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ArrowsExpandIcon className=\"w-4 h-4 -mx-1\" />\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\t\t\tonClick: () => setExpanded((x) => !x),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Expandable>\n\t)\n}\n\nexport default FormTemplateEditor\n","import React, { FC, Fragment } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport Card from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Actions from '@primer/components/Actions'\nimport Stack from '@primer/components/Stack'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport FormLabel from '@primer/components/Form2/FormLabel'\nimport FormDate from '@primer/components/Form2/FormDate'\nimport FormSelect from '@primer/components/Form2/FormSelect'\nimport FormSection from '@primer/components/Form2/FormSection'\nimport FormToggle from '@primer/components/Form2/FormToggle'\nimport AutoHeight from '@primer/components/AutoHeight'\nimport Tabs from '@primer/components/Tabs'\nimport { ArrowLeftIcon, BeakerIcon, CheckIcon, ChevronDownIcon, PlusIcon } from '@heroicons/react/outline'\nimport { XIcon } from '@heroicons/react/solid'\nimport { onlyText } from 'react-children-utilities'\nimport { ActionType, isNotNone } from '@primer/types'\nimport {\n\ttypes,\n\trepeatOptions,\n\tyearInOptions,\n\tgetMonthOnOptions,\n\tweekOnOptions,\n\tgetRuleOperatorOptions,\n\tentityTiming,\n\tentityTimingType,\n} from './utils/options'\nimport useFieldArray from '@primer/components/Form2/useFieldArray'\nimport { watch, watchPath } from '@primer/components/Form2/utils'\nimport { useFormikContext } from 'formik'\nimport FormTemplateEditor from 'components/FormTemplateEditor'\nimport { templateTagActions } from 'pages/Settings/Templates/utils/actions'\nimport db from 'db'\nimport { confirm } from '@primer/alerts'\n\ninterface RuleType {\n\tentity: string\n\tfield: string\n\toperator: string\n\tvalue: string\n}\n\ninterface RuleGroupType {\n\trules: RuleType[]\n}\n\ninterface FormData {\n\tname: string\n\tenabled: boolean\n\tenabledDate: Date | undefined\n\tfocus: string\n\n\ttriggerType: string\n\ttriggerRepeat: number\n\n\ttriggerEvery: string\n\ttriggerYearIn: string\n\ttriggerMonthOn: string\n\ttriggerWeekOn: string\n\ttriggerDayAt: string\n\n\ttriggerAction: string\n\n\tobeyTriggerTiming: boolean\n\ttriggerTimingType: string\n\ttriggerTiming: string\n\ttriggerDate: string\n\n\truleGroups: RuleGroupType[]\n\n\tsubject: string\n\tcontent: string\n}\n\nconst NotificationForm: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst originalNotification = db.notifications.find(id)\n\n\tconst formContext = useForm<FormData>({\n\t\tinitialValues: {\n\t\t\tname: originalNotification?.name || '',\n\t\t\tfocus: originalNotification?.focus || '',\n\t\t\tenabled: originalNotification?.enabled || false,\n\t\t\tenabledDate: originalNotification?.enabledDate || undefined,\n\n\t\t\ttriggerType: originalNotification?.triggerType || 'action',\n\t\t\ttriggerRepeat: originalNotification?.triggerRepeat || 1,\n\n\t\t\ttriggerEvery: originalNotification?.triggerEvery || '',\n\t\t\ttriggerYearIn: originalNotification?.triggerYearIn || '',\n\t\t\ttriggerMonthOn: originalNotification?.triggerMonthOn || '',\n\t\t\ttriggerWeekOn: originalNotification?.triggerWeekOn || '',\n\t\t\ttriggerDayAt: originalNotification?.triggerDayAt || '',\n\n\t\t\ttriggerAction: originalNotification?.triggerAction || '',\n\n\t\t\tobeyTriggerTiming: originalNotification?.obeyTriggerTiming || true,\n\t\t\ttriggerTimingType: originalNotification?.triggerTimingType || '',\n\t\t\ttriggerTiming: originalNotification?.triggerTiming || '',\n\t\t\ttriggerDate: originalNotification?.triggerDate || '',\n\n\t\t\truleGroups: originalNotification?.ruleGroups || [],\n\n\t\t\tsubject: originalNotification?.subject || '',\n\t\t\tcontent: originalNotification?.content || '',\n\t\t},\n\t\tonSubmit: (formData) => {\n\t\t\tdb.notifications.save({\n\t\t\t\tid: uuid(),\n\t\t\t\t...(originalNotification || {}),\n\t\t\t\t...formData,\n\t\t\t})\n\n\t\t\tnavigate('/settings/notifications')\n\t\t},\n\t})\n\n\tconst {\n\t\tvalues: ruleGroups,\n\t\tarrayHelpers: { push: appendRuleGroup, remove: removeRuleGroup },\n\t} = useFieldArray('ruleGroups', formContext)\n\n\t// obeyTriggerTiming,\n\n\tconst triggerType = watch(formContext, 'triggerType')\n\tconst triggerRepeat = watch(formContext, 'triggerRepeat')\n\tconst triggerEvery = watch(formContext, 'triggerEvery')\n\tconst triggerYearIn = watch(formContext, 'triggerYearIn')\n\tconst triggerMonthOn = watch(formContext, 'triggerMonthOn')\n\tconst triggerWeekOn = watch(formContext, 'triggerWeekOn')\n\tconst triggerTiming = watch(formContext, 'triggerTiming')\n\tconst triggerTimingType = watch(formContext, 'triggerTimingType')\n\tconst enabled = watch(formContext, 'enabled')\n\tconst subject = watch(formContext, 'subject')\n\tconst focus = watch(formContext, 'focus')\n\n\tconst activeIndex: number = types.findIndex((x) => x.value === triggerType)\n\n\tconst title = mode === 'create' ? 'Create Notification' : 'Edit Notification'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/notifications',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Stack dividers>\n\t\t\t\t\t\t<FormSection title=\"Details\" subtitle=\"Basic information about the notification\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t<FormLabel>Notification is about</FormLabel>\n\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\tname=\"focus\"\n\t\t\t\t\t\t\t\t\t\t\toptions={db.entityTypes.all().map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Focus is required' }}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-[150px]\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<FormToggle name=\"enabled\" label=\"Enabled\" />\n\n\t\t\t\t\t\t\t\t\t<AutoHeight show={!!enabled}>\n\t\t\t\t\t\t\t\t\t\t<FormDate name=\"enabledDate\" label=\"Enabled from\" />\n\t\t\t\t\t\t\t\t\t</AutoHeight>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Trigger\"\n\t\t\t\t\t\t\tsubtitle={\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<div>Choose how to trigger the notification</div>\n\t\t\t\t\t\t\t\t\t<ul className=\"list-disc pl-5 text-xs\">\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<strong>Action</strong>: When a certain action occurs within the platform\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<strong>Repeat</strong>: On a recurring schedule\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<strong>Date</strong>: Relative to a defined date\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"pl-2\">\n\t\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\t\tactiveIndex={activeIndex}\n\t\t\t\t\t\t\t\t\ttheme=\"card\"\n\t\t\t\t\t\t\t\t\titems={types.map((x, i) => ({\n\t\t\t\t\t\t\t\t\t\ttitle: <div className=\"flex items-center space-x-3\">{x.label}</div>,\n\t\t\t\t\t\t\t\t\t\tsimpleTitle: onlyText(x.label),\n\t\t\t\t\t\t\t\t\t\tonClick: () => formContext.setFieldValue('triggerType', x.value),\n\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"relative z-10\">\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Stack className={triggerType === 'action' ? '' : 'hidden'}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[300px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerAction\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={db.entityActions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all((x) => x.entityTypeId === focus)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// validations={{ required: 'Action is required' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select action...\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\n\t\t\t\t\t\t\t\t\t\t\t<Stack className={triggerType === 'repeat' ? '' : 'hidden'}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>Every</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[60px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerRepeat\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Every must be at least 1',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerEvery\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={repeatOptions.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx.label + ((triggerRepeat || 1) > 1 ? 's' : ''),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerEvery === 'year' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>in</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerYearIn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={yearInOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'Time is required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(triggerEvery === 'month' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(triggerEvery === 'year' && isNotNone(triggerYearIn))) && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>on the</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerMonthOn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerEvery === 'month'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetMonthOnOptions(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerYearIn || 'february'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) || []\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ).concat([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'last day',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: Infinity,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: getMonthOnOptions(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerYearIn || 'february'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ) || []\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'Time is required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerEvery === 'week' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>on</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerWeekOn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={weekOnOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'Time is required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(triggerEvery === 'day' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisNotNone(triggerWeekOn) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisNotNone(triggerMonthOn)) && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>at</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[130px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput name=\"triggerDayAt\" type=\"time\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\n\t\t\t\t\t\t\t\t\t\t\t<Stack className={triggerType === 'date' ? '' : 'hidden'}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[60px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerRepeat\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'min 1',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerTiming\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={entityTiming.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: x.label + ((triggerRepeat || 1) > 1 ? 's' : ''),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerTiming && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerTimingType\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={entityTimingType}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'required' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerTimingType && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerDate\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={db.entityFields\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(x) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx.entityTypeId === focus &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx.type === 'date'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'required' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Conditions\"\n\t\t\t\t\t\t\tsubtitle=\"Fine grained controls over if the notification gets sent\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t{ruleGroups.map((x, i) => (\n\t\t\t\t\t\t\t\t\t\t<Fragment key={i}>\n\t\t\t\t\t\t\t\t\t\t\t<RuleGroup path={`ruleGroups[${i}]`} remove={() => removeRuleGroup(i)} />\n\t\t\t\t\t\t\t\t\t\t\t{i !== ruleGroups.length - 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium px-4 py-1 rounded-full bg-indigo-600 text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOR\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add condition set',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => appendRuleGroup({ rules: [] }),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Template\"\n\t\t\t\t\t\t\tsubtitle={\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<div>Customise the content of the email message</div>\n\t\t\t\t\t\t\t\t\t<div>Use the tag reference to add placeholders for real values</div>\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Import Template',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: <ChevronDownIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\t\t\t\t\tplacement: 'bottom-start',\n\t\t\t\t\t\t\t\t\t\t\t\tactions: db.templates.all().map<ActionType>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: x.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet pass = false\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.values.content !== '' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.values.content !== '<p><br></p>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait confirm({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'This will overwrite your existing email content',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpass = true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpass = true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (pass) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue('content', x.content)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start\">\n\t\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\t\tname=\"subject\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Subject line\"\n\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Subject line is required' }}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1 mr-3\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Insert Tag',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: <ChevronDownIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\t\t\t\t\t\tactions:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemplateTagActions((x) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'subject',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubject?.length ? `${subject}${x}` : `${x}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, focus) || [],\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<FormTemplateEditor\n\t\t\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Content\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Content is required' }}\n\t\t\t\t\t\t\t\t\t\tfocus={focus}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t{/* <AutoHeight show={focus !== '' && focus !== 'user'}>\n\t\t\t\t\t\t\t<FormSection title=\"Recipients\" subtitle=\"Who will receive this email notification\">\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<MultiColumns\n\t\t\t\t\t\t\t\t\t\tcolumns={2}\n\t\t\t\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t\t\t\t(focus === 'case' || focus === 'event') && (\n\t\t\t\t\t\t\t\t\t\t\t\t<FormCheckbox name=\"recipients.caseApplicant\" label=\"Case Applicant\" />\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t(focus === 'case' || focus === 'event') && (\n\t\t\t\t\t\t\t\t\t\t\t\t<FormCheckbox\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"recipients.caseRespondent\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Case Respondent\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tfocus === 'event' && (\n\t\t\t\t\t\t\t\t\t\t\t\t<FormCheckbox name=\"recipients.eventAttendee\" label=\"Event Attendees\" />\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</FormSection>\n\t\t\t\t\t\t</AutoHeight> */}\n\n\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\t\t\t\tdisabled: !isNotNone(focus) || true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t\tdisabled: !isNotNone(focus),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nconst RuleGroup: FC<{ path: string; remove: () => void }> = ({ path, remove }) => {\n\tconst formContext = useFormikContext<FormData>()\n\n\tconst {\n\t\tvalues: rules,\n\t\tarrayHelpers: { push: appendRule, remove: removeRule },\n\t} = useFieldArray(`${path}.rules`, formContext)\n\n\treturn (\n\t\t<div className=\"relative\">\n\t\t\t<div className=\"absolute top-0 right-0 -mr-3 -my-3\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={{\n\t\t\t\t\t\ticon: <XIcon className=\"w-4 h-4 -mx-1 text-red-500\" />,\n\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\tonClick: remove,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<Stack className=\"p-4 rounded-md bg-gray-100 dark:bg-gray-750\">\n\t\t\t\t{rules.map((_, i) => (\n\t\t\t\t\t<Rule\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tpath={`${path}.rules[${i}]`}\n\t\t\t\t\t\tremove={() => removeRule(i)}\n\t\t\t\t\t\tprefix={i === 0 ? 'IF' : 'AND'}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\n\t\t\t\t<Actions\n\t\t\t\t\tactions={{\n\t\t\t\t\t\ttitle: 'Add condition',\n\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\tonClick: () => appendRule({ entity: '', field: '', operator: '', value: '' }),\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Stack>\n\t\t</div>\n\t)\n}\n\nconst Rule: FC<{ path: string; prefix: string; remove: () => void }> = ({ path, prefix, remove }) => {\n\tconst formContext = useFormikContext()\n\n\tconst entity = watchPath(formContext, `${path}.entity`) as string\n\tconst field = watchPath(formContext, `${path}.field`) as string\n\tconst operator = watchPath(formContext, `${path}.operator`) as string\n\tconst entityField = db.entityFields.find(field)\n\tconst type = entityField?.type || 'string'\n\tconst options = entityField?.options || []\n\n\treturn (\n\t\t<div className=\"flex items-center justify-between space-x-3\">\n\t\t\t<div className=\"flex items-center space-x-3 flex-1\">\n\t\t\t\t<span className=\"text-sm font-medium text-center p-1 w-full max-w-[50px] rounded-full bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 border border-gray-300 dark:border-gray-600\">\n\t\t\t\t\t{prefix}\n\t\t\t\t</span>\n\n\t\t\t\t<FormSelect\n\t\t\t\t\tname={`${path}.entity`}\n\t\t\t\t\toptions={db.entityTypes.all().map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\tclassName=\"w-full max-w-[100px]\"\n\t\t\t\t/>\n\n\t\t\t\t<FormSelect\n\t\t\t\t\tname={`${path}.field`}\n\t\t\t\t\toptions={\n\t\t\t\t\t\tdb.entityFields\n\t\t\t\t\t\t\t.all((x) => x.entityTypeId === entity)\n\t\t\t\t\t\t\t.map((x) => ({ value: x.id, label: x.name })) || []\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"w-full max-w-[200px]\"\n\t\t\t\t/>\n\n\t\t\t\t<FormSelect\n\t\t\t\t\tname={`${path}.operator`}\n\t\t\t\t\toptions={getRuleOperatorOptions(type) || []}\n\t\t\t\t\tclassName=\"w-full max-w-[200px]\"\n\t\t\t\t/>\n\n\t\t\t\t{type === 'date' ? (\n\t\t\t\t\t<FormDate name={`${path}.value`} className=\"w-full max-w-[200px]\" />\n\t\t\t\t) : type === 'string' && operator !== 'stringEmpty' && operator !== 'stringNotEmpty' ? (\n\t\t\t\t\t<FormInput name={`${path}.value`} className=\"w-full max-w-[200px]\" />\n\t\t\t\t) : type === 'option' ? (\n\t\t\t\t\t<FormSelect\n\t\t\t\t\t\tname={`${path}.value`}\n\t\t\t\t\t\toptions={options.map((x) => ({ value: x, label: x }))}\n\t\t\t\t\t\tclassName=\"w-full max-w-[200px]\"\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<Actions\n\t\t\t\t\tactions={{\n\t\t\t\t\t\ticon: <XIcon className=\"w-4 h-4 text-red-500 -mx-2\" />,\n\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\tonClick: remove,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default NotificationForm\n","import React, { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { BeakerIcon, DotsHorizontalIcon, PencilIcon, PlusIcon, TrashIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport { TemplateModel } from 'types/models'\nimport db from 'db'\nimport { confirm } from '@primer/alerts'\n\nconst Templates: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<TemplateModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/templates/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.templates.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Templates\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Template',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/templates/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.templates.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Templates\n","import React, { FC } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, BeakerIcon, CheckIcon } from '@heroicons/react/outline'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport PageHeading from '@primer/components/PageHeading'\nimport { CardWrapper, CardContent, CardFooter } from '@primer/components/Card'\nimport Stack from '@primer/components/Stack'\nimport FormTemplateEditor from 'components/FormTemplateEditor'\nimport db from 'db'\n\ninterface FormData {\n\tname: string\n\tcontent: string\n}\n\nconst CreateTemplate: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst originalTemplate = db.templates.find(id)\n\n\tconst formContext = useForm<FormData>({\n\t\tinitialValues: {\n\t\t\tname: originalTemplate?.name || '',\n\t\t\tcontent: originalTemplate?.content || '',\n\t\t},\n\t\tonSubmit: (formData) => {\n\t\t\tdb.templates.save({\n\t\t\t\tid: uuid(),\n\t\t\t\t...(originalTemplate || {}),\n\t\t\t\t...formData,\n\t\t\t})\n\n\t\t\tnavigate('/settings/templates')\n\t\t},\n\t})\n\n\tconst title = mode === 'create' ? 'Create Template' : 'Edit Template'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/templates',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<CardWrapper>\n\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<FormInput name=\"name\" label=\"Name\" validations={{ required: 'Name is required' }} />\n\n\t\t\t\t\t\t\t\t<FormTemplateEditor\n\t\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\t\tlabel=\"Content\"\n\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Content is required' }}\n\t\t\t\t\t\t\t\t\tfocus={'all'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</CardContent>\n\n\t\t\t\t\t\t<CardFooter>\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardFooter>\n\t\t\t\t\t</CardWrapper>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default CreateTemplate\n","import React, { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport { RoleModel } from 'types/models'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { DotsHorizontalIcon, PencilIcon, PlusIcon, TrashIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport { confirm } from '@primer/alerts'\n\nconst Roles: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/roles/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.roles.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Roles\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Role',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/roles/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.roles.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Roles\n","import React, { FC, ReactNode } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface FormCheckboxProps {\n\tname: string\n\tlabel?: ReactNode\n\tdefaultValue?: any\n\tdisabled?: boolean\n\tinputClassName?: ClassValue\n\tclassName?: ClassValue\n\tcolor?: string\n}\n\nconst FormCheckbox: FC<FormCheckboxProps> = ({\n\tname,\n\tlabel,\n\tdisabled,\n\tinputClassName,\n\tcolor = 'text-primary-500 dark:text-primary-600',\n\tclassName,\n}) => {\n\t// helpers: {setValue: ƒ, setTouched: ƒ, setError: ƒ}\n\tconst [field] = useField({\n\t\tname,\n\t\ttype: 'checkbox',\n\t})\n\n\tconst formik = useFormikContext()\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<label className=\"text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-center cursor-pointer\">\n\t\t\t\t<input\n\t\t\t\t\t{...field}\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclassName={clsx('form-checkbox', inputClassName, {\n\t\t\t\t\t\t[color]: !disabled,\n\t\t\t\t\t\t'text-gray-400': disabled,\n\t\t\t\t\t})}\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t/>\n\t\t\t\t{label && <span className=\"ml-3\">{label}</span>}\n\t\t\t</label>\n\t\t</div>\n\t)\n}\n\nexport default FormCheckbox\n","import React, { FC } from 'react'\nimport Actions from './Actions'\nimport { ActionType } from '@primer/types'\nimport clsx, { ClassValue } from 'clsx'\nimport ButtonSpacer from './ButtonSpacer'\n\ninterface CardHeaderProps {\n\ttitle: string\n\tsubtitle?: string\n\tactions?: ActionType[]\n\tclassName?: ClassValue\n}\n\nconst CardHeader: FC<CardHeaderProps> = ({ title, subtitle, actions, className }) => {\n\treturn (\n\t\t<div className=\"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-600\">\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'flex flex-col sm:flex-row justify-between items-start sm:items-center flex-wrap sm:flex-nowrap space-y-4 sm:space-y-0',\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100\">{title}</h3>\n\t\t\t\t\t{subtitle && <p className=\"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-400\">{subtitle}</p>}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex-shrink-0 my-0 sm:-my-2\">\n\t\t\t\t\t{actions && actions.length > 0 ? (\n\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"hidden sm:block\">\n\t\t\t\t\t\t\t<ButtonSpacer />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default CardHeader\n","import clsx, { ClassValue } from 'clsx'\nimport React, { FC } from 'react'\n\ninterface TableFrameProps {\n\tclassName?: ClassValue\n}\n\nconst TableFrame: FC<TableFrameProps> = ({ children, className }) => {\n\treturn (\n\t\t<div className={clsx('border border-gray-200 dark:border-gray-600 rounded-md overflow-hidden', className)}>\n\t\t\t{children}\n\t\t</div>\n\t)\n}\n\nexport default TableFrame\n","import React, { FC } from 'react'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport PageHeading from '@primer/components/PageHeading'\nimport Card, { CardWrapper } from '@primer/components/Card'\nimport Stack from '@primer/components/Stack'\nimport FormCheckbox from '@primer/components/Form2/FormCheckbox'\nimport CardHeader from '@primer/components/CardHeader'\nimport db from 'db'\nimport FormSection from '@primer/components/Form2/FormSection'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport TableFrame from '@primer/components/TableFrame'\nimport { EntityFieldPermissionModel, EntityActionPermissionModel, EntityConnectionPermissionModel } from 'types/models'\n\ninterface PermissionSet<T> {\n\t// [key: string]: {\n\t// \tid: string\n\t// \tview: boolean\n\t// \tmodify: boolean\n\t// \tremove: boolean\n\t// }\n\t[key: string]: T\n}\n\ninterface Permissions {\n\t[key: string]: {\n\t\tfields: PermissionSet<EntityFieldPermissionModel>\n\t\tactions: PermissionSet<EntityActionPermissionModel>\n\t\tconnections: PermissionSet<EntityConnectionPermissionModel>\n\t}\n}\n\ninterface FormSchema {\n\tname: string\n\tentityTypes: Permissions\n}\n\nconst RoleForm: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst originalRole = db.roles.find(id)\n\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: {\n\t\t\tname: originalRole?.name || '',\n\t\t\tentityTypes: db.entityTypes.all().reduce<Permissions>((list, entityType) => {\n\t\t\t\treturn {\n\t\t\t\t\t...list,\n\t\t\t\t\t[entityType.key]: {\n\t\t\t\t\t\tfields: db.entityFields\n\t\t\t\t\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t\t\t\t\t.reduce<PermissionSet<EntityFieldPermissionModel>>(\n\t\t\t\t\t\t\t\t(items, x) => ({\n\t\t\t\t\t\t\t\t\t...items,\n\t\t\t\t\t\t\t\t\t[x.key]: db.entityFieldPermissions.find(\n\t\t\t\t\t\t\t\t\t\t(y) => y.entityFieldId === x.id && y.roleId === id\n\t\t\t\t\t\t\t\t\t) || {\n\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\troleId: id || '',\n\t\t\t\t\t\t\t\t\t\tentityFieldId: x.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tactions: db.entityActions\n\t\t\t\t\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t\t\t\t\t.reduce<PermissionSet<EntityActionPermissionModel>>(\n\t\t\t\t\t\t\t\t(items, x) => ({\n\t\t\t\t\t\t\t\t\t...items,\n\t\t\t\t\t\t\t\t\t[x.key]: db.entityActionPermissions.find(\n\t\t\t\t\t\t\t\t\t\t(y) => y.entityActionId === x.id && y.roleId === id\n\t\t\t\t\t\t\t\t\t) || {\n\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\tperform: true,\n\t\t\t\t\t\t\t\t\t\troleId: id || '',\n\t\t\t\t\t\t\t\t\t\tentityActionId: x.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tconnections: db.entityConnections\n\t\t\t\t\t\t\t.all((x) => x.entityTypeId === entityType.id)\n\t\t\t\t\t\t\t.reduce<PermissionSet<EntityConnectionPermissionModel>>(\n\t\t\t\t\t\t\t\t(items, x) => ({\n\t\t\t\t\t\t\t\t\t...items,\n\t\t\t\t\t\t\t\t\t[x.key]: db.entityConnectionPermissions.find(\n\t\t\t\t\t\t\t\t\t\t(y) => y.entityConnectionId === x.id && y.roleId === id\n\t\t\t\t\t\t\t\t\t) || {\n\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\tremove: true,\n\t\t\t\t\t\t\t\t\t\troleId: id || '',\n\t\t\t\t\t\t\t\t\t\tentityConnectionId: x.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}, {}),\n\t\t},\n\t\tonSubmit: (formValues) => {\n\t\t\tdb.roles.save({\n\t\t\t\t...(originalRole || {}),\n\t\t\t\tname: formValues.name,\n\t\t\t})\n\n\t\t\tdb.entityTypes.all().forEach((entityType) => {\n\t\t\t\tObject.values(formValues.entityTypes[entityType.key].fields).forEach((val) => {\n\t\t\t\t\tdb.entityFieldPermissions.save(val)\n\t\t\t\t})\n\n\t\t\t\tObject.values(formValues.entityTypes[entityType.key].actions).forEach((val) => {\n\t\t\t\t\tdb.entityActionPermissions.save(val)\n\t\t\t\t})\n\n\t\t\t\tObject.values(formValues.entityTypes[entityType.key].connections).forEach((val) => {\n\t\t\t\t\tdb.entityConnectionPermissions.save(val)\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/settings/roles`)\n\t\t},\n\t})\n\n\tconst fieldSchema = (entityTypeKey: string): TableSchema<any> => ({\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Field',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entityTypes.${entityTypeKey}.fields.${x.key}.view`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entityTypes.${entityTypeKey}.fields.${x.key}.modify`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t})\n\n\tconst actionSchema = (entityTypeKey: string): TableSchema<any> => ({\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Action',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Perform',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entityTypes.${entityTypeKey}.actions.${x.key}.perform`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t})\n\n\tconst connectionSchema = (entityTypeKey: string): TableSchema<any> => ({\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Connection',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entityTypes.${entityTypeKey}.connections.${x.key}.view`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entityTypes.${entityTypeKey}.connections.${x.key}.modify`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Remove',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entityTypes.${entityTypeKey}.connections.${x.key}.remove`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t})\n\n\tconst title = mode === 'create' ? 'Create Role' : 'Edit Role'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/roles',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Stack>\n\t\t\t\t\t\t<FormSection title=\"Details\" subtitle=\"Basic details about the role\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Permissions\"\n\t\t\t\t\t\t\tsubtitle=\"A view of permissions for all existing entity types and their fields/actions/connections\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t{db.entityTypes.all().map((entityType) => (\n\t\t\t\t\t\t\t\t\t<CardWrapper key={entityType.key}>\n\t\t\t\t\t\t\t\t\t\t<CardHeader title={entityType.name} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"rounded-b-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t<Stack className=\"p-6\">\n\t\t\t\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet items = db.entityFields.all(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(x) => x.entityTypeId === entityType.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titems.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschema={fieldSchema(entityType.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})()}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet items = db.entityActions.all(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(x) => x.entityTypeId === entityType.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titems.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschema={actionSchema(entityType.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})()}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet items = db.entityConnections.all(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(x) => x.entityTypeId === entityType.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titems.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschema={connectionSchema(entityType.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</CardWrapper>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default RoleForm\n","import React, { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport { RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport { EntityTypeModel } from 'types/models'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { DotsHorizontalIcon, PencilIcon, PlusIcon, TrashIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport Stack from '@primer/components/Stack'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport { confirm } from '@primer/alerts'\n\nconst EntityTypes: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<EntityTypeModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Field Types',\n\t\t\t\tvalue: (x) => db.entityFields.all((y) => y.entityTypeId === x.id).length || '',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Actions',\n\t\t\t\tvalue: (x) => db.entityActions.all((y) => y.entityTypeId === x.id).length || '',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Connections',\n\t\t\t\tvalue: (x) => db.entityConnections.all((y) => y.entityTypeId === x.id).length || '',\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/entity-types/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.entityTypes.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Entity Types\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Entity Type',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/entity-types/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.entityTypes.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default EntityTypes\n","import React, { FC, Component, ElementType, Suspense } from 'react'\nimport DefaultLoader from '@primer/components/Loader'\nimport * as Sentry from '@sentry/react'\nimport { isNotNone } from '@primer/types'\n\ninterface ErrorBoundaryProps {\n\trender: ElementType\n}\n\ninterface ErrorBoundaryState {\n\terror?: Error\n}\n\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n\tstatic getDerivedStateFromError(error: Error) {\n\t\treturn { error }\n\t}\n\n\tcomponentDidCatch(error: Error) {\n\t\t// You can also log the error to an error reporting service\n\t\t// logErrorToMyService(error, info)\n\t\tSentry.captureException(error)\n\t\tconsole.dir(error)\n\t}\n\n\trender() {\n\t\tif (isNotNone(this.state?.error)) {\n\t\t\treturn <this.props.render error={this.state.error} />\n\t\t}\n\n\t\treturn this.props.children\n\t}\n}\n\ninterface DefaultErrorProps {\n\terror: Error\n}\n\nexport const defaultError: FC<DefaultErrorProps> = ({ error }) => (\n\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t<h4 className=\"alert-heading\">Something went wrong</h4>\n\t\t<hr />\n\t\t{error.message && <p className=\"m-0\">{error.message}</p>}\n\t</div>\n)\n\nconst withSuspense =\n\t(Component: ElementType, { loader = <DefaultLoader />, error = defaultError } = {}) =>\n\t(props: any) => {\n\t\treturn (\n\t\t\t<ErrorBoundary render={error}>\n\t\t\t\t<Suspense fallback={loader}>\n\t\t\t\t\t<Component {...props} />\n\t\t\t\t</Suspense>\n\t\t\t</ErrorBoundary>\n\t\t)\n\t}\n\nconst Suspender = withSuspense(({ render }) => render)\n\nexport default Suspender\n","import React, { FC, ReactNode } from 'react'\nimport { slideout } from '@primer/alerts'\nimport Suspender from '@primer/components/Suspender'\nimport Actions from '@primer/components/Actions'\nimport { ActionType, SlideoutResolveFn } from '@primer/types'\nimport { SizeValue } from '@primer/alerts/Slideout'\nimport { XIcon } from '@heroicons/react/outline'\nimport clsx, { ClassValue } from 'clsx'\n\ntype CloseFn = () => void\n\ninterface OpenSlideoutProps<T> {\n\trender: (close: SlideoutResolveFn<boolean | T>) => ReactNode\n\tsize?: SizeValue\n\tmode?: 'dark' | ''\n}\n\nasync function openSlideout<T>({ render, size = 'md', mode = '' }: OpenSlideoutProps<T>) {\n\treturn await slideout<T>({\n\t\tsize,\n\t\tmode,\n\t\tchildren: (close) => <SlideoutInner render={render} close={close} />,\n\t})\n}\n\ninterface SlideoutInnerProps {\n\trender: (x: CloseFn) => ReactNode\n\tclose: CloseFn\n}\n\nconst SlideoutInner: FC<SlideoutInnerProps> = ({ render, close }) => {\n\treturn (\n\t\t<div className=\"h-full w-full relative\">\n\t\t\t<div className=\"absolute top-0 left-0 -mx-12 mt-2\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: <XIcon className=\"w-5 h-5 -mx-2 text-white\" />,\n\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"h-full divide-y divide-gray-200 dark:divide-gray-600 flex flex-col bg-white dark:bg-gray-700 shadow-xl\">\n\t\t\t\t<div className=\"flex-1 h-0 flex flex-col\">\n\t\t\t\t\t<Suspender render={render(close)} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\ninterface SlideoutHeaderProps {\n\ttitle: ReactNode\n\tsubtitle?: ReactNode\n\tactions?: ActionType[]\n}\n\nexport const SlideoutHeader: FC<SlideoutHeaderProps> = ({ title, subtitle, actions }) => {\n\treturn (\n\t\t<div className=\"py-6 px-4 bg-primary-500 dark:bg-primary-600 sm:px-6 flex-shrink-0\">\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<div className=\"text-lg font-medium text-white antialiased\">{title}</div>\n\t\t\t\t<div className=\"ml-3 h-7 flex items-center\">{actions && <Actions actions={actions} />}</div>\n\t\t\t</div>\n\t\t\t{subtitle && (\n\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t<div className=\"text-sm text-white opacity-75 antialiased\">{subtitle}</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\ninterface SlideoutContentProps {\n\tclassName?: ClassValue\n}\n\nexport const SlideoutContent: FC<SlideoutContentProps> = ({ className, children }) => {\n\treturn <div className={clsx('flex-1 flex flex-col justify-between overflow-y-auto', className)}>{children}</div>\n}\n\nexport default openSlideout\n","import React, { ChangeEvent, ElementType, FC, ReactNode, useState } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport { FormValidations, validate } from './utils'\nimport { v4 as uuidv4 } from 'uuid'\n\ninterface FormInputProps {\n\tas?: ElementType | string\n\tname: string\n\tlabel?: ReactNode\n\ttype?: string\n\tclassName?: ClassValue\n\tautoFocus?: boolean\n\tvalidations?: FormValidations\n\tplaceholder?: string\n\tdisabled?: boolean\n\tstep?: number\n\tinputProps?: {\n\t\tmin?: number\n\t\tmax?: number\n\t\tstep?: number\n\t\tclassName?: string\n\t}\n}\n\nconst FormInput: FC<FormInputProps> = ({\n\tas = 'input',\n\tname,\n\tlabel,\n\ttype = 'text',\n\tclassName,\n\tautoFocus = false,\n\tvalidations = {},\n\tplaceholder,\n\tdisabled = false,\n\tinputProps = {},\n}) => {\n\tconst ref = useAutoFocus<HTMLInputElement>(autoFocus)\n\n\tconst Comp = as\n\n\tconst [{ value }, , { setValue, setTouched }] = useField({\n\t\tname,\n\t\ttype,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [token] = useState(uuidv4())\n\n\tconst { className: extraClassName, ...extraProps } = inputProps\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div className=\"text-[0px] leading-none select-none\">{token}</div>\n\n\t\t\t<div className={clsx('relative rounded-md', label && 'mt-1')}>\n\t\t\t\t<Comp\n\t\t\t\t\tref={ref}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={(e: ChangeEvent<HTMLInputElement>) => setValue(e.target.value)}\n\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t}}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tclassName={clsx(extraClassName)}\n\t\t\t\t\t{...(Comp === 'input' ? extraProps : {})}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default FormInput\n","import React, { FC } from 'react'\nimport openSlideout, { SlideoutHeader, SlideoutContent } from '@primer/hooks/openSlideout'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport { watch } from '@primer/components/Form2/utils'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport FormSelect from '@primer/components/Form2/FormSelect'\nimport Stack from '@primer/components/Stack'\nimport { EntityFieldModel, EntityFieldPermissionModel, RoleModel } from 'types/models'\nimport FormDate from '@primer/components/Form2/FormDate'\nimport { CheckIcon, PlusIcon, XIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport FormInputRaw from '@primer/components/Form2/FormInputRaw'\nimport useFieldArray from '@primer/components/Form2/useFieldArray'\nimport clsx from 'clsx'\nimport { SlideoutResolveFn } from '@primer/types'\nimport { slugify } from '@primer/utils/funcs'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport FormLabel from '@primer/components/Form2/FormLabel'\nimport TableFrame from '@primer/components/TableFrame'\nimport db from 'db'\nimport FormCheckbox from '@primer/components/Form2/FormCheckbox'\n\nexport const typeOptions = [\n\t{ value: 'string', label: 'Text' },\n\t{ value: 'number', label: 'Number' },\n\t{ value: 'boolean', label: 'Boolean' },\n\t{ value: 'date', label: 'Date' },\n\t{ value: 'option', label: 'Options' },\n]\n\ntype FormEntityFieldModel = EntityFieldModel & { permissions: EntityFieldPermissionModel[] }\n\ninterface OpenEntityFieldProps {\n\tmode?: 'create' | 'edit'\n\tentityField: FormEntityFieldModel\n}\n\nconst openEntityField = (props: OpenEntityFieldProps) => {\n\treturn openSlideout<FormEntityFieldModel>({\n\t\trender: (close) => <Component close={close} {...props} />,\n\t})\n}\n\ntype FormSchema = FormEntityFieldModel\n\nconst Component: FC<OpenEntityFieldProps & { close: SlideoutResolveFn<FormEntityFieldModel> }> = ({\n\tmode = 'create',\n\tentityField,\n\tclose,\n}) => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: entityField as FormSchema,\n\t\tonSubmit: (formData) => {\n\t\t\tclose({\n\t\t\t\t...formData,\n\t\t\t\tkey: slugify(formData.name),\n\t\t\t})\n\t\t},\n\t})\n\n\tconst type = watch(formContext, 'type')\n\tconst permissions = watch(formContext, 'permissions')\n\tconst { values: options, arrayHelpers: optionsHelpers } = useFieldArray('options', formContext)\n\n\tconst permissionsSchema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Role',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].view`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].modify`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<Form context={formContext} className=\"contents\">\n\t\t\t<SlideoutHeader title={mode === 'create' ? 'Create Entity Field' : 'Edit Entity Field'} />\n\n\t\t\t<SlideoutContent>\n\t\t\t\t<Stack className=\"py-6\">\n\t\t\t\t\t<div className=\"px-6\">\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\t\t\tlabel=\"Type\"\n\t\t\t\t\t\t\t\toptions={typeOptions}\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Type is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{type === 'string' && <FormInput name=\"defaultValue\" label=\"Default Value\" />}\n\t\t\t\t\t\t\t{type === 'number' && <FormInput name=\"defaultValue\" label=\"Default Value\" type=\"number\" />}\n\t\t\t\t\t\t\t{type === 'boolean' && (\n\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\tname=\"defaultValue\"\n\t\t\t\t\t\t\t\t\tlabel=\"Default Value\"\n\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t{ value: 0, label: 'False' },\n\t\t\t\t\t\t\t\t\t\t{ value: 1, label: 'True' },\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{type === 'date' && <FormDate name=\"defaultValue\" label=\"Default Value\" />}\n\t\t\t\t\t\t\t{type === 'option' && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{options.map((x, i) => (\n\t\t\t\t\t\t\t\t\t\t<div key={i} className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute z-[2] top-0 left-0 ml-3 h-full flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs font-medium rounded-full w-5 h-5 bg-gray-200 dark:bg-gray-700 dark:text-gray-100 flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{i + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<FormInputRaw\n\t\t\t\t\t\t\t\t\t\t\t\tname={`options[${i}]`}\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'py-2 pl-12 pr-8 -mb-px relative text-sm w-full border border-gray-300 dark:border-gray-600 focus:z-[1] focus:ring-1 focus:ring-primary-500 focus:border-primary-500 dark:focus:border-primary-500 bg-white dark:bg-gray-800 dark:text-gray-100',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ti === 0 && 'rounded-t-md',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ti === options.length - 1 && 'rounded-b-md'\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{options.length > 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute z-[1] top-0 right-0 mr-3 h-full flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"rounded-full w-5 h-5 bg-red-100 dark:bg-red-500 dark:bg-opacity-25 text-red-500 flex items-center justify-center focus:ring-2 focus:ring-red-500 transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => optionsHelpers.remove(i)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<XIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2 flex justify-end\">\n\t\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add option',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => optionsHelpers.push(''),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<FormInput name=\"defaultValue\" label=\"Default Value\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<FormInput name=\"description\" label=\"Description\" />\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormLabel>Permissions</FormLabel>\n\n\t\t\t\t\t\t\t\t<TableFrame className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Table schema={permissionsSchema} items={db.roles.all()} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</SlideoutContent>\n\n\t\t\t<div className=\"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Cancel',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n\nexport default openEntityField\n","import clsx, { ClassValue } from 'clsx'\nimport React, { FC } from 'react'\n\ninterface WellProps {\n\tclassName?: ClassValue\n\tonClick?: () => void\n}\n\nconst Well: FC<WellProps> = ({ children, className, onClick }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'p-4 bg-gray-100 dark:bg-gray-750 border border-gray-200 dark:border-gray-600 rounded',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t)\n}\n\nexport default Well\n","import React, { FC } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport openSlideout, { SlideoutHeader, SlideoutContent } from '@primer/hooks/openSlideout'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport Stack from '@primer/components/Stack'\nimport { EntityActionModel, EntityActionPermissionModel, EntityFieldModel, RoleModel } from 'types/models'\nimport { CheckIcon, PlusIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport useFieldArray from '@primer/components/Form2/useFieldArray'\nimport FormLabel from '@primer/components/Form2/FormLabel'\nimport { isNotNone, SlideoutResolveFn } from '@primer/types'\nimport FormSelect from '@primer/components/Form2/FormSelect'\nimport Well from '@primer/components/Well'\nimport { slugify } from '@primer/utils/funcs'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport TableFrame from '@primer/components/TableFrame'\nimport db from 'db'\nimport FormCheckbox from '@primer/components/Form2/FormCheckbox'\nimport { watch } from '@primer/components/Form2/utils'\n\ntype FormEntityActionModel = EntityActionModel & { permissions: EntityActionPermissionModel[] }\n\ninterface OpenEntityActionProps {\n\tmode?: 'create' | 'edit'\n\tentityAction: FormEntityActionModel\n\tentityFields: EntityFieldModel[]\n}\n\nconst openEntityAction = (props: OpenEntityActionProps) => {\n\treturn openSlideout<FormEntityActionModel>({\n\t\tsize: '2xl',\n\t\trender: (close) => <Component close={close} {...props} />,\n\t})\n}\n\ntype FormSchema = FormEntityActionModel\n\nconst Component: FC<OpenEntityActionProps & { close: SlideoutResolveFn<FormEntityActionModel> }> = ({\n\tmode = 'create',\n\tentityAction,\n\tentityFields,\n\tclose,\n}) => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: entityAction as FormSchema,\n\t\tonSubmit: (formData) => {\n\t\t\tclose({\n\t\t\t\t...formData,\n\t\t\t\tkey: slugify(formData.name),\n\t\t\t})\n\t\t},\n\t})\n\n\tconst permissions = watch(formContext, 'permissions')\n\tconst { values: changes, arrayHelpers: changesHelpers } = useFieldArray('changes', formContext)\n\n\tconst getEntityField = (id?: string) => entityFields.find((x) => x.id === id)\n\n\tconst permissionsSchema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Role',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Perform',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].perform`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<Form context={formContext} className=\"contents\">\n\t\t\t<SlideoutHeader title={mode === 'create' ? 'Create Action' : 'Edit Action'} />\n\n\t\t\t<SlideoutContent>\n\t\t\t\t<Stack className=\"py-6\">\n\t\t\t\t\t<div className=\"px-6\">\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormLabel>Changes</FormLabel>\n\t\t\t\t\t\t\t\t<Well className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t\t{changes.filter(isNotNone).map((change, i) => {\n\t\t\t\t\t\t\t\t\t\t\tlet entityField = getEntityField(change.entityFieldId)\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={i} className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>Set</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].entityFieldId`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={entityFields.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: x.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'boolean' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].newValue`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'True', value: 'true' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'False', value: 'false' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'string' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput name={`changes[${i}].newValue`} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'date' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[300px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].newValue`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'Current Time',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 'current-time',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'option' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[300px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].newValue`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={entityField.options.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: x,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add change',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tchangesHelpers.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: uuid(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserDefined: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Well>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormLabel>Permissions</FormLabel>\n\t\t\t\t\t\t\t\t<TableFrame className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Table schema={permissionsSchema} items={db.roles.all()} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</SlideoutContent>\n\n\t\t\t<div className=\"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Cancel',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n\nexport default openEntityAction\n","import React, { FC } from 'react'\nimport openSlideout, { SlideoutHeader, SlideoutContent } from '@primer/hooks/openSlideout'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport Stack from '@primer/components/Stack'\nimport { EntityConnectionModel, EntityConnectionPermissionModel, RoleModel } from 'types/models'\nimport { CheckIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport { SlideoutResolveFn } from '@primer/types'\nimport FormSelect from '@primer/components/Form2/FormSelect'\nimport db from 'db'\nimport { slugify } from '@primer/utils/funcs'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport FormLabel from '@primer/components/Form2/FormLabel'\nimport TableFrame from '@primer/components/TableFrame'\nimport FormCheckbox from '@primer/components/Form2/FormCheckbox'\nimport { watch } from '@primer/components/Form2/utils'\n\nexport const connectionTypeOptions = [\n\t{ value: 'one-to-one', label: 'Single' },\n\t{ value: 'one-to-many', label: 'Many' },\n]\n\nexport const oppositeConnectionTypeOptions = [\n\t{ value: 'one-to-one', label: 'Single' },\n\t{ value: 'one-to-many', label: 'Single' },\n]\n\ntype FormEntityConnectionModel = EntityConnectionModel & { permissions: EntityConnectionPermissionModel[] }\n\ninterface OpenEntityConnectionProps {\n\tmode?: 'create' | 'edit'\n\tentityConnection: FormEntityConnectionModel\n}\n\nconst openEntityConnection = (props: OpenEntityConnectionProps) => {\n\treturn openSlideout<FormEntityConnectionModel>({\n\t\trender: (close) => <Component close={close} {...props} />,\n\t})\n}\n\ntype FormSchema = FormEntityConnectionModel\n\nconst Component: FC<OpenEntityConnectionProps & { close: SlideoutResolveFn<FormEntityConnectionModel> }> = ({\n\tmode = 'create',\n\tentityConnection,\n\tclose,\n}) => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: entityConnection as FormSchema,\n\t\tonSubmit: (formData) => {\n\t\t\tclose({\n\t\t\t\t...formData,\n\t\t\t\tkey: slugify(formData.name),\n\t\t\t})\n\t\t},\n\t})\n\n\tconst permissions = watch(formContext, 'permissions')\n\n\tconst permissionsSchema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Role',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].view`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].modify`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Remove',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].remove`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<Form context={formContext} className=\"contents\">\n\t\t\t<SlideoutHeader title={mode === 'create' ? 'Create Connection' : 'Edit Connection'} />\n\n\t\t\t<SlideoutContent>\n\t\t\t\t<Stack className=\"py-6\">\n\t\t\t\t\t<div className=\"px-6\">\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput name=\"name\" label=\"Name\" validations={{ required: 'Name is required' }} />\n\n\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\tname=\"relationId\"\n\t\t\t\t\t\t\t\tlabel=\"Entity Type\"\n\t\t\t\t\t\t\t\toptions={db.entityTypes.all().map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Entity Type is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\t\t\tlabel=\"Cardinality\"\n\t\t\t\t\t\t\t\toptions={connectionTypeOptions}\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Cardinality is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormLabel>Permissions</FormLabel>\n\t\t\t\t\t\t\t\t<TableFrame className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Table schema={permissionsSchema} items={db.roles.all()} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</SlideoutContent>\n\n\t\t\t<div className=\"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Cancel',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n\nexport default openEntityConnection\n","import React, { FC, useState } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport Card, { CardWrapper } from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon, PencilIcon, PlusIcon, XIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport Stack from '@primer/components/Stack'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport db from 'db'\nimport {\n\tEntityActionModel,\n\tEntityActionPermissionModel,\n\tEntityConnectionModel,\n\tEntityConnectionPermissionModel,\n\tEntityFieldModel,\n\tEntityFieldPermissionModel,\n} from 'types/models'\nimport useFieldArray from '@primer/components/Form2/useFieldArray'\nimport FormSection from '@primer/components/Form2/FormSection'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport openEntityField, { typeOptions } from 'slideouts/openEntityField'\nimport openEntityAction from 'slideouts/openEntityAction'\nimport { confirm } from '@primer/alerts'\nimport { slugify } from '@primer/utils/funcs'\nimport openEntityConnection, {\n\tconnectionTypeOptions,\n\toppositeConnectionTypeOptions,\n} from 'slideouts/openEntityConnection'\nimport produce from 'immer'\nimport FormToggle from '@primer/components/Form2/FormToggle'\n\ntype FormEntityFieldModel = EntityFieldModel & { permissions: EntityFieldPermissionModel[] }\ntype FormEntityActionModel = EntityActionModel & { permissions: EntityActionPermissionModel[] }\ntype FormEntityConnectionModel = EntityConnectionModel & { permissions: EntityConnectionPermissionModel[] }\n\ninterface FormSchema {\n\tname: string\n\tplural: string\n\tmainNav: boolean\n\tentityFields: FormEntityFieldModel[]\n\tentityActions: FormEntityActionModel[]\n\tentityConnections: FormEntityConnectionModel[]\n}\n\nconst EntityTypeForm: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst original = db.entityTypes.find(id)\n\n\tconst originalEntityFields = db.entityFields.all((x) => x.entityTypeId === id)\n\tconst originalEntityActions = db.entityActions.all((x) => x.entityTypeId === id)\n\tconst originalEntityConnections = db.entityConnections.all((x) => x.entityTypeId === id || x.relationId === id)\n\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: {\n\t\t\tname: original?.name || '',\n\t\t\tplural: original?.plural || '',\n\t\t\tmainNav: original?.mainNav || false,\n\t\t\tentityFields: originalEntityFields\n\t\t\t\t? originalEntityFields.map((x) => ({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\tpermissions: db.entityFieldPermissions.all((y) => y.entityFieldId === x.id),\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t\tentityActions: originalEntityActions\n\t\t\t\t? originalEntityActions.map((x) => ({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\tpermissions: db.entityActionPermissions.all((y) => y.entityActionId === x.id),\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t\tentityConnections: originalEntityConnections\n\t\t\t\t? originalEntityConnections.map((x) => ({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\tpermissions: db.entityConnectionPermissions.all((y) => y.entityConnectionId === x.id),\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t},\n\t\tonSubmit: (formSchema) => {\n\t\t\tconst newEntityType = db.entityTypes.save({\n\t\t\t\t...original,\n\t\t\t\tkey: slugify(formSchema.name),\n\t\t\t\tname: formSchema.name,\n\t\t\t\tplural: formSchema.plural,\n\t\t\t\tmainNav: formSchema.mainNav,\n\t\t\t})\n\n\t\t\tformSchema.entityFields.forEach(({ permissions, ...entityField }) => {\n\t\t\t\tdb.entityFields.save({\n\t\t\t\t\t...entityField,\n\t\t\t\t\tentityTypeId: newEntityType.id,\n\t\t\t\t})\n\n\t\t\t\tpermissions.forEach((x) => {\n\t\t\t\t\tdb.entityFieldPermissions.save({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\t...(x.id ? {} : { id: uuid() }), // set id if it's not a thing\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tformSchema.entityActions.forEach(({ permissions, ...entityAction }) => {\n\t\t\t\tdb.entityActions.save({\n\t\t\t\t\t...entityAction,\n\t\t\t\t\tentityTypeId: newEntityType.id,\n\t\t\t\t})\n\n\t\t\t\tpermissions.forEach((x) => {\n\t\t\t\t\tdb.entityActionPermissions.save({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\t...(x.id ? {} : { id: uuid() }), // set id if it's not a thing\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tformSchema.entityConnections.forEach(({ permissions, ...entityConnection }) => {\n\t\t\t\tdb.entityConnections.save({\n\t\t\t\t\t...entityConnection,\n\t\t\t\t\tentityTypeId: newEntityType.id,\n\t\t\t\t})\n\n\t\t\t\tpermissions.forEach((x) => {\n\t\t\t\t\tdb.entityConnectionPermissions.save({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\t...(x.id ? {} : { id: uuid() }), // set id if it's not a thing\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\ttoDelete.entityFields.forEach(db.entityFields.remove)\n\t\t\ttoDelete.entityActions.forEach(db.entityActions.remove)\n\t\t\ttoDelete.entityConnections.forEach(db.entityConnections.remove)\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/settings/entity-types`)\n\t\t},\n\t})\n\n\tconst { values: entityFields, arrayHelpers: entityFieldHelpers } = useFieldArray('entityFields', formContext)\n\tconst { values: entityActions, arrayHelpers: entityActionsHelpers } = useFieldArray('entityActions', formContext)\n\tconst { values: entityConnections, arrayHelpers: entityConnectionsHelpers } = useFieldArray(\n\t\t'entityConnections',\n\t\tformContext\n\t)\n\n\tconst [toDelete, setToDelete] = useState<{\n\t\tentityFields: string[]\n\t\tentityActions: string[]\n\t\tentityConnections: string[]\n\t}>({\n\t\tentityFields: [],\n\t\tentityActions: [],\n\t\tentityConnections: [],\n\t})\n\n\tconst entityFieldSchema: TableSchema<FormEntityFieldModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Type',\n\t\t\t\tvalue: (x) => typeOptions.find((y) => y.value === x.type)?.label || '',\n\t\t\t},\n\t\t],\n\t\tactions: (x, i) => [\n\t\t\t{\n\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tonClick: async () => {\n\t\t\t\t\tconst editedEntityField = await openEntityField({ mode: 'edit', entityField: x })\n\t\t\t\t\tif (editedEntityField) {\n\t\t\t\t\t\tentityFieldHelpers.replace(i, editedEntityField)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <XIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu-danger',\n\t\t\t\tonClick: () => {\n\t\t\t\t\tconfirm({\n\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\tentityFieldHelpers.remove(i)\n\t\t\t\t\t\t\tsetToDelete(\n\t\t\t\t\t\t\t\tproduce((draft) => {\n\t\t\t\t\t\t\t\t\tdraft.entityFields.push(x.id)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t}\n\n\tconst entityActionsSchema: TableSchema<FormEntityActionModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t\tactions: (x, i) => [\n\t\t\t{\n\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tonClick: async () => {\n\t\t\t\t\tconst editedEntityAction = await openEntityAction({ mode: 'edit', entityAction: x, entityFields })\n\t\t\t\t\tif (editedEntityAction) {\n\t\t\t\t\t\tentityActionsHelpers.replace(i, editedEntityAction)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <XIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu-danger',\n\t\t\t\tonClick: () => {\n\t\t\t\t\tconfirm({\n\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\tentityActionsHelpers.remove(i)\n\t\t\t\t\t\t\tsetToDelete(\n\t\t\t\t\t\t\t\tproduce((draft) => {\n\t\t\t\t\t\t\t\t\tdraft.entityActions.push(x.id)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t}\n\n\tconst connectionSchema: TableSchema<FormEntityConnectionModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Related Entity',\n\t\t\t\tvalue: (x) =>\n\t\t\t\t\tx.entityTypeId === id\n\t\t\t\t\t\t? db.entityTypes.find((y) => y.id === x.relationId)?.name\n\t\t\t\t\t\t: db.entityTypes.find((y) => y.id === x.entityTypeId)?.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Cardinality',\n\t\t\t\tvalue: (x) =>\n\t\t\t\t\tx.entityTypeId === id\n\t\t\t\t\t\t? connectionTypeOptions.find((y) => y.value === x.type)?.label\n\t\t\t\t\t\t: oppositeConnectionTypeOptions.find((y) => y.value === x.type)?.label,\n\t\t\t},\n\t\t],\n\t\tactions: (x, i) => [\n\t\t\tx.entityTypeId === id && {\n\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tonClick: async () => {\n\t\t\t\t\tconst editedEntityConnection = await openEntityConnection({ mode: 'edit', entityConnection: x })\n\t\t\t\t\tif (editedEntityConnection) {\n\t\t\t\t\t\tentityConnectionsHelpers.replace(i, editedEntityConnection)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tx.entityTypeId === id && {\n\t\t\t\ticon: <XIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu-danger',\n\t\t\t\tonClick: () => {\n\t\t\t\t\tconfirm({\n\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\tentityConnectionsHelpers.remove(i)\n\t\t\t\t\t\t\tsetToDelete(\n\t\t\t\t\t\t\t\tproduce((draft) => {\n\t\t\t\t\t\t\t\t\tdraft.entityConnections.push(x.id)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t}\n\n\tconst title = mode === 'create' ? 'Create Entity Type' : 'Edit Entity Type'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/entity-types',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<Form context={formContext}>\n\t\t\t\t<PageContent>\n\t\t\t\t\t<Stack dividers>\n\t\t\t\t\t\t<FormSection title=\"Details\" subtitle=\"The name and different types of labels for the entity\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<FormInput name=\"plural\" label=\"Plural\" />\n\n\t\t\t\t\t\t\t\t\t<FormToggle name=\"mainNav\" label=\"Show in Main Nav\" />\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Field Types\"\n\t\t\t\t\t\t\tsubtitle=\"Field Types are custom fields that are attached to this entity, that can be configured to contain many different kinds of data\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<CardWrapper className=\"rounded-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t<Table items={entityFields} schema={entityFieldSchema} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</CardWrapper>\n\n\t\t\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add Field Type',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet id = uuid()\n\t\t\t\t\t\t\t\t\t\t\t\tconst newEntityField = await openEntityField({\n\t\t\t\t\t\t\t\t\t\t\t\t\tentityField: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityTypeId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplural: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemplate: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions: [''],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpermissions: db.roles\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map<EntityFieldPermissionModel>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troleId: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityFieldId: id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (newEntityField) entityFieldHelpers.push(newEntityField)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Actions\"\n\t\t\t\t\t\t\tsubtitle=\"Actions are custom interactions that the user can use do to this entity. They can modify a field, or be used as triggers for notifications.\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<CardWrapper className=\"rounded-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t<Table items={entityActions} schema={entityActionsSchema} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</CardWrapper>\n\n\t\t\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add Action',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet id = uuid()\n\t\t\t\t\t\t\t\t\t\t\t\tconst newEntityAction = await openEntityAction({\n\t\t\t\t\t\t\t\t\t\t\t\t\tentityAction: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityTypeId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchanges: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpermissions: db.roles\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map<EntityActionPermissionModel>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troleId: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityActionId: id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tperform: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tentityFields,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (newEntityAction) entityActionsHelpers.push(newEntityAction)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Connections\"\n\t\t\t\t\t\t\tsubtitle={\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tConnections are a way to define a relationship between this entity type, and\n\t\t\t\t\t\t\t\t\t\tanother entity type.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tFor example, if a \"case has many events\", then a case should have a connection\n\t\t\t\t\t\t\t\t\t\tnamed \"Events\", set to the Event entity and a cardinality of \"Many\"\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<CardWrapper className=\"rounded-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t<Table items={entityConnections} schema={connectionSchema} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</CardWrapper>\n\n\t\t\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add Connection',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet id = uuid()\n\t\t\t\t\t\t\t\t\t\t\t\tconst newConnection = await openEntityConnection({\n\t\t\t\t\t\t\t\t\t\t\t\t\tentityConnection: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityTypeId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelationId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'one-to-many',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpermissions: db.roles\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map<EntityConnectionPermissionModel>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troleId: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityConnectionId: id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tremove: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (newConnection) entityConnectionsHelpers.push(newConnection)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</PageContent>\n\t\t\t</Form>\n\t\t</>\n\t)\n}\n\nexport default EntityTypeForm\n","import React, { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { PlusIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\n\ninterface ModuleModel {\n\tname: string\n}\n\nconst modules = [{ name: 'Shared Workspace' }, { name: 'Document Production' }, { name: 'Document Exchange' }]\n\nconst Modules: FC<RouteComponentProps> = () => {\n\t// const editNotification = (x: ModuleModel) => null\n\t// const deleteNotification = (x: ModuleModel) => null\n\n\tconst schema: TableSchema<ModuleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Modules\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Add Module',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/modules/add',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={modules} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Modules\n","import React, { ChangeEvent, FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface CheckboxProps {\n\tchecked: boolean\n\tname?: string\n\tlabel?: string\n\tclassName?: ClassValue\n\tdisabled?: boolean\n\tonChange?: (event: ChangeEvent<HTMLInputElement>) => void\n\tcolor?: string\n}\n\nconst Checkbox: FC<CheckboxProps> = ({\n\tchecked,\n\tname,\n\tlabel = '',\n\tclassName,\n\tdisabled,\n\tonChange,\n\tcolor = 'text-emerald-600 dark:text-emerald-500',\n}) => {\n\treturn (\n\t\t<label\n\t\t\tclassName={clsx(\n\t\t\t\t'text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-start cursor-pointer',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tname={name}\n\t\t\t\tid={name}\n\t\t\t\tchecked={checked}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonChange={onChange}\n\t\t\t\tclassName={clsx('form-checkbox rounded-sm border-gray-300 mt-1', {\n\t\t\t\t\t[color]: !disabled,\n\t\t\t\t\t'text-gray-400': disabled,\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{label && <span className=\"ml-3 mt-0.5 select-none\">{label}</span>}\n\t\t</label>\n\t)\n}\n\nexport default Checkbox\n","import React, { FC, useState } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport PageHeading from '@primer/components/PageHeading'\nimport { RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Stack from '@primer/components/Stack'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport clsx from 'clsx'\nimport DataListColumns from '@primer/components/DataListColumns'\nimport Checkbox from '@primer/components/Checkbox'\n\nconst modules = [\n\t{ id: uuid(), name: 'Shared Workspace' },\n\t{ id: uuid(), name: 'Document Production' },\n\t{ id: uuid(), name: 'Document Exchange' },\n\t{ id: uuid(), name: 'Video Conferencing' },\n\t{ id: uuid(), name: 'Peer Review' },\n]\n\nconst AddModule: FC<RouteComponentProps> = () => {\n\tconst [selected, setSelected] = useState<string[]>([])\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle=\"Add Module\"\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/modules',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>Add Module</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Stack>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<div className=\"grid grid-cols-3 gap-6\">\n\t\t\t\t\t\t\t{modules.map((x) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={x.id}\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'border rounded relative cursor-pointer shadow-sm',\n\t\t\t\t\t\t\t\t\t\t'col-span-1 min-h-[300px]',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-white dark:bg-gray-750 border-gray-200 dark:border-gray-600':\n\t\t\t\t\t\t\t\t\t\t\t\t!selected.includes(x.id),\n\t\t\t\t\t\t\t\t\t\t\t'bg-primary-50 dark:bg-primary-500 dark:bg-opacity-25 border-primary-500 dark:border-primary-500 ring-1 ring-primary-500':\n\t\t\t\t\t\t\t\t\t\t\t\tselected.includes(x.id),\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (selected.includes(x.id)) {\n\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => s.filter((y) => y !== x.id))\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => [...s, x.id])\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Stack className=\"p-4\">\n\t\t\t\t\t\t\t\t\t\t<DataListColumns\n\t\t\t\t\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Name',\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: <span className=\"text-lg font-medium\">{x.name}</span>,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Includes',\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul className=\"list-disc pl-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>3 Entities</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>5 Templates</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>5 Notifications</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\tcolumns={1}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<button className=\"text-primary-600 text-sm font-medium underline\">\n\t\t\t\t\t\t\t\t\t\t\tView More\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t<div className=\"p-4 absolute top-0 right-0\">\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tchecked={selected.includes(x.id)}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.target.checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => s.filter((y) => y !== x.id))\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => [...s, x.id])\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Card>\n\n\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default AddModule\n","import React, { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport { PencilIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport DataListColumns from '@primer/components/DataListColumns'\n\nconst Roles: FC<RouteComponentProps> = () => {\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Site Settings\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Edit Site Settings',\n\t\t\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tto: '/settings/site-settings/edit',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"p-6\">\n\t\t\t\t\t\t<DataListColumns\n\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t{ title: 'Title', value: db.siteSettings.get('title') },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Layout',\n\t\t\t\t\t\t\t\t\tvalue: db.siteSettings.get('layout') === 'sidebar' ? 'Nav on side' : 'Nav on top',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Roles\n","export default __webpack_public_path__ + \"static/media/layout-sidebar.55a16042.svg\";","export default __webpack_public_path__ + \"static/media/layout-topbar.ff4c6906.svg\";","import React, { FC } from 'react'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport PageHeading from '@primer/components/PageHeading'\nimport Card from '@primer/components/Card'\nimport Stack from '@primer/components/Stack'\nimport db from 'db'\nimport FormSection from '@primer/components/Form2/FormSection'\nimport { SiteSettings } from 'types/models'\nimport LayoutSidebar from 'assets/img/layout-sidebar.svg'\nimport LayoutTopbar from 'assets/img/layout-topbar.svg'\nimport { watch } from '@primer/components/Form2/utils'\nimport clsx from 'clsx'\nimport FormLabel from '@primer/components/Form2/FormLabel'\n\ntype FormSchema = SiteSettings\n\nconst SiteSettingsForm: FC<RouteComponentProps> = () => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: {\n\t\t\ttitle: db.siteSettings.get('title') || '',\n\t\t\tlayout: db.siteSettings.get('layout') || 'sidebar',\n\t\t},\n\t\tonSubmit: (formValues) => {\n\t\t\tdb.siteSettings.set('title', formValues.title)\n\t\t\tdb.siteSettings.set('layout', formValues.layout)\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/settings/site-settings`)\n\t\t},\n\t})\n\n\tconst layout = watch(formContext, 'layout')\n\n\tconst title = 'Edit Site Settings'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/site-settings',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Stack>\n\t\t\t\t\t\t<FormSection title=\"Details\" subtitle=\"Basic details about the site\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Title\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Title is required' }}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<FormLabel>Layout</FormLabel>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2 flex space-x-4\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'w-[200px] h-[200px] relative rounded-md hover:opacity-80 cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayout === 'sidebar' && 'ring-2 ring-green-500'\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue('layout', 'sidebar')\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={LayoutSidebar} alt=\"Sidebar\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'w-[200px] h-[200px] relative rounded-md hover:opacity-80 cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlayout === 'topbar' && 'ring-2 ring-green-500'\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue('layout', 'topbar')\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<img src={LayoutTopbar} alt=\"Topbar\" />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Update',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default SiteSettingsForm\n","import React, { FC } from 'react'\nimport { RouteComponentProps } from '@reach/router'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport Form, { useForm } from '@primer/components/Form2/Form'\nimport FormInput from '@primer/components/Form2/FormInput'\nimport FormCheckbox from '@primer/components/Form2/FormCheckbox'\nimport FormSelect from '@primer/components/Form2/FormSelect'\nimport FormDate from '@primer/components/Form2/FormDate'\nimport Actions from '@primer/components/Actions'\nimport Stack from '@primer/components/Stack'\nimport useFieldArray from '@primer/components/Form2/useFieldArray'\nimport Well from '@primer/components/Well'\n\nconst fruitOptions = [\n\t{ label: 'Apple', value: 'apple' },\n\t{ label: 'Banana', value: 'banana' },\n\t{ label: 'Orange', value: 'orange' },\n]\n\ninterface FormData {\n\tname: string\n\tnewsletter: boolean\n\tfruit: string | null\n\tdate: Date | null\n\toptions: string[]\n\tdates: Date[]\n}\n\nconst Test: FC<RouteComponentProps> = () => {\n\tconst formContext = useForm<FormData>({\n\t\tinitialValues: {\n\t\t\tname: 'ayy',\n\t\t\tnewsletter: true,\n\t\t\tfruit: null,\n\t\t\tdate: null,\n\t\t\toptions: [],\n\t\t\tdates: [],\n\t\t},\n\t\tonSubmit: (formData) => {\n\t\t\tconsole.log('formData', formData)\n\t\t},\n\t})\n\n\tconst { values, arrayHelpers } = useFieldArray('dates', formContext)\n\n\t// do whatever with formContext here\n\tconsole.log('name', formContext.values.name)\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"New Form Components\" />\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput name=\"name\" label=\"Name\" validations={{ required: 'Name is required' }} />\n\n\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\tname=\"fruit\"\n\t\t\t\t\t\t\t\tlabel=\"Fruit\"\n\t\t\t\t\t\t\t\toptions={fruitOptions}\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Fruit is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<FormCheckbox name=\"newsletter\" label=\"Newsletter\" />\n\n\t\t\t\t\t\t\t<FormDate name=\"date\" label=\"Date\" validations={{ required: 'Date is required' }} />\n\n\t\t\t\t\t\t\t<Well>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t{values.map((_, i) => (\n\t\t\t\t\t\t\t\t\t\t<div key={i}>\n\t\t\t\t\t\t\t\t\t\t\t<FormInput name={`options.${i}`} label={`Option ${i}`} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'add',\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => arrayHelpers.push(''),\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Well>\n\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Submit',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</Card>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default Test\n","import React, { FC, Suspense } from 'react'\nimport { Router, Redirect, RouteComponentProps } from '@reach/router'\nimport db from 'db'\n\nimport PageSidebar from '@primer/components/Layouts/PageSidebar'\nimport PageTopbar from '@primer/components/Layouts/PageTopbar'\n\n// logged in\nimport Home from 'pages/Home'\nimport NotFound from 'pages/NotFound'\n\n// entity\nimport Entities from 'pages/Entities/Entities'\nimport ViewEntity from 'pages/Entities/ViewEntity'\nimport EntityForm from 'pages/Entities/EntityForm'\n\n// settings\nimport Settings from 'pages/Settings/Settings'\n\n// notifications\nimport Notifications from 'pages/Settings/Notifications/Notifications'\nimport NotificationForm from 'pages/Settings/Notifications/NotificationForm'\n\n// templates\nimport Templates from 'pages/Settings/Templates/Templates'\nimport TemplateForm from 'pages/Settings/Templates/TemplateForm'\n\n// roles\nimport Roles from 'pages/Settings/Roles/Roles'\nimport RoleForm from 'pages/Settings/Roles/RoleForm'\n\n// entities\nimport EntityTypes from 'pages/Settings/EntityTypes/EntityTypes'\nimport EntityTypeForm from 'pages/Settings/EntityTypes/EntityTypeForm'\n\n// Modules\nimport Modules from 'pages/Settings/Modules/Modules'\nimport AddModule from 'pages/Settings/Modules/AddModule'\n\n// SiteSettings\nimport SiteSettings from 'pages/Settings/SiteSettings/SiteSettings'\nimport SiteSettingsForm from 'pages/Settings/SiteSettings/SiteSettingsForm'\n\nimport Test from 'pages/Test'\n\nconst isDev = !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\n\nconst Route: FC<RouteComponentProps> = ({ children }) => <>{children}</>\n\nconsole.log('process.env', process.env)\n\nconst Router2 = () => {\n\tconst Wrapper = db.siteSettings.get('layout') === 'sidebar' ? PageSidebar : PageTopbar\n\n\tconst entityTypes = db.entityTypes.all()\n\n\treturn (\n\t\t<Suspense fallback={null}>\n\t\t\t<Router basepath={process.env.PUBLIC_URL}>\n\t\t\t\t<Wrapper path=\"/\">\n\t\t\t\t\t<Redirect from=\"/\" to=\"home\" noThrow={isDev} />\n\t\t\t\t\t<NotFound default />\n\t\t\t\t\t<Home path=\"/home\" />\n\t\t\t\t\t<Home path=\"/events\" />\n\t\t\t\t\t<Home path=\"/users\" />\n\n\t\t\t\t\t{entityTypes.map((entityType) => (\n\t\t\t\t\t\t<Route key={entityType.id} path={`/${entityType.key}`}>\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Entities path=\"/\" entityTypeId={entityType.id} />\n\t\t\t\t\t\t\t<ViewEntity path=\":id\" entityTypeId={entityType.id} />\n\t\t\t\t\t\t\t<EntityForm path=\"/create\" entityTypeId={entityType.id} mode=\"create\" />\n\t\t\t\t\t\t\t<EntityForm path=\":id/edit\" entityTypeId={entityType.id} mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t))}\n\n\t\t\t\t\t<Settings path=\"/settings\">\n\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t<Redirect from=\"/\" to=\"entity-types\" noThrow={isDev} />\n\n\t\t\t\t\t\t<Route path=\"/entity-types\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<EntityTypes path=\"/\" />\n\t\t\t\t\t\t\t<EntityTypeForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<EntityTypeForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/roles\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Roles path=\"/\" />\n\t\t\t\t\t\t\t<RoleForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<RoleForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/templates\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Templates path=\"/\" />\n\t\t\t\t\t\t\t<TemplateForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<TemplateForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/notifications\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Notifications path=\"/\" />\n\t\t\t\t\t\t\t<NotificationForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<NotificationForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/modules\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Modules path=\"/\" />\n\t\t\t\t\t\t\t<AddModule path=\"/add\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/site-settings\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<SiteSettings path=\"/\" />\n\t\t\t\t\t\t\t<SiteSettingsForm path=\"/edit\" />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t</Settings>\n\n\t\t\t\t\t<Test path=\"/test\" />\n\t\t\t\t</Wrapper>\n\t\t\t</Router>\n\t\t</Suspense>\n\t)\n}\n\nexport default Router2\n","import React, { useEffect, useReducer } from 'react'\nimport Router from './Router'\nimport 'react-quill/dist/quill.snow.css'\nimport './main.css'\nimport { renderContainer } from 'db'\n\nconst App = () => {\n\tconst [, dispatch] = useReducer(() => ({}), {})\n\tuseEffect(() => {\n\t\trenderContainer.current = dispatch\n\t}, [dispatch])\n\n\treturn <Router />\n}\n\nexport default App\n","import React, { Suspense } from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nconsole.log('build #' + process.env.REACT_APP_COMMIT)\n\nReactDOM.render(\n\t<Suspense fallback={null}>\n\t\t<App />\n\t</Suspense>,\n\tdocument.getElementById('root')\n)\n"],"sourceRoot":""}