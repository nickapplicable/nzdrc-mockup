(this["webpackJsonpicra-ts"]=this["webpackJsonpicra-ts"]||[]).push([[0],{522:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(35),r=n.n(a),c=n(6),s=n(14),l=n(3),o=n(559),d={title:"Resolutionary",layout:"sidebar"},u={siteSettings:d,units:[],values:[],entities:[],entityPermissions:[],fields:[],fieldPermissions:[],actions:[],actionPermissions:[],relations:[],relationPermissions:[],notifications:[],templates:[],workflows:[],workflowSteps:[],workflowStepConnections:[],roles:[],pages:[],forms:[]},j={current:function(){}},b=function(e){return{all:function(t){return t&&u[e]?Array.prototype.filter.call(u[e],t):u[e]||[]},find:function(t){return Array.prototype.find.call(u[e],"function"===typeof t?t:function(e){return e.id===t})},save:function(t){if("object"!==typeof(i=t)||"undefined"!==typeof i.id&&""!==i.id){var n=!1;return u[e]=u[e].map((function(e){return e.id===t.id?(n=!0,t):e})),n||Array.prototype.push.call(u[e],t),x(),j.current(),t}var i,a=Object(l.a)(Object(l.a)({},t),{},{id:Object(o.a)(),created:(new Date).toISOString()});return Array.prototype.push.call(u[e],a),x(),j.current(),a},remove:function(t){u[e]=u[e].filter((function(e){return e.id!==t})),x(),j.current()}}},m={siteSettings:{set:function(e,t){u.siteSettings[e]=t,j.current(),x()},get:function(e){return u.siteSettings[e]}},units:b("units"),values:b("values"),entities:b("entities"),entityPermissions:b("entityPermissions"),fields:b("fields"),fieldPermissions:b("fieldPermissions"),actions:b("actions"),actionPermissions:b("actionPermissions"),relations:b("relations"),relationPermissions:b("relationPermissions"),notifications:b("notifications"),templates:b("templates"),workflows:b("workflows"),workflowSteps:b("workflowSteps"),workflowStepConnections:b("workflowStepConnections"),roles:b("roles"),pages:b("pages"),forms:b("forms")},x=function(){return localStorage.setItem("data",JSON.stringify(u))},f=function(){u.siteSettings=d,u.units=[],u.values=[],u.entities=[],u.entityPermissions=[],u.fields=[],u.fieldPermissions=[],u.actions=[],u.actionPermissions=[],u.relations=[],u.relationPermissions=[],u.notifications=[],u.templates=[],u.workflows=[],u.workflowSteps=[],u.workflowStepConnections=[],u.roles=[],u.pages=[],u.forms=[],x()};!function(){var e=JSON.parse(localStorage.getItem("data")||"null");e&&(u.siteSettings=e.siteSettings||{},u.units=e.units||[],u.values=e.values||[],u.entities=e.entities||[],u.entityPermissions=e.entityPermissions||[],u.fields=e.fields||[],u.fieldPermissions=e.fieldPermissions||[],u.actions=e.actions||[],u.actionPermissions=e.actionPermissions||[],u.relations=e.relations||[],u.relationPermissions=e.relationPermissions||[],u.notifications=e.notifications||[],u.templates=e.templates||[],u.workflows=e.workflows||[],u.workflowSteps=e.workflowSteps||[],u.workflowStepConnections=e.workflowStepConnections||[],u.roles=e.roles||[],u.pages=e.pages||[],u.forms=e.forms||[])}();var O=m,v=n(8),h=n(2),p=n(20),g=n(7),y=n(11),N=n.n(y),w=n(16),k=n(552),C=n(560),I=n(1),S=function(e){e.show;var t=e.className,n=e.children;return Object(I.jsx)(k.a.div,{className:Object(h.a)(t,"relative z-40"),style:{originY:0},variants:{hidden:{y:-24},visible:{y:0}},transition:{type:"tween",ease:"easeOut",duration:.2},initial:"hidden",animate:"visible",exit:"hidden",children:n})},D=function(e){var t=e.show,n=e.className,i=e.children;return Object(I.jsx)(C.a,{children:t&&Object(I.jsx)(k.a.div,{className:Object(h.a)(n,"relative z-40"),style:{originY:0},variants:{hidden:{opacity:0},visible:{opacity:1}},transition:{type:"tween",ease:"easeOut",duration:.2},initial:"hidden",animate:"visible",exit:"hidden",children:i})})},E=[];var T=function(e){return new Promise((function(t){var n=document.createElement("div");document.body.appendChild(n),E.push(n);a.render(Object(I.jsx)(e,{resolve:function(e){return t(e)},close:function(){a.unmountComponentAtNode(n),E.splice(E.findIndex((function(e){return e===n})),1),document.contains(n)&&document.body.removeChild(n)}}),n)}))},P=function(e){var t=e.className;return Object(I.jsx)("div",{className:Object(h.a)("border-t border-black dark:border-white border-opacity-10 dark:border-opacity-10",t)})},F=function(e){var t=e.show,n=e.style,a=e.children,r=Object(i.useState)(t),s=Object(c.a)(r,2),o=s[0],d=s[1],u=Object(i.useState)(!1),j=Object(c.a)(u,2),b=j[0],m=j[1],x=Object(i.useState)(t),f=Object(c.a)(x,2),O=f[0],v=f[1];return Object(i.useEffect)((function(){t?(m(!0),setTimeout((function(){return v(!0)}),1),setTimeout((function(){return m(!1)}),400)):(m(!0),setTimeout((function(){return v(!1)}),1),setTimeout((function(){return m(!1)}),400))}),[t]),Object(I.jsx)(C.a,{children:O&&Object(I.jsx)(k.a.div,{style:Object(l.a)({originY:0,padding:"0.5rem",margin:"-0.5rem",overflow:b?"hidden":"visible"},n),variants:{hidden:{height:0},visible:{height:"auto"}},transition:{type:"tween",ease:"easeOut",duration:.3},onAnimationComplete:function(){return d(!1)},initial:o?"visible":"hidden",animate:"visible",exit:"hidden",children:a})})},M=n(533),A=function(e){return void 0!==e&&""!==e&&!1!==e&&null!==e},V=function(e){return"string"===typeof e.to},L=function(e){return"function"===typeof e.onClick},R=function(e){return"submit"===e.type},z=function(e){return e.actions instanceof Array},q=function(e){return!!e.menu},H=function(e){return"undefined"!==typeof e.to},B=function(e){return"undefined"!==typeof e.url},W={0:"",1:"pt-1",2:"pt-2",3:"pt-3",4:"pt-4",6:"pt-6",8:"pt-8"},_=function(e){var t=e.space,n=void 0===t?6:t,a=e.dividers,r=e.className,c=e.children,s=i.Children.toArray(c).reduce((function(e,t,r){var c,s,o=null===t||void 0===t?void 0:t.type,d=(null===t||void 0===t||null===(c=t.props)||void 0===c?void 0:c.children)||null,u=Object(M.a)(["children","show"],t.props)||null,j=(null===t||void 0===t||null===(s=t.props)||void 0===s?void 0:s.show)||null;return o===i.Fragment?e.concat(d):[].concat(Object(v.a)(e),[o===F?Object(I.jsx)(F,Object(l.a)(Object(l.a)({show:j},u),{},{children:Object(I.jsxs)("div",{className:Object(h.a)(r>0&&W[n||0]),children:[a&&r>0&&Object(I.jsx)(P,{className:W[n||0]}),d]})})):t])}),[]);return Object(I.jsx)("div",{className:Object(h.a)("flex flex-col",r),children:s.filter(A).map((function(e,t){return e.type===F?Object(I.jsx)(i.Fragment,{children:e},t):Object(I.jsxs)("div",{className:Object(h.a)(t>0&&W[n||0]),children:[a&&t>0&&Object(I.jsx)(P,{className:W[n||0]}),e]},t)}))})},Y=n(4),U=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(i.useRef)(null);return Object(i.useEffect)((function(){var n;t.current&&e&&("function"===typeof(null===(n=t.current)||void 0===n?void 0:n.focus)&&setTimeout((function(){var e;null===(e=t.current)||void 0===e||e.focus()}),100))}),[e]),t},Z={xs:"px-2.5 py-1.5 text-xs leading-4",sm:"px-3 py-2 text-sm leading-4",md:"px-4 py-2 text-sm leading-5",lg:"px-4 py-2 text-base leading-6",xl:"px-6 py-3 text-base leading-6",inline:""},K={none:"",sm:"rounded-sm",rounded:"rounded",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"},G={primary:{span:"inline-flex",button:Object(h.a)("inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased","disabled:cursor-not-allowed","text-white dark:text-white","border-0 border-primary-500","bg-primary-600 hover:bg-primary-700 dark:bg-primary-600 dark:hover:bg-primary-500 active:bg-primary-700 dark:active:bg-primary-700","focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-primary-300 dark:focus:ring-primary-300 dark:ring-offset-gray-800","disabled:opacity-50")},secondary:{span:"inline-flex",button:Object(h.a)("inline-flex items-center font-medium border transition ease-in-out duration-150","disabled:cursor-not-allowed","border-gray-300 focus:border-primary-500 dark:border-gray-600 dark:focus:border-primary-500","text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white","bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750","focus:outline-none dark:focus:outline-none focus:ring-1 focus:ring-primary-500 dark:focus:ring-primary-500","disabled:opacity-50")},light:{span:"inline-flex",button:Object(h.a)("inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased","disabled:cursor-not-allowed","text-gray-800 dark:text-white","border-0 border-gray-500","bg-gray-100 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-500 active:bg-gray-300 dark:active:bg-gray-700","focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-300 dark:ring-offset-gray-800","disabled:opacity-50")},save:{span:"inline-flex",button:Object(h.a)("inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased","disabled:cursor-not-allowed","text-white dark:text-white","border-0","bg-emerald-500 hover:bg-emerald-600 dark:bg-emerald-500 hover:bg-emerald-400 dark:hover:bg-emerald-400 active:bg-emerald-600 dark:active:bg-emerald-700","focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-emerald-300 dark:focus:ring-emerald-700")},danger:{span:"inline-flex",button:Object(h.a)("inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased","disabled:cursor-not-allowed","text-white dark:text-white","border-0","bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-500 active:bg-red-700 dark:active:bg-red-700","focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-red-300 dark:focus:ring-red-300")},menu:{span:"flex",button:Object(h.a)("w-8 h-8 inline-flex items-center justify-center rounded-full","bg-transparent hover:bg-primary-300 hover:bg-opacity-25 dark:hover:bg-primary-300 dark:hover:bg-opacity-25 focus:bg-primary-200","text-gray-400 hover:text-gray-500 focus:text-gray-500 dark:hover:text-gray-300","focus:outline-none focus:ring-2 focus:ring-primary-500","transition ease-in-out duration-100","dark:hover:bg-gray-800 dark:focus:bg-gray-900 dark:hover:text-gray-400")},"menu-danger":{span:"inline-flex",button:Object(h.a)("w-8 h-8 inline-flex items-center justify-center rounded-full","bg-transparent hover:bg-red-300 hover:bg-opacity-25 dark:hover:bg-red-300 dark:hover:bg-opacity-25 focus:bg-red-200","text-red-400 hover:text-red-500 focus:text-red-500 dark:hover:text-red-300","focus:outline-none focus:ring-2 focus:ring-primary-500","transition ease-in-out duration-100","dark:hover:bg-red-800 dark:focus:bg-red-900 dark:hover:text-red-400")},"sidebar-menu":{span:"flex",button:Object(h.a)("w-8 h-8 inline-flex items-center justify-center rounded-full","bg-transparent hover:bg-gray-700 focus:bg-gray-600","text-gray-400 hover:text-gray-300 focus:text-gray-200","focus:outline-none focus:ring-2 focus:ring-primary-500","transition ease-in-out duration-100","dark:hover:bg-gray-800 dark:focus:bg-gray-900 dark:hover:text-gray-400")},"sub-menu":{span:"flex",button:"flex items-center justify-between text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out font-normal dark:text-gray-200 dark:hover:bg-gray-800 dark:focus:bg-gray-750"},borderless:{span:"inline hover",button:Object(h.a)("inline text-left border border-transparent hover:border-gray-300 focus:bg-gray-50 transition ease-in-out duration-150 dark:hover:border-gray-600 dark:focus:bg-gray-750","focus:border-primary-500 dark:focus:border-primary-500","focus:outline-none focus:ring-1 focus:ring-primary-500")},invisible:{span:"inline",button:Object(h.a)("inline-flex items-center text-left border border-transparent","hover:bg-gray-800 dark:hover:bg-gray-100 bg-opacity-10 hover:bg-opacity-10 dark:hover:bg-opacity-10","focus:outline-none focus:ring-2 focus:ring-primary-500")},none:{span:"",button:""}},J=Object(i.forwardRef)((function(e,t){var n=e.onClick,i=e.type,a=void 0===i?"button":i,r=e.intent,c=void 0===r?"secondary":r,s=e.size,o=void 0===s?"md":s,d=e.rounded,u=void 0===d?"rounded":d,j=e.disabled,b=e.isLoading,m=e.className,x=e.as,f=void 0===x?"button":x,O=e.children,v=f,p={};return"button"===f&&(p.type=a),Object(I.jsx)("span",{className:Object(h.a)("inline-flex select-none",G[c].span,K[u]),ref:t,children:Object(I.jsxs)(v,Object(l.a)(Object(l.a)({},p),{},{className:Object(h.a)("focus:outline-none",G[c].button,Z[o],K[u],m),onClick:n,disabled:j||b||!1,children:[b&&Object(I.jsx)(We,{className:"animate-spin -ml-1 mr-3 h-4 w-4"}),O]}))})})),$=function(e){var t=e.resolve,n=e.close,a=e.title,r=e.message,s=e.buttonLabel,l=void 0===s?"Yes":s,o=e.dismissable,d=void 0===o||o,u=e.intent,j=void 0===u?"danger":u,b=e.onAccept,m=Object(i.useState)(!0),x=Object(c.a)(m,2),f=x[0],O=x[1],v=Object(i.useState)(!1),p=Object(c.a)(v,2),g=p[0],y=p[1],k=Object(i.useRef)(null),C=U(),E=function(e){O(!1),t(e),setTimeout((function(){n()}),300)},T=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=9;break}return y(!0),e.next=4,new Promise((function(e){return setTimeout(e,500)}));case 4:return e.next=6,b();case 6:E(!0),e.next=10;break;case 9:E(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(I.jsx)(D,{show:f,children:Object(I.jsx)("div",{className:"fixed inset-0 w-screen h-screen flex p-4 justify-center bg-black bg-opacity-50 overflow-y-auto z-60 backdrop-filter backdrop-grayscale",onClick:function(e){e.target===k.current&&d&&!g&&E(!1)},ref:k,children:Object(I.jsx)(S,{show:f,className:"w-full pointer-events-none sm:flex sm:justify-center sm:items-start",children:Object(I.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg overflow-hidden shadow-xl sm:max-w-lg sm:w-full pointer-events-auto",ref:d?k:void 0,children:[Object(I.jsx)("div",{className:"bg-white dark:bg-gray-700 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(I.jsxs)("div",{className:"sm:flex sm:items-start",children:[Object(I.jsx)("div",{className:Object(h.a)("mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10",{"bg-red-100 text-red-600":"danger"===j,"bg-indigo-100 text-indigo-600":"primary"===j}),children:Object(I.jsx)("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),Object(I.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Object(I.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:a}),r&&Object(I.jsx)("div",{className:"mt-2 text-sm leading-5 text-gray-500 dark:text-gray-300",children:r})]})]})}),Object(I.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-750 px-4 py-3 sm:px-6 flex flex-col-reverse sm:flex-row justify-end sm:space-x-3",children:[Object(I.jsx)("span",{className:Object(h.a)(G.danger.span,K.md),children:Object(I.jsx)("button",{onClick:function(){return E(!1)},type:"button",className:Object(h.a)(G.secondary.button,Z.md,K.md,"w-full sm:w-auto justify-center"),disabled:g,tabIndex:1,children:"Cancel"})}),Object(I.jsx)("span",{className:Object(h.a)(G[j].span,K.md),children:Object(I.jsx)("button",{onClick:T,type:"button",className:Object(h.a)(G[j].button,Z.md,K.md,"w-full sm:w-auto justify-center mb-3 sm:mb-0"),disabled:g,ref:C,tabIndex:2,children:Object(I.jsxs)("div",{className:"flex items-center",children:[g&&Object(I.jsx)(We,{className:"animate-spin -ml-1 mr-3 w-4 h-4"}),l]})})})]})]})})})})},X=function(){var e=Object(w.a)(N.a.mark((function e(t){var n,i,a,r,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,i=t.message,a=t.intent,r=t.buttonLabel,c=t.onAccept,e.next=3,T((function(e){var t=e.resolve,s=e.close;return Object(I.jsx)($,{resolve:t,close:s,title:n,message:i,buttonLabel:r,onAccept:c,dismissable:!0,intent:a})}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q={sm:"20rem",md:"40rem",lg:"60rem",xl:"75rem",screen:"100vw"},ee=Object(i.createContext)({isSaving:!1,setSaving:function(e){}}),te=function(){return Object(i.useContext)(ee)};function ne(e){var t=e.resolve,n=e.close,a=e.children,r=e.size,s=void 0===r?"md":r,l=e.dismissable,o=void 0!==l&&l,d=Object(i.useState)(!0),u=Object(c.a)(d,2),j=u[0],b=u[1],m=te(),x=Object(i.useCallback)((function(e){(null===m||void 0===m?void 0:m.isSaving)||(t(e),b(!1),setTimeout((function(){n()}),500))}),[n,t,null===m||void 0===m?void 0:m.isSaving]),f=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=function(e){"Escape"===e.key&&o&&x(!1)};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[x,o]),Object(I.jsx)(D,{show:j,children:Object(I.jsx)("div",{className:"fixed inset-0 z-40 w-screen h-screen flex p-4 justify-center bg-black bg-opacity-50 overflow-y-auto backdrop-filter backdrop-grayscale",onClick:function(e){e.target===f.current&&o&&x(!1)},ref:f,children:Object(I.jsx)(S,{show:j,className:"w-full pointer-events-none sm:flex sm:justify-center sm:items-start relative z-40",children:Object(I.jsx)("div",{className:"rounded-lg sm:max-w-sm sm:w-full sm:p-6 pointer-events-auto",style:{maxWidth:Q[s]},children:a(x)})})})})}function ie(e){var t=e.dismissable,n=e.size,a=e.children;return T((function(e){var r=e.resolve,s=e.close,l=Object(i.useState)(!1),o=Object(c.a)(l,2),d=o[0],u=o[1];return Object(I.jsx)(ee.Provider,{value:{isSaving:d,setSaving:u},children:Object(I.jsx)(ne,{resolve:r,close:s,children:a,dismissable:t,size:n})})}))}var ae={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"};function re(e){var t=e.close,n=e.resolve,a=e.children,r=e.size,s=void 0===r?"md":r,l=e.mode,o=void 0===l?"":l,d=e.dismissable,u=void 0===d||d,j=Object(i.useState)(!0),b=Object(c.a)(j,2),m=b[0],x=b[1],f=Object(i.useCallback)((function(e){n(e),x(!1),setTimeout((function(){t()}),500)}),[t,n]),O=Object(i.useRef)(null);return Object(I.jsx)(D,{show:m,children:Object(I.jsx)("div",{className:Object(h.a)("fixed z-40 inset-0 overflow-hidden",o),onClick:function(e){e.target===O.current&&u&&f(!1)},ref:O,children:Object(I.jsxs)("div",{className:"absolute z-40 inset-0 overflow-hidden",children:[Object(I.jsx)("div",{className:"absolute z-40 inset-0 bg-black bg-opacity-50 transition-opacity backdrop-filter backdrop-grayscale",onClick:function(){return f(!1)}}),Object(I.jsx)("section",{className:Object(h.a)("absolute z-40 inset-y-0 right-0 w-full flex",ae[s]),children:Object(I.jsx)(k.a.div,{className:"pointer-events-none flex-1",variants:{hidden:{x:"100%"},visible:{x:"0%"}},transition:{type:"tween",ease:"easeOut",duration:.2},initial:"hidden",animate:"visible",exit:"hidden",children:Object(I.jsx)("div",{className:"pointer-events-auto h-full w-full",children:a(f)})})})]})})})}function ce(e){var t=e.dismissable,n=e.size,i=e.mode,a=void 0===i?"":i,r=e.children;return T((function(e){var i=e.resolve,c=e.close;return Object(I.jsx)(re,{resolve:i,close:c,children:r,dismissable:t,size:n,mode:a})}))}var se=document.createElement("div");se.className="flex flex-col justify-start fixed inset-0 pointer-events-none z-50",document.body.appendChild(se);var le=n(156),oe=(n(537),n(538),n(539)),de=n(540),ue=[{name:"New Year's Day",date:new Date("1 Jan 2021")},{name:"Day after New Year's Day",date:new Date("4 Jan 2021")},{name:"Waitangi Day",date:new Date("8 Feb 2021")},{name:"Good Friday",date:new Date("2 Apr 2021")},{name:"Easter Monday",date:new Date("5 Apr 2021")},{name:"Anzac Day",date:new Date("26 Apr 2021")},{name:"Queen's Birthday",date:new Date("7 Jun 2021")},{name:"Labour Day",date:new Date("25 Oct 2021")},{name:"Christmas Day",date:new Date("27 Dec 2021")},{name:"Boxing Day",date:new Date("28 Dec 2021")},{name:"New Year's Day",date:new Date("3 Jan 2022")},{name:"Day after New Year's Day",date:new Date("4 Jan 2022")},{name:"Waitangi Day",date:new Date("7 Feb 2022")},{name:"Good Friday",date:new Date("15 Apr 2022")},{name:"Easter Monday",date:new Date("18 Apr 2022")},{name:"Anzac Day",date:new Date("25 Apr 2022")},{name:"Queen's Birthday",date:new Date("6 Jun 2022")},{name:"Matariki",date:new Date("24 Jun 2022")},{name:"Labour Day",date:new Date("24 Oct 2022")},{name:"Christmas Day",date:new Date("26 Dec 2022")},{name:"Boxing Day",date:new Date("27 Dec 2022")}],je=(Object({NODE_ENV:"production",PUBLIC_URL:"/nzdrc-mockup",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMMIT:"e75e27d089ecca6346a6b2134616e852837b34f8"}).REACT_APP_ENV,Object({NODE_ENV:"production",PUBLIC_URL:"/nzdrc-mockup",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMMIT:"e75e27d089ecca6346a6b2134616e852837b34f8"}).REACT_APP_SITE||"dev"),be=n(557),me=(n(534),n(561),n(278)),xe=n(279),fe=n(264),Oe=n(280);function ve(e){var t=Object(i.useRef)(null),n=Object(i.useRef)(null),a=Object(i.useRef)((function(){})),r=Object(i.useCallback)((function(){t.current&&n.current&&(a.current&&a.current(),a.current=Object(me.a)(t.current,n.current,Object(l.a)(Object(l.a)({},e),{},{modifiers:[xe.a,fe.a,Oe.a].concat(Object(v.a)((null===e||void 0===e?void 0:e.modifiers)||[]))})).destroy)}),[t,n,a,e]);return Object(i.useMemo)((function(){return[function(e){t.current=e,r()},function(e){n.current=e,r()}]}),[t,n,r])}var he=n(554),pe=n(265),ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.useState)(!1),n=Object(c.a)(t,2),a=n[0],r=n[1],s=Object(i.useState)("ignore-dismissable-".concat(Math.floor(999999*Math.random()))),l=Object(c.a)(s,1),o=l[0],d=Object(i.useCallback)((function(){e.onClose&&e.onClose(),r(!1)}),[e]),u=Object(i.useState)(a),j=Object(c.a)(u,2),b=j[0],m=j[1];Object(i.useEffect)((function(){a!==b&&(e.onOpen&&a&&e.onOpen(),m(a))}),[a,e,b]),Object(i.useEffect)((function(){var e=function(e){return"Escape"===e.key&&r(!1)};return a?window.addEventListener("keyup",e):window.removeEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[a,d]);var x=Object(pe.a)((function(e){r(!1)}),{ignoreClass:o});return{open:a,setOpen:r,ignoreClass:o,ref:x}},ye=function(e){var t=e.placement,n=void 0===t?"bottom-end":t,i=e.className,a=e.children,r=e.menu,s=e.maxWidth,l=ve({placement:n,strategy:"fixed",modifiers:[{name:"offset",options:{offset:[0,0]}}]}),o=Object(c.a)(l,2),d=o[0],u=o[1],j=ge(),b=j.open,m=j.setOpen,x=j.ignoreClass,f=j.ref;return Object(I.jsxs)("div",{className:Object(h.a)("block text-left",i),children:[Object(I.jsx)("div",{ref:d,className:x,children:a({onClick:function(){return m((function(e){return!e}))}})}),Object(I.jsx)("div",{ref:u,className:"z-20",children:Object(I.jsx)("div",{ref:f,children:Object(I.jsx)(C.a,{children:b&&Object(I.jsx)(k.a.div,{className:Object(h.a)(i,"relative z-60"),style:{originY:0},variants:{hidden:{scale:.95,opacity:0},visible:{scale:1,opacity:1}},transition:{type:"tween",ease:"easeOut",duration:.2},initial:"hidden",animate:"visible",exit:"hidden",children:Object(I.jsx)("div",{className:"mt-2 rounded-md shadow-lg focus:outline-none",style:{maxWidth:s?"number"===typeof s?s+"px":s:"auto"},children:Object(I.jsx)("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 whitespace-nowrap",children:r})})})})})})]})},Ne={primary:"block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:bg-gray-750 h-10",secondary:"rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-primary-300 hover:bg-opacity-25 dark:hover:bg-primary-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:focus:bg-gray-750 active:bg-gray-200 dark:active:bg-gray-700 h-10",save:"rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-green-300 hover:bg-opacity-25 dark:hover:bg-green-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-green-100 hover:text-green-600 font-normal dark:text-green-200 dark:hover:bg-opacity-50 dark:hover:text-green-100 dark:focus:bg-green-400 active:bg-green-200 dark:active:bg-green-300 h-10",danger:"rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-red-300 hover:bg-opacity-25 dark:hover:bg-red-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-red-100 hover:text-red-600 font-normal dark:text-red-200 dark:hover:bg-opacity-50 dark:hover:text-red-100 dark:focus:bg-red-400 active:bg-red-200 dark:active-bg-red-300 h-10",submit:"block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal h-10",cancel:"block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal",menu:"block","sidebar-menu":"","sub-menu":"block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:hover:bg-gray-800 dark:focus:bg-gray-750",anchor:"block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal",borderless:"block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal",invisible:"",none:"",light:"","menu-danger":""},we=function(e){var t=e.action;if(!A(t))return null;var n=t.iconSide||"left";return Object(I.jsxs)("div",{className:"flex items-center justify-between",children:[Object(I.jsxs)("div",{className:"flex items-center",children:["left"===n&&t.icon?Object(I.jsx)("span",{className:Object(h.a)(t.title?"-ml-1 mr-3 opacity-75":"-ml-1 -mr-1"),children:t.icon}):null,t.title]}),"right"===n&&t.icon?Object(I.jsx)("span",{className:"-mr-1 ml-2",children:t.icon}):null]})},ke=function e(t){var n=t.actions,a=t.intent,r=t.placement,l=void 0===r?"bottom-end":r,o=t.offset,d=void 0===o?10:o,u=t.hoverable,j=void 0!==u&&u,b=t.disabled,m=void 0!==b&&b,x=t.size,f=t.rounded,O=void 0===f?"rounded":f,p=t.className,g=t.children,y=ve({placement:l,strategy:"fixed",modifiers:[{name:"offset",options:{offset:d instanceof Array?d:[0,d]}}]}),N=Object(c.a)(y,2),w=N[0],S=N[1],D=Object(i.useState)(!1),E=Object(c.a)(D,2),T=E[0],P=E[1],F=Object(i.useState)(),M=Object(c.a)(F,2),H=M[0],B=M[1],W=n.filter(A)[0]instanceof Array?n.filter(A).reduce((function(e,t,n){return 0===n?Object(v.a)(t):[].concat(Object(v.a)(e),[{divider:!0}],Object(v.a)(t.filter(A)))}),[]):n.filter(A),_=Object(i.useRef)(!1);return Object(I.jsx)("div",{className:Object(h.a)("block text-left w-full",p),onMouseOver:function(){j&&(P(!0),H&&clearTimeout(H))},onMouseOut:function(){j&&B(setTimeout((function(){P(!1)}),100))},children:Object(I.jsx)(he.a,{children:function(t){var n=t.open;return n!==_.current&&(_.current=n,n&&window.dispatchEvent(new Event("resize"))),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("span",{className:Object(h.a)(a&&G[a].span,K[O]),children:Object(I.jsx)(he.a.Button,{className:Object(h.a)(a&&G[a].button,x&&Z[x],K[O]),disabled:m,ref:w,children:g})}),Object(I.jsx)("div",{ref:S,className:"z-20 whitespace-nowrap",children:Object(I.jsx)(C.a,{children:(n||T)&&!m&&Object(I.jsx)(k.a.div,{style:{originY:0},variants:{hidden:{scale:.95,opacity:0},visible:{scale:1,opacity:1}},transition:{type:"tween",ease:"easeOut",duration:.3},initial:"hidden",animate:"visible",exit:"hidden",children:Object(I.jsx)(he.a.Items,{static:!0,className:"max-w-screen origin-top-right bg-white dark:bg-gray-900 rounded-md shadow-lg outline-none",children:Object(I.jsx)("div",{className:"p-2 rounded-md ring-1 ring-black ring-opacity-5",children:W.filter(A).map((function(t,n){return V(t)?Object(I.jsx)(he.a.Item,{disabled:t.disabled,children:function(e){var i=e.active;return Object(I.jsx)(s.a,{to:"".concat("/nzdrc-mockup").concat(t.to),className:Object(h.a)(Ne[t.intent||"secondary"],"flex items-center",{"ring-2 ring-indigo-500 hover:ring-0":i}),state:t.state,replace:t.replace,children:Object(I.jsx)(we,{action:t})},n)}},n):L(t)?!t.disabled&&Object(I.jsx)(he.a.Item,{disabled:t.disabled,onClick:function(){console.log("menu.item click")},children:function(e){var i=e.active;return Object(I.jsx)("button",{onClick:function(e){t.disableDismiss&&e.preventDefault(),e.stopPropagation(),t.onClick(e)},className:Object(h.a)(Ne[t.intent||"secondary"],{"ring-2 ring-indigo-500 hover:ring-0":i}),type:"button",children:Object(I.jsx)(we,{action:t})},n)}},n):R(t)?!t.disabled&&Object(I.jsx)(he.a.Item,{disabled:t.disabled,children:function(e){var i=e.active;return Object(I.jsx)("button",{className:Object(h.a)(Ne[t.intent||"secondary"],{"ring-2 ring-indigo-500 hover:ring-0":i}),type:"submit",children:Object(I.jsx)(we,{action:t})},n)}},n):z(t)?Object(I.jsx)(e,{actions:t.actions,intent:t.intent||"sub-menu",placement:t.placement,offset:t.offset||[-4,-1],hoverable:t.hoverable,children:Object(I.jsx)(he.a.Item,{disabled:t.disabled,children:function(e){var n=e.active;return Object(I.jsx)("div",{className:Object(h.a)(Ne[t.intent||"secondary"],"flex items-center",{"ring-2 ring-indigo-500 hover:ring-0":n}),children:Object(I.jsx)(we,{action:t})})}})},n):q(t)?Object(I.jsx)(ye,{menu:t.menu,placement:t.placement,className:t.className,maxWidth:t.maxWidth,children:function(e){var n=e.onClick;return Object(I.jsx)("span",{className:"block",children:Object(I.jsx)(J,{intent:t.intent||"secondary",onClick:n,children:Object(I.jsx)(we,{action:t})})})}},n):function(e){return!0===(null===e||void 0===e?void 0:e.divider)}(t)?Object(I.jsx)("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"},n):null}))})})})})})]})}})})},Ce={0:{wrapper:"",item:""},1:{wrapper:"-ml-1 -mt-1",item:"pl-1 pt-1"},2:{wrapper:"-ml-2 -mt-2",item:"pl-2 pt-2"},3:{wrapper:"-ml-3 -mt-3",item:"pl-3 pt-3"},4:{wrapper:"-ml-4 -mt-4",item:"pl-4 pt-4"},6:{wrapper:"-ml-6 -mt-6",item:"pl-6 pt-6"},8:{wrapper:"-ml-8 -mt-8",item:"pl-8 pt-8"}},Ie=function(e){var t=e.space,n=void 0===t?3:t,a=e.children,r=e.className,c=i.Children.toArray(a);return Object(I.jsx)("div",{className:Object(h.a)("flex flex-wrap",Ce[n||0].wrapper,r),children:c.map((function(e,t){return Object(I.jsx)("div",{className:Object(h.a)("flex items-center",Ce[n||0].item),children:e},t)}))})},Se=function(e){var t=e.action;return A(t)?(L(t)||R(t))&&t.isLoading?Object(I.jsx)(I.Fragment,{children:t.title}):Object(I.jsxs)(I.Fragment,{children:["left"!==t.iconSide&&t.iconSide||!t.icon?null:Object(I.jsx)("span",{className:Object(h.a)(t.title?"-ml-1 mr-2":""),children:t.icon}),t.title,"right"===t.iconSide&&t.icon?Object(I.jsx)("span",{className:"-mr-1 ml-2",children:t.icon}):null]}):null},De=function(e){var t=e.actions,n=void 0===t?[]:t,i=e.className,a=(n instanceof Array?n:[n]).filter(A);return Object(I.jsx)(Ie,{className:Object(h.a)("inline-flex",i),children:a.map((function(e,t){return V(e)?Object(I.jsx)(s.a,{to:"".concat("/nzdrc-mockup").concat(e.to),className:e.className,state:e.state,replace:e.replace,children:Object(I.jsx)(J,{intent:e.intent,size:e.size,rounded:e.rounded,children:Object(I.jsx)(Se,{action:e})})},t):L(e)?Object(I.jsx)(J,{intent:e.intent,onClick:function(t){t.stopPropagation(),e.onClick&&e.onClick(t)},disabled:e.disabled||e.isLoading||!1,className:e.className,type:e.type,isLoading:e.isLoading,size:e.size,rounded:e.rounded,children:Object(I.jsx)(Se,{action:e})},t):R(e)?Object(I.jsx)(J,{intent:e.intent,disabled:e.disabled||e.isLoading||!1,className:e.className,type:e.type,isLoading:e.isLoading,size:e.size,rounded:e.rounded,children:Object(I.jsx)(Se,{action:e})},t):z(e)?Object(I.jsx)(ke,{actions:e.actions,intent:e.intent||"secondary",placement:e.placement,offset:e.offset,hoverable:e.hoverable,className:e.className,disabled:e.disabled,size:e.size||"md",rounded:e.rounded,children:Object(I.jsx)(Se,{action:e})},t):q(e)?Object(I.jsx)(ye,{menu:e.menu,placement:e.placement,className:e.className,maxWidth:e.maxWidth,children:function(t){var n=t.onClick;return Object(I.jsx)(J,{intent:e.intent,disabled:e.disabled,size:e.size,onClick:n,children:Object(I.jsx)(Se,{action:e})})}},t):function(e){return!!e.render}(e)?Object(I.jsx)("div",{children:e.render},t):null}))})},Ee=function(e){var t=e.title,n=e.className,a=e.children,r=Object(i.useRef)(null),s=Object(i.useRef)(void 0),l=Object(i.useState)(!1),o=Object(c.a)(l,2),d=o[0],u=o[1],j=Object(i.useCallback)((function(){if(r.current){var e=r.current,t=e.clientWidth,n=e.clientHeight,i=e.scrollWidth,a=e.scrollHeight;u(a>n||i>t)}}),[]);return Object(i.useEffect)((function(){var e=function(){s.current&&clearTimeout(s.current),s.current=setTimeout(j,500)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[j]),Object(i.useEffect)(j,[j]),Object(I.jsx)("span",{ref:r,className:Object(h.a)("overflow-ellipsis overflow-hidden",n),title:d?t:"",children:a})},Te=n(562),Pe={1:"col-span-1",2:"col-span-2",3:"col-span-3",4:"col-span-4",5:"col-span-5",6:"col-span-6",7:"col-span-7",8:"col-span-8",9:"col-span-9",10:"col-span-10",11:"col-span-11",12:"col-span-12"},Fe={sm:"640px",md:"768px",lg:"1024px",xl:"1280px",xxl:"1536px"},Me=function(e){return function(t){return e.reduce((function(e,n){return e||t.visibility===n}),!1)}},Ae=function(e){var t=e.schema,n=e.items,a=e.getKey,r=void 0===a?function(e,t){return t}:a,s=e.isStriped,l=void 0!==s&&s,o=e.className,d=function(e){var t=Object(i.useMemo)((function(){return e.map((function(e){return window.matchMedia(e)}))}),[e]),n=Object(i.useCallback)((function(){return t.map((function(e){return e.matches}))}),[t]),a=Object(i.useState)(n),r=Object(c.a)(a,2),s=r[0],l=r[1];return Object(i.useEffect)((function(){var e=function(){return l(n)};return t.forEach((function(t){return t.addListener(e)})),function(){return t.forEach((function(t){return t.removeListener(e)}))}}),[n,t]),s}(Object.values(Fe).map((function(e){return"(min-width: ".concat(e,")")}))),u=Object(c.a)(d,5),j={sm:u[0],md:u[1],lg:u[2],xl:u[3],xxl:u[4]},b=t.cols.filter(A).filter(Me([void 0,"all","screen-only"])).filter((function(e){return!e.responsive||j[e.responsive]})),m=b.map((function(e){return e.width||"minmax(0, auto)"})).join(" "),x=t.actions;return Object(I.jsx)("div",{className:Object(h.a)(o),children:Object(I.jsxs)("div",{className:"grid border-t border-gray-200 dark:border-gray-600",style:{gridTemplateColumns:A(x)?m.concat(" minmax(auto, max-content)"):m},children:[b.map((function(e,t){return Object(I.jsx)("div",{className:Object(h.a)("px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap dark:border-gray-600 dark:bg-gray-750 dark:text-gray-300",e.className),children:e.title},t)})),A(x)&&Object(I.jsx)("div",{className:"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap dark:border-gray-600 dark:bg-gray-750 dark:text-gray-300"}),n.map((function(e,t){return Object(I.jsxs)("div",{className:"contents group",children:[b.map((function(n,i){return Object(I.jsx)("div",{className:Object(h.a)("min-h-11 whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 group-hover:text-gray-700 dark:group-hover:text-gray-100 flex items-center border-b border-gray-100 dark:border-gray-600 group-hover:bg-primary-50 dark:group-hover:bg-gray-600",0===i&&"font-medium",!n.truncate&&"px-5 py-4",l&&t%2&&"bg-gray-50 dark:bg-gray-750",n.className),children:n.truncate?Object(I.jsx)(Ee,{title:Object(Te.a)(n.value(e,t)),className:"px-6 py-4",children:n.value(e,t)}):n.value?n.value(e,t):null},i)})),(null===x||void 0===x?void 0:x.length)?Object(I.jsx)("div",{className:Object(h.a)("px-5 whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 group-hover:text-gray-700 dark:group-hover:text-gray-100 flex items-center justify-center border-b border-gray-100 dark:border-gray-600 group-hover:bg-primary-50 dark:group-hover:bg-gray-600",l&&t%2&&"bg-gray-50 dark:bg-gray-750"),children:Object(I.jsx)(De,{actions:x(e,t),className:"flex-nowrap"})}):null]},r(e,t))})),0===n.length&&Object(I.jsx)("div",{className:"contents group",children:Object(I.jsx)("div",{className:Object(h.a)(Pe[b.length+((null===x||void 0===x?void 0:x.length)?1:0)],"px-6 py-3","whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 flex items-center justify-center border-b border-gray-100 dark:border-gray-600 select-none"),children:"No items"})})]})})},Ve=function(e,t){for(var n=e.split(" "),i=function(e){var i=t[e];n.find((function(e){return i.pattern.test(e)}))||n.push(i.defaultValue)},a=0;a<t.length;a++)i(a);return n.join(" ")};function Le(e){return!isNaN(e.valueOf())}var Re=function(e){return e instanceof Date?e:new Date(e||"")},ze=function(e){var t;return null===(t=ue.find((function(t){return Object(de.a)(t.date,e)})))||void 0===t?void 0:t.name},qe=function(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"},He=function(e){return e.trim().replace(/\s/g,"-").toLowerCase()},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve(e,[{pattern:/^w-\d+$/,defaultValue:"w-5"},{pattern:/^h-\d+$/,defaultValue:"h-5"}])},We=function(e){var t=e.className;return Object(I.jsxs)("svg",{className:Be(Object(h.a)(t)),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(I.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Object(I.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},_e=["size","spin","className"],Ye=function(e){e.size,e.spin;var t=e.className,n=void 0===t?"":t,i=Object(p.a)(e,_e);return Object(I.jsx)("div",Object(l.a)(Object(l.a)({className:"flex flex-col justify-center items-center p-2 ".concat(n)},i),{},{children:Object(I.jsx)(We,{className:"w-10 h-10 animate-spin"})}))};var Ue=function(e,t){var n=Object(i.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(i){return t}})),a=Object(c.a)(n,2),r=a[0],s=a[1];return[r,function(t){var n=t instanceof Function?t(r):t;s(n),window.localStorage.setItem(e,JSON.stringify(n))}]},Ze=function(e){var t=e.items,n=function(e){return void 0!==e.to?a(e):function(e){return void 0!==e.href}(e)?r(e):function(e){return void 0!==e.onClick}(e)?c(e):null},a=function(e){return Object(I.jsxs)(s.a,{to:"".concat("/nzdrc-mockup").concat(e.to),getProps:function(t){var n=t.isCurrent,i=t.isPartiallyCurrent;return{className:Object(h.a)((e.exact?n:i)?"bg-gray-600 text-gray-100":"text-gray-300 hover:bg-gray-700","flex items-center px-2.5 py-2 text-sm font-medium rounded")}},children:[e.icon&&Object(I.jsx)("div",{className:" mr-3",children:e.icon}),Object(I.jsx)("span",{className:"truncate antialiased",children:e.title})]})},r=function(e){return Object(I.jsxs)("a",{href:e.href,className:"flex items-center px-2.5 py-2 text-sm font-medium rounded text-gray-300 hover:bg-gray-700",children:[e.icon&&Object(I.jsx)("div",{className:" mr-3",children:e.icon}),Object(I.jsx)("span",{className:"truncate antialiased",children:e.title})]})},c=function(e){return Object(I.jsxs)("button",{onClick:e.onClick,className:"flex items-center w-full px-2.5 py-2 text-sm font-medium rounded text-gray-300 hover:bg-gray-700",children:[e.icon&&Object(I.jsx)("div",{className:" mr-3",children:e.icon}),Object(I.jsx)("span",{className:"truncate antialiased",children:e.title})]})};return Object(I.jsx)("nav",{className:"space-y-1","aria-label":"Sidebar",children:t.map((function(e,t){return void 0!==e.items?Object(I.jsx)("div",{children:Object(I.jsxs)("div",{className:Object(h.a)("mt-4 pt-5",0!==t&&"border-t border-gray-500"),children:[e.title&&Object(I.jsx)("div",{className:"px-3 mb-2 text-xs font-semibold text-gray-400 uppercase tracking-wider antialiased",children:e.title}),Object(I.jsx)("div",{className:"space-y-1",children:e.items.map((function(e,t){return Object(I.jsx)(i.Fragment,{children:n(e)},t)}))})]})},t):Object(I.jsx)(i.Fragment,{children:n(e)},t)}))})},Ke=function(e){var t=e.items,n=e.header,i=void 0===n?null:n,a=e.footer,r=void 0===a?null:a,s=e.name,l=void 0===s?"sidebar":s,o=e.minimizable,d=void 0!==o&&o,u=e.className,j=Ue(l,!1),b=Object(c.a)(j,2),m=b[0],x=b[1];return Object(I.jsxs)("div",{className:Object(h.a)("h-full flex flex-col bg-gray-800 relative transition-all duration-100",m?"w-16":"w-64",u),children:[d&&Object(I.jsx)("div",{className:Object(h.a)("absolute right-0 top-0 h-full -mr-2 w-4 z-40 group",{"cursor-right":m,"cursor-left":!m}),onClick:function(){return x((function(e){return!e}))},children:Object(I.jsx)("div",{className:"group-hover:opacity-100 opacity-0 transition-opacity ease-in-out duration-200 w-1 h-full ml-1.5 bg-primary-600"})}),Object(I.jsxs)("div",{className:"flex-1 flex flex-col overflow-scroll",children:["function"===typeof i?i(m):i,Object(I.jsx)("div",{className:"px-3 flex-1",children:Object(I.jsx)(Ze,{items:"function"===typeof t?t(m):t})}),"function"===typeof r?r(m):r]})]})},Ge=function(e){var t;return null===(t=document.querySelector("html"))||void 0===t?void 0:t.classList[e?"add":"remove"]("dark")},Je=function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],r=window.matchMedia("(prefers-color-scheme: dark)");return Object(i.useEffect)((function(){if(null!==n)Ge(n);else{var e=function(e){return Ge(e.matches)};if(Ge(r.matches),r.hasOwnProperty("addEventListener"))return r.addEventListener("change",e),function(){return r.removeEventListener("change",e)}}}),[n,r]),[n,a]},$e=function(e){var t=e.intent,n=void 0===t?"light":t,i=e.className,a=function(){var e=Object(w.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=Je(),s=Object(c.a)(r,2),l=s[0],o=s[1];return Object(I.jsx)("div",{className:Object(h.a)("max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex items-center justify-end",i),children:{}&&Object(I.jsx)("div",{className:"flex items-center space-x-2",children:Object(I.jsx)(De,{actions:[{title:Object(I.jsx)("div",{className:"flex items-center space-x-4",children:Object(I.jsx)("div",{className:Object(h.a)("text-sm font-medium","dark"===n&&"text-gray-200 antialiased"),children:"Your Name"})}),icon:Object(I.jsx)(Y.k,{className:Object(h.a)("w-5 h-5 opacity-75","dark"===n&&"text-white")}),iconSide:"right",intent:"invisible",placement:"bottom-end",size:"xs",actions:[[{title:"Colour Scheme",icon:Object(I.jsx)(Y.l,{className:"w-4 h-4"}),iconSide:"left",placement:"left-start",hoverable:!0,actions:[{title:"Dark Mode",icon:Object(I.jsx)(Y.j,{className:Object(h.a)("w-4 h-4",!0===l?"opacity-100":"opacity-0")}),iconSide:"left",onClick:function(){return o(!0)}},{title:"Light Mode",icon:Object(I.jsx)(Y.j,{className:Object(h.a)("w-4 h-4",!1===l?"opacity-100":"opacity-0")}),iconSide:"left",onClick:function(){return o(!1)}},{title:"System Preference",icon:Object(I.jsx)(Y.j,{className:Object(h.a)("w-4 h-4",null===l?"opacity-100":"opacity-0")}),iconSide:"left",onClick:function(){return o(null)}}]}],[{title:"Logout",icon:Object(I.jsx)(Y.z,{className:"w-4 h-4"}),iconSide:"left",onClick:a}]]}]})})})},Xe=n(41),Qe=n(42),et=n(44),tt=n(157),nt=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(Xe.a)(this,n),t.apply(this,arguments)}return Object(Qe.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.props.action()}},{key:"render",value:function(){return null}}]),n}(i.Component),it=function(e){var t=e.action;return Object(I.jsx)(s.b,{children:function(e){var n=e.location;return Object(I.jsx)(nt,{location:n,action:t})}})},at=[{number:"0.0.0",date:"2021-07-29",new:["Everything is new"],change:[],bug:[]}],rt=n(269),ct=n.n(rt),st=function(e){var t=e.className,n=void 0===t?"":t;return Object(I.jsxs)("svg",{className:Object(h.a)(n),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 170 32",children:[Object(I.jsx)("path",{d:"M15.258 26.865C15.2725 27.4021 15.1797 27.9367 14.9852 28.4376C14.7906 28.9384 14.4982 29.3955 14.125 29.782C13.7521 30.1668 13.3058 30.4728 12.8124 30.682C12.3191 30.8913 11.7889 30.9994 11.253 31C10.7171 31.0002 10.1865 30.8924 9.69311 30.6832C9.19969 30.4739 8.75345 30.1674 8.38102 29.782C8.00712 29.396 7.71425 28.939 7.51967 28.438C7.32508 27.9371 7.23272 27.4022 7.24802 26.865C7.25702 26.167 7.44802 25.483 7.80502 24.884C8.16102 24.284 8.66802 23.79 9.27502 23.451C9.25102 23.56 9.36502 23.396 9.27502 23.451L11.135 21.799C12.6094 20.2298 13.4329 18.1592 13.439 16.006C13.439 13.08 11.728 10.105 9.26902 8.549C9.36302 8.604 9.23302 8.455 9.26902 8.549C8.66171 8.20902 8.15496 7.71469 7.80002 7.116C7.44385 6.5163 7.25175 5.83344 7.24302 5.136C7.22837 4.59872 7.32104 4.06391 7.51558 3.56287C7.71012 3.06183 8.00264 2.60462 8.37602 2.218C8.74882 1.83334 9.19499 1.52735 9.68812 1.31815C10.1813 1.10894 10.7113 1.00076 11.247 1C11.783 0.999714 12.3135 1.10742 12.807 1.31668C13.3004 1.52595 13.7467 1.83249 14.119 2.218C14.4931 2.60395 14.786 3.06089 14.9806 3.56188C15.1752 4.06288 15.2675 4.59777 15.252 5.135C15.2624 7.30708 16.102 9.3932 17.599 10.967L18.416 11.767C18.742 12.052 19.084 12.318 19.44 12.565C20.061 12.895 20.582 13.391 20.944 13.996C21.215 14.4489 21.3913 14.9521 21.4622 15.4751C21.5331 15.9982 21.4972 16.5301 21.3566 17.0389C21.216 17.5476 20.9737 18.0225 20.6442 18.4349C20.3148 18.8473 19.9051 19.1885 19.44 19.438C19.473 19.371 19.377 19.474 19.44 19.438C18.1839 20.2321 17.1447 21.3258 16.416 22.621C15.6855 23.9184 15.2877 25.3764 15.258 26.865V26.865ZM19.741 5.123C19.741 5.919 19.976 6.698 20.417 7.36C20.8565 8.02107 21.4822 8.53685 22.215 8.842C22.9471 9.14685 23.7535 9.22661 24.5311 9.07112C25.3088 8.91563 26.0224 8.53193 26.581 7.969C27.1413 7.40452 27.5226 6.68728 27.6772 5.9071C27.8318 5.12692 27.7528 4.31848 27.45 3.583C27.1473 2.84836 26.6337 2.2199 25.974 1.777C25.2039 1.26028 24.2779 1.02768 23.355 1.11909C22.4321 1.2105 21.5698 1.62024 20.916 2.278C20.1641 3.034 19.7417 4.05673 19.741 5.123V5.123ZM23.748 22.84C22.956 22.84 22.181 23.076 21.522 23.518C20.8624 23.9609 20.3488 24.5894 20.046 25.324C19.7431 26.0596 19.6639 26.8683 19.8185 27.6486C19.9731 28.429 20.3545 29.1464 20.915 29.711C21.4736 30.2739 22.1873 30.6576 22.9649 30.8131C23.7426 30.9686 24.5489 30.8888 25.281 30.584C26.0145 30.2785 26.6406 29.762 27.08 29.1C27.5948 28.3249 27.8262 27.3959 27.7351 26.47C27.644 25.544 27.236 24.6779 26.58 24.018C26.2089 23.6446 25.7676 23.3482 25.2816 23.1457C24.7957 22.9432 24.2745 22.8386 23.748 22.838V22.84ZM34 15.994C34 15.198 33.765 14.42 33.325 13.758C32.8857 13.0966 32.26 12.5804 31.527 12.275C30.7948 11.9699 29.9882 11.8901 29.2104 12.0456C28.4325 12.2011 27.7187 12.5849 27.16 13.148C26.5995 13.7126 26.2181 14.43 26.0635 15.2104C25.9089 15.9907 25.9881 16.7994 26.291 17.535C26.5937 18.2696 27.1073 18.8981 27.767 19.341C28.4252 19.783 29.2002 20.019 29.993 20.019C30.5195 20.0182 31.0406 19.9136 31.5266 19.7111C32.0125 19.5086 32.4538 19.2123 32.825 18.839C33.577 18.0826 33.9994 17.0596 34 15.993V15.994Z",fill:"currentColor"}),Object(I.jsx)("path",{d:"M5.00699 11.969C4.21399 11.969 3.43999 12.205 2.78099 12.647C2.12121 13.0902 1.60759 13.719 1.30499 14.454C1.00226 15.1895 0.923231 15.9979 1.07781 16.7781C1.23239 17.5583 1.6137 18.2755 2.17399 18.84C2.73339 19.4017 3.44702 19.7845 4.22434 19.9399C5.00166 20.0953 5.80763 20.0164 6.53999 19.713C7.2729 19.4075 7.89866 18.8914 8.338 18.23C8.85242 17.4552 9.08361 16.5265 8.99251 15.601C8.90141 14.6754 8.49361 13.8097 7.83799 13.15C7.4669 12.7767 7.02585 12.4803 6.54007 12.2776C6.0543 12.075 5.53334 11.9701 5.00699 11.969V11.969Z",fill:"currentColor"}),Object(I.jsx)("path",{d:"M51.14 23L48.658 18.495H47.961V23H45.054V11.066H49.933C50.8737 11.066 51.6727 11.2303 52.33 11.559C52.9987 11.8877 53.4973 12.341 53.826 12.919C54.1547 13.4857 54.319 14.1203 54.319 14.823C54.319 15.6163 54.0923 16.3247 53.639 16.948C53.197 17.5713 52.5397 18.0133 51.667 18.274L54.421 23H51.14ZM47.961 16.438H49.763C50.2957 16.438 50.6923 16.3077 50.953 16.047C51.225 15.7863 51.361 15.418 51.361 14.942C51.361 14.4887 51.225 14.1317 50.953 13.871C50.6923 13.6103 50.2957 13.48 49.763 13.48H47.961V16.438ZM65.0858 18.104C65.0858 18.376 65.0688 18.6593 65.0348 18.954H58.4558C58.5012 19.5433 58.6882 19.9967 59.0168 20.314C59.3568 20.62 59.7705 20.773 60.2578 20.773C60.9832 20.773 61.4875 20.467 61.7708 19.855H64.8648C64.7062 20.4783 64.4172 21.0393 63.9978 21.538C63.5898 22.0367 63.0742 22.4277 62.4508 22.711C61.8275 22.9943 61.1305 23.136 60.3598 23.136C59.4305 23.136 58.6032 22.9377 57.8778 22.541C57.1525 22.1443 56.5858 21.5777 56.1778 20.841C55.7698 20.1043 55.5658 19.243 55.5658 18.257C55.5658 17.271 55.7642 16.4097 56.1608 15.673C56.5688 14.9363 57.1355 14.3697 57.8608 13.973C58.5862 13.5763 59.4192 13.378 60.3598 13.378C61.2778 13.378 62.0938 13.5707 62.8078 13.956C63.5218 14.3413 64.0772 14.891 64.4738 15.605C64.8818 16.319 65.0858 17.152 65.0858 18.104ZM62.1108 17.339C62.1108 16.8403 61.9408 16.4437 61.6008 16.149C61.2608 15.8543 60.8358 15.707 60.3258 15.707C59.8385 15.707 59.4248 15.8487 59.0848 16.132C58.7562 16.4153 58.5522 16.8177 58.4728 17.339H62.1108ZM70.4784 23.136C69.6511 23.136 68.9144 22.9943 68.2684 22.711C67.6224 22.4277 67.1124 22.0423 66.7384 21.555C66.3644 21.0563 66.1548 20.501 66.1094 19.889H68.9824C69.0164 20.2177 69.1694 20.484 69.4414 20.688C69.7134 20.892 70.0478 20.994 70.4444 20.994C70.8071 20.994 71.0848 20.926 71.2774 20.79C71.4814 20.6427 71.5834 20.4557 71.5834 20.229C71.5834 19.957 71.4418 19.7587 71.1584 19.634C70.8751 19.498 70.4161 19.3507 69.7814 19.192C69.1014 19.0333 68.5348 18.869 68.0814 18.699C67.6281 18.5177 67.2371 18.24 66.9084 17.866C66.5798 17.4807 66.4154 16.965 66.4154 16.319C66.4154 15.775 66.5628 15.282 66.8574 14.84C67.1634 14.3867 67.6054 14.0297 68.1834 13.769C68.7728 13.5083 69.4698 13.378 70.2744 13.378C71.4644 13.378 72.3994 13.6727 73.0794 14.262C73.7708 14.8513 74.1674 15.6333 74.2694 16.608H71.5834C71.5381 16.2793 71.3908 16.0187 71.1414 15.826C70.9034 15.6333 70.5861 15.537 70.1894 15.537C69.8494 15.537 69.5888 15.605 69.4074 15.741C69.2261 15.8657 69.1354 16.0413 69.1354 16.268C69.1354 16.54 69.2771 16.744 69.5604 16.88C69.8551 17.016 70.3084 17.152 70.9204 17.288C71.6231 17.4693 72.1954 17.6507 72.6374 17.832C73.0794 18.002 73.4648 18.2853 73.7934 18.682C74.1334 19.0673 74.3091 19.5887 74.3204 20.246C74.3204 20.8013 74.1618 21.3 73.8444 21.742C73.5384 22.1727 73.0908 22.5127 72.5014 22.762C71.9234 23.0113 71.2491 23.136 70.4784 23.136ZM80.4169 23.136C79.4876 23.136 78.6489 22.9377 77.9009 22.541C77.1643 22.1443 76.5806 21.5777 76.1499 20.841C75.7306 20.1043 75.5209 19.243 75.5209 18.257C75.5209 17.2823 75.7363 16.4267 76.1669 15.69C76.5976 14.942 77.1869 14.3697 77.9349 13.973C78.6829 13.5763 79.5216 13.378 80.4509 13.378C81.3803 13.378 82.2189 13.5763 82.9669 13.973C83.7149 14.3697 84.3043 14.942 84.7349 15.69C85.1656 16.4267 85.3809 17.2823 85.3809 18.257C85.3809 19.2317 85.1599 20.093 84.7179 20.841C84.2873 21.5777 83.6923 22.1443 82.9329 22.541C82.1849 22.9377 81.3463 23.136 80.4169 23.136ZM80.4169 20.62C80.9723 20.62 81.4426 20.416 81.8279 20.008C82.2246 19.6 82.4229 19.0163 82.4229 18.257C82.4229 17.4977 82.2303 16.914 81.8449 16.506C81.4709 16.098 81.0063 15.894 80.4509 15.894C79.8843 15.894 79.4139 16.098 79.0399 16.506C78.6659 16.9027 78.4789 17.4863 78.4789 18.257C78.4789 19.0163 78.6603 19.6 79.0229 20.008C79.3969 20.416 79.8616 20.62 80.4169 20.62ZM89.8301 10.42V23H86.9231V10.42H89.8301ZM101.304 13.514V23H98.3968V21.708C98.1021 22.1273 97.6998 22.4673 97.1898 22.728C96.6911 22.9773 96.1358 23.102 95.5238 23.102C94.7985 23.102 94.1581 22.9433 93.6028 22.626C93.0475 22.2973 92.6168 21.827 92.3108 21.215C92.0048 20.603 91.8518 19.8833 91.8518 19.056V13.514H94.7418V18.665C94.7418 19.2997 94.9061 19.7927 95.2348 20.144C95.5635 20.4953 96.0055 20.671 96.5608 20.671C97.1275 20.671 97.5751 20.4953 97.9038 20.144C98.2325 19.7927 98.3968 19.2997 98.3968 18.665V13.514H101.304ZM108.679 20.535V23H107.2C106.146 23 105.324 22.745 104.735 22.235C104.146 21.7137 103.851 20.8693 103.851 19.702V15.928H102.695V13.514H103.851V11.202H106.758V13.514H108.662V15.928H106.758V19.736C106.758 20.0193 106.826 20.2233 106.962 20.348C107.098 20.4727 107.325 20.535 107.642 20.535H108.679ZM111.76 12.528C111.25 12.528 110.831 12.3807 110.502 12.086C110.185 11.78 110.026 11.406 110.026 10.964C110.026 10.5107 110.185 10.1367 110.502 9.842C110.831 9.536 111.25 9.383 111.76 9.383C112.259 9.383 112.667 9.536 112.984 9.842C113.313 10.1367 113.477 10.5107 113.477 10.964C113.477 11.406 113.313 11.78 112.984 12.086C112.667 12.3807 112.259 12.528 111.76 12.528ZM113.205 13.514V23H110.298V13.514H113.205ZM119.63 23.136C118.7 23.136 117.862 22.9377 117.114 22.541C116.377 22.1443 115.793 21.5777 115.363 20.841C114.943 20.1043 114.734 19.243 114.734 18.257C114.734 17.2823 114.949 16.4267 115.38 15.69C115.81 14.942 116.4 14.3697 117.148 13.973C117.896 13.5763 118.734 13.378 119.664 13.378C120.593 13.378 121.432 13.5763 122.18 13.973C122.928 14.3697 123.517 14.942 123.948 15.69C124.378 16.4267 124.594 17.2823 124.594 18.257C124.594 19.2317 124.373 20.093 123.931 20.841C123.5 21.5777 122.905 22.1443 122.146 22.541C121.398 22.9377 120.559 23.136 119.63 23.136ZM119.63 20.62C120.185 20.62 120.655 20.416 121.041 20.008C121.437 19.6 121.636 19.0163 121.636 18.257C121.636 17.4977 121.443 16.914 121.058 16.506C120.684 16.098 120.219 15.894 119.664 15.894C119.097 15.894 118.627 16.098 118.253 16.506C117.879 16.9027 117.692 17.4863 117.692 18.257C117.692 19.0163 117.873 19.6 118.236 20.008C118.61 20.416 119.074 20.62 119.63 20.62ZM131.916 13.412C133.027 13.412 133.911 13.7747 134.568 14.5C135.237 15.214 135.571 16.2 135.571 17.458V23H132.681V17.849C132.681 17.2143 132.517 16.7213 132.188 16.37C131.859 16.0187 131.417 15.843 130.862 15.843C130.307 15.843 129.865 16.0187 129.536 16.37C129.207 16.7213 129.043 17.2143 129.043 17.849V23H126.136V13.514H129.043V14.772C129.338 14.3527 129.734 14.024 130.233 13.786C130.732 13.5367 131.293 13.412 131.916 13.412ZM137.013 18.24C137.013 17.2653 137.194 16.4097 137.557 15.673C137.931 14.9363 138.435 14.3697 139.07 13.973C139.705 13.5763 140.413 13.378 141.195 13.378C141.864 13.378 142.447 13.514 142.946 13.786C143.456 14.058 143.847 14.415 144.119 14.857V13.514H147.026V23H144.119V21.657C143.836 22.099 143.439 22.456 142.929 22.728C142.43 23 141.847 23.136 141.178 23.136C140.407 23.136 139.705 22.9377 139.07 22.541C138.435 22.133 137.931 21.5607 137.557 20.824C137.194 20.076 137.013 19.2147 137.013 18.24ZM144.119 18.257C144.119 17.5317 143.915 16.9593 143.507 16.54C143.11 16.1207 142.623 15.911 142.045 15.911C141.467 15.911 140.974 16.1207 140.566 16.54C140.169 16.948 139.971 17.5147 139.971 18.24C139.971 18.9653 140.169 19.5433 140.566 19.974C140.974 20.3933 141.467 20.603 142.045 20.603C142.623 20.603 143.11 20.3933 143.507 19.974C143.915 19.5547 144.119 18.9823 144.119 18.257ZM152.036 15.095C152.376 14.5737 152.801 14.1657 153.311 13.871C153.821 13.565 154.388 13.412 155.011 13.412V16.489H154.212C153.487 16.489 152.943 16.6477 152.58 16.965C152.218 17.271 152.036 17.815 152.036 18.597V23H149.129V13.514H152.036V15.095ZM166.091 13.514L160.141 27.505H157.013L159.189 22.677L155.33 13.514H158.577L160.77 19.447L162.946 13.514H166.091Z",fill:"white"})]})},lt=function(e){var t=e.children,n=at.sort((function(e,t){return ct.a.gt(e.number,t.number)?-1:1})),a=Object(i.useRef)(null),r=O.entities.all(),c=Object(i.useMemo)((function(){return[{title:"Home",to:"/home",icon:Object(I.jsx)(Y.J,{className:"w-5 h-5"})}].concat(Object(v.a)(r.map((function(e){return{title:e.plural||e.name,to:"/".concat(e.key),icon:Object(I.jsx)(Y.E,{className:"w-5 h-5"})}}))),[{title:"Settings",to:"/settings",icon:Object(I.jsx)(Y.o,{className:"w-5 h-5"})}])}),[r]);return Object(I.jsxs)("div",{className:"h-screen flex flex-col md:flex-row md:overflow-hidden bg-gray-200 dark:bg-gray-800",children:[Object(I.jsx)(Ke,{name:"main",minimizable:!0,items:c,className:"hidden md:flex",header:Object(I.jsx)("div",{className:"px-2 my-10",children:Object(I.jsx)(s.a,{to:"".concat("/nzdrc-mockup","/dashboard"),children:Object(I.jsx)(st,{className:"h-11 text-primary-500"})})}),footer:function(e){return Object(I.jsxs)("div",{className:Object(h.a)("flex justify-between items-center",e?"flex-col space-y-2":"p-4"),children:[Object(I.jsx)("div",{className:Object(h.a)("text-gray-400 text-sm font-medium cursor-default",e?"text-center":""),children:e?"v".concat(n[0].number):"Version: ".concat(n[0].number)}),"livetest"===je?Object(I.jsx)("div",{className:Object(h.a)("py-0.5 -my-0.5 font-medium text-sm leading-6 text-red-300 bg-red-400 dark:bg-red-500 bg-opacity-25 dark:bg-opacity-25",e?"w-full text-center":"px-2.5 rounded-full"),children:"LiveTest"}):"demo"===je?Object(I.jsx)("div",{className:Object(h.a)("py-0.5 -my-0.5 font-medium text-sm leading-6 text-green-300 bg-green-400 dark:bg-green-500 bg-opacity-25 dark:bg-opacity-25",e?"w-full text-center":"px-2.5 rounded-full"),children:"Demo"}):"staging"===je?Object(I.jsx)("div",{className:Object(h.a)("py-0.5 -my-0.5 font-medium text-sm leading-6 text-green-300 bg-green-400 dark:bg-green-500 bg-opacity-25 dark:bg-opacity-25",e?"w-full text-center":"px-2.5 rounded-full"),children:"Staging"}):"dev"===je?Object(I.jsx)("div",{className:Object(h.a)("py-0.5 -my-0.5 font-medium text-sm leading-6 text-indigo-300 bg-indigo-400 dark:bg-indigo-500 bg-opacity-25 dark:bg-opacity-25",e?"w-full text-center":"px-2.5 rounded-full"),children:"Dev"}):null]})}}),Object(I.jsx)("div",{className:"flex flex-col flex-1 md:w-0 md:overflow-hidden",children:Object(I.jsxs)("main",{className:"flex-1 relative z-0 md:overflow-y-auto focus:outline-none",ref:a,children:[Object(I.jsx)("div",{className:"max-w-7xl mx-auto",children:Object(I.jsx)("div",{className:"border-b border-gray-300 dark:border-gray-700",children:Object(I.jsx)($e,{})})}),Object(I.jsx)(i.Suspense,{fallback:Object(I.jsx)("div",{className:"flex justify-center items-center h-screen",children:Object(I.jsx)(Ye,{})}),children:Object(I.jsx)("div",{className:"relative z-10",children:t})})]})}),Object(I.jsx)(it,{action:function(){var e;(null===a||void 0===a||null===(e=a.current)||void 0===e?void 0:e.scrollTo)&&a.current.scrollTo(0,0)}})]})},ot=n.p+"static/media/logo-text.7e31daaa.svg",dt=function(e){var t=e.links,n=e.withTopbar,a=void 0!==n&&n,r=Object(i.useState)(!1),l=Object(c.a)(r,2),o=l[0],d=l[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"md:hidden bg-gray-800 dark:bg-gray-900 flex justify-between p-4",children:[Object(I.jsx)(s.a,{to:"/dashboard",children:Object(I.jsx)("img",{src:ot,alt:"ICRA",className:"h-10"})}),Object(I.jsxs)("button",{className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:bg-gray-700 focus:text-white",onClick:function(){return d((function(e){return!e}))},children:[Object(I.jsx)("svg",{className:Object(h.a)("h-6 w-6",{block:!o,hidden:o}),stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),Object(I.jsx)("svg",{className:Object(h.a)("h-6 w-6",{block:o,hidden:!o}),stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:Object(I.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),Object(I.jsx)("div",{className:Object(h.a)("md:hidden bg-gray-800 dark:bg-gray-900 antialiased"),children:Object(I.jsx)(F,{show:o,children:Object(I.jsxs)("div",{className:"px-2 pt-2 pb-3 sm:px-3",children:[t.filter(A).map((function(e,t){return H(e)?Object(I.jsxs)(s.a,{to:e.to,getProps:function(e){var t=e.isCurrent;return{className:Object(h.a)({"flex items-center px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700":!t,"flex items-center px-3 py-2 rounded-md text-base font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700":t})}},onClick:function(){return d(!1)},children:[Object(I.jsx)("div",{className:"mr-3",children:e.icon}),e.title]},t):B(e)?Object(I.jsxs)("a",{href:e.url,className:"flex items-center px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700",children:[Object(I.jsx)("div",{className:"mr-3",children:e.icon}),e.title]},t):null})),a&&Object(I.jsx)($e,{intent:"dark"})]})})})]})},ut=function(e){var t=e.children,n=Object(i.useRef)(null),a=O.entities.all(),r=Object(i.useMemo)((function(){return[{title:"Home",to:"/home",icon:Object(I.jsx)(Y.J,{className:"w-5 h-5"}),exact:!0}].concat(Object(v.a)(a.map((function(e){return{title:e.plural||e.name,to:"/".concat(e.key),icon:Object(I.jsx)(Y.E,{className:"w-5 h-5"}),exact:!0}}))),[{title:"Settings",to:"/settings",icon:Object(I.jsx)(Y.o,{className:"w-5 h-5"}),exact:!1}])}),[a]);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"min-h-screen bg-gray-200 dark:bg-gray-800",children:[Object(I.jsx)(dt,{links:r.filter(A),withTopbar:!0}),Object(I.jsx)("div",{className:"bg-gray-800 dark:bg-gray-900 hidden md:block",children:Object(I.jsx)("nav",{className:"bg-gray-800 dark:bg-gray-900",children:Object(I.jsx)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:Object(I.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 sm:px-0",children:[Object(I.jsxs)("div",{className:"flex items-center",children:[Object(I.jsx)("div",{className:"flex-shrink-0",children:Object(I.jsx)(s.a,{to:"".concat("/nzdrc-mockup","/dashboard"),children:Object(I.jsx)("img",{src:ot,alt:"ICRA",className:"h-10"})})}),Object(I.jsx)("div",{className:"hidden md:block",children:Object(I.jsx)("div",{className:"ml-10 flex items-baseline space-x-4",children:r.filter(A).map((function(e,t){return Object(I.jsx)(s.a,{to:"".concat("/nzdrc-mockup").concat(e.to),className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:e.title},t)}))})})]}),Object(I.jsx)("div",{className:"hidden md:block",children:Object(I.jsx)($e,{intent:"dark"})})]})})})}),Object(I.jsx)("main",{ref:n,className:"relative z-0",children:Object(I.jsx)(i.Suspense,{fallback:Object(I.jsx)("div",{className:"flex justify-center items-center h-screen",children:Object(I.jsx)(Ye,{})}),children:Object(I.jsx)("div",{className:"relative z-20",children:t})})})]}),Object(I.jsx)(it,{action:function(){var e;window.scrollTo(0,0),null===n||void 0===n||null===(e=n.current)||void 0===e||e.scrollTo(0,0)}})]})},jt=Object(i.forwardRef)((function(e,t){var n=e.className,i=e.children,a=e.onClick,r=e.onMouseOver,c=e.onMouseOut,s=e.onDragOver,l=e.onDragEnter,o=e.onDragExit,d=e.onDragLeave;return Object(I.jsx)("div",{ref:t,className:Object(h.a)("bg-white dark:bg-gray-700 shadow rounded-none sm:rounded-md",n),onClick:a,onMouseOver:r,onMouseOut:c,onDragOver:s,onDragEnter:l,onDragExit:o,onDragLeave:d,children:i})})),bt=function(e){var t=e.className,n=e.children;return Object(I.jsx)("div",{className:Object(h.a)("px-4 py-5 sm:p-6",t),"data-card":!0,children:n})},mt=function(e){var t=e.className,n=e.children;return Object(I.jsx)("div",{className:Object(h.a)("bg-gray-50 dark:bg-gray-750 sm:rounded-b-md px-4 py-4 sm:px-6",t),"data-card":!0,children:n})},xt=function(e){var t=e.className,n=e.header,i=e.footer,a=e.children,r=e.onClick,c=e.onMouseOver,s=e.onMouseOut,l=e.onDragOver,o=e.onDragEnter,d=e.onDragExit,u=e.onDragLeave,j=e.wrapperRef;return Object(I.jsxs)(jt,{className:Object(h.a)(t),onClick:r,onMouseOver:c,onMouseOut:s,onDragOver:l,onDragEnter:o,onDragExit:d,onDragLeave:u,ref:j,children:[n,a&&Object(I.jsx)(bt,{children:a}),i&&Object(I.jsx)(mt,{children:i})]})},ft=n(17),Ot=["onSubmit"];var vt=function(e){var t,n=e.children,i=e.className,a=e.context;return Object(I.jsx)(ft.b,{value:a,children:Object(I.jsx)(ft.a,{className:i,children:(t=n,"function"===typeof t?n(a):n)})})},ht=function(e){var t=e.onSubmit,n=Object(p.a)(e,Ot),i=function(){var e=Object(w.a)(N.a.mark((function e(n,i){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n,i);case 2:i.setSubmitting(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(ft.e)(Object(l.a)({onSubmit:i},n))},pt=function(e){return function(t){return(null===e||void 0===e?void 0:e.required)&&!t?e.required:(null===e||void 0===e?void 0:e.min)&&+t<+e.min.value?e.min.message:(null===e||void 0===e?void 0:e.max)&&+t>+e.max.value?e.max.message:void 0}};function gt(e,t){return Object(ft.c)(null===t||void 0===t?void 0:t.values,e)}var yt,Nt=["className"],wt=[{label:"Default",value:"default"},{label:"Overlap",value:"overlap"},{label:"Inset",value:"inset"}],kt=function(e){var t=e.label,n=e.type,a=void 0===n?"text":n,r=e.value,s=e.onChange,d=e.onBlur,u=e.intent,j=void 0===u?"default":u,b=e.isRequired,m=e.error,x=e.touched,f=void 0!==x&&x,O=e.description,v=e.className,g=e.autoFocus,y=void 0!==g&&g,N=e.hideOptional,w=void 0!==N&&N,k=e.placeholder,C=e.disabled,S=void 0!==C&&C,D=e.inputProps,E=void 0===D?{}:D,T=U(y),P=E.className,F=Object(p.a)(E,Nt),M=Object(i.useState)(Object(o.a)()),A=Object(c.a)(M,1)[0];return"default"===j?Object(I.jsxs)("div",{className:Object(h.a)(v),children:[t&&Object(I.jsxs)("div",{className:"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default",onClick:function(){var e;return null===(e=T.current)||void 0===e?void 0:e.focus()},children:[t," ",!b&&!w&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]}),Object(I.jsx)("div",{className:"text-[0px] leading-none select-none",children:A}),Object(I.jsxs)("div",{className:Object(h.a)("relative rounded-md",t&&"mt-1"),children:[Object(I.jsx)("input",Object(l.a)({ref:T,type:a,value:r,onChange:s,onBlur:d,placeholder:k,disabled:S,className:Object(h.a)("form-input block w-full sm:text-sm sm:leading-5",P,m&&f&&"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500")},F)),m&&f&&Object(I.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:Object(I.jsx)(Y.t,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),O&&Object(I.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:O}),m&&f&&Object(I.jsx)("p",{className:"mt-2 text-sm text-red-600",children:m})]}):"overlap"===j?Object(I.jsxs)("div",{className:Object(h.a)(v),children:[Object(I.jsxs)("div",{className:Object(h.a)("relative border border-gray-300 dark:border-gray-500 rounded-md px-3 py-2 focus-within:ring-1 focus-within:ring-primary-500 focus-within:border-primary-500 transition-all duration-200",m&&f?"focus-within:ring-red-500 focus-within:border-red-500 dark:focus-within:ring-red-500 dark:focus-within:border-red-500":"focus-within:ring-primary-500 focus-within:border-primary-500"),children:[t&&Object(I.jsxs)("div",{className:"absolute -top-2 left-2 -mt-px inline-block px-1 bg-white dark:bg-gray-700 text-xs font-medium text-gray-900 dark:text-white",onClick:function(){var e;return null===(e=T.current)||void 0===e?void 0:e.focus()},children:[t," ",!b&&!w&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]}),Object(I.jsx)("div",{className:"text-[0px] leading-none select-none",children:A}),Object(I.jsx)("div",{className:Object(h.a)("relative rounded-md"),children:Object(I.jsx)("input",Object(l.a)({ref:T,type:a,value:r,onChange:s,onBlur:d,placeholder:k,disabled:S,className:Object(h.a)("block w-full border-0 p-0 bg-white dark:bg-gray-700 focus:ring-0 sm:text-sm",P,m&&f?"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500":"text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400")},F))}),m&&f&&Object(I.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:Object(I.jsx)(Y.t,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]}),O&&Object(I.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:O}),m&&f&&Object(I.jsx)("p",{className:"mt-2 text-sm text-red-600",children:m})]}):"inset"===j?Object(I.jsxs)("div",{className:Object(h.a)(v),children:[Object(I.jsxs)("div",{className:Object(h.a)("border rounded-md px-3 py-2 focus-within:ring-1 focus-within:ring-primary-500 transition-all duration-200"),children:[Object(I.jsxs)("div",{className:"block text-xs font-medium text-gray-900",onClick:function(){var e;return null===(e=T.current)||void 0===e?void 0:e.focus()},children:[t," ",!b&&!w&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]}),Object(I.jsxs)("div",{className:"relative",children:[Object(I.jsx)("input",Object(l.a)({ref:T,type:a,value:r,onChange:s,onBlur:d,placeholder:k,disabled:S,className:Object(h.a)("block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm",P,m&&f&&"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500")},F)),m&&f&&Object(I.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:Object(I.jsx)(Y.t,{className:"h-5 w-5 text-red-500","aria-hidden":"true"})})]})]}),O&&Object(I.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:O}),m&&f&&Object(I.jsx)("p",{className:"mt-2 text-sm text-red-600",children:m})]}):null},Ct=["className"],It=function(e){var t=e.name,n=e.label,i=e.type,a=void 0===i?"text":i,r=e.intent,s=void 0===r?"default":r,l=e.className,o=e.autoFocus,d=void 0!==o&&o,u=e.hideOptional,j=void 0!==u&&u,b=e.validations,m=void 0===b?{}:b,x=e.placeholder,f=e.disabled,O=void 0!==f&&f,v=e.description,h=e.inputProps,g=void 0===h?{}:h,y=null===m||void 0===m?void 0:m.required,N=Object(ft.d)({name:t,type:a,validate:pt(m)}),w=Object(c.a)(N,3),k=w[0].value,C=w[1],S=C.error,D=C.touched,E=w[2],T=E.setValue,P=E.setTouched,F=Object(ft.f)(),M=(g.className,Object(p.a)(g,Ct));return Object(I.jsx)(kt,{type:a,label:n,value:k,onChange:function(e){return T(e.target.value)},onBlur:function(){return P(!0)},placeholder:x,disabled:O||F.isSubmitting,inputProps:M,intent:s,error:S,touched:D,isRequired:y,description:v,autoFocus:d,hideOptional:j,className:l})},St={default:{container:"border-b border-gray-200",tab:function(e){return[e?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm"]}},card:{container:"ml-2",tab:function(e){return["whitespace-nowrap px-4 py-3 mr-2 font-medium text-sm rounded-t-md shadow",e?"bg-white":"bg-white bg-opacity-50"]}}},Dt=function(e){var t=e.tabs,n=e.value,i=e.onChange,a=e.className,r=e.intent,c=void 0===r?"default":r;return Object(I.jsxs)("div",{className:Object(h.a)("pt-2 px-2 -mt-2 -mx-2 overflow-hidden",a),children:[Object(I.jsxs)("div",{className:"sm:hidden",children:[Object(I.jsx)("label",{htmlFor:"tabs",className:"sr-only",children:"Select a tab"}),Object(I.jsx)("select",{id:"tabs",name:"tabs",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",value:n,onChange:function(e){return i(e.target.value)},children:t.map((function(e){return Object(I.jsx)("option",{children:e.label},e.value)}))})]}),Object(I.jsx)("div",{className:"hidden sm:block",children:Object(I.jsx)("div",{className:St[c].container,children:Object(I.jsx)("nav",{className:"-mb-px flex","aria-label":"Tabs",children:t.map((function(e){return Object(I.jsx)("button",{className:Object(h.a)(St[c].tab(e.value===n)),"aria-current":e.value===n?"page":void 0,onClick:function(){return i(e.value)},type:"button",children:e.label},e.value)}))})})})]})},Et=n(155),Tt=["ref"],Pt=function(e){var t=e.name,n=e.label,a=e.options,r=e.intent,s=void 0===r?"default":r,d=e.clearable,u=e.disabled,j=void 0!==u&&u,b=e.description,m=e.placeholder,x=e.validations,f=void 0===x?{}:x,O=e.hideOptional,v=void 0!==O&&O,g=e.className,y=e.autoFocus,N=e.onChange,w=null===f||void 0===f?void 0:f.required,k=Object(ft.d)({name:t,validate:pt(f)}),C=Object(c.a)(k,3),S=C[0],D=S.value,E=S.onBlur,T=C[1],P=T.error,F=T.touched,M=C[2],A=M.setValue,V=M.setTouched,L=Object(ft.f)(),R=Object(i.useState)(Object(o.a)()),z=Object(c.a)(R,1)[0],q=Object(I.jsx)(Et.a,{options:a,value:a.find((function(e){var t,n;return e.value===D||null!==D&&e.value===+D||void 0!==(null===(t=e.value)||void 0===t?void 0:t.id)&&(null===(n=e.value)||void 0===n?void 0:n.id)===(null===D||void 0===D?void 0:D.id)}))||null,onChange:function(e){V(!0),A(e?e.value:null),N&&N(e?e.value:null)},onBlur:function(e){V(!0),E(e)},inputProps:{autoComplete:"none",autoCorrect:"off",spellCheck:"off"},className:Object(h.a)("react-select-container font-normal",n&&"default"===s&&"mt-1",P&&F&&"react-select-container-error"),classNamePrefix:"react-select",placeholder:m,isClearable:d,isDisabled:j||L.isSubmitting,autoFocus:y,menuPlacement:"auto",components:{ClearIndicator:function(e){var t=e.hasValue,n=e.innerProps,i=n.ref,a=Object(p.a)(n,Tt);return t?Object(I.jsx)("span",Object(l.a)(Object(l.a)({ref:i},a),{},{children:Object(I.jsx)(Y.K,{className:"mr-8 w-5 h-5 cursor-pointer text-gray-400 hover:text-red-500"})})):null},DropdownIndicator:function(e){e.innerProps.ref;return null}}});return"default"===s?Object(I.jsxs)("div",{className:Object(h.a)(g),children:[Object(I.jsxs)("label",{className:"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200",children:[n&&Object(I.jsxs)(I.Fragment,{children:[n," ",!w&&!v&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]}),Object(I.jsx)("div",{className:"text-[0px] leading-none select-none",children:z}),q]}),b&&!P&&!F&&Object(I.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:b}),P&&F&&Object(I.jsx)("p",{className:"mt-2 text-sm text-red-600",children:P})]}):"overlap"===s?Object(I.jsxs)("div",{className:Object(h.a)(g),children:[Object(I.jsxs)("label",{className:"relative block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200",children:[n&&Object(I.jsxs)("div",{className:"absolute -top-2 left-2 -mt-px inline-block px-1 bg-white dark:bg-gray-700 text-xs font-medium text-gray-900 dark:text-white z-[1]",children:[n," ",!w&&!v&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]}),Object(I.jsx)("div",{className:"text-[0px] leading-none select-none",children:z}),q]}),b&&!P&&!F&&Object(I.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:b}),P&&F&&Object(I.jsx)("p",{className:"mt-2 text-sm text-red-600",children:P})]}):null},Ft=function(e){var t="string"===typeof e||"function"===typeof e?O.actions.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get entity(){return At((function(e){return e.id===(null===t||void 0===t?void 0:t.entityId)}))},get permissions(){return O.actionPermissions.all((function(e){return e.actionId===(null===t||void 0===t?void 0:t.id)})).map(Mt).filter(A)},permission:function(e){var n="string"===typeof e||"function"===typeof e?O.roles.find(e):e;return Mt((function(e){return e.actionId===(null===t||void 0===t?void 0:t.id)&&e.roleId===(null===n||void 0===n?void 0:n.id)}))}}):null},Mt=function(e){var t="string"===typeof e||"function"===typeof e?O.actionPermissions.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get role(){return _t((function(e){return e.id===(null===t||void 0===t?void 0:t.roleId)}))},get action(){return Ft((function(e){return e.id===(null===t||void 0===t?void 0:t.actionId)}))}}):null},At=function(e){var t="string"===typeof e||"function"===typeof e?O.entities.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get fields(){return O.fields.all((function(e){return e.entityId===(null===t||void 0===t?void 0:t.id)})).map(qt).filter(A)},get actions(){return O.actions.all((function(e){return e.entityId===(null===t||void 0===t?void 0:t.id)})).map(Ft).filter(A)},get relations(){return O.relations.all((function(e){return e.entityId===(null===t||void 0===t?void 0:t.id)})).map(Bt).filter(A)},get units(){return O.fields.all((function(e){return e.entityId===(null===t||void 0===t?void 0:t.id)})).map(Yt).filter(A)},get permissions(){return O.entityPermissions.all((function(e){return e.entityId===(null===t||void 0===t?void 0:t.id)})).map(Vt).filter(A)},permission:function(e){var n="string"===typeof e||"function"===typeof e?O.roles.find(e):e;return Vt((function(e){return e.entityId===(null===t||void 0===t?void 0:t.id)&&e.roleId===(null===n||void 0===n?void 0:n.id)}))},page:function(e){return Kt((function(n){return n.key===e&&n.entityId===(null===t||void 0===t?void 0:t.id)}))},get pages(){return O.pages.all((function(e){return e.entityId===(null===t||void 0===t?void 0:t.id)})).map(Kt).filter(A)}}):null},Vt=function(e){var t="string"===typeof e||"function"===typeof e?O.entityPermissions.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get role(){return _t((function(e){return e.id===(null===t||void 0===t?void 0:t.roleId)}))},get entity(){return At((function(e){return e.id===(null===t||void 0===t?void 0:t.entityId)}))}}):null},Lt=function(e,t){return e.created&&t.created?new Date(t.created).valueOf()-new Date(e.created).valueOf():0},Rt=o.a,zt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$";return Object.entries(t).reduce((function(e,t){var i=Object(c.a)(t,2),a=i[0],r=i[1];return e.replace("string"===typeof n?"".concat(n).concat(a):n(a),r||"")}),e).replace(/\s{2,}/g," ")},qt=function(e){var t="string"===typeof e||"function"===typeof e?O.fields.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get entity(){return At((function(e){return e.id===(null===t||void 0===t?void 0:t.entityId)}))},value:function(e){var n="string"===typeof e||"function"===typeof e?O.units.find(e):e;return Ut(O.values.all((function(e){return e.unitId===(null===n||void 0===n?void 0:n.id)&&e.fieldId===(null===t||void 0===t?void 0:t.id)})).sort(Lt)[0])},values:function(e){var n="string"===typeof e||"function"===typeof e?O.units.find(e):e;return O.values.all((function(e){return e.unitId===(null===n||void 0===n?void 0:n.id)&&e.fieldId===(null===t||void 0===t?void 0:t.id)})).sort(Lt).map(Ut).filter(A)},get permissions(){return O.fieldPermissions.all((function(e){return e.fieldId===(null===t||void 0===t?void 0:t.id)})).map(Ht).filter(A)},permission:function(e){var n="string"===typeof e||"function"===typeof e?O.roles.find(e):e;return Ht((function(e){return e.fieldId===(null===t||void 0===t?void 0:t.id)&&e.roleId===(null===n||void 0===n?void 0:n.id)}))}}):null},Ht=function(e){var t="string"===typeof e||"function"===typeof e?O.fieldPermissions.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get role(){return _t((function(e){return e.id===(null===t||void 0===t?void 0:t.roleId)}))},get field(){return qt((function(e){return e.id===(null===t||void 0===t?void 0:t.fieldId)}))}}):null},Bt=function(e){var t="string"===typeof e||"function"===typeof e?O.relations.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get entity(){return At((function(e){return e.id===(null===t||void 0===t?void 0:t.entityId)}))},get related(){return At((function(e){return e.id===(null===t||void 0===t?void 0:t.relatedId)}))}}):null},Wt=function(e){var t="string"===typeof e||"function"===typeof e?O.relationPermissions.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get role(){return _t((function(e){return e.id===(null===t||void 0===t?void 0:t.roleId)}))},get relation(){return Bt((function(e){return e.id===(null===t||void 0===t?void 0:t.relationId)}))}}):null},_t=function(e){var t="string"===typeof e||"function"===typeof e?O.roles.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{fieldPermission:function(e){var n="string"===typeof e||"function"===typeof e?O.fields.find(e):e;return Ht((function(e){return e.fieldId===(null===n||void 0===n?void 0:n.id)&&e.roleId===(null===t||void 0===t?void 0:t.id)}))},fieldPermissions:function(e){var n="string"===typeof e||"function"===typeof e?O.entities.find(e):e;return O.fields.all((function(e){return e.entityId===(null===n||void 0===n?void 0:n.id)})).map((function(e){return O.fieldPermissions.find((function(n){return n.fieldId===e.id&&n.roleId===(null===t||void 0===t?void 0:t.id)}))})).filter(A).map(Ht).filter(A)},actionPermission:function(e){var n="string"===typeof e||"function"===typeof e?O.actions.find(e):e;return Mt((function(e){return e.actionId===(null===n||void 0===n?void 0:n.id)&&e.roleId===(null===t||void 0===t?void 0:t.id)}))},actionPermissions:function(e){var n="string"===typeof e||"function"===typeof e?O.entities.find(e):e;return O.actions.all((function(e){return e.entityId===(null===n||void 0===n?void 0:n.id)})).map((function(e){return O.actionPermissions.find((function(n){return n.actionId===e.id&&n.roleId===(null===t||void 0===t?void 0:t.id)}))})).filter(A).map(Mt).filter(A)},relationPermission:function(e){var n="string"===typeof e||"function"===typeof e?O.relations.find(e):e;return Wt((function(e){return e.relationId===(null===n||void 0===n?void 0:n.id)&&e.roleId===(null===t||void 0===t?void 0:t.id)}))},relationPermissions:function(e){var n="string"===typeof e||"function"===typeof e?O.entities.find(e):e;return O.relations.all((function(e){return e.entityId===(null===n||void 0===n?void 0:n.id)})).map((function(e){return O.relationPermissions.find((function(n){return n.relationId===e.id&&n.roleId===(null===t||void 0===t?void 0:t.id)}))})).filter(A).map(Wt).filter(A)}}):null},Yt=function(e){var t,n="string"===typeof e||"function"===typeof e?O.units.find(e):e;if(!n)return null;var i=null===(t=At((function(e){return e.id===(null===n||void 0===n?void 0:n.entityId)})))||void 0===t?void 0:t.fields;return Object(l.a)(Object(l.a)({},n),{},{resolvedValues:(null===i||void 0===i?void 0:i.reduce((function(e,t){var i=O.values.all((function(e){return e.unitId===(null===n||void 0===n?void 0:n.id)&&e.fieldId===(null===t||void 0===t?void 0:t.id)})).sort(Lt).map(Ut)[0];return Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},t.key,null===i||void 0===i?void 0:i.value))}),{}))||{},get entity(){return At((function(e){return e.id===(null===n||void 0===n?void 0:n.entityId)}))},get values(){var e=O.entities.find((function(e){return e.id===(null===n||void 0===n?void 0:n.entityId)}));return O.fields.all((function(t){return t.entityId===(null===e||void 0===e?void 0:e.id)})).map((function(e){return O.values.all((function(t){return t.fieldId===e.id})).sort(Lt)[0]})).map(Ut).filter(A)},value:function(e){var t="string"===typeof e||"function"===typeof e?O.fields.find(e):e;return O.values.all((function(e){return e.unitId===(null===n||void 0===n?void 0:n.id)&&e.fieldId===(null===t||void 0===t?void 0:t.id)})).sort(Lt).map(Ut)[0]}})},Ut=function(e){var t="string"===typeof e||"function"===typeof e?O.values.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get field(){return qt((function(e){return e.id===(null===t||void 0===t?void 0:t.fieldId)}))},get unit(){return Yt((function(e){return e.id===(null===t||void 0===t?void 0:t.unitId)}))},get history(){return O.values.all((function(e){return e.fieldId===(null===t||void 0===t?void 0:t.fieldId)&&e.unitId===(null===t||void 0===t?void 0:t.unitId)})).sort(Lt)},get formatted(){var e=qt((function(e){return e.id===(null===t||void 0===t?void 0:t.fieldId)}));if(!e)return null;try{return"date"===e.type?Object(le.a)(new Date((null===t||void 0===t?void 0:t.value)||""),(null===e||void 0===e?void 0:e.dateFormat)||"dd/MM/yyyy"):(null===t||void 0===t?void 0:t.value)||null}catch(n){return null}}}):null};!function(e){e[e.None=1]="None",e[e.Entity=2]="Entity",e[e.Unit=3]="Unit",e[e.Relation=4]="Relation"}(yt||(yt={}));var Zt=[{value:yt.None,label:"None"},{value:yt.Unit,label:"Unit"},{value:yt.Entity,label:"Entity"},{value:yt.Relation,label:"Relation"}],Kt=function(e){var t="string"===typeof e||"function"===typeof e?O.pages.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{data:t,get entity(){return At((function(e){return e.id===(null===t||void 0===t?void 0:t.entityId)}))}}):null},Gt=function(e){var t="string"===typeof e||"function"===typeof e?O.workflowSteps.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get connections(){return O.workflowStepConnections.all((function(e){return e.sourceId===(null===t||void 0===t?void 0:t.id)})).map(Jt).filter(A)}}):null},Jt=function(e){var t="string"===typeof e||"function"===typeof e?O.workflowStepConnections.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get target(){return Gt((null===t||void 0===t?void 0:t.targetId)||"")}}):null},$t=[{label:"Preset",value:"preset"},{label:"Credentials",value:"credentials"}],Xt=O.entities.find((function(e){return"user"===e.key})),Qt=O.units.all((function(e){return e.entityId===(null===Xt||void 0===Xt?void 0:Xt.id)})).map((function(e){var t,n,i,a,r=Yt(e),c=null===r||void 0===r||null===(t=r.entity)||void 0===t?void 0:t.fields.find((function(e){return"first-name"===e.key})),s=null===r||void 0===r||null===(n=r.entity)||void 0===n?void 0:n.fields.find((function(e){return"last-name"===e.key}));return{label:(null===r||void 0===r||null===(i=r.value((null===c||void 0===c?void 0:c.id)||""))||void 0===i?void 0:i.value)+" "+(null===r||void 0===r||null===(a=r.value((null===s||void 0===s?void 0:s.id)||""))||void 0===a?void 0:a.value),value:e}})),en=function(){var e=ht({initialValues:{username:"",password:"",user:null},onSubmit:function(e){console.log("formData",e)}}),t=Object(i.useState)($t[0].value),n=Object(c.a)(t,2),a=n[0],r=n[1];return Object(I.jsx)("div",{className:"bg-gray-900 min-h-screen flex items-center justify-center",children:Object(I.jsxs)("div",{className:"max-w-2xl w-full space-y-6",children:[Object(I.jsx)("img",{src:ot,className:"h-16",alt:"logo"}),Object(I.jsx)(vt,{context:e,children:Object(I.jsxs)(jt,{children:[Object(I.jsx)(bt,{children:Object(I.jsxs)(_,{children:[Object(I.jsx)(Dt,{tabs:$t,value:a,onChange:r}),"preset"===a&&Object(I.jsx)(_,{className:"p-2 -m-2",children:Object(I.jsx)(Pt,{name:"user",label:"User",options:Qt})}),"credentials"===a&&Object(I.jsxs)(_,{className:"p-2 -m-2",children:[Object(I.jsx)(It,{name:"username",label:"Email Address",validations:{required:"Email Address is required"}}),Object(I.jsx)(It,{name:"password",label:"Password",type:"password",validations:{required:"Password is required"}})]})]})}),Object(I.jsx)(mt,{children:Object(I.jsx)("div",{className:"flex justify-end",children:Object(I.jsx)(De,{actions:[{title:"Login",icon:Object(I.jsx)(Y.y,{className:"w-5 h-5"}),intent:"primary",type:"submit"}]})})})]})})]})})},tn=function(e){var t=e.className;return Object(I.jsx)("div",{className:Object(h.a)("px-4 py-2 text-sm opacity-0 leading-5 pointer-events-none",t),children:"\xa0"})},nn=function(e){var t=e.title,n=void 0===t?"":t,a=e.pageTitle,r=e.actions,c=void 0===r?[]:r,s=e.infoList,l=e.className;return Object(i.useEffect)((function(){var e=a||n;document.title="".concat(e," - ").concat(O.siteSettings.get("title"))}),[n,a]),Object(I.jsx)("div",{className:Object(h.a)(l),children:Object(I.jsx)("div",{className:"pt-3 lg:pt-6 antialiased",children:Object(I.jsx)("div",{className:"max-w-7xl mx-auto px-4 mb-8 sm:px-6 lg:px-8",children:Object(I.jsxs)("div",{className:"md:flex md:items-start md:justify-between flex-wrap",children:[Object(I.jsxs)("div",{className:"mr-4 my-3 flex-1 mb-6 md:mb-0",children:[Object(I.jsx)("h2",{className:"flex items-center text-2xl leading-8 font-bold text-gray-900 dark:text-white sm:text-3xl sm:leading-9 whitespace-nowrap",children:n}),s&&Object(I.jsx)("div",{className:"mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap",children:s.filter(A).map((function(e,t){return Object(I.jsxs)("div",{className:"mt-2 flex items-center text-sm leading-5 text-gray-600 dark:text-gray-300 sm:mr-6",children:[e.icon&&Object(I.jsx)("div",{className:"flex-shrink-0 mr-1.5 text-gray-500 dark:text-gray-200",children:e.icon}),e.title]},t)}))})]}),c.filter(A).length>0?Object(I.jsx)("div",{className:"my-3 flex",children:Object(I.jsx)(De,{actions:c})}):Object(I.jsx)("div",{className:"my-3 hidden md:block",children:Object(I.jsx)(tn,{})})]})})})})},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ve(e,[{pattern:/^max-w-\dxl$/,defaultValue:"max-w-7xl"}])},rn=function(e){var t=e.className,n=e.children;return Object(I.jsx)("div",{className:an(Object(h.a)("w-full mx-auto pb-8 sm:px-6 lg:px-8",t)),children:n})},cn=function(){var e,t;f(),x(),O.siteSettings.set("title","Resolutionary"),O.siteSettings.set("layout","sidebar");var n={id:Object(o.a)(),key:"user",name:"User",plural:"Users"},i={id:Object(o.a)(),key:"case",name:"Case",plural:"Cases"},a={id:Object(o.a)(),key:"event",name:"Event",plural:"Events"};O.entities.save(n),O.entities.save(i),O.entities.save(a),[{id:Object(o.a)(),entityId:i.id,key:"case-number",name:"Case Number",type:"string",options:[]},{id:Object(o.a)(),entityId:i.id,key:"type",name:"Type",type:"option",options:["Review","Mediation","Hybrid"],defaultValue:"Review"},{id:Object(o.a)(),entityId:i.id,key:"claim-number",name:"Claim Number",type:"string",options:[]},{id:Object(o.a)(),entityId:i.id,key:"complexity",name:"Complexity",type:"option",options:["Standard","Complex"]},{id:Object(o.a)(),entityId:i.id,key:"closed-date",name:"Closed Date",type:"date",options:[]},{id:Object(o.a)(),entityId:i.id,key:"status",name:"Status",type:"option",options:["Pending","Open","Closed"]}].forEach(O.fields.save),[{id:Object(o.a)(),entityId:a.id,key:"start-date",name:"Start Date",type:"date",options:[]},{id:Object(o.a)(),entityId:a.id,key:"end-date",name:"End Date",type:"date",options:[]},{id:Object(o.a)(),entityId:a.id,key:"type",name:"Type",type:"option",options:["Review","Mediation","CMC"],defaultValue:"CMC"},{id:Object(o.a)(),entityId:a.id,key:"decision-date",name:"Decision Date",type:"date",options:[]},{id:Object(o.a)(),entityId:a.id,key:"postponed",name:"Postponed",type:"boolean",options:[]}].forEach(O.fields.save),[{id:Object(o.a)(),entityId:n.id,key:"first-name",name:"First Name",type:"string",options:[]},{id:Object(o.a)(),entityId:n.id,key:"last-name",name:"Last Name",type:"string",options:[]},{id:Object(o.a)(),entityId:n.id,key:"email",name:"Email",type:"string",options:[]},{id:Object(o.a)(),entityId:n.id,key:"phone",name:"Phone",type:"string",options:[]},{id:Object(o.a)(),entityId:n.id,key:"active",name:"Active",type:"boolean",options:[],defaultValue:"true"}].forEach(O.fields.save),[{id:Object(o.a)(),entityId:i.id,key:"close-case",name:"Close Case",changes:[]}].forEach(O.actions.save);[].forEach(O.actions.save),O.relations.save({id:Object(o.a)(),key:"events",name:"Events",entityId:i.id,relatedId:a.id,type:"one-to-many"}),O.relations.save({id:Object(o.a)(),key:"attendees",name:"Attendees",entityId:a.id,relatedId:n.id,type:"one-to-many"}),O.relations.save({id:Object(o.a)(),key:"applicant",name:"Applicant",entityId:n.id,relatedId:i.id,type:"one-to-many"}),O.notifications.save({id:Object(o.a)(),name:"Event Reminder 2 days",focus:a.id,enabled:!0,triggerType:"date",triggerRepeat:2,triggerEvery:"",triggerYearIn:"",triggerMonthOn:"",triggerWeekOn:"",triggerDayAt:"",triggerAction:"",obeyTriggerTiming:!0,triggerTimingType:"before",triggerTiming:"day",triggerDate:(null===(e=O.fields.find((function(e){return e.entityId===a.id&&"start-date"===e.key})))||void 0===e?void 0:e.id)||"",ruleGroups:[{rules:[{entity:a.id,field:(null===(t=O.fields.find((function(e){return e.entityId===a.id&&"postponed"===e.key})))||void 0===t?void 0:t.id)||"",operator:"false",value:""}]}],subject:"Upcoming Conference",content:"<h1>Hello {{recipient-first-name}}</h1><p><br></p><p>You have a {{event-type}} coming up on {{event-start-date}}</p>"}),O.templates.save({id:Object(o.a)(),name:"Event Reminder 2 days",content:"<h1>Hello {{recipient-first-name}}</h1><p><br></p><p>You have a {{event-type}} coming up on {{event-start-date}}</p>"});var r=O.roles.save({id:Object(o.a)(),name:"Administrator"}),c=O.roles.save({id:Object(o.a)(),name:"Case Manager"}),s=O.roles.save({id:Object(o.a)(),name:"Reviewer"}),l=O.roles.save({id:Object(o.a)(),name:"Applicant"});[r,c,s].forEach((function(e){O.entities.all().forEach((function(t){O.entityPermissions.save({id:Object(o.a)(),entityId:t.id,roleId:e.id,view:!0,modify:!0,remove:!0}),O.fields.all((function(e){return e.entityId===t.id})).forEach((function(t){O.fieldPermissions.save({id:Object(o.a)(),fieldId:t.id,roleId:e.id,view:!0,modify:!0})})),O.actions.all((function(e){return e.entityId===t.id})).forEach((function(t){O.actionPermissions.save({id:Object(o.a)(),actionId:t.id,roleId:e.id,perform:!0})})),O.relations.all((function(e){return e.entityId===t.id})).forEach((function(t){O.relationPermissions.save({id:Object(o.a)(),relationId:t.id,roleId:e.id,view:!0,modify:!0,remove:!0})}))}))})),O.entities.all().forEach((function(e){O.entityPermissions.save({id:Object(o.a)(),entityId:e.id,roleId:l.id,view:!0,modify:!1,remove:!1}),O.fields.all((function(t){return t.entityId===e.id})).forEach((function(e){O.fieldPermissions.save({id:Object(o.a)(),fieldId:e.id,roleId:l.id,view:!0,modify:!1})})),O.actions.all((function(t){return t.entityId===e.id})).forEach((function(e){O.actionPermissions.save({id:Object(o.a)(),actionId:e.id,roleId:l.id,perform:!1})})),O.relations.all((function(t){return t.entityId===e.id})).forEach((function(e){O.relationPermissions.save({id:Object(o.a)(),relationId:e.id,roleId:l.id,view:!0,modify:!1,remove:!1})}))}));var d=O.units.save({entityId:n.id});[{key:"first-name",value:"Bob"},{key:"last-name",value:"Bobson"},{key:"email",value:"bob@example.com"},{key:"phone",value:"1234"},{key:"active",value:"true"}].forEach((function(e){var t,i=e.key,a=e.value;O.values.save({unitId:d.id,fieldId:(null===(t=O.fields.find((function(e){return e.entityId===n.id&&e.key===i})))||void 0===t?void 0:t.id)||"-",value:a,created:String((new Date).valueOf())})}))};localStorage.getItem("data")||cn();var sn=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Home"}),Object(I.jsx)(rn,{children:Object(I.jsx)(xt,{children:Object(I.jsxs)(_,{children:[Object(I.jsxs)("div",{className:"rounded-md bg-red-400 text-red-800 dark:bg-red-500 dark:text-red-300 bg-opacity-25 dark:bg-opacity-25 p-4",children:[Object(I.jsx)("span",{className:"font-medium",children:"Note:"})," Modules haven't been properly figured out yet, so that stuff is only a visual mockup"]}),Object(I.jsxs)("div",{className:"rounded-md bg-primary-400 text-primary-800 dark:bg-primary-500 dark:text-primary-300 bg-opacity-25 dark:bg-opacity-25 p-4 space-y-3",children:[Object(I.jsx)("p",{children:"Feel free to play around with the forms, create stuff, edit stuff, delete stuff. You can come back to this page to reset the data."}),Object(I.jsx)("p",{children:"Any changes you make are contained within your browser, so nothing is real."})]}),Object(I.jsx)(De,{actions:[{title:"Clear Database",onClick:function(){return f()}},{title:"Reset Database",onClick:function(){return cn()}}]})]})})})]})},ln=n.p+"static/media/undraw_not_found_60pq.faf05e44.svg",on=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Not Found"}),Object(I.jsx)(rn,{children:Object(I.jsx)("div",{className:"p-4",children:Object(I.jsx)("img",{src:ln,alt:"not found",width:"500",className:"mx-auto"})})})]})},dn=function(e){var t=e.entityId,n=At(void 0===t?"":t),a=null===n||void 0===n?void 0:n.fields,r=Object(i.useState)(a),l=Object(c.a)(r,2),o=l[0],d=l[1],u={cols:(null===a||void 0===a?void 0:a.filter((function(e){return null===o||void 0===o?void 0:o.includes(e)})).map((function(e,t){return{title:e.name,value:function(n){var i,a=null===(i=e.value(n.id))||void 0===i?void 0:i.formatted;return 0===t?Object(I.jsx)(s.a,{to:n.id,className:"anchor",children:a||"-"}):a||"-"}}})))||[],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit ".concat(null===n||void 0===n?void 0:n.name),icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/".concat(null===n||void 0===n?void 0:n.key,"/").concat(e.id,"/edit")}],[{title:"Delete ".concat(null===n||void 0===n?void 0:n.name),icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.units.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:(null===n||void 0===n?void 0:n.plural)||(null===n||void 0===n?void 0:n.name)||"-",actions:[{title:"Create ".concat(null===n||void 0===n?void 0:n.name),intent:"primary",to:"/".concat(null===n||void 0===n?void 0:n.key,"/create")}]}),Object(I.jsx)(rn,{children:Object(I.jsx)(jt,{className:"overflow-hidden",children:Object(I.jsxs)("div",{className:"relative",children:[Object(I.jsx)("div",{className:"absolute top-0 right-0 h-[42px] flex items-center mr-1",children:Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.b,{className:"w-4 h-4"}),intent:"menu",actions:(null===a||void 0===a?void 0:a.map((function(e){return{title:e.name,icon:(null===o||void 0===o?void 0:o.includes(e))?Object(I.jsx)(Y.j,{className:"w-4 h-4"}):Object(I.jsx)("div",{className:"w-4 h-4"}),iconSide:"left",disableDismiss:!0,onClick:function(){return d((function(t){return(null===o||void 0===o?void 0:o.includes(e))?(null===t||void 0===t?void 0:t.filter((function(t){return t!==e})))||[]:[].concat(Object(v.a)(t||[]),[e])}))}}})))||[]}})}),Object(I.jsx)(Ae,{schema:u,items:O.units.all((function(e){return e.entityId===(null===n||void 0===n?void 0:n.id)})),className:"-my-px"})]})})})]})},un=Object(i.createContext)({entity:void 0,itemList:{items:[]},addItem:function(){},removeItem:function(){},updateItem:function(){}}),jn=(un.Provider,Object(i.createContext)({unitId:"",itemList:{items:[]}})),bn=jn.Provider,mn=n(542),xn=n(553),fn=n(555);var On=function(e){var t=e.item,n=e.type,i=e.className,a=e.children,r=Object(fn.a)({type:n,item:t,collect:function(e){return{isDragging:!!e.isDragging()}}}),s=Object(c.a)(r,2),l=s[0].isDragging,o=s[1];return Object(I.jsx)("div",{ref:o,className:"function"===typeof i?i({isDragging:l}):Object(h.a)(i),children:a})},vn="Card",hn="Well",pn="PageTitle",gn="Columns",yn="Field",Nn="Divider",wn="Section",kn="Table",Cn="FormSection",In="Input",Sn=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(Xe.a)(this,n),t.apply(this,arguments)}return Object(Qe.a)(n,[{key:"componentDidCatch",value:function(e){be.a(e),console.dir(e)}},{key:"render",value:function(){var e;return A(null===(e=this.state)||void 0===e?void 0:e.error)?Object(I.jsx)(this.props.render,{error:this.state.error}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(i.Component),Dn=function(e){var t=e.error;return Object(I.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[Object(I.jsx)("h4",{className:"alert-heading",children:"Something went wrong"}),Object(I.jsx)("hr",{}),t.message&&Object(I.jsx)("p",{className:"m-0",children:t.message})]})},En=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.loader,a=void 0===n?Object(I.jsx)(Ye,{}):n,r=t.error,c=void 0===r?Dn:r;return function(t){return Object(I.jsx)(Sn,{render:c,children:Object(I.jsx)(i.Suspense,{fallback:a,children:Object(I.jsx)(e,Object(l.a)({},t))})})}}((function(e){return e.render}));function Tn(){return(Tn=Object(w.a)(N.a.mark((function e(t){var n,i,a,r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.render,i=t.size,a=void 0===i?"md":i,r=t.mode,c=void 0===r?"":r,e.next=3,ce({size:a,mode:c,children:function(e){return Object(I.jsx)(Pn,{render:n,close:e})}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pn=function(e){var t=e.render,n=e.close;return Object(I.jsxs)("div",{className:"h-full w-full relative",children:[Object(I.jsx)("div",{className:"absolute top-0 left-0 -mx-12 mt-2",children:Object(I.jsx)(De,{actions:[{icon:Object(I.jsx)(Y.K,{className:"w-5 h-5 -mx-2 text-white"}),intent:"invisible",onClick:function(){return n()}}]})}),Object(I.jsx)("div",{className:"h-full divide-y divide-gray-200 dark:divide-gray-600 flex flex-col bg-white dark:bg-gray-700 shadow-xl",children:Object(I.jsx)("div",{className:"flex-1 h-0 flex flex-col",children:Object(I.jsx)(En,{render:t(n)})})})]})},Fn=function(e){var t=e.title,n=e.subtitle,i=e.actions;return Object(I.jsxs)("div",{className:"py-6 px-4 bg-primary-500 dark:bg-primary-600 sm:px-6 flex-shrink-0",children:[Object(I.jsxs)("div",{className:"flex items-center justify-between",children:[Object(I.jsx)("div",{className:"text-lg font-medium text-white antialiased",children:t}),Object(I.jsx)("div",{className:"ml-3 h-7 flex items-center",children:i&&Object(I.jsx)(De,{actions:i})})]}),n&&Object(I.jsx)("div",{className:"mt-1",children:Object(I.jsx)("div",{className:"text-sm text-white opacity-75 antialiased",children:n})})]})},Mn=function(e){var t=e.className,n=e.children;return Object(I.jsx)("div",{className:Object(h.a)("flex-1 flex flex-col justify-between overflow-y-auto",t),children:n})},An=function(e){return Tn.apply(this,arguments)},Vn=function(e){var t=e.children,n=e.className;return Object(I.jsx)("div",{className:Object(h.a)("border border-gray-200 dark:border-gray-600 rounded-md overflow-hidden",n),children:t})},Ln=function(e){var t=e.children,n=e.isOptional,i=e.onClick;return Object(I.jsx)("div",{className:"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default",onClick:i,children:t&&Object(I.jsxs)(I.Fragment,{children:[t," ",n&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]})})},Rn=function(e){var t=e.item,n=e.path,i=e.removeItem,a=e.updateItem,r=e.close,c=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),a(n,e),r()}}),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:c,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Card"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsx)(_,{children:Object(I.jsx)(It,{name:"data.title",label:"Title",className:"flex-1",autoFocus:!0})})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){i(n),r()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return r()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},zn=function(e){return An({render:function(t){return Object(I.jsx)(Rn,Object(l.a)({close:t},e))}})},qn=function(e){var t=e.title,n=e.subtitle,i=e.actions,a=e.className;return Object(I.jsx)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-600",children:Object(I.jsxs)("div",{className:Object(h.a)("flex flex-col sm:flex-row justify-between items-start sm:items-center flex-wrap sm:flex-nowrap space-y-4 sm:space-y-0",a),children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",children:t}),n&&Object(I.jsx)("p",{className:"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-400",children:n})]}),Object(I.jsx)("div",{className:"flex-shrink-0 my-0 sm:-my-2",children:i&&i.length>0?Object(I.jsx)(De,{actions:i}):Object(I.jsx)("div",{className:"hidden sm:block",children:Object(I.jsx)(tn,{})})})]})})},Hn=n(556),Bn=function(e,t,n){return e<t?t-e:e>n?e-n:0};var Wn,_n,Yn,Un,Zn,Kn,Gn,Jn,$n,Xn,Qn=function(e){var t=e.accept,n=e.onDrop,a=e.distance,r=void 0===a?20:a,s=e.className,l=e.children,o=Object(Hn.a)({accept:t,drop:n,collect:function(e){return{isOver:!!e.isOver(),canDrop:!!e.canDrop()}}}),d=Object(c.a)(o,2),u=d[0],j=u.isOver,b=u.canDrop,m=d[1],x=Object(i.useState)(0),f=Object(c.a)(x,2),O=f[0],v=f[1],p=Object(i.useState)(0),g=Object(c.a)(p,2),y=g[0],N=g[1];Object(i.useEffect)((function(){var e=function(e){v(e.pageX),N(e.pageY)};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[]),Object(i.useEffect)((function(){var e=function(e){e=e||window.event,v(e.pageX),N(e.pageY)};return window.addEventListener("dragover",e),function(){window.removeEventListener("dragover",e)}}),[]);var w=Object(i.useState)(!1),k=Object(c.a)(w,2),C=k[0],S=k[1];return Object(I.jsx)("div",{ref:m,className:Object(h.a)("relative","function"===typeof s?s({isOver:j,isClose:C,canDrop:b}):s),children:Object(I.jsx)("div",{ref:function(e){if(e){var t=function(e,t){var n=Bn(e.x,t.left,t.right),i=Bn(e.y,t.top,t.bottom);return function(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}(e,t)?Math.min(n,i):Math.sqrt(n*n+i*i)}({x:O,y:y},e.getBoundingClientRect())<r;t!==C&&S(t)}},className:"w-full h-full",children:"function"===typeof l?l({isOver:j,isClose:C,canDrop:b}):l})})},ei=function(e){var t=e.path,n=e.accept,a=e.isFirst,r=void 0!==a&&a,c=e.isLast,s=void 0!==c&&c,l=Object(i.useContext)(un),o=l.addItem,d=l.removeItem;return Object(I.jsx)(Qn,{accept:n,onDrop:function(e){if(e.path){var n=e.item,i=e.path;o(t,n),d(i)}else!function(e){return"function"===typeof e.create}(e)?o(t,e):o(t,e.create())},distance:20,children:function(e){var t=e.canDrop,n=e.isOver,i=e.isClose;return t&&i||s?Object(I.jsx)("div",{className:Object(h.a)("p-1"),children:Object(I.jsx)("div",{className:Object(h.a)("px-6 h-10 flex items-center justify-center rounded-lg border-2 border-dashed",{"my-0 h-full":r&&s,"mb-6":r&&!s,"mt-6":s&&!r},{"border-indigo-400 bg-indigo-50":n,"border-gray-900 border-opacity-10 bg-white bg-opacity-50":!n})})}):Object(I.jsx)("div",{className:Object(h.a)(!r&&!s&&"h-4")})}})},ti=function(){var e=Object(i.useState)(!1),t=Object(c.a)(e,2),n=t[0],a=t[1];return[n,{onMouseOver:Object(i.useCallback)((function(e){e.stopPropagation(),a(!0)}),[]),onMouseOut:Object(i.useCallback)((function(e){e.stopPropagation(),a(!1)}),[])}]},ni=[hn,gn,yn,wn,kn],ii=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=n.removeItem,s=n.updateItem,o=Object(mn.a)(Object(xn.a)(t),a),d=ti(),u=Object(c.a)(d,2),j=u[0],b=u[1];return o?Object(I.jsxs)(jt,Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),zn({item:o,path:t,removeItem:r,updateItem:s})}},b),{},{className:Object(h.a)("cursor-pointer transition-all duration-100",j&&"ring-4 ring-primary-500"),children:[o.data.title&&Object(I.jsx)(qn,{title:o.data.title}),Object(I.jsxs)(bt,{children:[o.data.items.map((function(e,n){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",n]),isFirst:0===n,accept:ni}),Object(I.jsx)(Ba,{path:[].concat(Object(v.a)(t),["data","items",n])})]},e.id)})),Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",o.data.items.length]),isFirst:0===o.data.items.length,isLast:!0,accept:ni})]})]})):null},ai=function(e){var t=e.path,n=Object(i.useContext)(jn).itemList,a=Object(mn.a)(Object(xn.a)(t),n);return Object(I.jsxs)(jt,{children:[a.data.title&&Object(I.jsx)(qn,{title:a.data.title}),Object(I.jsx)("div",{className:"py-6",children:Object(I.jsx)(_,{children:a.data.items.map((function(e,n){return Object(I.jsx)(Wa,{path:[].concat(Object(v.a)(t),["data","items",n])},n)}))})})]})},ri={name:"Card",type:vn,description:"A box used for containing content",create:function(){return{id:Rt(),type:vn,data:{title:"",items:[]}}}},ci=ii,si=ai,li=zn,oi=function(e){var t=e.children,n=e.className,i=e.onClick,a=e.onMouseOver,r=e.onMouseOut;return Object(I.jsx)("div",{className:Object(h.a)("p-4 bg-gray-100 dark:bg-gray-750 border border-gray-200 dark:border-gray-600 rounded",n),onClick:i,onMouseOver:a,onMouseOut:r,children:t})},di=function(e){var t=e.item,n=e.path,i=e.removeItem,a=e.updateItem,r=e.close,c=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),a(n,e),r()}}),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:c,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Well"}),Object(I.jsx)(Mn,{children:Object(I.jsx)("div",{className:"py-6",children:Object(I.jsx)(_,{children:Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})})})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){i(n),r()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return r()}}]})]})]})},ui=function(e){return An({render:function(t){return Object(I.jsx)(di,Object(l.a)({close:t},e))}})},ji=[gn,yn],bi=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=n.removeItem,s=n.updateItem,o=Object(mn.a)(Object(xn.a)(t),a),d=ti(),u=Object(c.a)(d,2),j=u[0],b=u[1];return o?Object(I.jsxs)(oi,Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),ui({item:o,path:t,removeItem:r,updateItem:s})}},b),{},{className:Object(h.a)("cursor-pointer transition-all duration-10",j&&"ring-4 ring-primary-500"),children:[o.data.items.map((function(e,n){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",n]),isFirst:0===n,accept:ji}),Object(I.jsx)(Ba,{path:[].concat(Object(v.a)(t),["data","items",n])})]},e.id)})),Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",o.data.items.length]),isFirst:0===o.data.items.length,isLast:!0,accept:ji})]})):null},mi=function(e){var t=e.path,n=Object(i.useContext)(jn).itemList,a=Object(mn.a)(Object(xn.a)(t),n);return Object(I.jsx)(oi,{children:a.data.items.map((function(e,n){return Object(I.jsx)(Wa,{path:[].concat(Object(v.a)(t),["data","items",n])})}))})},xi={name:"Well",type:hn,description:"A box used for sectioning content",create:function(){return{id:Rt(),type:hn,data:{items:[]}}}},fi=bi,Oi=mi,vi=ui,hi=function(e){var t=e.item,n=e.path,i=e.removeItem,a=e.updateItem,r=e.close,c=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),a(n,e),r()}}),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:c,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Page Title"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsx)(_,{children:Object(I.jsx)(It,{name:"data.title",label:"Title",className:"flex-1",validations:{required:"Title is required"},autoFocus:!0})})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){i(n),r()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return r()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},pi=function(e){return An({render:function(t){return Object(I.jsx)(hi,Object(l.a)({close:t},e))}})},gi=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=n.removeItem,s=n.updateItem,o=Object(mn.a)(Object(xn.a)(t),a),d=ti(),u=Object(c.a)(d,2),j=u[0],b=u[1];return o?Object(I.jsx)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),pi({item:o,path:t,removeItem:r,updateItem:s})}},b),{},{className:Object(h.a)("p-2 text-2xl leading-8 font-bold text-gray-900 dark:text-white sm:text-3xl sm:leading-9 whitespace-nowrap antialiased rounded-md cursor-pointer transition-all duration-100",j&&"ring-4 ring-primary-500"),children:o.data.title})):null},yi=function(e){var t=e.path,n=Object(i.useContext)(jn),a=n.itemList,r=n.unitId,c=Object(mn.a)(Object(xn.a)(t),a);if(!c)return null;var s=Yt(r),l=(null===s||void 0===s?void 0:s.resolvedValues)||{};return Object(I.jsx)("div",{className:"text-2xl leading-8 font-bold text-gray-900 dark:text-white sm:text-3xl sm:leading-9 whitespace-nowrap antialiased",children:zt(c.data.title,l,(function(e){return"{{".concat(e,"}}")}))})},Ni={name:"Page Title",type:pn,description:"A large title for putting between cards",create:function(){return{id:Rt(),type:pn,data:{title:"Page title..."}}}},wi=gi,ki=yi,Ci=pi,Ii=function(e){var t=e.className,n=void 0===t?"":t;return Object(I.jsxs)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(I.jsx)("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"}),Object(I.jsx)("circle",{cx:"6",cy:"14",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"9",cy:"14",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"12",cy:"14",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"15",cy:"14",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"18",cy:"14",r:"1",fill:"currentColor"})]})},Si=function(e){var t=e.className,n=void 0===t?"":t;return Object(I.jsxs)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(I.jsx)("rect",{x:"14",y:"3",width:"7",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),Object(I.jsx)("rect",{x:"3",y:"3",width:"7",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"})]})},Di=function(e){var t=e.className,n=void 0===t?"":t;return Object(I.jsxs)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(I.jsx)("rect",{x:"11",y:"3",width:"10",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),Object(I.jsx)("rect",{x:"3",y:"3",width:"4",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"})]})},Ei=function(e){var t=e.className,n=void 0===t?"":t;return Object(I.jsxs)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(I.jsx)("rect",{x:"3",y:"3",width:"10",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),Object(I.jsx)("rect",{x:"17",y:"3",width:"4",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"})]})},Ti=function(e){var t=e.className,n=void 0===t?"":t;return Object(I.jsxs)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(I.jsx)("circle",{cx:"9",cy:"17",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"14",cy:"17",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"14",cy:"12",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"9",cy:"7",r:"1",fill:"currentColor"}),Object(I.jsx)("circle",{cx:"14",cy:"7",r:"1",fill:"currentColor"})]})},Pi=function(e){var t=e.className,n=void 0===t?"":t;return Object(I.jsxs)("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(I.jsx)("path",{d:"M21 12H3M17 8L21 12L17 8ZM21 12L17 16L21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(I.jsx)("circle",{cx:"5",cy:"12",r:"3",fill:"currentColor"})]})},Fi=function(e){var t=e.item,n=e.path,i=e.context,a=e.close,r=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),i.updateItem(n,e),a()}}),c=gt("data.format",r),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:r,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Columns"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsx)(_,{children:Object(I.jsxs)("div",{children:[Object(I.jsx)(Ln,{children:"Column Format"}),Object(I.jsx)("div",{className:"mt-1",children:Object(I.jsx)(De,{actions:[{icon:Object(I.jsx)(Si,{className:"w-5 h-5 -mx-1"}),intent:"1:1"===c?"primary":"secondary",size:"sm",onClick:function(){return r.setFieldValue("data.format","1:1")}},{icon:Object(I.jsx)(Di,{className:"w-5 h-5 -mx-1"}),intent:"1:2"===c?"primary":"secondary",size:"sm",onClick:function(){return r.setFieldValue("data.format","1:2")}},{icon:Object(I.jsx)(Ei,{className:"w-5 h-5 -mx-1"}),intent:"2:1"===c?"primary":"secondary",size:"sm",onClick:function(){return r.setFieldValue("data.format","2:1")}}]})})]})})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){i.removeItem(n),a()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return a()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},Mi=function(e){return An({render:function(t){return Object(I.jsx)(Fi,Object(l.a)({close:t},e))}})},Ai=[yn],Vi=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=Object(mn.a)(Object(xn.a)(t),a),s=ti(),o=Object(c.a)(s,2),d=o[0],u=o[1];return r?Object(I.jsxs)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),Mi({item:r,path:t,context:n})}},u),{},{className:Object(h.a)("flex space-x-2 bg-gray-100 p-2 rounded-md cursor-pointer transition-all duration-10",d&&"ring-4 ring-primary-500"),children:[Object(I.jsxs)("div",{className:Object(h.a)("p-2 rounded-md bg-white",{"w-1/2":"1:1"===r.data.format,"w-1/3":"1:2"===r.data.format,"w-2/3":"2:1"===r.data.format}),children:[r.data.items[0].map((function(e,n){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",0,n]),isFirst:0===n,accept:Ai}),Object(I.jsx)(Ba,{path:[].concat(Object(v.a)(t),["data","items",0,n])})]},e.id)})),Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",0,r.data.items.length]),isFirst:0===r.data.items[0].length,isLast:!0,accept:Ai})]}),Object(I.jsxs)("div",{className:Object(h.a)("p-2 rounded-md bg-white",{"w-1/2":"1:1"===r.data.format,"w-1/3":"2:1"===r.data.format,"w-2/3":"1:2"===r.data.format}),children:[r.data.items[1].map((function(e,n){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",1,n]),isFirst:0===n,accept:Ai}),Object(I.jsx)(Ba,{path:[].concat(Object(v.a)(t),["data","items",1,n])})]},e.id)})),Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",1,r.data.items.length]),isFirst:0===r.data.items[1].length,isLast:!0,accept:Ai})]})]})):null},Li=function(e){var t=e.path,n=Object(i.useContext)(jn).itemList,a=Object(mn.a)(Object(xn.a)(t),n);return Object(I.jsxs)("div",{className:"flex space-x-4",children:[Object(I.jsx)(_,{className:Object(h.a)({"w-1/2":"1:1"===a.data.format,"w-1/3":"1:2"===a.data.format,"w-2/3":"2:1"===a.data.format}),children:a.data.items[0].map((function(e,n){return Object(I.jsx)(Wa,{path:[].concat(Object(v.a)(t),["data","items",0,n])},n)}))}),Object(I.jsx)(_,{className:Object(h.a)({"w-1/2":"1:1"===a.data.format,"w-1/3":"2:1"===a.data.format,"w-2/3":"1:2"===a.data.format}),children:a.data.items[1].map((function(e,n){return Object(I.jsx)(Wa,{path:[].concat(Object(v.a)(t),["data","items",1,n])},n)}))})]})},Ri={name:"Columns",type:gn,description:"Display a value",create:function(){return{id:Rt(),type:gn,data:{items:[[],[]],format:"1:1"}}}},zi=Vi,qi=Li,Hi=Mi,Bi={label:"Custom",value:"custom"},Wi=function(e){var t,n=e.item,i=e.path,a=e.context,r=e.close,c=ht({initialValues:n,onSubmit:function(e){console.log("new Data",e),a.updateItem(i,e),r()}}),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]},l=gt("data.fieldId",c);return Object(I.jsxs)(vt,{context:c,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Field"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"data.label",label:"Custom Label"}),Object(I.jsx)(Pt,{name:"data.fieldId",label:"Field",options:(null===(t=a.entity)||void 0===t?void 0:t.fields.map((function(e){return{label:e.name,value:e.id}})).concat([Bi]))||[Bi],className:"flex-1",autoFocus:!0}),Object(I.jsx)(F,{show:"custom"===l,children:Object(I.jsx)(It,{name:"data.customFormat",label:"Custom Format"})})]})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){a.removeItem(i),r()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return r()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},_i=function(e){return An({render:function(t){return Object(I.jsx)(Wi,Object(l.a)({close:t},e))}})},Yi=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.entity,r=n.itemList,s=Object(mn.a)(Object(xn.a)(t),r),o=null===a||void 0===a?void 0:a.fields.find((function(e){return e.id===s.data.fieldId})),d=ti(),u=Object(c.a)(d,2),j=u[0],b=u[1];return s?Object(I.jsxs)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),_i({item:s,path:t,context:n})}},b),{},{className:Object(h.a)("p-1 rounded-md cursor-pointer transition-all duration-100",j&&"ring-4 ring-primary-500"),children:[Object(I.jsx)("div",{className:"text-sm leading-5 text-gray-500 dark:text-gray-300",children:"Field"}),Object(I.jsx)("div",{className:"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white",children:(s.data.label?'"'.concat(s.data.label,'"').concat((null===o||void 0===o?void 0:o.name)?" (".concat(null===o||void 0===o?void 0:o.name,")"):""):null===o||void 0===o?void 0:o.name)||"Please choose a field"})]})):null},Ui=function(e){var t,n=e.path,a=Object(i.useContext)(jn),r=a.itemList,c=a.unitId,s=Object(mn.a)(Object(xn.a)(n),r),l="custom"!==s.data.fieldId?qt(s.data.fieldId):null,o=Yt(c),d=(null===o||void 0===o?void 0:o.resolvedValues)||{};return l?Object(I.jsxs)("div",{className:"",children:[Object(I.jsx)("div",{className:"text-sm leading-5 text-gray-500 dark:text-gray-300",children:s.data.label||(null===l||void 0===l?void 0:l.name)||"-"}),Object(I.jsx)("div",{className:"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white",children:(null===o||void 0===o||null===(t=o.value(l.id))||void 0===t?void 0:t.formatted)||"-"})]}):"custom"===s.data.fieldId?Object(I.jsxs)("div",{className:"",children:[Object(I.jsx)("div",{className:"text-sm leading-5 text-gray-500 dark:text-gray-300",children:s.data.label||"-"}),Object(I.jsx)("div",{className:"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white",children:zt(s.data.customFormat||"-",d,(function(e){return"{{".concat(e,"}}")}))})]}):null},Zi={name:"Field",type:yn,description:"Display a value",create:function(){return{id:Rt(),type:yn,data:{fieldId:"",label:"",customFormat:""}}}},Ki=Yi,Gi=Ui,Ji=_i,$i=function(e){e.item;var t=e.path,n=e.context,i=e.close,a={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Fn,{title:"Edit Divider"}),Object(I.jsx)(Mn,{children:Object(I.jsx)("div",{className:"py-6",children:Object(I.jsx)(_,{children:Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:a,items:O.roles.all(),className:"-my-px"})})]})})})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){n.removeItem(t),i()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return i()}}]})]})]})},Xi=function(e){return An({render:function(t){return Object(I.jsx)($i,Object(l.a)({close:t},e))}})},Qi=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=Object(mn.a)(Object(xn.a)(t),a),s=ti(),o=Object(c.a)(s,2),d=o[0],u=o[1];return r?Object(I.jsx)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),Xi({item:r,path:t,context:n})}},u),{},{className:Object(h.a)("p-2 rounded-md cursor-pointer transition-all duration-10",d&&"ring-4 ring-primary-500"),children:Object(I.jsx)(P,{})})):null},ea=function(){return Object(I.jsx)(P,{})},ta={name:"Divider",type:Nn,description:"A box used for sectioning content",create:function(){return{id:Rt(),type:Nn,data:{items:[]}}}},na=Qi,ia=ea,aa=Xi,ra=function(e){var t,n=e.checked,i=e.color;return Object(I.jsx)("span",{role:"checkbox",tabIndex:0,"aria-checked":"false",className:Object(h.a)("relative inline-block flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:shadow-outline",(t={},Object(g.a)(t,i,n),Object(g.a)(t,"bg-gray-200 dark:bg-gray-800",!n),t)),children:Object(I.jsx)("span",{"aria-hidden":"true",className:Object(h.a)("translate-x-0 inline-block h-5 w-5 rounded-full shadow transform transition ease-in-out duration-200",{"translate-x-5 bg-white dark:bg-white":n,"translate-x-0 bg-white dark:bg-gray-400":!n})})})},ca=function(e){var t=e.name,n=e.label,i=e.description,a=e.disabled,r=e.color,s=void 0===r?"bg-primary-500 dark:bg-primary-500":r,o=e.className,d=e.autoFocus,u=Object(ft.d)({name:t,type:"checkbox"}),j=Object(c.a)(u,1)[0],b=j.value,m=Object(ft.f)();return Object(I.jsx)("div",{className:Object(h.a)(o),children:Object(I.jsxs)("label",{className:"text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-center cursor-pointer",children:[Object(I.jsx)(ra,{checked:b,color:s}),(n||i)&&Object(I.jsxs)("div",{className:"ml-3",children:[n&&Object(I.jsx)("div",{children:n}),i&&Object(I.jsx)("div",{className:"font-normal text-gray-500",children:i})]}),Object(I.jsx)("input",Object(l.a)(Object(l.a)({},j),{},{type:"checkbox",disabled:a||m.isSubmitting,className:"hidden",autoFocus:d}))]})})},sa=function(e){var t=e.item,n=e.path,i=e.removeItem,a=e.updateItem,r=e.close,c=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),a(n,e),r()}}),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:c,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Section"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"data.title",label:"Title",className:"flex-1",autoFocus:!0}),Object(I.jsx)(ca,{name:"data.bottomBorder",label:"Show a bottom border"})]})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){i(n),r()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return r()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},la=function(e){return An({render:function(t){return Object(I.jsx)(sa,Object(l.a)({close:t},e))}})},oa=function(e){var t=e.title,n=e.subtitle,i=e.actions,a=e.className;return Object(I.jsxs)("div",{className:Object(h.a)("flex justify-between items-center flex-wrap sm:flex-nowrap",a),children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{className:"text-lg leading-5 font-medium text-gray-900 dark:text-white",children:t}),n&&Object(I.jsx)("p",{className:"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-300",children:n})]}),Object(I.jsx)("div",{className:"flex-shrink-0",children:i&&i.filter(A).length>0?Object(I.jsx)(De,{actions:i}):Object(I.jsx)(tn,{})})]})},da=[hn,gn,yn],ua=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=n.removeItem,s=n.updateItem,o=Object(mn.a)(Object(xn.a)(t),a),d=ti(),u=Object(c.a)(d,2),j=u[0],b=u[1];return o?Object(I.jsxs)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),la({item:o,path:t,removeItem:r,updateItem:s})}},b),{},{className:Object(h.a)("rounded-md cursor-pointer transition-all duration-100",j&&"ring-4 ring-primary-500"),children:[o.data.title&&Object(I.jsx)(oa,{title:o.data.title}),Object(I.jsxs)("div",{className:"py-6",children:[o.data.items.map((function(e,n){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",n]),isFirst:0===n,accept:da}),Object(I.jsx)(Ba,{path:[].concat(Object(v.a)(t),["data","items",n])})]},e.id)})),Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",o.data.items.length]),isFirst:0===o.data.items.length,isLast:!0,accept:da})]}),o.data.bottomBorder&&Object(I.jsx)("div",{className:"border-b border-gray-200 mt-6"})]})):null},ja=function(e){var t=e.path,n=Object(i.useContext)(jn).itemList,a=Object(mn.a)(Object(xn.a)(t),n);return console.log(a),Object(I.jsx)("div",{className:Object(h.a)(a.data.bottomBorder&&"border-b border-gray-200 pb-6","px-6"),children:Object(I.jsxs)(_,{children:[a.data.title&&Object(I.jsx)(oa,{title:a.data.title}),a.data.items.map((function(e,n){return Object(I.jsx)(Wa,{path:[].concat(Object(v.a)(t),["data","items",n])},n)}))]})})},ba={name:"Section",type:wn,description:"A box used for containing content",create:function(){return{id:Rt(),type:wn,data:{title:"",bottomBorder:!1,items:[]}}}},ma=ua,xa=ja,fa=la,Oa=function(e){var t=e.item,n=e.path,i=e.context,a=e.close,r=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),i.updateItem(n,e),a()}}),c={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:r,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Table"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsx)(_,{children:Object(I.jsx)(Pt,{name:"data.wrapper",label:"Wrapper",options:ha,className:"flex-1",autoFocus:!0})})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:c,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){i.removeItem(n),a()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return a()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},va=function(e){return An({render:function(t){return Object(I.jsx)(Oa,Object(l.a)({close:t},e))}})},ha=[{label:"None",value:"none"},{label:"Card",value:"card"},{label:"Outline",value:"outline"}],pa={name:"Table",type:kn,description:"Display a value",create:function(){return{id:Rt(),type:kn,data:{wrapper:"none"}}}},ga=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=Object(mn.a)(Object(xn.a)(t),a),s=ti(),o=Object(c.a)(s,2),d=o[0],u=o[1];if(!r)return null;var j="card"===r.data.wrapper?jt:"outline"===r.data.wrapper?Vn:"div";return Object(I.jsx)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),va({item:r,path:t,context:n})}},u),{},{className:Object(h.a)("p-1 rounded-md cursor-pointer transition-all duration-100",d&&"ring-4 ring-primary-500"),children:Object(I.jsx)(j,{children:Object(I.jsx)(Ae,{schema:{cols:[{title:"Title",value:function(e){return e}}]},items:[],className:Object(h.a)("card"===r.data.wrapper?"overflow-hidden rounded-md":"outline"===r.data.wrapper?"-my-px":"")})})}))},ya=function(e){e.path;return Object(I.jsx)("div",{className:"",children:Object(I.jsx)(Ae,{schema:{cols:[{title:"Title",value:function(e){return e}}]},items:[]})})},Na=va,wa=function(e){var t=e.item,n=e.path,i=e.removeItem,a=e.updateItem,r=e.close,c=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),a(n,e),r()}}),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:c,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Form Section"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"data.title",label:"Title",className:"flex-1",autoFocus:!0}),Object(I.jsx)(It,{name:"data.subtitle",label:"Subtitle",className:"flex-1"})]})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){i(n),r()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return r()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},ka=function(e){return An({render:function(t){return Object(I.jsx)(wa,Object(l.a)({close:t},e))}})},Ca=function(e){var t=e.title,n=e.subtitle,i=e.actions,a=e.vertical,r=void 0!==a&&a,c=e.children;return Object(I.jsxs)("div",{className:Object(h.a)(r?"flex flex-col space-y-6":"md:grid md:grid-cols-3 md:gap-6"),children:[Object(I.jsxs)("div",{className:"md:col-span-1",children:[Object(I.jsx)("h3",{className:"-mt-1 text-lg font-medium leading-6 text-gray-900 dark:text-white",children:t}),n&&Object(I.jsx)("div",{className:"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-300",children:n}),i&&Object(I.jsx)("div",{className:"mt-2",children:Object(I.jsx)(De,{actions:i})})]}),Object(I.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:c})]})},Ia=[vn],Sa={name:"Form Section",type:Cn,description:"A box used for containing content",create:function(){return{id:Rt(),type:Cn,data:{title:"",subtitle:"",items:[]}}}},Da=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=n.removeItem,s=n.updateItem,o=Object(mn.a)(Object(xn.a)(t),a),d=ti(),u=Object(c.a)(d,2),j=u[0],b=u[1];return o?Object(I.jsx)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),ka({item:o,path:t,removeItem:r,updateItem:s})}},b),{},{className:Object(h.a)("rounded-md cursor-pointer transition-all duration-100",j&&"ring-4 ring-primary-500"),children:Object(I.jsxs)(Ca,{title:o.data.title||"Form Section Title...",subtitle:o.data.subtitle||"Form Section Subtitle...",children:[o.data.items.map((function(e,n){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",n]),isFirst:0===n,accept:Ia}),Object(I.jsx)(Ba,{path:[].concat(Object(v.a)(t),["data","items",n])})]},e.id)})),Object(I.jsx)(ei,{path:[].concat(Object(v.a)(t),["data","items",o.data.items.length]),isFirst:0===o.data.items.length,isLast:!0,accept:Ia})]})})):null},Ea=function(e){var t=e.path,n=Object(i.useContext)(jn).itemList,a=Object(mn.a)(Object(xn.a)(t),n);return console.log(a),Object(I.jsx)(Ca,{title:a.data.title,subtitle:a.data.subtitle,children:Object(I.jsx)(_,{children:a.data.items.map((function(e,n){return Object(I.jsx)(Wa,{path:[].concat(Object(v.a)(t),["data","items",n])},n)}))})})},Ta=ka,Pa={label:"Custom",value:"custom"},Fa=function(e){var t,n=e.item,i=e.path,a=e.context,r=e.close,c=ht({initialValues:n,onSubmit:function(e){console.log("new Data",e),a.updateItem(i,e),r()}}),s={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]},l=gt("data.fieldId",c);return Object(I.jsxs)(vt,{context:c,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Input"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"data.label",label:"Custom Label"}),Object(I.jsx)(Pt,{name:"data.fieldId",label:"Field",options:(null===(t=a.entity)||void 0===t?void 0:t.fields.map((function(e){return{label:e.name,value:e.id}})).concat([Pa]))||[Pa],className:"flex-1",autoFocus:!0}),Object(I.jsx)(Pt,{name:"data.intent",label:"Style",options:wt,className:"flex-1"}),Object(I.jsx)(ca,{name:"data.required",label:"Is Required"}),Object(I.jsx)(F,{show:"custom"===l,children:Object(I.jsx)(It,{name:"data.customFormat",label:"Custom Format"})})]})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:s,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){a.removeItem(i),r()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return r()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},Ma=function(e){return An({render:function(t){return Object(I.jsx)(Fa,Object(l.a)({close:t},e))}})},Aa={string:"Text",number:"Number",date:"dd/mm/yyyy",boolean:"true/false",option:"Options"},Va={name:"Input",type:In,description:"Input a value",create:function(){return{id:Rt(),type:In,data:{fieldId:"",label:"",intent:"default",required:!1}}}},La=function(e){var t=e.path,n=Object(i.useContext)(un),a=n.itemList,r=Object(mn.a)(Object(xn.a)(t),a),s=qt(r.data.fieldId),o=ti(),d=Object(c.a)(o,2),u=d[0],j=d[1];return r?Object(I.jsx)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),Ma({item:r,path:t,context:n})}},j),{},{className:Object(h.a)("p-1 rounded-md cursor-pointer transition-all duration-100",u&&"ring-4 ring-primary-500"),children:Object(I.jsx)("div",{className:"pointer-events-none",children:Object(I.jsx)(kt,{label:r.data.label||(null===s||void 0===s?void 0:s.name)||"Please choose a field",type:"text",placeholder:"".concat((null===s||void 0===s?void 0:s.type)?Aa[s.type]||s.type:"","..."),intent:r.data.intent,isRequired:r.data.required?"required":void 0})})})):null},Ra=function(e){var t,n=e.path,a=Object(i.useContext)(jn),r=a.itemList,c=a.unitId,s=Object(mn.a)(Object(xn.a)(n),r),l="custom"!==s.data.fieldId?qt(s.data.fieldId):null,o=Yt(c);return l?Object(I.jsxs)("div",{className:"",children:[Object(I.jsx)("div",{className:"text-sm leading-5 text-gray-500 dark:text-gray-300",children:s.data.label||(null===l||void 0===l?void 0:l.name)||"-"}),Object(I.jsx)("div",{className:"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white",children:(null===o||void 0===o||null===(t=o.value(l.id))||void 0===t?void 0:t.formatted)||"-"})]}):"custom"===s.data.fieldId?Object(I.jsxs)("div",{className:"",children:[Object(I.jsx)("div",{className:"text-sm leading-5 text-gray-500 dark:text-gray-300",children:s.data.label||"-"}),Object(I.jsx)("div",{className:"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white",children:null===o||void 0===o?void 0:o.value(s.data.fieldId)})]}):null},za=Ma,qa=(Wn={},Object(g.a)(Wn,pn,Ni),Object(g.a)(Wn,vn,ri),Object(g.a)(Wn,wn,ba),Object(g.a)(Wn,hn,xi),Object(g.a)(Wn,gn,Ri),Object(g.a)(Wn,yn,Zi),Object(g.a)(Wn,Nn,ta),Object(g.a)(Wn,kn,pa),_n={},Object(g.a)(_n,pn,Ni),Object(g.a)(_n,vn,ri),Object(g.a)(_n,wn,ba),Object(g.a)(_n,hn,xi),Object(g.a)(_n,gn,Ri),Object(g.a)(_n,Nn,ta),Object(g.a)(_n,kn,pa),Object(g.a)(_n,Cn,Sa),Object(g.a)(_n,In,Va),Yn={},Object(g.a)(Yn,vn,ci),Object(g.a)(Yn,hn,fi),Object(g.a)(Yn,pn,wi),Object(g.a)(Yn,gn,zi),Object(g.a)(Yn,yn,Ki),Object(g.a)(Yn,Nn,na),Object(g.a)(Yn,wn,ma),Object(g.a)(Yn,kn,ga),Object(g.a)(Yn,Cn,Da),Object(g.a)(Yn,In,La),Yn),Ha=(Un={},Object(g.a)(Un,vn,si),Object(g.a)(Un,hn,Oi),Object(g.a)(Un,pn,ki),Object(g.a)(Un,gn,qi),Object(g.a)(Un,yn,Gi),Object(g.a)(Un,Nn,ia),Object(g.a)(Un,wn,xa),Object(g.a)(Un,kn,ya),Object(g.a)(Un,Cn,Ea),Object(g.a)(Un,In,Ra),Un),Ba=(Zn={},Object(g.a)(Zn,vn,li),Object(g.a)(Zn,hn,vi),Object(g.a)(Zn,pn,Ci),Object(g.a)(Zn,gn,Hi),Object(g.a)(Zn,yn,Ji),Object(g.a)(Zn,Nn,aa),Object(g.a)(Zn,wn,fa),Object(g.a)(Zn,kn,Na),Object(g.a)(Zn,Cn,Ta),Object(g.a)(Zn,In,za),function(e){var t=e.path,n=Object(i.useContext)(un).itemList,a=Object(mn.a)(Object(xn.a)(t),n),r=qa[a.type];return Object(I.jsx)(On,{type:a.type,item:{item:a,path:t},children:Object(I.jsx)(r,{path:t})})}),Wa=function(e){var t=e.path,n=Object(i.useContext)(jn).itemList,a=Object(mn.a)(Object(xn.a)(t),n),r=Ha[a.type];return Object(I.jsx)(r,{path:t})},_a=function(e){var t=e.id,n=e.unitId,a=Object(i.useMemo)((function(){return Kt(t)}),[t]),r=Object(i.useMemo)((function(){try{return JSON.parse((null===a||void 0===a?void 0:a.structure)||"null")}catch(e){return null}}),[a]);return Object(I.jsx)(bn,{value:{unitId:n,itemList:r},children:Object(I.jsx)(_,{children:r.items.map((function(e,t){return Object(I.jsx)(Wa,{path:["items",t]},t)}))})})},Ya=function(e){var t=e.id,n=void 0===t?"":t,i=Yt(n),a=null===i||void 0===i?void 0:i.entity,r=null===a||void 0===a?void 0:a.page("view");console.log("entities",a&&a.pages);var c=null===i||void 0===i?void 0:i.resolvedValues,s=zt((null===r||void 0===r?void 0:r.name)||"View ".concat(null===a||void 0===a?void 0:a.name),c||{},(function(e){return"{{".concat(e,"}}")}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:s,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/".concat(null===a||void 0===a?void 0:a.key)}}),Object(I.jsx)("div",{children:s})]}),actions:[r&&{title:"Edit Page Page",icon:Object(I.jsx)(Y.G,{className:"w-5 h-5"}),to:"/".concat(null===a||void 0===a?void 0:a.key,"/").concat(n,"/page/view")},{title:"History",icon:Object(I.jsx)(Y.n,{className:"w-5 h-5"}),to:"/".concat(null===a||void 0===a?void 0:a.key,"/").concat(n,"/history")},{title:"Edit ".concat(null===a||void 0===a?void 0:a.name),icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),intent:"primary",to:"/".concat(null===a||void 0===a?void 0:a.key,"/").concat(n,"/edit")}]}),Object(I.jsx)(rn,{children:r?Object(I.jsx)(_a,{id:r.id,unitId:n}):Object(I.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-6",children:[Object(I.jsx)("div",{className:"text-2xl font-medium",children:"No page exists for this page"}),Object(I.jsx)(De,{actions:[{title:"Create Page",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),intent:"primary",size:"lg",to:"/".concat(null===a||void 0===a?void 0:a.key,"/").concat(n,"/page/view")}]})]})})]})},Ua=n(543),Za=n(544),Ka=n(545),Ga=n(546),Ja=n(547),$a=n(274),Xa=n(275),Qa=n(548),er=n(558),tr=n(549),nr=n(550),ir=n(273),ar=n.n(ir),rr=["Mo","Tu","We","Th","Fr","Sa","Su"],cr=function(e){return e&&e instanceof Date&&Le(e)},sr=function(e){var t=e.name,n=e.label,a=e.description,r=e.placeholder,s=void 0===r?"DD/MM/YYYY":r,l=e.hideOptional,o=e.validations,d=void 0===o?{}:o,u=e.placement,j=void 0===u?"bottom-end":u,b=e.offset,m=void 0===b?10:b,x=e.disabled,f=e.minDate,O=e.maxDate,v=e.inputDisabled,p=e.disableHolidays,g=void 0!==p&&p,y=e.autoFocus,N=void 0!==y&&y,w=e.className,k=e.inputClassName,C=null===d||void 0===d?void 0:d.required,S=Object(ft.d)({name:t,validate:pt(d)}),D=Object(c.a)(S,3),E=D[0],T=E.value,P=E.onBlur,F=D[1],M=F.error,A=F.touched,V=D[2],L=V.setValue,R=V.setTouched,z=Object(ft.f)(),q=Object(i.useState)(cr(T)?Object(le.a)(T,"dd/MM/yyyy"):""),H=Object(c.a)(q,2),B=H[0],W=H[1],_=Object(i.useState)(Object(Ua.a)(cr(T)?T:new Date)),Z=Object(c.a)(_,2),K=Z[0],G=Z[1],J=Object(i.useState)(),$=Object(c.a)(J,2),X=$[0],Q=$[1];Object(i.useEffect)((function(){if(X!==T)if(T){var e=Re(T);W(cr(e)?Object(le.a)(e,"dd/MM/yyyy"):""),Q(T)}else W(""),G(new Date)}),[X,T]);var ee=ge({onOpen:function(){try{if(T){var e=Re(T);W(Object(le.a)(e,"dd/MM/yyyy")),G(e)}}catch(M){console.log("error",M),W(""),G(new Date)}}}),te=ee.open,ne=ee.setOpen,ie=ee.ignoreClass,ae=ee.ref,re=ve({placement:j,strategy:"fixed",modifiers:[{name:"offset",options:{offset:m instanceof Array?m:[0,m]}}]}),ce=Object(c.a)(re,2),se=ce[0],oe=ce[1],ue=new Array(Object(Za.a)(Object(Ua.a)(K))-1).fill(null).map((function(e,t){return Object(Ka.a)(Object(Ga.a)(Object(Ja.a)(K,1)),t)})).reverse(),je=new Array(7-Object(Za.a)(Object(Ga.a)(K))).fill(null).map((function(e,t){return Object($a.a)(Object(Ua.a)(Object(Xa.a)(K,1)),t)})),be=new Array(Object(Qa.a)(K)).fill(null).map((function(e,t){return Object($a.a)(Object(Ua.a)(K),t)})),me=U(N);return Object(I.jsxs)("div",{className:Object(h.a)(w),ref:ae,children:[Object(I.jsxs)("label",{children:[n&&Object(I.jsxs)("div",{className:"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200",children:[n," ",!C&&!l&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]}),Object(I.jsxs)("div",{className:Object(h.a)("relative rounded-md",n&&"mt-1"),children:[Object(I.jsx)("input",{type:"text",value:B,onChange:function(e){return W(e.target.value)},placeholder:s,disabled:z.isSubmitting||x,ref:ar()(se,me),onClick:function(){return ne(!0)},onKeyDown:function(e){v?e.preventDefault():ne(!1)},onBlur:function(e){if(B){var t=Object(er.a)(B,"dd/MM/yyyy",new Date);Le(t)?(L(t),R(!0)):W(cr(T)?Object(le.a)(T,"dd/MM/yyyy"):"")}else L(null),R(!0);P(e)},className:Object(h.a)("form-input block w-full sm:text-sm sm:leading-5",M&&A&&"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500",k,ie)}),Object(I.jsx)("div",{className:Object(h.a)(!te&&"hidden","z-10"),ref:oe,children:Object(I.jsxs)("div",{className:"mt rounded-md shadow-lg bg-white dark:bg-gray-700 w-80 overflow-hidden",children:[Object(I.jsxs)("div",{className:"flex items-center dark:bg-gray-750 p-4 border-b border-gray-100 dark:border-gray-600",children:[Object(I.jsx)("button",{type:"button",onClick:function(){return G((function(e){return Object(Ja.a)(e,1)}))},className:"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md",children:Object(I.jsx)(Y.c,{className:"w-4 h-4"})}),Object(I.jsx)("div",{className:"flex-1 flex items-center justify-center text-sm font-medium",children:Object(le.a)(K,"MMMM yyyy")}),Object(I.jsx)("button",{type:"button",onClick:function(){return G((function(e){return Object(Xa.a)(e,1)}))},className:"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md",children:Object(I.jsx)(Y.d,{className:"w-4 h-4"})})]}),Object(I.jsxs)("div",{className:"p-4 grid grid-cols-7",children:[rr.map((function(e,t){return Object(I.jsx)("div",{className:"col-span-1 w-8 h-8 flex items-center justify-center rounded m-1 cursor-default text-sm text-gray-400",children:e},t)})),ue.map((function(e,t){return Object(I.jsx)("div",{className:"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium",children:Object(le.a)(e,"d")},t)})),be.map((function(e,t){return Object(I.jsx)("button",{type:"button",className:Object(h.a)("col-span-1 w-7 h-7 flex items-center justify-center rounded m-2 cursor-pointer disabled:pointer-events-none text-sm font-medium hover:bg-indigo-100 dark:hover:bg-gray-800 disabled:opacity-50",Object(de.a)(new Date,e)&&"text-indigo-400 ring-2 ring-indigo-300",T&&Object(de.a)(Re(T),e)&&"bg-indigo-600 text-white"),onClick:function(){return function(e){L(e),R(!0),ne(!1),W(Object(le.a)(e,"dd/MM/yyyy"))}(e)},disabled:f&&Object(tr.a)(e,f)||O&&Object(nr.a)(e,O)||g&&!!ze(e),title:ze(e),children:Object(le.a)(e,"d")},t)})),je.map((function(e,t){return Object(I.jsx)("div",{className:"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium",children:Object(le.a)(e,"d")},t)}))]})]})})]})]}),a&&!M&&!A&&Object(I.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:a}),M&&A&&Object(I.jsx)("p",{className:"mt-2 text-sm text-red-600",children:M})]})},lr=function(e){var t=e.entityId,n=void 0===t?"":t,a=e.mode,r=e.id,s=void 0===r?"":r,o=At(n),d=null===o||void 0===o?void 0:o.fields,u=Object(i.useState)({fields:(null===d||void 0===d?void 0:d.reduce((function(e,t){var n=t.value(s),i=(null===t||void 0===t?void 0:t.key)||"",a=null===t||void 0===t?void 0:t.defaultValue,r=null===t||void 0===t?void 0:t.type,c=n;return c?Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},i,{id:null===c||void 0===c?void 0:c.id,value:(null===c||void 0===c?void 0:c.value)||""})):Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},i,{id:void 0,value:"string"===r?a||"":"date"===r?a?new Date(a||"").toISOString():null:"boolean"===r?"true"===(null===a||void 0===a?void 0:a.toLowerCase())||"false":"number"===r&&a||""}))}),{}))||{}}),j=Object(c.a)(u,1)[0],b=ht({initialValues:j,onSubmit:function(e){if(n){var t=O.units.save(Object(l.a)({entityId:n},s?{id:s}:{}));Object.entries(e.fields).forEach((function(e){var n=Object(c.a)(e,2),i=n[0],a=n[1],r=O.fields.find((function(e){return e.key===i}));r&&(!(j.fields[r.key].value!==a.value)&&a.id||O.values.save({value:String(a.value),id:"",unitId:t.id,fieldId:null===r||void 0===r?void 0:r.id,created:String((new Date).valueOf())}))})),window.history.back()}}}),m="create"===a?"Create ".concat(null===o||void 0===o?void 0:o.plural):"Edit ".concat(null===o||void 0===o?void 0:o.name);return Object(I.jsxs)(vt,{context:b,children:[Object(I.jsx)(nn,{pageTitle:m,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/".concat(null===o||void 0===o?void 0:o.key)}}),Object(I.jsx)("div",{children:m})]})}),Object(I.jsx)(rn,{children:Object(I.jsxs)(_,{children:[Object(I.jsx)(xt,{children:Object(I.jsx)(_,{children:null===d||void 0===d?void 0:d.map((function(e){return"string"===(null===e||void 0===e?void 0:e.type)?Object(I.jsx)(It,{name:"fields.".concat(null===e||void 0===e?void 0:e.key,".value"),label:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.key):"number"===(null===e||void 0===e?void 0:e.type)?Object(I.jsx)(It,{name:"fields.".concat(null===e||void 0===e?void 0:e.key,".value"),label:null===e||void 0===e?void 0:e.name,type:"number"},null===e||void 0===e?void 0:e.key):"date"===(null===e||void 0===e?void 0:e.type)?Object(I.jsx)(sr,{name:"fields.".concat(null===e||void 0===e?void 0:e.key,".value"),label:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.key):"boolean"===(null===e||void 0===e?void 0:e.type)?Object(I.jsx)(ca,{name:"fields.".concat(null===e||void 0===e?void 0:e.key,".value"),label:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.key):"option"===(null===e||void 0===e?void 0:e.type)?Object(I.jsx)(Pt,{name:"fields.".concat(null===e||void 0===e?void 0:e.key,".value"),label:null===e||void 0===e?void 0:e.name,options:(null===e||void 0===e?void 0:e.options.map((function(e){return{label:e,value:e}})))||[]},null===e||void 0===e?void 0:e.key):null}))})}),Object(I.jsx)("div",{className:"flex items-center justify-end",children:Object(I.jsx)(De,{actions:[{title:"create"===a?"Create":"Save",intent:"primary",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),type:"submit",disabled:b.isSubmitting}]})})]})})]})},or=["ref"],dr=["ref"],ur=function(e){var t=e.value,n=e.onChange,i=e.onBlur,a=e.options,r=e.clearable,c=e.disabled,s=void 0!==c&&c,o=e.placeholder,d=e.className,u=e.onChange;return Object(I.jsx)("div",{className:Object(h.a)(d),children:Object(I.jsx)(Et.a,{options:a,value:a.find((function(e){var n,i;return e.value===t||e.value===+t||void 0!==(null===(n=e.value)||void 0===n?void 0:n.id)&&(null===(i=e.value)||void 0===i?void 0:i.id)===(null===t||void 0===t?void 0:t.id)}))||null,onChange:function(e){n(e?e.value:null),u&&u(e?e.value:null)},onBlur:i,inputProps:{autoComplete:"none",autoCorrect:"off",spellCheck:"off"},className:"react-select-container",classNamePrefix:"react-select",placeholder:o,isClearable:r,isDisabled:s,menuPlacement:"auto",theme:function(e){return Object(l.a)(Object(l.a)({},e),{},{colors:Object(l.a)(Object(l.a)({},e.colors),{},{primary25:"#f0f5ff",primary:"#5850ec"})})},components:{ClearIndicator:function(e){var t=e.hasValue,n=e.innerProps,i=n.ref,a=Object(p.a)(n,or);return t?Object(I.jsx)("span",Object(l.a)(Object(l.a)({ref:i},a),{},{children:Object(I.jsx)(Y.K,{className:"mr-8 w-5 h-5 cursor-pointer text-gray-400 hover:text-red-500"})})):null},DropdownIndicator:function(e){var t=e.innerProps;t.ref,Object(p.a)(t,dr);return null}}})})},jr=["Mo","Tu","We","Th","Fr","Sa","Su"],br=function(e){return e&&e instanceof Date&&Le(e)},mr=function(e){var t=e.value,n=e.onChange,a=e.onBlur,r=e.placeholder,s=void 0===r?"DD/MM/YYYY":r,l=e.placement,o=void 0===l?"bottom-end":l,d=e.offset,u=void 0===d?10:d,j=e.disabled,b=e.inputDisabled,m=e.hasError,x=e.className,f=e.inputClassName,O=Object(i.useState)(br(t)?Object(le.a)(t,"dd/MM/yyyy"):""),v=Object(c.a)(O,2),p=v[0],g=v[1],y=Object(i.useState)(Object(Ua.a)(br(t)?t:new Date)),N=Object(c.a)(y,2),w=N[0],k=N[1],C=Object(i.useState)(),S=Object(c.a)(C,2),D=S[0],E=S[1];Object(i.useEffect)((function(){if(D!==t&&t){var e=Re(t);g(br(e)?Object(le.a)(e,"dd/MM/yyyy"):""),E(t)}}),[D,t]);var T=ge({onOpen:function(){var e=br(t);g(e?Object(le.a)(t,"dd/MM/yyyy"):""),k(e?t:new Date)}}),P=T.open,F=T.setOpen,M=T.ignoreClass,A=T.ref,V=ve({placement:o,strategy:"fixed",modifiers:[{name:"offset",options:{offset:u instanceof Array?u:[0,u]}}]}),L=Object(c.a)(V,2),R=L[0],z=L[1],q=new Array(Object(Za.a)(Object(Ua.a)(w))-1).fill(null).map((function(e,t){return Object(Ka.a)(Object(Ga.a)(Object(Ja.a)(w,1)),t)})).reverse(),H=new Array(7-Object(Za.a)(Object(Ga.a)(w))).fill(null).map((function(e,t){return Object($a.a)(Object(Ua.a)(Object(Xa.a)(w,1)),t)})),B=new Array(Object(Qa.a)(w)).fill(null).map((function(e,t){return Object($a.a)(Object(Ua.a)(w),t)}));return Object(I.jsx)("div",{className:Object(h.a)(x),ref:A,children:Object(I.jsxs)("div",{className:Object(h.a)("relative rounded-md"),children:[Object(I.jsx)("input",{type:"text",value:p,onChange:function(e){return g(e.target.value)},placeholder:s,disabled:j,ref:R,onClick:function(){return F(!0)},onKeyDown:function(e){b?e.preventDefault():F(!1)},onBlur:function(){if(p){var e=Object(er.a)(p,"dd/MM/yyyy",new Date);Le(e)?n(e):g(br(t)?Object(le.a)(t,"dd/MM/yyyy"):"")}else n(null);a&&a()},className:Object(h.a)("form-input block w-full sm:text-sm sm:leading-5",m&&"pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500",f,M)}),Object(I.jsx)("div",{className:Object(h.a)(!P&&"hidden","z-10"),ref:z,children:Object(I.jsxs)("div",{className:"mt rounded-md shadow-lg bg-white dark:bg-gray-700 w-80 overflow-hidden",children:[Object(I.jsxs)("div",{className:"flex items-center dark:bg-gray-750 p-4 border-b border-gray-100 dark:border-gray-600",children:[Object(I.jsx)("button",{type:"button",onClick:function(){return k((function(e){return Object(Ja.a)(e,1)}))},className:"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md",children:Object(I.jsx)(Y.c,{className:"w-4 h-4"})}),Object(I.jsx)("div",{className:"flex-1 flex items-center justify-center text-sm font-medium",children:Object(le.a)(w,"MMMM yyyy")}),Object(I.jsx)("button",{type:"button",onClick:function(){return k((function(e){return Object(Xa.a)(e,1)}))},className:"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md",children:Object(I.jsx)(Y.d,{className:"w-4 h-4"})})]}),Object(I.jsxs)("div",{className:"p-4 grid grid-cols-7",children:[jr.map((function(e,t){return Object(I.jsx)("div",{className:"col-span-1 w-8 h-8 flex items-center justify-center rounded m-1 cursor-default text-sm text-gray-400",children:e},t)})),q.map((function(e,t){return Object(I.jsx)("div",{className:"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium",children:Object(le.a)(e,"d")},t)})),B.map((function(e,i){return Object(I.jsx)("button",{type:"button",className:Object(h.a)("col-span-1 w-7 h-7 flex items-center justify-center rounded m-2 cursor-pointer text-sm font-medium hover:bg-indigo-100 dark:hover:bg-gray-800",Object(de.a)(new Date,e)&&"text-indigo-400 ring-2 ring-indigo-300",t&&Object(de.a)(Re(t),e)&&"bg-indigo-600 text-white"),onClick:function(){return function(e){n(e),F(!1),g(Object(le.a)(e,"dd/MM/yyyy"))}(e)},children:Object(le.a)(e,"d")},i)})),H.map((function(e,t){return Object(I.jsx)("div",{className:"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium",children:Object(le.a)(e,"d")},t)}))]})]})})]})})},xr=function(e){var t=e.id,n=void 0===t?"":t,a=Yt(n),r=null===a||void 0===a?void 0:a.entity,s=((null===a||void 0===a?void 0:a.values)||[]).reduce((function(e,t){var n=t.history.map(Ut).filter(A);return[].concat(Object(v.a)(e),Object(v.a)(n))}),[]).sort((function(e,t){return new Date(t.created).valueOf()-new Date(e.created).valueOf()})),l="".concat(null===r||void 0===r?void 0:r.name," History"),o=Object(i.useState)(!1),d=Object(c.a)(o,2),u=d[0],j=d[1],b=Object(i.useState)(null),m=Object(c.a)(b,2),x=m[0],f=m[1],O=Object(i.useState)(null),p=Object(c.a)(O,2),g=p[0],y=p[1],N=Object(i.useState)(null),w=Object(c.a)(N,2),k=w[0],C=w[1],S=Object(i.useState)(null),D=Object(c.a)(S,2),E=D[0],T=D[1],P=s.filter((function(e){return null===x||e.fieldId===x.id})).filter((function(e){return null===g||new Date(e.created).valueOf()>g.valueOf()})).filter((function(e){return null===k||new Date(e.created).valueOf()<k.valueOf()}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:l,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/".concat(null===r||void 0===r?void 0:r.key,"/").concat(n)}}),Object(I.jsx)("div",{children:l})]})}),Object(I.jsx)(rn,{children:Object(I.jsxs)(_,{children:[Object(I.jsxs)(jt,{children:[Object(I.jsx)(qn,{title:"Filter",actions:[{icon:u?Object(I.jsx)(Y.m,{className:"w-5 h-5"}):Object(I.jsx)(Y.k,{className:"w-5 h-5"}),intent:"menu",onClick:function(){return j((function(e){return!e}))}}]}),Object(I.jsx)(F,{show:u,children:Object(I.jsx)(bt,{children:Object(I.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(I.jsxs)("div",{className:"col-span-1",children:[Object(I.jsx)(Ln,{children:"Field"}),Object(I.jsx)(ur,{value:x,onChange:f,options:(null===r||void 0===r?void 0:r.fields.map((function(e){return{value:e,label:e.name}})))||[],clearable:!0,className:"mt-1"})]}),Object(I.jsxs)("div",{className:"col-span-1",children:[Object(I.jsx)(Ln,{children:"User"}),Object(I.jsx)(ur,{value:E,onChange:T,options:[{value:"user",label:"User"}],clearable:!0,className:"mt-1"})]}),Object(I.jsxs)("div",{className:"col-span-1",children:[Object(I.jsx)(Ln,{children:"Created From"}),Object(I.jsx)(mr,{value:g,onChange:y,className:"mt-1"})]}),Object(I.jsxs)("div",{className:"col-span-1",children:[Object(I.jsx)(Ln,{children:"Created To"}),Object(I.jsx)(mr,{value:k,onChange:C,className:"mt-1"})]})]})})})]}),Object(I.jsx)(xt,{children:Object(I.jsx)("div",{className:"flow-root",children:Object(I.jsx)("ul",{className:"-mb-8",children:P.map((function(e,t){var n;return Object(I.jsx)("li",{children:Object(I.jsxs)("div",{className:"relative pb-8",children:[t!==P.length-1?Object(I.jsx)("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,Object(I.jsxs)("div",{className:"relative flex items-center space-x-3",children:[Object(I.jsx)("div",{children:Object(I.jsx)("span",{className:Object(h.a)("bg-primary-600","h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white"),children:Object(I.jsx)(Y.B,{className:"h-5 w-5 text-white","aria-hidden":"true"})})}),Object(I.jsxs)("div",{className:"min-w-0 flex-1 pt-0 flex justify-between space-x-4",children:[Object(I.jsx)("div",{children:Object(I.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(n=e.field)||void 0===n?void 0:n.name," set to"," ",Object(I.jsxs)("strong",{className:"font-medium text-gray-900",children:['"',e.formatted,'"']})," ","by ",Object(I.jsx)("a",{href:"/",children:"User"})]})}),Object(I.jsx)("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:Object(I.jsx)("time",{dateTime:e.created,children:Object(oe.a)(new Date(e.created||0),new Date)})})]})]})]})},e.id)}))})})})]})})]})},fr=function(e){var t=e.id,n=Ut(void 0===t?"":t),i=null===n||void 0===n?void 0:n.field,a=null===i||void 0===i?void 0:i.entity,r=null===n||void 0===n?void 0:n.unit,c="History of ".concat(null===i||void 0===i?void 0:i.name);return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:c,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/".concat(null===a||void 0===a?void 0:a.key,"/").concat(null===r||void 0===r?void 0:r.id)}}),Object(I.jsx)("div",{children:c})]})}),Object(I.jsx)(rn,{children:Object(I.jsx)(xt,{children:Object(I.jsx)("ul",{children:null===n||void 0===n?void 0:n.history.map((function(e){return Object(I.jsx)("li",{children:e.value},e.id)}))})})})]})},Or=[{title:"Entities",to:"/settings/entities",icon:Object(I.jsx)(Y.p,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Roles",to:"/settings/roles",icon:Object(I.jsx)(Y.a,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Pages",to:"/settings/pages",icon:Object(I.jsx)(Y.G,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Forms",to:"/settings/forms",icon:Object(I.jsx)(Ii,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Templates",to:"/settings/templates",icon:Object(I.jsx)(Y.r,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Notifications",to:"/settings/notifications",icon:Object(I.jsx)(Y.A,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Workflows",to:"/settings/workflows",icon:Object(I.jsx)(Pi,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Modules",to:"/settings/modules",icon:Object(I.jsx)(Y.D,{className:"w-5 h-5"}),show:function(){return!0},exact:!0},{title:"Site Settings",to:"/settings/site-settings",icon:Object(I.jsx)(Y.o,{className:"w-5 h-5"}),show:function(){return!0},exact:!0}],vr=function(e){var t=e.children;return"/settings"===Object(s.f)().pathname?(Object(s.e)(Or[0].to),null):Object(I.jsx)(I.Fragment,{children:t})},hr=function(e){var t=e.message,n=e.enabled,a=void 0===n||n,r=e.intent,s=void 0===r?"light":r,l=e.children,o=Object(i.useRef)(null),d=Object(i.useState)(!1),u=Object(c.a)(d,2),j=u[0],b=u[1],m=Object(i.useState)(0),x=Object(c.a)(m,2),f=x[0],O=x[1],v=Object(i.useState)(0),p=Object(c.a)(v,2),g=p[0],y=p[1];return Object(I.jsxs)("div",{ref:o,onMouseOver:function(){return o.current&&a?(O(o.current.offsetLeft+o.current.offsetWidth),y(o.current.offsetTop),void b(!0)):null},onMouseOut:function(){b(!1)},children:[Object(I.jsx)("div",{children:l}),Object(I.jsx)("div",{className:"flex items-center absolute z-10 ml-6 w-80 pointer-events-none",style:{left:"".concat(f,"px"),top:"".concat(g,"px")},children:Object(I.jsx)(C.a,{children:j&&Object(I.jsx)(k.a.div,{style:{originX:0},variants:{hidden:{opacity:0,x:-30},visible:{opacity:1,x:0}},transition:{type:"tween",ease:"easeOut",duration:.1},initial:"hidden",animate:"visible",exit:"hidden",children:Object(I.jsx)("div",{className:Object(h.a)("rounded px-3 py-2 text-sm font-medium shadow-lg",{"bg-white text-gray-900 dark:bg-primary-900 dark:text-white":"light"===s,"bg-primary-900 text-white dark:bg-primary-200 dark:text-primary-900 antialiased":"dark"===s}),children:t})})})})]})},pr={primary:{wrapper:"bg-gray-800 dark:bg-gray-900 antialiased",link:{active:"text-white bg-gray-700 dark:bg-gray-700 focus:bg-gray-900 dark:focus:bg-gray-800",inactive:"text-gray-200 hover:text-white hover:bg-gray-900 focus:text-white focus:bg-gray-700 dark:hover:bg-gray-800"},toggle:"text-gray-400 hover:text-gray-300 hover:bg-gray-700"},secondary:{wrapper:"bg-white dark:bg-gray-700 antialiased shadow",link:{active:"text-primary-900 dark:text-gray-100 bg-primary-100 dark:bg-gray-800 focus:bg-gray-200 dark:focus:bg-gray-800",inactive:"text-gray-600 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-200 dark:hover:bg-gray-600 hover:bg-primary-50 focus:text-gray-900 focus:bg-gray-100 dark:focus:bg-gray-800 dark:focus:text-gray-200"},toggle:"text-gray-400 hover:text-gray-500 hover:bg-gray-100"},white:{wrapper:"bg-white antialiased shadow",link:{active:"text-gray-900 bg-gray-50 focus:bg-gray-200",inactive:"text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:text-gray-900 focus:bg-gray-100"},toggle:"text-gray-400 hover:text-gray-500 hover:bg-gray-100"}},gr=function(e){var t=e.link,n=e.intent,i=e.min,a=void 0!==i&&i;return Object(I.jsx)("div",{children:t&&Object(I.jsx)(hr,{message:t.tooltip||t.title,enabled:a,intent:"dark",children:Object(I.jsxs)(Nr,{route:t,intent:n,children:[Object(I.jsx)("div",{className:"opacity-75 pointer-events-none mr-3",children:t.icon}),Object(I.jsx)("div",{className:Object(h.a)(a&&"lg:hidden"),children:t.title})]})})})},yr=function(e,t){return function(n){var i=n.isCurrent,a=n.isPartiallyCurrent;return(e.exact?i:a)?{className:Object(h.a)("group flex items-center p-2 text-sm font-medium leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500",pr[t].link.active)}:{className:Object(h.a)("group flex items-center p-2 text-sm font-medium leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500",pr[t].link.inactive)}}},Nr=function(e){var t=e.route,n=e.intent,i=e.children;return B(t)?Object(I.jsxs)("a",{href:t.url,className:Object(h.a)("group flex items-center justify-center p-2 text-sm leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500",pr[n].link.inactive,"justify-center"),target:"_blank",rel:"noopener noreferrer",children:[Object(I.jsx)("div",{className:"flex items-center justify-center",children:i}),Object(I.jsx)("div",{className:"flex-1 flex justify-end",children:Object(I.jsx)(Y.u,{className:"opacity-25 w-4 h-4"})})]}):H(t)?Object(I.jsx)(s.a,{to:"".concat("/nzdrc-mockup").concat(t.to),getProps:yr(t,n),children:i}):null},wr=function(e){var t=e.links,n=e.intent,i=void 0===n?"secondary":n,a=e.min,r=void 0!==a&&a,c=e.className,s=void 0===c?null:c;return Object(I.jsx)("nav",{className:Object(h.a)("space-y-1",s),children:t.filter(A).map((function(e,t){return Object(I.jsx)(gr,{link:e,intent:i,min:r},t)}))})},kr=function(e){var t=e.links,n=e.className,i=e.children,a=Ue("case-min",!1),r=Object(c.a)(a,2),s=r[0],l=r[1];return Object(I.jsx)(rn,{className:n,children:Object(I.jsx)(jt,{className:"relative",children:Object(I.jsx)("div",{className:"max-w-full",children:Object(I.jsxs)("div",{className:Object(h.a)("grid grid-cols-1 max-w-full",s?"md:grid-cols-[62px,minmax(0,1fr)]":"md:grid-cols-[20rem,minmax(0,1fr)]"),children:[Object(I.jsx)("div",{className:"p-3",children:Object(I.jsx)(wr,{links:t,min:s})}),Object(I.jsxs)("div",{className:"relative mt-6 lg:mt-0 border-t lg:border-t-0 lg:border-l border-gray-200 dark:border-gray-600",children:[Object(I.jsx)("div",{className:"absolute top-0 left-0 h-full group z-10",children:Object(I.jsx)("div",{className:Object(h.a)("w-1 -ml-0.5 h-full bg-primary-600 opacity-0 group-hover:opacity-100 transition-opacity duration-100 ease-linear",s?"cursor-right":"cursor-left"),onClick:function(){return l(!s)}})}),Object(I.jsx)("div",{children:i})]})]})})})})},Cr={sm:"px-2 py-0.5 -my-0.5 text-xs leading-5",md:"px-2.5 py-0.5 -my-0.5 text-sm leading-6"},Ir={gray:"bg-gray-400 text-gray-800 dark:bg-gray-500 dark:text-gray-300 bg-opacity-25 dark:bg-opacity-25",red:"bg-red-400 text-red-800 dark:bg-red-500 dark:text-red-300 bg-opacity-25 dark:bg-opacity-25",orange:"bg-green-400 text-green-800 dark:bg-green-500 dark:text-green-300 bg-opacity-25 dark:bg-opacity-25",yellow:"bg-yellow-400 text-yellow-800 dark:bg-yellow-500 dark:text-yellow-300 bg-opacity-25 dark:bg-opacity-25",green:"bg-green-400 text-green-800 dark:bg-green-500 dark:text-green-300 bg-opacity-25 dark:bg-opacity-25",teal:"bg-teal-400 text-teal-800 dark:bg-teal-500 dark:text-teal-300 bg-opacity-25 dark:bg-opacity-25",blue:"bg-blue-400 text-blue-800 dark:bg-blue-500 dark:text-blue-300 bg-opacity-25 dark:bg-opacity-25",indigo:"bg-indigo-400 text-indigo-800 dark:bg-indigo-500 dark:text-indigo-300 bg-opacity-25 dark:bg-opacity-25",purple:"bg-purple-400 text-purple-800 dark:bg-purple-500 dark:text-purple-300 bg-opacity-25 dark:bg-opacity-25",pink:"bg-pink-400 text-pink-800 dark:bg-pink-500 dark:text-pink-300 bg-opacity-25 dark:bg-opacity-25"},Sr=function(e){var t=e.color,n=e.size,i=void 0===n?"md":n,a=e.icon,r=e.className,c=e.children;return Object(I.jsxs)("span",{className:Object(h.a)("inline-flex items-center font-medium",Ir[t],Cr[i],"rounded",r),children:[void 0!==a?a:Object(I.jsx)("svg",{className:"mr-2 h-2 w-2",fill:"currentColor",viewBox:"0 0 8 8",children:Object(I.jsx)("circle",{cx:"4",cy:"4",r:"3"})}),c]})},Dr=function(){var e={cols:[{title:"Name",value:function(e){return e.name}},{title:"Enabled",value:function(e){return Object(I.jsx)(Sr,{color:e.enabled?"green":"red",icon:e.enabled?Object(I.jsx)(Y.j,{className:"w-5 h-5"}):Object(I.jsx)(Y.K,{className:"w-5 h-5"})})},width:"minmax(auto, max-content)"}],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/notifications/".concat(e.id,"/edit")},{title:"Test",icon:Object(I.jsx)(Y.f,{className:"w-5 h-5"}),onClick:function(){},disabled:!0}],[{title:"Delete",intent:"danger",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.notifications.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Notifications",actions:[{title:"Create Notification",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/notifications/create"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:e,items:O.notifications.all(),className:"-mb-px"})})]})})]})},Er=n(198),Tr=[{label:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Y.q,{className:"w-5 h-5 text-gray-500"}),Object(I.jsx)("div",{children:"Action"})]}),value:"action"},{label:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Y.F,{className:"w-5 h-5 text-gray-500"}),Object(I.jsx)("div",{children:"Repeat"})]}),value:"repeat"},{label:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Y.g,{className:"w-5 h-5 text-gray-500"}),Object(I.jsx)("div",{children:"Date"})]}),value:"date"}],Pr=[{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],Fr=[{label:"monday",value:"monday"},{label:"tuesday",value:"tuesday"},{label:"wednesday",value:"wednesday"},{label:"thursday",value:"thursday"},{label:"friday",value:"friday"},{label:"saturday",value:"saturday"},{label:"sunday",value:"sunday"}],Mr=[{label:"january",value:"january"},{label:"february",value:"february"},{label:"march",value:"march"},{label:"april",value:"april"},{label:"may",value:"may"},{label:"june",value:"june"},{label:"july",value:"july"},{label:"august",value:"august"},{label:"september",value:"september"},{label:"october",value:"october"},{label:"november",value:"november"},{label:"december",value:"december"}],Ar=function(e){return new Array(e).fill(null).map((function(e,t){return{label:qe(t+1),value:t+1}}))},Vr=function(e){return{january:Ar(31),february:Ar(28),march:Ar(31),april:Ar(30),may:Ar(31),june:Ar(30),july:Ar(31),august:Ar(31),september:Ar(30),october:Ar(31),november:Ar(30),december:Ar(31)}[e]},Lr=[{label:"minute",value:"minute"},{label:"hour",value:"hour"},{label:"day",value:"day"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"year",value:"year"}],Rr=[{label:"before",value:"before"},{label:"after",value:"after"}],zr=n(69),qr=n.n(zr),Hr=function(e,t){var n=t.setFieldValue,a=t.getFieldProps(e),r=t.getFieldMeta(a.name),c=Object(i.useRef)(a.value);Object(i.useEffect)((function(){c.current=a.value}),[a.value]);var s=Object(i.useCallback)((function(e){c.current=qr()(c.current,{$push:[e]}),n(a.name,c.current)}),[a.name,n]),l=Object(i.useCallback)((function(e,t){var i=c.current[e],r=c.current[t];c.current=qr()(c.current,{$splice:[[e,1,r],[t,1,i]]}),n(a.name,c.current)}),[a.name,n]),o=Object(i.useCallback)((function(e,t){var i=c.current[e];c.current=qr()(c.current,{$splice:[[e,1],[t,0,i]]}),n(a.name,c.current)}),[a.name,n]),d=Object(i.useCallback)((function(e,t){c.current=qr()(c.current,{$splice:[[e,0,t]]}),n(a.name,c.current)}),[a.name,n]),u=Object(i.useCallback)((function(e){return c.current=qr()(c.current,{$unshift:[e]}),n(a.name,c.current),c.current.length}),[a.name,n]),j=Object(i.useCallback)((function(e){var t=c.current[e];return c.current=qr()(c.current,{$splice:[[e,1]]}),n(a.name,c.current),t}),[a.name,n]),b=Object(i.useCallback)((function(){var e=c.current.length-1,t=c.current[e];return c.current=qr()(c.current,{$splice:[[e,1]]}),n(a.name,c.current),t}),[a.name,n]),m=Object(i.useCallback)((function(e,t){c.current=qr()(c.current,{$splice:[[e,1,t]]}),n(a.name,c.current)}),[a.name,n]);return{field:a,values:a.value||[],meta:r,arrayHelpers:{push:s,swap:l,move:o,insert:d,unshift:u,remove:j,pop:b,replace:m}}},Br=n(276),Wr=n.n(Br),_r={toolbar:[[{header:[1,2,!1]}],["bold","italic",{color:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["clean"]]},Yr=Object(i.forwardRef)((function(e,t){var n=e.name,i=e.label,a=e.className,r=e.validations,s=void 0===r?{}:r,l=e.hideOptional,o=e.disabled,d=e.modules,u=e.actions,j=Object(ft.f)(),b=Object(ft.d)({name:n,validate:pt(s)}),m=Object(c.a)(b,3),x=m[0].value,f=m[1],O=f.error,v=f.touched,p=m[2],g=p.setValue,y=p.setTouched,N=!!s.required;return Object(I.jsxs)("div",{className:Object(h.a)(a),children:[i&&Object(I.jsxs)("div",{className:"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default",children:[i," ",!N&&!l&&Object(I.jsx)("span",{className:"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75",children:"(optional)"})]}),Object(I.jsxs)("div",{className:Object(h.a)("relative h-full",i&&"mt-1"),children:[u&&Object(I.jsx)("div",{className:"absolute top-0 right-0 mr-1.5 h-11 flex items-center",children:Object(I.jsx)(De,{actions:u})}),Object(I.jsx)(Wr.a,{ref:t,value:x||"",onChange:function(e){g(e)},onBlur:function(e){y(!0)},modules:d||_r,readOnly:o||j.isSubmitting,className:"h-full"})]}),O&&v&&Object(I.jsx)("p",{className:"mt-2 text-sm text-red-600",children:O})]})})),Ur=function(e){var t=e.children,n=Object(i.useState)(!1),a=Object(c.a)(n,2),r=a[0],s=a[1];return Object(I.jsx)("div",{className:Object(h.a)(r?"fixed z-[9999] w-screen h-screen":"static","top-0 left-0"),children:t(s,r)})},Zr=function(e,t){var n=O.entities.find((function(e){return"user"===e.key}));return[{title:"Recipient",icon:Object(I.jsx)(Y.l,{className:"w-4 h-4"}),iconSide:"left",hoverable:!0,placement:"left-start",actions:O.fields.all((function(e){return e.entityId===(null===n||void 0===n?void 0:n.id)})).map((function(t){return{title:t.name,onClick:function(){return e("{{recipient-".concat(t.key,"}}"))}}}))}].concat(Object(v.a)(O.entities.all().map((function(t){return{title:t.name,icon:Object(I.jsx)(Y.l,{className:"w-4 h-4"}),iconSide:"left",hoverable:!0,placement:"left-start",actions:O.fields.all((function(e){return e.entityId===t.id})).map((function(n){return{title:n.name,onClick:function(){return e("{{".concat(t.key,"-").concat(n.key,"}}"))}}}))}}))))},Kr=function(e){var t=e.name,n=e.label,a=e.validations,r=(e.focus,Object(i.useRef)(null)),c=function(e){var t,n=null===(t=r.current)||void 0===t?void 0:t.getEditor(),i=null===n||void 0===n?void 0:n.getSelection(),a=null===n||void 0===n?void 0:n.getText();if(n&&a){var c=null===i||void 0===i?void 0:i.index,s=null===i||void 0===i?void 0:i.length;c?(s&&n.deleteText(c,s),n.insertText(c,e)):n.insertText(n.getText().length-1,e)}};return Object(I.jsx)(Ur,{children:function(e,i){return Object(I.jsxs)("div",{className:Object(h.a)(i&&"bg-white h-full"),children:[!i&&n&&Object(I.jsx)(Ln,{children:n}),Object(I.jsx)(Yr,{name:t,validations:a,className:Object(h.a)(!i&&n&&"mt-1",i&&"h-full pb-10"),ref:r,actions:[{title:"Insert Tag",icon:Object(I.jsx)(Y.k,{className:"w-4 h-4"}),iconSide:"right",intent:"secondary",size:"sm",actions:Zr(c)||[]},{icon:i?Object(I.jsx)(Y.K,{className:"w-4 h-4 -mx-1"}):Object(I.jsx)(Y.e,{className:"w-4 h-4 -mx-1"}),size:"sm",onClick:function(){return e((function(e){return!e}))}}]})]})}})},Gr=function(e){var t=e.index,n=e.remove,i=Object(ft.f)(),a=Hr("ruleGroups.".concat(t,".rules"),i),r=a.values,c=a.arrayHelpers,s=c.push,l=c.remove;return Object(I.jsxs)("div",{className:"relative",children:[Object(I.jsx)("div",{className:"absolute top-0 right-0 -mr-3 -my-3",children:Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Er.a,{className:"w-4 h-4 -mx-1 text-red-500"}),intent:"secondary",size:"sm",rounded:"full",onClick:n}})}),Object(I.jsxs)(_,{className:"p-4 rounded-md bg-gray-100 dark:bg-gray-750",children:[r.map((function(e,n){return Object(I.jsx)(Jr,{groupIndex:t,index:n,remove:function(){return l(n)},prefix:0===n?"IF":"AND"},n)})),Object(I.jsx)(De,{actions:{title:"Add condition",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),onClick:function(){return s({entity:"",field:"",operator:"",value:""})}}})]})]})},Jr=function(e){var t,n=e.groupIndex,i=e.index,a=e.prefix,r=e.remove,c=Object(ft.f)(),s=gt("ruleGroups.".concat(n,".rules.").concat(i,".entity"),c),l=gt("ruleGroups.".concat(n,".rules.").concat(i,".field"),c),o=gt("ruleGroups.".concat(n,".rules.").concat(i,".operator"),c),d=O.fields.find(l),u=(null===d||void 0===d?void 0:d.type)||"string",j=(null===d||void 0===d?void 0:d.options)||[];return Object(I.jsxs)("div",{className:"flex items-center justify-between space-x-3",children:[Object(I.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[Object(I.jsx)("span",{className:"text-sm font-medium text-center p-1 w-full max-w-[50px] rounded-full bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 border border-gray-300 dark:border-gray-600",children:a}),Object(I.jsx)(Pt,{name:"ruleGroups.".concat(n,".rules.").concat(i,".entity"),options:O.entities.all().map((function(e){return{value:e.id,label:e.name}})),className:"w-full max-w-[100px]"}),Object(I.jsx)(Pt,{name:"ruleGroups.".concat(n,".rules.").concat(i,".field"),options:O.fields.all((function(e){return e.entityId===s})).map((function(e){return{value:e.id,label:e.name}}))||[],className:"w-full max-w-[200px]"}),Object(I.jsx)(Pt,{name:"ruleGroups.".concat(n,".rules.").concat(i,".operator"),options:(t=u,{date:[{label:"is before",value:"isBefore"},{label:"is after",value:"isAfter"},{label:"is same minute as",value:"sameMinute"},{label:"is same hour as",value:"sameHour"},{label:"is same day as",value:"sameDay"}],string:[{label:"is",value:"stringIs"},{label:"is not",value:"stringNot"},{label:"includes",value:"stringIncludes"},{label:"doesn't include",value:"stringNotIncludes"},{label:"starts with",value:"stringStarts"},{label:"ends with",value:"stringEnds"},{label:"is empty",value:"stringEmpty"},{label:"is not empty",value:"stringNotEmpty"}],number:[{label:"is",value:"numberEquals"},{label:"is greater than",value:"numberGT"},{label:"is at least",value:"numberGTE"},{label:"is lesser than",value:"numberLT"},{label:"is at most",value:"numberLTE"}],boolean:[{label:"is true",value:"true"},{label:"is false",value:"false"}],users:[{label:"includes",value:"collectionIncludes"},{label:"doesn't include",value:"collectionNotIncludes"}],user:[{label:"is",value:"stringIs"},{label:"is not",value:"stringNot"}],option:[{label:"is",value:"stringIs"},{label:"is not",value:"stringNot"}]}[t]||[]),className:"w-full max-w-[200px]"}),"date"===u?Object(I.jsx)(sr,{name:"ruleGroups.".concat(n,".rules.").concat(i,".value"),className:"w-full max-w-[200px]"}):"string"===u&&"stringEmpty"!==o&&"stringNotEmpty"!==o?Object(I.jsx)(It,{name:"ruleGroups.".concat(n,".rules.").concat(i,".value"),className:"w-full max-w-[200px]"}):"option"===u?Object(I.jsx)(Pt,{name:"ruleGroups.".concat(n,".rules.").concat(i,".value"),options:j.map((function(e){return{value:e,label:e}})),className:"w-full max-w-[200px]"}):null]}),Object(I.jsx)("div",{children:Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Er.a,{className:"w-4 h-4 text-red-500 -mx-2"}),intent:"invisible",onClick:r}})})]})},$r=function(e){var t=e.id,n=e.mode,a=O.notifications.find(t),r=ht({initialValues:{name:(null===a||void 0===a?void 0:a.name)||"",focus:(null===a||void 0===a?void 0:a.focus)||"",enabled:(null===a||void 0===a?void 0:a.enabled)||!1,enabledDate:(null===a||void 0===a?void 0:a.enabledDate)||void 0,triggerType:(null===a||void 0===a?void 0:a.triggerType)||"action",triggerRepeat:(null===a||void 0===a?void 0:a.triggerRepeat)||1,triggerEvery:(null===a||void 0===a?void 0:a.triggerEvery)||"",triggerYearIn:(null===a||void 0===a?void 0:a.triggerYearIn)||"",triggerMonthOn:(null===a||void 0===a?void 0:a.triggerMonthOn)||"",triggerWeekOn:(null===a||void 0===a?void 0:a.triggerWeekOn)||"",triggerDayAt:(null===a||void 0===a?void 0:a.triggerDayAt)||"",triggerAction:(null===a||void 0===a?void 0:a.triggerAction)||"",obeyTriggerTiming:(null===a||void 0===a?void 0:a.obeyTriggerTiming)||!0,triggerTimingType:(null===a||void 0===a?void 0:a.triggerTimingType)||"",triggerTiming:(null===a||void 0===a?void 0:a.triggerTiming)||"",triggerDate:(null===a||void 0===a?void 0:a.triggerDate)||"",ruleGroups:(null===a||void 0===a?void 0:a.ruleGroups)||[],subject:(null===a||void 0===a?void 0:a.subject)||"",content:(null===a||void 0===a?void 0:a.content)||""},onSubmit:function(e){O.notifications.save(Object(l.a)(Object(l.a)({id:Object(o.a)()},a||{}),e)),Object(s.e)("/settings/notifications")}}),c=Hr("ruleGroups",r),d=c.values,u=c.arrayHelpers,j=u.push,b=u.remove,m=gt("triggerType",r),x=gt("triggerRepeat",r),f=gt("triggerEvery",r),v=gt("triggerYearIn",r),h=gt("triggerMonthOn",r),p=gt("triggerWeekOn",r),g=gt("triggerTiming",r),y=gt("triggerTimingType",r),k=gt("enabled",r),C=gt("subject",r),S=gt("focus",r),D="create"===n?"Create Notification":"Edit Notification";return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:D,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/settings/notifications"}}),Object(I.jsx)("div",{children:D})]})}),Object(I.jsx)(rn,{children:Object(I.jsx)(vt,{context:r,children:Object(I.jsxs)(_,{dividers:!0,children:[Object(I.jsx)(Ca,{title:"Details",subtitle:"Basic information about the notification",children:Object(I.jsx)(xt,{children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"name",label:"Name",validations:{required:"Name is required"}}),Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Ln,{children:"Notification is about"}),Object(I.jsx)(Pt,{name:"focus",options:O.entities.all().map((function(e){return{value:e.id,label:e.name}})),validations:{required:"Focus is required"},className:"w-[150px]"})]}),Object(I.jsx)(ca,{name:"enabled",label:"Enabled"}),Object(I.jsx)(F,{show:!!k,children:Object(I.jsx)(sr,{name:"enabledDate",label:"Enabled from"})})]})})}),Object(I.jsxs)(Ca,{title:"Trigger",subtitle:Object(I.jsxs)("div",{className:"space-y-3",children:[Object(I.jsx)("div",{children:"Choose how to trigger the notification"}),Object(I.jsxs)("ul",{className:"list-disc pl-5 text-xs",children:[Object(I.jsxs)("li",{children:[Object(I.jsx)("strong",{children:"Action"}),": When a certain action occurs within the platform"]}),Object(I.jsxs)("li",{children:[Object(I.jsx)("strong",{children:"Repeat"}),": On a recurring schedule"]}),Object(I.jsxs)("li",{children:[Object(I.jsx)("strong",{children:"Date"}),": Relative to a defined date"]})]})]}),children:[Object(I.jsx)(Dt,{value:m,onChange:function(e){return r.setFieldValue("triggerType",e)},intent:"card",tabs:Tr}),Object(I.jsx)("div",{className:"relative z-10",children:Object(I.jsx)(xt,{children:Object(I.jsx)(_,{children:Object(I.jsxs)("div",{children:[Object(I.jsx)(_,{className:"action"===m?"":"hidden",children:Object(I.jsx)("div",{className:"w-[300px]",children:Object(I.jsx)(Pt,{name:"triggerAction",options:O.actions.all((function(e){return e.entityId===S})).map((function(e){return{value:e.id,label:e.name}})),placeholder:"Select action..."})})}),Object(I.jsx)(_,{className:"repeat"===m?"":"hidden",children:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Ln,{children:"Every"}),Object(I.jsx)("div",{className:"w-[60px]",children:Object(I.jsx)(It,{name:"triggerRepeat",validations:{required:"required",min:{value:1,message:"Every must be at least 1"}},placeholder:"",type:"number",inputProps:{min:1}})}),Object(I.jsx)("div",{className:"w-[100px]",children:Object(I.jsx)(Pt,{name:"triggerEvery",options:Pr.map((function(e){return{label:e.label+((x||1)>1?"s":""),value:e.value}})),placeholder:""})})]}),"year"===f&&Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Ln,{children:"in"}),Object(I.jsx)("div",{className:"w-[100px]",children:Object(I.jsx)(Pt,{name:"triggerYearIn",options:Mr,validations:{required:"Time is required"},placeholder:""})})]}),("month"===f||"year"===f&&A(v))&&Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Ln,{children:"on the"}),Object(I.jsx)("div",{className:"w-[100px]",children:Object(I.jsx)(Pt,{name:"triggerMonthOn",options:"month"===f?(Vr(v||"february")||[]).concat([{label:"last day",value:1/0}]):Vr(v||"february")||[],validations:{required:"Time is required"},placeholder:""})})]}),"week"===f&&Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Ln,{children:"on"}),Object(I.jsx)("div",{className:"w-[100px]",children:Object(I.jsx)(Pt,{name:"triggerWeekOn",options:Fr,validations:{required:"Time is required"},placeholder:""})})]}),("day"===f||A(p)||A(h))&&Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Ln,{children:"at"}),Object(I.jsx)("div",{className:"w-[130px]",children:Object(I.jsx)(It,{name:"triggerDayAt",type:"time"})})]})]})}),Object(I.jsx)(_,{className:"date"===m?"":"hidden",children:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)("div",{className:"w-[60px]",children:Object(I.jsx)(It,{name:"triggerRepeat",validations:{required:"required",min:{value:1,message:"min 1"}},placeholder:"",type:"number",inputProps:{min:1}})}),Object(I.jsx)("div",{className:"w-[100px]",children:Object(I.jsx)(Pt,{name:"triggerTiming",options:Lr.map((function(e){return{label:e.label+((x||1)>1?"s":""),value:e.value}})),placeholder:""})}),g&&Object(I.jsx)("div",{className:"w-[100px]",children:Object(I.jsx)(Pt,{name:"triggerTimingType",options:Rr,validations:{required:"required"},placeholder:""})}),y&&Object(I.jsx)("div",{className:"w-[200px]",children:Object(I.jsx)(Pt,{name:"triggerDate",options:O.fields.all((function(e){return e.entityId===S&&"date"===e.type})).map((function(e){return{value:e.id,label:e.name}})),validations:{required:"required"},placeholder:""})})]})})]})})})})]}),Object(I.jsx)(Ca,{title:"Conditions",subtitle:"Fine grained controls over if the notification gets sent",children:Object(I.jsx)(xt,{children:Object(I.jsxs)(_,{children:[d.map((function(e,t){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(Gr,{index:t,remove:function(){return b(t)}}),t!==d.length-1&&Object(I.jsx)("div",{className:"flex justify-center",children:Object(I.jsx)("span",{className:"text-sm font-medium px-4 py-1 rounded-full bg-indigo-600 text-white",children:"OR"})})]},t)})),Object(I.jsx)(De,{actions:{title:"Add condition set",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),onClick:function(){return j({rules:[]})}}})]})})}),Object(I.jsx)(Ca,{title:"Template",subtitle:Object(I.jsxs)("div",{className:"space-y-3",children:[Object(I.jsx)("div",{children:"Customise the content of the email message"}),Object(I.jsx)("div",{children:"Use the tag reference to add placeholders for real values"}),Object(I.jsx)(De,{actions:[{title:"Import Template",icon:Object(I.jsx)(Y.k,{className:"w-5 h-5"}),iconSide:"right",placement:"bottom-start",actions:O.templates.all().map((function(e){return{title:e.name,onClick:function(){var t=Object(w.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,""===r.values.content||"<p><br></p>"===r.values.content){t.next=6;break}return t.next=4,X({title:"Are you sure?",message:"This will overwrite your existing email content",intent:"primary",onAccept:function(){n=!0}});case 4:t.next=7;break;case 6:n=!0;case 7:n&&r.setFieldValue("content",e.content);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}))}]})]}),children:Object(I.jsx)(xt,{children:Object(I.jsxs)(_,{children:[Object(I.jsxs)("div",{className:"flex items-start",children:[Object(I.jsx)(It,{name:"subject",label:"Subject line",validations:{required:"Subject line is required"},className:"flex-1 mr-3"}),Object(I.jsx)("div",{className:"mt-6",children:Object(I.jsx)(De,{actions:{title:"Insert Tag",icon:Object(I.jsx)(Y.k,{className:"w-5 h-5"}),iconSide:"right",actions:Zr((function(e){r.setFieldValue("subject",(null===C||void 0===C?void 0:C.length)?"".concat(C).concat(e):"".concat(e))}))||[]}})})]}),Object(I.jsx)(Kr,{name:"content",label:"Content",validations:{required:"Content is required"},focus:S})]})})}),Object(I.jsx)("div",{className:"flex items-center justify-end",children:Object(I.jsx)(De,{actions:[{title:"Test",intent:"secondary",icon:Object(I.jsx)(Y.f,{className:"w-5 h-5"}),onClick:function(){},disabled:!A(S)||!0},{title:"create"===n?"Create":"Save",intent:"primary",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),type:"submit",disabled:!A(S)}]})})]})})})]})},Xr=function(){var e={cols:[{title:"Name",value:function(e){return e.name}},{title:"Type",value:function(e){var t;return(null===(t=Zt.find((function(t){return t.value===e.type})))||void 0===t?void 0:t.label)||"-"}},{title:"Data",value:function(e){if(e.type===yt.Relation){var t,n=Bt((null===e||void 0===e?void 0:e.relationId)||"");return"".concat(null===n||void 0===n?void 0:n.name," (").concat(null===n||void 0===n||null===(t=n.related)||void 0===t?void 0:t.name,")")}return e.type===yt.None?"-":null===(i=At(e.entityId||""))||void 0===i?void 0:i.name;var i}},{title:"URL",value:function(e){return e.path}}],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/pages/".concat(e.id,"/edit")}],[{title:"Delete",intent:"danger",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.pages.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Pages",actions:[{title:"Create Page",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/pages/create"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:e,items:O.pages.all(),className:"-mb-px"})})]})})]})},Qr=Object(i.createContext)({entity:void 0,items:[],addItem:function(){},removeItem:function(){},updateItem:function(){}}),ec=Qr.Provider,tc=Object(i.createContext)({unitId:"",items:[]}),nc=(tc.Provider,function(e,t){return e.filter((function(e){return e.parentId===t})).sort((function(e,t){return e.index-t.index}))}),ic=function(e){var t=e.parentId,n=void 0===t?void 0:t,a=e.index,r=e.accept,c=e.isFirst,s=void 0!==c&&c,l=e.isLast,o=void 0!==l&&l,d=Object(i.useContext)(Qr).addItem;return Object(I.jsx)(Qn,{accept:r,onDrop:function(e){d(e.create({index:a,parentId:n}))},distance:20,children:function(e){var t=e.canDrop,n=e.isOver,i=e.isClose;return t&&i||o?Object(I.jsx)("div",{className:Object(h.a)("p-1"),children:Object(I.jsx)("div",{className:Object(h.a)("px-6 h-10 flex items-center justify-center rounded-lg border-2 border-dashed",{"my-0 h-full":s&&o,"mb-6":s&&!o,"mt-6":o&&!s},{"border-indigo-400 bg-indigo-50":n,"border-gray-900 border-opacity-10 bg-white bg-opacity-50":!n})})}):Object(I.jsx)("div",{className:Object(h.a)(!s&&!o&&"h-4")})}})},ac=n(551),rc=n(277),cc="Card",sc="Divider",lc=function(e){var t=e.item,n=e.removeItem,i=e.updateItem,a=e.close,r=ht({initialValues:t,onSubmit:function(e){console.log("new Data",e),i(e),a()}}),c={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(vt,{context:r,className:"contents",children:[Object(I.jsx)(Fn,{title:"Edit Card"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsx)(_,{children:Object(I.jsx)(It,{name:"data.title",label:"Title",className:"flex-1",autoFocus:!0})})}),Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:c,items:O.roles.all(),className:"-my-px"})})]})]})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){n(t),a()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return a()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})]})]})},oc=function(e){return An({render:function(t){return Object(I.jsx)(lc,Object(l.a)({close:t},e))}})},dc=[sc],uc={name:"Card",type:cc,description:"A box used for containing content",create:function(e){return Object(l.a)(Object(l.a)({id:Rt(),type:cc,index:0},e),{},{data:{title:""}})}},jc=function(e){var t=e.id,n=Object(i.useContext)(Qr),a=n.items,r=n.removeItem,s=n.updateItem,o=a.find((function(e){return e.id===t})),d=nc(a,o.id),u=ti(),j=Object(c.a)(u,2),b=j[0],m=j[1];return o?Object(I.jsxs)(jt,Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),o&&oc({item:o,removeItem:r,updateItem:s})}},m),{},{className:Object(h.a)("cursor-pointer transition-all duration-100",b&&"ring-4 ring-primary-500"),children:[o.data.title&&Object(I.jsx)(qn,{title:o.data.title}),Object(I.jsxs)(bt,{children:[d.map((function(e,t){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ic,{parentId:o.id,index:t,isFirst:0===t,accept:dc}),Object(I.jsx)(wc,{id:e.id})]},e.id)})),Object(I.jsx)(ic,{parentId:o.id,index:d.length,isFirst:0===d.length,isLast:!0,accept:dc})]})]})):null},bc=function(e){var t=e.id,n=Object(i.useContext)(tc).items,a=n.find((function(e){return e.id===t})),r=n.filter((function(e){return e.parentId===t}));return a?Object(I.jsxs)(jt,{children:[a.data.title&&Object(I.jsx)(qn,{title:a.data.title}),Object(I.jsx)("div",{className:"py-6",children:Object(I.jsx)(_,{children:r.map((function(e,t){return Object(I.jsx)(kc,{id:e.id},t)}))})})]}):null},mc=oc,xc=function(e){var t=e.item,n=e.removeItem,i=e.close,a={cols:[{title:"Role",value:function(e){return e.name}},{title:"Can View",value:function(){return Object(I.jsx)("div",{className:"flex justify-center w-full",children:Object(I.jsx)("input",{type:"checkbox",className:"form-checkbox text-primary-500",defaultChecked:!0})})},width:"minmax(auto, max-content)"}]};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Fn,{title:"Edit Divider"}),Object(I.jsx)(Mn,{children:Object(I.jsx)("div",{className:"py-6",children:Object(I.jsx)(_,{children:Object(I.jsxs)("div",{className:"px-6",children:[Object(I.jsx)(Ln,{children:"Permissions"}),Object(I.jsx)(Vn,{className:"mt-1",children:Object(I.jsx)(Ae,{schema:a,items:O.roles.all(),className:"-my-px"})})]})})})}),Object(I.jsxs)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-between",children:[Object(I.jsx)(De,{actions:[{title:"Delete",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),intent:"danger",onClick:function(){n(t),i()}}]}),Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return i()}}]})]})]})},fc=function(e){return An({render:function(t){return Object(I.jsx)(xc,Object(l.a)({close:t},e))}})},Oc={name:"Divider",type:sc,description:"A box used for sectioning content",create:function(e){return Object(l.a)(Object(l.a)({id:Rt(),type:sc,index:0},e),{},{data:{items:[]}})}},vc=function(e){var t=e.id,n=Object(i.useContext)(Qr),a=n.items,r=n.removeItem,s=a.find((function(e){return e.id===t})),o=ti(),d=Object(c.a)(o,2),u=d[0],j=d[1];return s?Object(I.jsx)("div",Object(l.a)(Object(l.a)({onClick:function(e){e.stopPropagation(),s&&fc({item:s,removeItem:r})}},j),{},{className:Object(h.a)("p-2 rounded-md cursor-pointer transition-all duration-10",u&&"ring-4 ring-primary-500"),children:Object(I.jsx)(P,{})})):null},hc=function(){return Object(I.jsx)(P,{})},pc=fc,gc=(Kn={},Object(g.a)(Kn,cc,uc),Object(g.a)(Kn,sc,Oc),Kn),yc=(Gn={},Object(g.a)(Gn,cc,uc),Object(g.a)(Gn,sc,Oc),Jn={},Object(g.a)(Jn,cc,jc),Object(g.a)(Jn,sc,vc),Jn),Nc=($n={},Object(g.a)($n,cc,bc),Object(g.a)($n,sc,hc),$n),wc=(Xn={},Object(g.a)(Xn,cc,mc),Object(g.a)(Xn,sc,pc),function(e){var t=e.id,n=Object(i.useContext)(Qr).items.find((function(e){return e.id===t}));if(!n)return null;var a=yc[n.type];return Object(I.jsx)(On,{type:n.type,item:n,children:Object(I.jsx)(a,{id:t})})}),kc=function(e){var t=e.id,n=Object(i.useContext)(tc).items.find((function(e){return e.id===t}));if(!n)return null;var a=Nc[n.type];return Object(I.jsx)(a,{id:t})},Cc=function(e){var t=e.tool;return Object(I.jsxs)(On,{type:t.type,item:t,className:function(e){var t=e.isDragging;return Object(h.a)("py-2 px-1 hover:pl-2.5 rounded-sm bg-white hover:ring-2 hover:ring-primary-500 transition-all duration-100 cursor-[grab] flex items-center justify-start space-x-3 hover:relative z-10",t&&"opacity-50")},children:[Object(I.jsx)(Ti,{className:"w-5 h-5"}),Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"text-sm font-medium",children:t.name}),Object(I.jsx)("div",{className:"text-xs text-gray-400",children:t.description})]})]})},Ic=function(e){var t=e.page,n=e.onSave,a=e.entityId,r=e.tools,s=At(a||""),o=Object(i.useState)((null===t||void 0===t?void 0:t.title)||"Page title"),d=Object(c.a)(o,2),u=d[0],j=d[1],b=Object(i.useState)(JSON.parse((null===t||void 0===t?void 0:t.structure)||"null")||[]),m=Object(c.a)(b,2),x=m[0],f=m[1],O=nc(x,void 0);return Object(I.jsxs)("div",{children:[Object(I.jsx)(ac.a,{backend:rc.a,children:Object(I.jsx)(ec,{value:{entity:s,items:x,addItem:function(e){f((function(t){return[].concat(Object(v.a)(t.map((function(t){return t.parentId!==e.parentId?t:Object(l.a)(Object(l.a)({},t),{},{index:t.index<e.index?t.index:t.index+1})}))),[e])}))},removeItem:function(e){f((function(t){return t.map((function(t){return t.id===e.id||t.parentId===e.id?null:Object(l.a)(Object(l.a)({},t),{},{index:t.index>e.index?t.index-1:t.index})})).filter(A)}))},updateItem:function(e){f((function(t){return t.map((function(t){return t.id===e.id?e:t}))}))}},children:Object(I.jsx)("div",{className:"flex flex-col bg-gray-200 dark:bg-gray-800",children:Object(I.jsxs)("div",{className:"flex-1 flex",children:[Object(I.jsxs)("div",{className:"w-80 min-w-80 bg-white border-b border-gray-100",children:[Object(I.jsxs)("div",{className:"p-4 size-lg font-medium border-b border-gray-100 flex items-center space-between space-x-4",children:[Object(I.jsx)(Y.G,{className:"w-5 h-5 text-gray-500"}),Object(I.jsx)("div",{className:"flex-1",children:"Page Elements"})]}),Object(I.jsxs)(_,{className:"p-4",children:[Object(I.jsx)("div",{children:Object.entries(r).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(I.jsx)(i.Fragment,{children:Object(I.jsx)(Cc,{tool:a})},n)}))}),Object(I.jsx)("div",{className:"group flex items-center h-6 w-full",children:Object(I.jsx)("div",{className:"group-hover:ring-2 ring-primary-500 transition-all duration-100 h-1 group-hover:bg-primary-500 rounded-full w-full"})})]})]}),Object(I.jsxs)(rn,{className:"py-6",children:[Object(I.jsxs)("div",{className:"flex items-center space-x-1 mb-6 mt-2",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2 text-primary-500"}),intent:"borderless",rounded:"full",onClick:function(){}}}),Object(I.jsx)("input",{type:"text",value:u,onChange:function(e){return j(e.target.value)},className:"flex-1 flex items-center text-2xl leading-8 font-semibold text-gray-900 dark:text-white sm:text-3xl sm:leading-9 whitespace-nowrap bg-transparent border-none focus:ring-2 focus:ring-primary-500 rounded-md"})]}),Object(I.jsxs)(_,{space:2,children:[O.map((function(e,t){return Object(I.jsxs)(i.Fragment,{children:[Object(I.jsx)(ic,{index:t,isFirst:0===t,accept:Object.keys(r)}),function(){var t=yc[e.type];return t?Object(I.jsx)(t,{id:e.id}):null}()]},e.id)})),Object(I.jsx)(ic,{index:O.length,isFirst:0===O.length,isLast:!0,accept:Object.keys(r)})]})]})]})})})}),Object(I.jsx)("div",{className:"p-4 flex justify-end",children:Object(I.jsx)(De,{actions:[{title:"Save",intent:"save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),onClick:function(){var e=JSON.stringify(x);n({title:u,structure:e})}}]})})]})};function Sc(){return(Sc=Object(w.a)(N.a.mark((function e(t){var n,i,a,r,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,i=t.render,a=t.size,r=t.dismissable,c=void 0===r||r,e.next=3,ie({dismissable:c,size:a,children:function(e){return Object(I.jsx)(s.d,{children:Object(I.jsx)(Dc,{default:!0,title:n,render:i,dismissable:c,close:e})})}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dc(e){var t=e.title,n=e.render,i=e.dismissable,a=e.close;return Object(I.jsxs)("div",{className:"bg-white dark:bg-gray-700 shadow-lg rounded-lg border border-gray-100 dark:border-gray-600 relative z-40",children:[t?Object(I.jsxs)("div",{className:"flex items-center justify-between bg-white dark:bg-gray-700 px-4 py-5 border-b border-gray-100 dark:border-gray-600 rounded-tl-lg rounded-tr-lg sm:px-6",children:[Object(I.jsx)("div",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-200",children:t}),i&&Object(I.jsx)("button",{className:"p-2 -m-2 focus:outline-none active:outline-none outline-none rounded-full bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 active:bg-gray-300 dark:hover:bg-gray-800 dark:active:bg-gray-900 transition-all duration-200",onClick:function(){return a()},type:"button",children:Object(I.jsx)(Y.K,{className:"w-5 h-5"})})]}):Object(I.jsx)("div",{className:"absolute top-0 right-0 -mt-2 -mr-2",children:i&&Object(I.jsx)("button",{className:"p-2 bg-white dark:bg-gray-800 shadow-lg focus:outline-none active:outline-none outline-none rounded-full hover:bg-gray-200 active:bg-gray-300 dark:hover:bg-gray-800 dark:active:bg-gray-900 transition-all duration-200",onClick:function(){return a()},type:"button",children:Object(I.jsx)(Y.K,{className:"w-5 h-5"})})}),Object(I.jsx)(En,{render:n(a)})]})}var Ec=function(e){return Sc.apply(this,arguments)},Tc=["mode"],Pc=function(e){var t=e.page,n=e.entityId,i=e.close;return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Ic,{page:t,onSave:function(e){return i(Object(l.a)(Object(l.a)({},t),e))},entityId:n,tools:gc})})},Fc=function(e){var t=e.mode,n=Object(p.a)(e,Tc);return Ec({title:"create"===t?"Create Page Layout":"Edit Page Layout",size:"screen",render:function(e){return Object(I.jsx)(Pc,Object(l.a)(Object(l.a)({},n),{},{close:e}))}})},Mc=function(e){return":".concat((null===e||void 0===e?void 0:e.key)?e.key+"Id":"id")},Ac=function(e){if(!e)return"";for(var t=[],n=e.id;n;){var i=O.pages.find(n);if(i){if(t.push(i.slug),i.type===yt.Unit){var a=O.entities.find(i.entityId);t.push(Mc(a))}n=i.parentId}else n=""}return t.reverse().filter(A).join("/")},Vc=function(e){var t,n,a,r=e.id,c=e.mode,o=Kt(r||""),d=ht({initialValues:{id:(null===o||void 0===o?void 0:o.id)||Rt(),type:(null===o||void 0===o?void 0:o.type)||yt.None,entityId:(null===o||void 0===o?void 0:o.entityId)||"",relationId:(null===o||void 0===o?void 0:o.relationId)||"",parentId:(null===o||void 0===o?void 0:o.parentId)||"",key:(null===o||void 0===o?void 0:o.key)||"",slug:(null===o||void 0===o?void 0:o.slug)||"",name:(null===o||void 0===o?void 0:o.name)||"",title:(null===o||void 0===o?void 0:o.title)||"",structure:(null===o||void 0===o?void 0:o.structure)||"",path:(null===o||void 0===o?void 0:o.path)||""},onSubmit:function(e){var t=e.parentId,n=O.pages.find(t),i=Ac(n),a=O.entities.find(e.entityId);O.pages.save(Object(l.a)(Object(l.a)({},e),{},{key:He(e.name),path:"/".concat([i,e.slug,e.type===yt.Unit&&Mc(a)].filter(A).join("/"))})),Object(s.e)("".concat("/nzdrc-mockup","/settings/pages"))}}),u=gt("type",d),j=gt("slug",d),b=gt("name",d),m=gt("entityId",d),x=O.entities.find(m),f=gt("parentId",d),h=O.pages.find(f),p=Ac(h),g="/".concat([p,j,u===yt.Unit&&Mc(x)].filter(A).join("/")),y=function(e){if(!e)return[];for(var t=[],n=e.id;n;){var i=O.pages.find(n);i?(t.push(i.name),n=i.parentId):n=""}return t.reverse().filter(A)}(h),k=gt("relationId",d),C=O.relations.find(k),S="create"===c?"Create Page":"Edit Page";return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:S,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/settings/pages"}}),Object(I.jsx)("div",{children:S})]})}),Object(I.jsx)(rn,{children:Object(I.jsx)(vt,{context:d,children:Object(I.jsxs)(_,{dividers:!0,children:[Object(I.jsx)(Ca,{title:"Details",subtitle:"Basic details about the page",children:Object(I.jsx)(xt,{children:Object(I.jsx)(_,{children:Object(I.jsx)("div",{className:"w-[300px]",children:Object(I.jsx)(It,{name:"name",label:"Name",intent:"overlap",validations:{required:"Name is required"}})})})})}),Object(I.jsx)(Ca,{title:"Nav",subtitle:"Navigation details",children:Object(I.jsx)(xt,{children:Object(I.jsxs)(_,{children:[Object(I.jsxs)("div",{className:"px-4 rounded-md bg-primary-100 dark:bg-primary-500 dark:bg-opacity-20 border border-primary-300 dark:border-primary-500 dark:border-opacity-30 divide-y divide-primary-300 dark:divide-primary-500 dark:divide-opacity-30",children:[f&&Object(I.jsxs)("div",{className:"flex justify-between items-center space-x-4 py-4",children:[Object(I.jsx)("div",{className:"text-sm font-medium text-primary-600 dark:text-primary-500",children:"Breadcrumbs"}),Object(I.jsx)("div",{className:"flex items-center space-x-2",children:[].concat(Object(v.a)(y),[b]).map((function(e,t){return Object(I.jsxs)(i.Fragment,{children:[0!==t&&Object(I.jsx)(Y.d,{className:"w-5 h-5"}),Object(I.jsx)("div",{className:"text-sm font-medium",children:e})]},t)}))})]}),Object(I.jsxs)("div",{className:"flex justify-between items-center space-x-4 py-4",children:[Object(I.jsx)("div",{className:"text-sm font-medium text-primary-600 dark:text-primary-500",children:"URL"}),Object(I.jsx)("div",{className:"text-sm font-medium",children:g})]})]}),Object(I.jsx)("div",{className:"w-[300px]",children:Object(I.jsx)(Pt,{name:"parentId",label:"Parent Page",intent:"overlap",options:O.pages.all().filter((function(e){return e.id!==r})).map((function(e){return{value:e.id,label:e.name}})),clearable:!0})}),Object(I.jsx)("div",{className:"w-[300px]",children:Object(I.jsx)(It,{name:"slug",label:"Slug",intent:"overlap",validations:{required:u===yt.Entity&&f||(null===h||void 0===h?void 0:h.type)===yt.Unit&&u===yt.Relation?"Slug is required":void 0}})})]})})}),Object(I.jsx)(Ca,{title:"Data",subtitle:"Define the data requirements for this page",children:Object(I.jsx)(xt,{children:Object(I.jsx)(_,{children:Object(I.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[Object(I.jsx)("div",{children:Object(I.jsx)(Pt,{name:"type",label:"Data Source",intent:"overlap",options:Zt,validations:{required:"Data Source is required"}})}),(u===yt.Entity||u===yt.Unit)&&Object(I.jsx)("div",{children:Object(I.jsx)(Pt,{name:"entityId",label:"Entity",intent:"overlap",options:O.entities.all().map((function(e){return{label:e.name,value:e.id}})),validations:{required:"Entity is required"}})}),(null===h||void 0===h?void 0:h.type)===yt.Unit&&u===yt.Relation&&Object(I.jsx)(Pt,{name:"relationId",label:"Relation",intent:"overlap",options:(null===(t=Kt(h))||void 0===t||null===(n=t.entity)||void 0===n||null===(a=n.relations)||void 0===a?void 0:a.map((function(e){var t;return{value:e.id,label:"".concat(e.name," (").concat(null===(t=e.related)||void 0===t?void 0:t.name,")")}})))||[],validations:{required:"Relation is required"}})]})})})}),Object(I.jsx)(Ca,{title:"Design",subtitle:"Page layout design",children:Object(I.jsx)(xt,{children:Object(I.jsx)(_,{children:Object(I.jsx)(De,{actions:[{title:"Edit page layout",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),onClick:function(){var e=Object(w.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fc({page:d.values,mode:c||"create",entityId:u===yt.None?void 0:u===yt.Relation?null===C||void 0===C?void 0:C.relatedId:m});case 2:(t=e.sent)&&(d.setFieldValue("title",t.title),d.setFieldValue("structure",t.structure));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]})})})}),Object(I.jsx)("div",{className:"flex items-center justify-end",children:Object(I.jsx)(De,{actions:[{title:"create"===c?"Create":"Save",intent:"save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),type:"submit"}]})})]})})})]})},Lc=function(){var e={cols:[{title:"Name",value:function(e){return e.name}}],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/Forms/".concat(e.id,"/edit")}],[{title:"Delete",intent:"danger",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.forms.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Forms",actions:[{title:"Create Form",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/forms/create"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:e,items:O.forms.all(),className:"-mb-px"})})]})})]})},Rc=function(){var e={cols:[{title:"Name",value:function(e){return e.name}}],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/templates/".concat(e.id,"/edit")},{title:"Test",icon:Object(I.jsx)(Y.f,{className:"w-5 h-5"}),onClick:function(){},disabled:!0}],[{title:"Delete",intent:"danger",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.templates.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Templates",actions:[{title:"Create Template",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/templates/create"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:e,items:O.templates.all(),className:"-mb-px"})})]})})]})},zc=function(e){var t=e.id,n=e.mode,i=O.templates.find(t),a=ht({initialValues:{name:(null===i||void 0===i?void 0:i.name)||"",content:(null===i||void 0===i?void 0:i.content)||""},onSubmit:function(e){O.templates.save(Object(l.a)(Object(l.a)({id:Object(o.a)()},i||{}),e)),Object(s.e)("/settings/templates")}}),r="create"===n?"Create Template":"Edit Template";return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:r,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/settings/templates"}}),Object(I.jsx)("div",{children:r})]})}),Object(I.jsx)(rn,{children:Object(I.jsx)(vt,{context:a,children:Object(I.jsxs)(jt,{children:[Object(I.jsx)(bt,{children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"name",label:"Name",validations:{required:"Name is required"}}),Object(I.jsx)(Kr,{name:"content",label:"Content",validations:{required:"Content is required"},focus:"all"})]})}),Object(I.jsx)(mt,{children:Object(I.jsx)("div",{className:"flex items-center justify-end",children:Object(I.jsx)(De,{actions:[{title:"Test",intent:"secondary",icon:Object(I.jsx)(Y.f,{className:"w-5 h-5"}),onClick:function(){},disabled:!0},{title:"create"===n?"Create":"Save",intent:"primary",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),type:"submit"}]})})})]})})})]})},qc=function(){var e={cols:[{title:"Name",value:function(e){return e.name}}],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/roles/".concat(e.id,"/edit")}],[{title:"Delete",intent:"danger",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.roles.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Roles",actions:[{title:"Create Role",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/roles/create"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:e,items:O.roles.all(),className:"-mb-px"})})]})})]})},Hc=function(e){var t,n=e.name,i=e.label,a=e.disabled,r=e.inputClassName,s=e.color,o=void 0===s?"text-primary-500 dark:text-primary-600":s,d=e.className,u=Object(ft.d)({name:n,type:"checkbox"}),j=Object(c.a)(u,1)[0],b=Object(ft.f)();return Object(I.jsx)("div",{className:Object(h.a)(d),children:Object(I.jsxs)("label",{className:"text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-center cursor-pointer",children:[Object(I.jsx)("input",Object(l.a)(Object(l.a)({},j),{},{type:"checkbox",className:Object(h.a)("form-checkbox",r,(t={},Object(g.a)(t,o,!a),Object(g.a)(t,"text-gray-400",a),t)),disabled:a||b.isSubmitting})),i&&Object(I.jsx)("span",{className:"ml-3",children:i})]})})},Bc=function(e){var t=e.id,n=e.mode,i=O.roles.find(t),a=ht({initialValues:{name:(null===i||void 0===i?void 0:i.name)||"",entities:O.entities.all().reduce((function(e,n){return Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},n.key,{fields:O.fields.all((function(e){return e.entityId===n.id})).reduce((function(e,n){return Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},n.key,O.fieldPermissions.find((function(e){return e.fieldId===n.id&&e.roleId===t}))||{id:"",view:!0,modify:!0,roleId:t||"",fieldId:n.id}))}),{}),actions:O.actions.all((function(e){return e.entityId===n.id})).reduce((function(e,n){return Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},n.key,O.actionPermissions.find((function(e){return e.actionId===n.id&&e.roleId===t}))||{id:"",perform:!0,roleId:t||"",actionId:n.id}))}),{}),relations:O.relations.all((function(e){return e.entityId===n.id})).reduce((function(e,n){return Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},n.key,O.relationPermissions.find((function(e){return e.relationId===n.id&&e.roleId===t}))||{id:"",view:!0,modify:!0,remove:!0,roleId:t||"",relationId:n.id}))}),{})}))}),{})},onSubmit:function(e){O.roles.save(Object(l.a)(Object(l.a)({},i||{}),{},{name:e.name})),O.entities.all().forEach((function(t){Object.values(e.entities[t.key].fields).forEach((function(e){O.fieldPermissions.save(Object(l.a)(Object(l.a)({},e),{},{id:e.id||void 0}))})),Object.values(e.entities[t.key].actions).forEach((function(e){O.actionPermissions.save(Object(l.a)(Object(l.a)({},e),{},{id:e.id||void 0}))})),Object.values(e.entities[t.key].relations).forEach((function(e){O.relationPermissions.save(Object(l.a)(Object(l.a)({},e),{},{id:e.id||void 0}))}))})),Object(s.e)("".concat("/nzdrc-mockup","/settings/roles"))}}),r="create"===n?"Create Role":"Edit Role";return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:r,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/settings/roles"}}),Object(I.jsx)("div",{children:r})]})}),Object(I.jsx)(rn,{children:Object(I.jsx)(vt,{context:a,children:Object(I.jsxs)(_,{children:[Object(I.jsx)(Ca,{title:"Details",subtitle:"Basic details about the role",children:Object(I.jsx)(xt,{children:Object(I.jsx)(_,{children:Object(I.jsx)(It,{name:"name",label:"Name",validations:{required:"Name is required"}})})})}),Object(I.jsx)(Ca,{title:"Permissions",subtitle:"A view of permissions for all existing entity types and their fields/actions/relations",children:Object(I.jsx)(_,{children:O.entities.all().map((function(e){return Object(I.jsxs)(jt,{children:[Object(I.jsx)(qn,{title:e.name}),Object(I.jsx)("div",{className:"rounded-b-md overflow-hidden",children:Object(I.jsxs)(_,{className:"p-6",children:[function(){var t,n=O.fields.all((function(t){return t.entityId===e.id}));return n.length>0&&Object(I.jsx)(Vn,{children:Object(I.jsx)(Ae,{schema:(t=e.key,{cols:[{title:"Field",value:function(e){return e.name}},{title:"View",value:function(e,n){return Object(I.jsx)("div",{className:"w-full flex justify-center",children:Object(I.jsx)(Hc,{name:"entities.".concat(t,".fields.").concat(e.key,".view")})})},width:"minmax(auto, max-content)"},{title:"Modify",value:function(e,n){return Object(I.jsx)("div",{className:"w-full flex justify-center",children:Object(I.jsx)(Hc,{name:"entities.".concat(t,".fields.").concat(e.key,".modify")})})},width:"minmax(auto, max-content)"}]}),items:n,className:"-my-px"})})}(),function(){var t,n=O.actions.all((function(t){return t.entityId===e.id}));return n.length>0&&Object(I.jsx)(Vn,{children:Object(I.jsx)(Ae,{schema:(t=e.key,{cols:[{title:"Action",value:function(e){return e.name}},{title:"Perform",value:function(e,n){return Object(I.jsx)("div",{className:"w-full flex justify-center",children:Object(I.jsx)(Hc,{name:"entities.".concat(t,".actions.").concat(e.key,".perform")})})},width:"minmax(auto, max-content)"}]}),items:n,className:"-my-px"})})}(),function(){var t,n=O.relations.all((function(t){return t.entityId===e.id}));return n.length>0&&Object(I.jsx)(Vn,{children:Object(I.jsx)(Ae,{schema:(t=e.key,{cols:[{title:"Relation",value:function(e){return e.name}},{title:"View",value:function(e,n){return Object(I.jsx)("div",{className:"w-full flex justify-center",children:Object(I.jsx)(Hc,{name:"entities.".concat(t,".relations.").concat(e.key,".view")})})},width:"minmax(auto, max-content)"},{title:"Modify",value:function(e,n){return Object(I.jsx)("div",{className:"w-full flex justify-center",children:Object(I.jsx)(Hc,{name:"entities.".concat(t,".relations.").concat(e.key,".modify")})})},width:"minmax(auto, max-content)"},{title:"Remove",value:function(e,n){return Object(I.jsx)("div",{className:"w-full flex justify-center",children:Object(I.jsx)(Hc,{name:"entities.".concat(t,".relations.").concat(e.key,".remove")})})},width:"minmax(auto, max-content)"}]}),items:n,className:"-my-px"})})}()]})})]},e.key)}))})}),Object(I.jsx)("div",{className:"flex items-center justify-end",children:Object(I.jsx)(De,{actions:[{title:"create"===n?"Create":"Save",intent:"primary",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),type:"submit"}]})})]})})})]})},Wc=function(){var e={cols:[{title:"Name",value:function(e){return e.name}},{title:"Fields",value:function(e){return O.fields.all((function(t){return t.entityId===e.id})).length||""}},{title:"Actions",value:function(e){return O.actions.all((function(t){return t.entityId===e.id})).length||""}},{title:"Relations",value:function(e){return O.relations.all((function(t){return t.entityId===e.id})).length||""}}],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/entities/".concat(e.id,"/edit")}],[{title:"Delete",intent:"danger",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.entities.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Entities",actions:[{title:"Create Entity",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/entities/create"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:e,items:O.entities.all(),className:"-mb-px"})})]})})]})},_c=["className"],Yc=function(e){var t=e.as,n=void 0===t?"input":t,a=e.name,r=e.label,s=e.type,d=void 0===s?"text":s,u=e.className,j=e.autoFocus,b=void 0!==j&&j,m=e.validations,x=void 0===m?{}:m,f=e.placeholder,O=e.disabled,v=void 0!==O&&O,g=e.inputProps,y=void 0===g?{}:g,N=U(b),w=n,k=Object(ft.d)({name:a,type:d,validate:pt(x)}),C=Object(c.a)(k,3),S=C[0].value,D=C[2],E=D.setValue,T=D.setTouched,P=Object(ft.f)(),F=Object(i.useState)(Object(o.a)()),M=Object(c.a)(F,1)[0],A=y.className,V=Object(p.a)(y,_c);return Object(I.jsxs)("div",{className:Object(h.a)(u),children:[Object(I.jsx)("div",{className:"text-[0px] leading-none select-none",children:M}),Object(I.jsx)("div",{className:Object(h.a)("relative rounded-md",r&&"mt-1"),children:Object(I.jsx)(w,Object(l.a)({ref:N,type:d,value:S,onChange:function(e){return E(e.target.value)},onBlur:function(){T(!0)},placeholder:f,disabled:v||P.isSubmitting,className:Object(h.a)(A)},"input"===w?V:{}))})]})},Uc=[{value:"string",label:"Text"},{value:"number",label:"Number"},{value:"boolean",label:"Boolean"},{value:"date",label:"Date"},{value:"option",label:"Options"}],Zc=function(e){var t=e.mode,n=void 0===t?"create":t,i=e.field,a=e.close,r=ht({initialValues:Object(l.a)(Object(l.a)({},i),{},{dateFormat:"dd/MM/yyyy"}),onSubmit:function(e){a(Object(l.a)(Object(l.a)({},e),{},{key:He(e.name)}))}}),c=gt("type",r),s=Hr("options",r),o=s.values,d=s.arrayHelpers;return Object(I.jsxs)(vt,{context:r,className:"contents",children:[Object(I.jsx)(Fn,{title:"create"===n?"Create Entity Field":"Edit Entity Field"}),Object(I.jsx)(Mn,{children:Object(I.jsx)(_,{className:"py-6",children:Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"name",label:"Name",className:"flex-1",validations:{required:"Name is required"}}),Object(I.jsx)(Pt,{name:"type",label:"Type",options:Uc,validations:{required:"Type is required"}}),"string"===c&&Object(I.jsx)(It,{name:"defaultValue",label:"Default Value"}),"number"===c&&Object(I.jsx)(It,{name:"defaultValue",label:"Default Value",type:"number"}),"boolean"===c&&Object(I.jsx)(Pt,{name:"defaultValue",label:"Default Value",options:[{value:"false",label:"False"},{value:"true",label:"True"}]}),"date"===c&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(sr,{name:"defaultValue",label:"Default Value"}),Object(I.jsx)(It,{name:"dateFormat",label:"Date Format"})]}),"option"===c&&Object(I.jsxs)("div",{children:[o.map((function(e,t){return Object(I.jsxs)("div",{className:"relative",children:[Object(I.jsx)("div",{className:"absolute z-[2] top-0 left-0 ml-3 h-full flex items-center justify-center",children:Object(I.jsx)("div",{className:"text-xs font-medium rounded-full w-5 h-5 bg-gray-200 dark:bg-gray-700 dark:text-gray-100 flex items-center justify-center",children:t+1})}),Object(I.jsx)(Yc,{name:"options[".concat(t,"]"),inputProps:{className:Object(h.a)("py-2 pl-12 pr-8 -mb-px relative text-sm w-full border border-gray-300 dark:border-gray-600 focus:z-[1] focus:ring-1 focus:ring-primary-500 focus:border-primary-500 dark:focus:border-primary-500 bg-white dark:bg-gray-800 dark:text-gray-100",0===t&&"rounded-t-md",t===o.length-1&&"rounded-b-md")}}),o.length>1&&Object(I.jsx)("div",{className:"absolute z-[1] top-0 right-0 mr-3 h-full flex items-center justify-center",children:Object(I.jsx)("button",{className:"rounded-full w-5 h-5 bg-red-100 dark:bg-red-500 dark:bg-opacity-25 text-red-500 flex items-center justify-center focus:ring-2 focus:ring-red-500 transition-shadow",type:"button",onClick:function(){return d.remove(t)},children:Object(I.jsx)(Y.K,{className:"w-4 h-4"})})})]},t)})),Object(I.jsx)("div",{className:"mt-2 flex justify-end",children:Object(I.jsx)(De,{actions:{title:"Add option",icon:Object(I.jsx)(Y.C,{className:"w-4 h-4"}),size:"sm",onClick:function(){return d.push("")}}})}),Object(I.jsx)(It,{name:"defaultValue",label:"Default Value"})]}),Object(I.jsx)(It,{name:"description",label:"Description"})]})})})}),Object(I.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end",children:Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return a()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})})]})},Kc=function(e){return An({render:function(t){return Object(I.jsx)(Zc,Object(l.a)({close:t},e))}})},Gc=function(e){var t=e.mode,n=void 0===t?"create":t,i=e.action,a=(e.fields,e.close),r=ht({initialValues:i,onSubmit:function(e){a(Object(l.a)(Object(l.a)({},e),{},{key:He(e.name)}))}});return Object(I.jsxs)(vt,{context:r,className:"contents",children:[Object(I.jsx)(Fn,{title:"create"===n?"Create Action":"Edit Action"}),Object(I.jsx)(Mn,{children:Object(I.jsx)(_,{className:"py-6",children:Object(I.jsx)("div",{className:"px-6",children:Object(I.jsx)(_,{children:Object(I.jsx)(It,{name:"name",label:"Name",className:"flex-1",validations:{required:"Name is required"}})})})})}),Object(I.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end",children:Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return a()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})})]})},Jc=function(e){return An({size:"2xl",render:function(t){return Object(I.jsx)(Gc,Object(l.a)({close:t},e))}})},$c=[{value:"one-to-one",label:"Single"},{value:"one-to-many",label:"Many"}],Xc=[{value:"one-to-one",label:"Single"},{value:"one-to-many",label:"Single"}],Qc=function(e){var t=e.mode,n=void 0===t?"create":t,i=e.relation,a=e.close,r=ht({initialValues:i,onSubmit:function(e){a(Object(l.a)(Object(l.a)({},e),{},{key:He(e.name)}))}});return Object(I.jsxs)(vt,{context:r,className:"contents",children:[Object(I.jsx)(Fn,{title:"create"===n?"Create Connection":"Edit Connection"}),Object(I.jsx)(Mn,{children:Object(I.jsx)(_,{className:"py-6",children:Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"name",label:"Name",validations:{required:"Name is required"}}),Object(I.jsx)(Pt,{name:"relatedId",label:"Entity",options:O.entities.all().map((function(e){return{value:e.id,label:e.name}})),validations:{required:"Entity is required"}}),Object(I.jsx)(Pt,{name:"type",label:"Cardinality",options:$c,validations:{required:"Cardinality is required"}})]})})})}),Object(I.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end",children:Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return a()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})})]})},es=function(e){return An({render:function(t){return Object(I.jsx)(Qc,Object(l.a)({close:t},e))}})},ts=n(161),ns=function(e){var t=e.id,n=e.mode,a=O.entities.find(t),r=O.fields.all((function(e){return e.entityId===t})),d=O.actions.all((function(e){return e.entityId===t})),u=O.relations.all((function(e){return e.entityId===t||e.relatedId===t})),j=ht({initialValues:{name:(null===a||void 0===a?void 0:a.name)||"",plural:(null===a||void 0===a?void 0:a.plural)||"",fields:r?r.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{permissions:O.fieldPermissions.all((function(t){return t.fieldId===e.id}))})})):[],actions:d?d.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{permissions:O.actionPermissions.all((function(t){return t.actionId===e.id}))})})):[],relations:u?u.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{permissions:O.relationPermissions.all((function(t){return t.relationId===e.id}))})})):[]},onSubmit:function(e){var t=O.entities.save(Object(l.a)(Object(l.a)({},a),{},{key:He(e.name),name:e.name,plural:e.plural}));e.fields.forEach((function(e){O.fields.save(Object(l.a)(Object(l.a)({},e),{},{entityId:t.id}))})),e.actions.forEach((function(e){O.actions.save(Object(l.a)(Object(l.a)({},e),{},{entityId:t.id}))})),e.relations.forEach((function(e){O.relations.save(Object(l.a)(Object(l.a)({},e),{},{entityId:t.id}))})),S.fields.forEach(O.fields.remove),S.actions.forEach(O.actions.remove),S.relations.forEach(O.relations.remove),Object(s.e)("".concat("/nzdrc-mockup","/settings/entities"))}}),b=Hr("fields",j),m=b.values,x=b.arrayHelpers,f=Hr("actions",j),v=f.values,h=f.arrayHelpers,p=Hr("relations",j),g=p.values,y=p.arrayHelpers,k=Object(i.useState)({fields:[],actions:[],relations:[]}),C=Object(c.a)(k,2),S=C[0],D=C[1],E={cols:[{title:"Name",value:function(e){return e.name}},{title:"Type",value:function(e){var t;return(null===(t=Uc.find((function(t){return t.value===e.type})))||void 0===t?void 0:t.label)||""}}],actions:function(e,t){return[{icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),intent:"menu",onClick:function(){var n=Object(w.a)(N.a.mark((function n(){var i;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Kc({mode:"edit",field:e});case 2:(i=n.sent)&&x.replace(t,i);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},{icon:Object(I.jsx)(Y.K,{className:"w-5 h-5"}),intent:"menu-danger",onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){x.remove(t),D(Object(ts.a)((function(t){t.fields.push(e.id)})))}})}}]}},T={cols:[{title:"Name",value:function(e){return e.name}}],actions:function(e,t){return[{icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),intent:"menu",onClick:function(){var n=Object(w.a)(N.a.mark((function n(){var i;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jc({mode:"edit",action:e,fields:m});case 2:(i=n.sent)&&h.replace(t,i);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()},{icon:Object(I.jsx)(Y.K,{className:"w-5 h-5"}),intent:"menu-danger",onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){h.remove(t),D(Object(ts.a)((function(t){t.actions.push(e.id)})))}})}}]}},P={cols:[{title:"Name",value:function(e){return e.name}},{title:"Related Entity",value:function(e){var n,i;return e.entityId===t?null===(n=O.entities.find((function(t){return t.id===e.relatedId})))||void 0===n?void 0:n.name:null===(i=O.entities.find((function(t){return t.id===e.entityId})))||void 0===i?void 0:i.name}},{title:"Cardinality",value:function(e){var n,i;return e.entityId===t?null===(n=$c.find((function(t){return t.value===e.type})))||void 0===n?void 0:n.label:null===(i=Xc.find((function(t){return t.value===e.type})))||void 0===i?void 0:i.label}}],actions:function(e,n){return[e.entityId===t&&{icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),intent:"menu",onClick:function(){var t=Object(w.a)(N.a.mark((function t(){var i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,es({mode:"edit",relation:e});case 2:(i=t.sent)&&y.replace(n,i);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},e.entityId===t&&{icon:Object(I.jsx)(Y.K,{className:"w-5 h-5"}),intent:"menu-danger",onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){y.remove(n),D(Object(ts.a)((function(t){t.relations.push(e.id)})))}})}}]}},F="create"===n?"Create Entity":"Edit Entity";return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:F,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/settings/entities"}}),Object(I.jsx)("div",{children:F})]})}),Object(I.jsx)(vt,{context:j,children:Object(I.jsx)(rn,{children:Object(I.jsxs)(_,{dividers:!0,children:[Object(I.jsx)(Ca,{title:"Details",subtitle:"The name and different types of labels for the entity",children:Object(I.jsx)(xt,{children:Object(I.jsxs)(_,{children:[Object(I.jsx)(It,{name:"name",label:"Name",validations:{required:"Name is required"}}),Object(I.jsx)(It,{name:"plural",label:"Plural"})]})})}),Object(I.jsx)(Ca,{title:"Fields",subtitle:"Fields are custom fields that are attached to this entity, that can be configured to contain many different kinds of data",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(jt,{className:"rounded-md overflow-hidden",children:Object(I.jsx)(Ae,{items:m,schema:E,className:"-my-px"})}),Object(I.jsx)("div",{className:"flex justify-end",children:Object(I.jsx)(De,{actions:{title:"Add Field Type",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),intent:"invisible",onClick:function(){var e=Object(w.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.a)(),e.next=3,Kc({field:{id:t,entityId:"",key:"",name:"",plural:"",template:"",type:"string",options:[""]}});case 3:(n=e.sent)&&x.push(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}})})]})}),Object(I.jsx)(Ca,{title:"Actions",subtitle:"Actions are custom interactions that the user can use do to this entity. They can modify a field, or be used as triggers for notifications.",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(jt,{className:"rounded-md overflow-hidden",children:Object(I.jsx)(Ae,{items:v,schema:T,className:"-my-px"})}),Object(I.jsx)("div",{className:"flex justify-end",children:Object(I.jsx)(De,{actions:{title:"Add Action",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),intent:"invisible",onClick:function(){var e=Object(w.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.a)(),e.next=3,Jc({action:{id:t,entityId:"",key:"",name:"",changes:[]},fields:m});case 3:(n=e.sent)&&h.push(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}})})]})}),Object(I.jsx)(Ca,{title:"Relations",subtitle:Object(I.jsxs)("div",{className:"space-y-3",children:[Object(I.jsx)("p",{children:"Relations are a way to define a relationship between this entity type, and another entity type."}),Object(I.jsx)("p",{children:'For example, if a "case has many events", then a case should have a relation named "Events", set to the Event entity and a cardinality of "Many"'})]}),children:Object(I.jsxs)(_,{children:[Object(I.jsx)(jt,{className:"rounded-md overflow-hidden",children:Object(I.jsx)(Ae,{items:g,schema:P,className:"-my-px"})}),Object(I.jsx)("div",{className:"flex justify-end",children:Object(I.jsx)(De,{actions:{title:"Add Relation",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),intent:"invisible",onClick:function(){var e=Object(w.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(o.a)(),e.next=3,es({relation:{id:t,key:"",name:"",entityId:"",relatedId:"",type:"one-to-many"}});case 3:(n=e.sent)&&y.push(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}})})]})}),Object(I.jsx)("div",{className:"flex justify-end",children:Object(I.jsx)(De,{actions:[{title:"create"===n?"Create":"Save",intent:"save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),type:"submit"}]})})]})})})]})},is=function(){var e={cols:[{title:"Name",value:function(e){return e.name}}],actions:function(e){return[{icon:Object(I.jsx)(Y.s,{className:"w-5 h-5"}),intent:"menu",actions:[[{title:"Edit",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/workflows/".concat(e.id,"/edit")},{title:"Test",icon:Object(I.jsx)(Y.f,{className:"w-5 h-5"}),onClick:function(){},disabled:!0}],[{title:"Delete",intent:"danger",icon:Object(I.jsx)(Y.H,{className:"w-5 h-5"}),onClick:function(){X({title:"Are you sure?",message:"This cannot be undone",onAccept:function(){O.workflows.remove(e.id)}})}}]]}]}};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Workflows",actions:[{title:"Create Workflow",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/workflows/create"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:e,items:O.workflows.all(),className:"-mb-px"})})]})})]})},as=n(33),rs=function(e){return e.id&&e.name},cs=function(e){return e.id&&e.targetId},ss=[{value:"document",label:"A document was uploaded"},{value:"field-update",label:"A field was updated"},{value:"date-met",label:"A date was met"},{value:"user-action",label:"A user took an action"}],ls=function(e){var t=e.mode,n=void 0===t?"create":t,i=e.step,a=e.elements,r=void 0===a?[]:a,c=e.close,s=r.filter(cs),o=s.filter((function(e){return e.sourceId===i.id})),d=s.filter((function(e){return e.targetId===i.id})),u=ht({initialValues:{id:i.id||Rt(),workflowId:i.workflowId||"",name:i.name||"",description:i.description||"",isTransition:i.isTransition||!1,isStart:i.isStart||!1,targetWorkflow:i.targetWorkflow||"",posX:i.posX||0,posY:i.posY||0,connections:o.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},t.id,t))}),{})},onSubmit:function(e){c(e)}}),j=gt("isTransition",u),b=r.filter(rs).find((function(e){return e.isStart}));return Object(I.jsxs)(vt,{context:u,className:"contents",children:[Object(I.jsx)(Fn,{title:"create"===n?"Create Workflow Step":"Edit Workflow Step"}),Object(I.jsx)(Mn,{children:Object(I.jsxs)(_,{className:"py-6",dividers:!0,children:[Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"text-sm font-medium text-gray-800",children:"Details"}),Object(I.jsx)("div",{className:"text-sm text-gray-500",children:"Basic info about the step"})]}),Object(I.jsx)(It,{name:"name",label:"Name",className:"flex-1",validations:{required:"Name is required"},intent:"overlap",autoFocus:!0}),Object(I.jsx)(It,{name:"description",label:"Description",className:"flex-1",intent:"overlap"})]})}),0===d.length&&(!b||b.id===i.id)&&Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"text-sm font-medium text-gray-800",children:"Starting Point"}),Object(I.jsx)("div",{className:"text-sm text-gray-500",children:"Is this step the beginning of the workflow"})]}),Object(I.jsx)(ca,{name:"isStart",label:"Is Start"})]})}),"edit"===n&&Object(I.jsx)("div",{className:"px-6",children:Object(I.jsxs)(_,{children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"text-sm font-medium text-gray-800",children:"Triggers"}),Object(I.jsx)("div",{className:"text-sm text-gray-500",children:"What conditions cause the case to move to a next step"})]}),0!==o.length?Object(I.jsx)("div",{className:"flex flex-col space-y-4",children:o.map((function(e){return Object(I.jsx)(os,{connection:e,elements:r},e.id)}))}):Object(I.jsxs)(_,{children:[Object(I.jsx)(ca,{name:"isTransition",label:"Is a transition to another workflow"}),j?Object(I.jsx)(Pt,{name:"targetWorkflow",label:"Workflow to transition to",options:O.workflows.all().filter((function(e){return e.id!==i.workflowId})).map((function(e){return{label:e.name,value:e.id}})),intent:"overlap",validations:{required:"Required"},placeholder:""}):Object(I.jsxs)("div",{className:"p-4 flex items-center justify-start space-x-3 text-sm font-medium rounded-md bg-yellow-50 text-yellow-500",children:[Object(I.jsx)(Y.t,{className:"w-5 h-5"}),Object(I.jsx)("div",{children:"No steps are connected after this one"})]})]})]})})]})}),Object(I.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end",children:Object(I.jsx)(De,{actions:[{title:"Cancel",onClick:function(){return c()}},{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",type:"submit"}]})})]})},os=function(e){var t,n,i,a=e.connection,r=e.elements,c=Object(ft.f)(),s=gt("connections.".concat(a.id,".trigger"),c),l=gt("connections.".concat(a.id,".field"),c),o=qt(l),d=(null===(t=At((function(e){return"case"===e.key})))||void 0===t||null===(n=t.fields)||void 0===n?void 0:n.map((function(e){return{label:e.name,value:e.id}})))||[];return Object(I.jsxs)("div",{className:"flex flex-col space-y-4 px-2 pt-1 pb-2 border border-gray-200 rounded-md",children:[Object(I.jsxs)("div",{className:"flex space-x-2 items-center",children:[Object(I.jsx)(Pi,{className:"w-5 h-5"}),Object(I.jsx)("div",{className:"font-medium",children:null===(i=r.filter(rs).find((function(e){return e.id===a.targetId})))||void 0===i?void 0:i.name})]}),Object(I.jsx)("div",{className:"bg-white rounded-md p-1 pt-4",children:Object(I.jsxs)(_,{children:[Object(I.jsx)(Pt,{name:"connections.".concat(a.id,".trigger"),label:"What happened",options:ss,intent:"overlap",validations:{required:"Required"},placeholder:""}),"field-update"===s?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Pt,{name:"connections.".concat(a.id,".field"),label:"Which field",options:d,intent:"overlap",validations:{required:"Required"},placeholder:""}),o&&("option"===(null===o||void 0===o?void 0:o.type)?Object(I.jsx)(Pt,{name:"connections.".concat(a.id,".fieldValue"),label:"To what value",options:o.options.map((function(e){return{label:e,value:e}})),intent:"overlap",validations:{required:"Required"},placeholder:""}):Object(I.jsx)(It,{name:"connections.".concat(a.id,".fieldValue"),label:"To what value",intent:"overlap",validations:{required:"Required"}}))]}):null]})})]})},ds=function(e){return An({render:function(t){return Object(I.jsx)(ls,Object(l.a)({close:t},e))}})},us=n(197),js=n.n(us),bs=["connections"],ms=["connections"],xs=new js.a.graphlib.Graph;xs.setDefaultEdgeLabel((function(){return{}}));var fs,Os=(fs=function(e){var t=e.id,n=e.mode,a=t||Rt(),r=function(e){var t="string"===typeof e||"function"===typeof e?O.workflows.find(e):e;return t?Object(l.a)(Object(l.a)({},t),{},{get steps(){return O.workflowSteps.all((function(e){return e.workflowId===(null===t||void 0===t?void 0:t.id)})).map(Gt).filter(A)}}):null}(a),o=Object(i.useState)((null===r||void 0===r?void 0:r.steps)||[]),d=Object(c.a)(o,2),u=d[0],j=d[1],b=Object(i.useState)((null===u||void 0===u?void 0:u.map((function(e){var t;return(null===(t=Gt(e))||void 0===t?void 0:t.connections)||[]})).flat())||[]),m=Object(c.a)(b,2),x=m[0],f=m[1],g=Object(as.k)((function(e){return e.nodes})),y=Object(as.k)((function(e){return e.edges})),k=Object(i.useCallback)((function(){return[].concat(Object(v.a)(u.map((function(e){return{id:e.id,type:e.isTransition?"output":e.isStart?"input":"default",data:{label:Object(I.jsx)(vs,{step:e,onClick:Object(w.a)(N.a.mark((function t(){var n,i,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ds({step:e,mode:"edit",elements:[].concat(Object(v.a)(u),Object(v.a)(x))});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:i=n.connections,a=Object(p.a)(n,bs),j((function(t){return t.map((function(t){return n?t.id!==e.id?t:Object(l.a)(Object(l.a)({},t),a):t}))})),f((function(e){return e.map((function(e){return void 0===i[e.id]?e:i[e.id]}))}));case 8:case"end":return t.stop()}}),t)}))),onDelete:function(){X({title:"Are you sure you want to delete this step?",message:"This cannot be undone",onAccept:function(){R([e])}})}})},position:{x:e.posX||0,y:e.posY||0}}}))),Object(v.a)(x.map((function(e){return{id:e.id,source:e.sourceId,target:e.targetId,type:as.d.SmoothStep,arrowHeadType:as.a.Arrow}}))))}),[u,x]),C=Object(i.useMemo)((function(){return k()}),[k]),S=Object(i.useState)([]),D=Object(c.a)(S,2),E=D[0],T=D[1],P=Object(i.useState)([]),F=Object(c.a)(P,2),M=F[0],V=F[1],L=function(e){j((function(t){return e?[].concat(Object(v.a)(t),[e]):t}))},R=function(e){e.forEach((function(e){j((function(t){return t.filter((function(t){return t.id!==e.id}))})),f((function(t){return t.filter((function(t){return t.id!==e.id&&t.targetId!==e.id&&t.sourceId!==e.id}))})),T((function(t){return[].concat(Object(v.a)(t),[e.id])})),V((function(t){return[].concat(Object(v.a)(t),[e.id])}))}))},z=function(e){j((function(t){return t.map((function(t){return t.id!==e.id?t:Object(l.a)(Object(l.a)({},t),{},{posX:e.position.x,posY:e.position.y})}))}))},q=Object(i.useState)((null===r||void 0===r?void 0:r.name)||""),H=Object(c.a)(q,2),B=H[0],W=H[1],_=Object(i.useState)(null),U=Object(c.a)(_,2),Z=U[0],K=U[1],G=Object(i.useRef)(null),J=Object(i.useRef)(null),$=Object(i.useState)({x:0,y:0}),Q=Object(c.a)($,2),ee=Q[0],te=Q[1],ne=ge(),ie=ne.open,ae=ne.setOpen,re=ne.ref;return Object(I.jsxs)("div",{className:"h-screen flex flex-col bg-gray-200 dark:bg-gray-800",children:[Object(I.jsxs)("div",{className:"flex justify-between bg-white shadow h-16",children:[Object(I.jsx)("div",{className:"flex items-center p-4 border-r border-gray-300",children:Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",onClick:function(){return window.history.back()}}})}),Object(I.jsxs)("div",{className:"flex-1 flex items-center px-6 border-r border-gray-300 space-x-6",children:[Object(I.jsxs)("div",{className:"text-2xl font-medium",children:["create"===n?"Create":"Edit"," Workflow"]}),Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(Ln,{children:"Name:"}),Object(I.jsx)("input",{type:"text",value:B,onChange:function(e){return W(e.target.value)},className:"form-input"}),Object(I.jsx)("button",{onClick:function(){(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TB",i="LR"===n;return xs.setGraph({rankdir:n}),e.forEach((function(e){if(Object(as.j)(e)){var n=t.find((function(t){return t.id===e.id}));xs.setNode(e.id,{width:(null===n||void 0===n?void 0:n.__rf.width)||0,height:(null===n||void 0===n?void 0:n.__rf.height)||0})}else xs.setEdge(e.source,e.target)})),js.a.layout(xs),e.map((function(e){if(Object(as.j)(e)){var n=t.find((function(t){return t.id===e.id})),a=xs.node(e.id);e.targetPosition=i?"left":"top",e.sourcePosition=i?"right":"bottom",e.position={x:a.x-((null===n||void 0===n?void 0:n.__rf.width)||0)/2+Math.random()/1e3+20,y:a.y-((null===n||void 0===n?void 0:n.__rf.height)||0)/2+20}}return e}))})(C,g,"TB").forEach((function(e){Object(as.j)(e)&&z(e)})),Z&&Z.setTransform({x:0,y:0,zoom:1})},className:"text-sm font-medium px-3 py-2 rounded-md border border-gray-200 shadow-sm ring-0 focus:ring-1 focus:border-primary-500 focus:ring-primary-500 transition-all duration-100",children:"Reorganise"})]})]}),Object(I.jsx)("div",{className:"flex items-center px-6",children:Object(I.jsx)(De,{actions:[{title:"Save",intent:"save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),onClick:function(){return O.workflows.save({id:a,name:B}),u.forEach((function(e){var t=g.find((function(t){return t.id===e.id}));a&&t&&Object(as.j)(t)&&O.workflowSteps.save({id:e.id,workflowId:a,name:e.name,description:e.description,targetWorkflow:e.targetWorkflow,isTransition:e.isTransition,isStart:e.isStart,posX:null===t||void 0===t?void 0:t.position.x,posY:null===t||void 0===t?void 0:t.position.y})})),x.forEach((function(e){var t=y.find((function(t){return t.id===e.id}));t&&Object(as.i)(t)&&O.workflowStepConnections.save({id:e.id,sourceId:t.source,targetId:t.target,trigger:e.trigger,field:e.field,fieldValue:e.fieldValue})})),E.forEach((function(e){O.workflowSteps.remove(e)})),M.forEach((function(e){O.workflowStepConnections.remove(e)})),void Object(s.e)("".concat("/nzdrc-mockup","/settings/workflows"))}}]})})]}),Object(I.jsxs)("div",{className:"flex-1 flex relative",ref:G,children:[Object(I.jsx)("div",{className:Object(h.a)("absolute z-10 shadow-lg rounded-md",!ie&&"hidden"),style:{left:ee.x+"px",top:ee.y+"px"},ref:J,children:Object(I.jsx)("div",{className:"p-2 bg-white rounded-md ring-1 ring-black ring-opacity-5",ref:re,children:Object(I.jsxs)("button",{className:"text-sm font-medium hover:bg-primary-50 active:bg-primary-100 flex items-center px-4 py-2 text-left leading-5 rounded-md",onClick:Object(w.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!1),e.next=3,ds({mode:"create",step:{id:Rt(),workflowId:a,posX:ee.x,posY:ee.y,name:"",description:""},elements:[].concat(Object(v.a)(x),Object(v.a)(u))});case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:t.connections,n=Object(p.a)(t,ms),L(n);case 8:case"end":return e.stop()}}),e)}))),children:[Object(I.jsx)(Y.C,{className:"w-5 h-5 mr-2 -ml-1"}),"Add Step"]})})}),Object(I.jsxs)(as.h,{elements:C,onElementsRemove:R,onNodeDragStop:function(e,t){return z(t)},onSelectionDragStop:function(e,t){t.filter(as.j).forEach((function(e){z(e)}))},onLoad:function(e){return K(e)},onConnect:function(e){f((function(t){return e.source&&e.target?[].concat(Object(v.a)(t),[{id:Rt(),sourceId:e.source,targetId:e.target,trigger:"",field:"",fieldValue:""}]):t}))},deleteKeyCode:8,onClick:function(){return ae(!1)},onPaneContextMenu:function(e){var t;e.preventDefault();var n=null===(t=G.current)||void 0===t?void 0:t.getBoundingClientRect(),i=e.pageX-((null===n||void 0===n?void 0:n.left)||0),a=e.pageY-((null===n||void 0===n?void 0:n.top)||0);ae(!0),te({x:i,y:a})},connectionMode:as.e.Loose,children:[Object(I.jsx)(as.f,{}),Object(I.jsx)(as.b,{variant:as.c.Dots,gap:12,size:1,color:"#ccc"})]})]})]})},function(e){return Object(I.jsx)(as.g,{children:Object(I.jsx)(fs,Object(l.a)({},e))})}),vs=function(e){var t=e.step,n=e.onClick,i=e.onDelete;return Object(I.jsxs)("div",{className:"relative",children:[Object(I.jsx)("button",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-5 h-5 rounded-full bg-red-100 hover:bg-red-200 transition-colors duration-100 ring-2 ring-white flex items-center justify-center",onClick:i,children:Object(I.jsx)(Y.K,{className:"w-4 h-4 text-red-500"})}),Object(I.jsxs)("div",{className:"px-2 flex items-center space-x-4 relative",children:[Object(I.jsx)("button",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-gray-200 hover:bg-gray-300 text-gray-600 transition-all duration-100",onClick:n,children:Object(I.jsx)(Y.B,{className:"w-5 h-5"})}),Object(I.jsxs)("div",{className:"flex flex-col items-start",children:[Object(I.jsx)("div",{className:"text-base text-gray-900 font-medium",children:t.name}),Object(I.jsx)("div",{className:"text-sm text-gray-500 text-left",children:null===t||void 0===t?void 0:t.description})]})]})]})},hs=Os,ps=[{name:"Shared Workspace"},{name:"Document Production"},{name:"Document Exchange"}],gs=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Modules",actions:[{title:"Add Module",icon:Object(I.jsx)(Y.C,{className:"w-5 h-5"}),to:"/settings/modules/add"}]})}),Object(I.jsx)("div",{className:"overflow-hidden rounded-br-md",children:Object(I.jsx)(Ae,{schema:{cols:[{title:"Name",value:function(e){return e.name}}]},items:ps,className:"-mb-px"})})]})})]})},ys={1:"",2:"sm:w-1/2",3:"sm:w-1/3"},Ns=function(e){var t=e.items,n=e.columns,i=void 0===n?2:n,a=e.className,r=t.filter(A).filter((function(e){return e.value})).reduce((function(e,t){return e[e.length-1].length<i?(e[e.length-1].push(t),e):[].concat(Object(v.a)(e),[[t]])}),[[]]);return Object(I.jsx)("div",{className:Object(h.a)(a),children:Object(I.jsx)("dl",{className:"flex flex-col space-y-8",children:r.map((function(e,t){return Object(I.jsx)("div",{className:"flex flex-col sm:flex-row sm:space-x-8 space-y-8 sm:space-y-0",children:e.map((function(e,t){return Object(I.jsxs)("div",{className:Object(h.a)("w-full",ys[i]),children:[e.title&&Object(I.jsx)("dt",{className:"text-sm leading-5 text-gray-500 dark:text-gray-300",children:e.title}),Object(I.jsx)("dd",{className:"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white",children:e.value})]},t)}))},t)}))})})},ws=function(e){var t,n=e.checked,i=e.name,a=e.label,r=void 0===a?"":a,c=e.className,s=e.disabled,l=e.onChange,o=e.color,d=void 0===o?"text-emerald-600 dark:text-emerald-500":o;return Object(I.jsxs)("label",{className:Object(h.a)("text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-start cursor-pointer",c),children:[Object(I.jsx)("input",{type:"checkbox",name:i,id:i,checked:n,disabled:s,onChange:l,className:Object(h.a)("form-checkbox rounded-sm border-gray-300 mt-1",(t={},Object(g.a)(t,d,!s),Object(g.a)(t,"text-gray-400",s),t))}),r&&Object(I.jsx)("span",{className:"ml-3 mt-0.5 select-none",children:r})]})},ks=[{id:Object(o.a)(),name:"Shared Workspace"},{id:Object(o.a)(),name:"Document Production"},{id:Object(o.a)(),name:"Document Exchange"},{id:Object(o.a)(),name:"Video Conferencing"},{id:Object(o.a)(),name:"Peer Review"}],Cs=function(){var e=Object(i.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:"Add Module",title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/settings/modules"}}),Object(I.jsx)("div",{children:"Add Module"})]})}),Object(I.jsx)(rn,{children:Object(I.jsxs)(_,{children:[Object(I.jsx)(xt,{children:Object(I.jsx)("div",{className:"grid grid-cols-3 gap-6",children:ks.map((function(e){return Object(I.jsxs)("div",{className:Object(h.a)("border rounded relative cursor-pointer shadow-sm","col-span-1 min-h-[300px]",{"bg-white dark:bg-gray-750 border-gray-200 dark:border-gray-600":!n.includes(e.id),"bg-primary-50 dark:bg-primary-500 dark:bg-opacity-25 border-primary-500 dark:border-primary-500 ring-1 ring-primary-500":n.includes(e.id)}),onClick:function(){n.includes(e.id)?a((function(t){return t.filter((function(t){return t!==e.id}))})):a((function(t){return[].concat(Object(v.a)(t),[e.id])}))},children:[Object(I.jsxs)(_,{className:"p-4",children:[Object(I.jsx)(Ns,{items:[{value:Object(I.jsx)("span",{className:"text-lg font-medium",children:e.name})},{title:"Includes",value:Object(I.jsxs)("ul",{className:"list-disc pl-4",children:[Object(I.jsx)("li",{children:"3 Entities"}),Object(I.jsx)("li",{children:"5 Templates"}),Object(I.jsx)("li",{children:"5 Notifications"})]})}],columns:1}),Object(I.jsx)("button",{className:"text-primary-600 text-sm font-medium underline",children:"View More"})]}),Object(I.jsx)("div",{className:"p-4 absolute top-0 right-0",children:Object(I.jsx)(ws,{checked:n.includes(e.id),onChange:function(t){t.target.checked?a((function(t){return t.filter((function(t){return t!==e.id}))})):a((function(t){return[].concat(Object(v.a)(t),[e.id])}))}})})]},e.id)}))})}),Object(I.jsx)("div",{className:"flex justify-end",children:Object(I.jsx)(De,{actions:{title:"Save",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),intent:"save",onClick:function(){}}})})]})})]})},Is=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{title:"Settings"}),Object(I.jsx)(kr,{links:Or,children:Object(I.jsxs)(_,{children:[Object(I.jsx)("div",{className:"px-6 pt-6",children:Object(I.jsx)(oa,{title:"Site Settings",actions:[{title:"Edit Site Settings",icon:Object(I.jsx)(Y.B,{className:"w-5 h-5"}),to:"/settings/site-settings/edit"}]})}),Object(I.jsx)("div",{className:"p-6",children:Object(I.jsx)(Ns,{items:[{title:"Title",value:O.siteSettings.get("title")},{title:"Layout",value:"sidebar"===O.siteSettings.get("layout")?"Nav on side":"Nav on top"}]})})]})})]})},Ss=n.p+"static/media/layout-sidebar.55a16042.svg",Ds=n.p+"static/media/layout-topbar.ff4c6906.svg",Es=function(){var e=ht({initialValues:{title:O.siteSettings.get("title")||"",layout:O.siteSettings.get("layout")||"sidebar",nav:O.entities.all().reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(g.a)({},t.key,{link:t.plural||t.name,permissions:O.roles.all().map((function(e){return e.id}))}))}),{}),signature:""},onSubmit:function(e){O.siteSettings.set("title",e.title),O.siteSettings.set("layout",e.layout),Object(s.e)("".concat("/nzdrc-mockup","/settings/site-settings"))}}),t=gt("layout",e),n={cols:[{title:"Entity Type",value:function(e){return e.name},width:"minmax(auto, max-content)"},{title:"Link Name",value:function(e){return Object(I.jsx)(It,{name:"nav.".concat(e.key,".link")})}}].concat(Object(v.a)(O.roles.all().map((function(t){return{title:t.name,value:function(n){var i=Object(ft.c)(e.values,"nav.".concat(n.key,".permissions"));return Object(I.jsx)("div",{className:"w-full flex justify-center",children:Object(I.jsx)(ws,{checked:null===i||void 0===i?void 0:i.includes(t.id),onChange:function(a){return e.setFieldValue("nav.".concat(n.key,".permissions"),a.target.checked?[].concat(Object(v.a)(i),[t.id]):i.filter((function(e){return e!==t.id})))}})})},width:"minmax(auto, max-content)"}}))))},i="Edit Site Settings";return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(nn,{pageTitle:i,title:Object(I.jsxs)("div",{className:"flex items-center space-x-3",children:[Object(I.jsx)(De,{actions:{icon:Object(I.jsx)(Y.c,{className:"w-5 h-5 -mx-2"}),intent:"borderless",rounded:"full",to:"/settings/site-settings"}}),Object(I.jsx)("div",{children:i})]})}),Object(I.jsx)(rn,{children:Object(I.jsx)(vt,{context:e,children:Object(I.jsxs)(_,{children:[Object(I.jsx)(Ca,{title:"Page Title",subtitle:"This title appears in the browser tab, is important for SEO",children:Object(I.jsx)(xt,{children:Object(I.jsx)(It,{name:"title",label:"Title",validations:{required:"Title is required"}})})}),Object(I.jsx)(Ca,{title:"Layout",subtitle:"Control the sites layout design",children:Object(I.jsx)(xt,{children:Object(I.jsxs)("div",{className:"flex space-x-6",children:[Object(I.jsx)("button",{className:Object(h.a)("w-[200px] h-[200px] relative rounded-md hover:opacity-80 cursor-pointer","sidebar"===t&&"ring-2 ring-green-500"),onClick:function(){e.setFieldValue("layout","sidebar")},type:"button",children:Object(I.jsx)("img",{src:Ss,alt:"Sidebar"})}),Object(I.jsx)("button",{className:Object(h.a)("w-[200px] h-[200px] relative rounded-md hover:opacity-80 cursor-pointer","topbar"===t&&"ring-2 ring-green-500"),onClick:function(){e.setFieldValue("layout","topbar")},type:"button",children:Object(I.jsx)("img",{src:Ds,alt:"Topbar"})})]})})}),Object(I.jsx)(Ca,{title:"Navigation",subtitle:"Set up what pages are visible in the nav bar",children:Object(I.jsx)(jt,{className:"overflow-hidden",children:Object(I.jsx)(Ae,{schema:n,items:O.entities.all()})})}),Object(I.jsx)(Ca,{title:"Email Signature",subtitle:"This signature will be included at the bottom of every notification.",children:Object(I.jsx)(xt,{children:Object(I.jsx)(Yr,{name:"signature"})})}),Object(I.jsx)("div",{className:"flex items-center justify-end",children:Object(I.jsx)(De,{actions:[{title:"Update",intent:"primary",icon:Object(I.jsx)(Y.j,{className:"w-5 h-5"}),type:"submit"}]})})]})})})]})},Ts=function(){var e=[{title:"Home",to:"/test",icon:Object(I.jsx)(Y.w,{className:"w-5 h-5"})},{title:"Team",to:"/team",icon:Object(I.jsx)(Y.I,{className:"w-5 h-5"})},{title:"Test",to:"/blah",icon:Object(I.jsx)(Y.o,{className:"w-5 h-5"})},{title:"Projects",to:"/projects",icon:Object(I.jsx)(Y.v,{className:"w-5 h-5"})},{title:"Calendar",href:"/calendar",icon:Object(I.jsx)(Y.g,{className:"w-5 h-5"})},{title:"Documents",onClick:function(){return console.log("/documents")},icon:Object(I.jsx)(Y.x,{className:"w-5 h-5"})},{title:"Reports",to:"/reports",icon:Object(I.jsx)(Y.h,{className:"w-5 h-5"})}],t=[{title:"Links",items:[{title:"Resources",to:"/reports"}]}];return Object(I.jsx)("div",{className:"h-screen",children:Object(I.jsx)(Ke,{minimizable:!0,items:function(n){return n?e:e.concat(t)},header:Object(I.jsx)("div",{className:"px-2 my-10",children:Object(I.jsx)(s.a,{to:"".concat("/nzdrc-mockup","/dashboard"),children:Object(I.jsx)(st,{className:"h-11 text-primary-500"})})}),footer:function(e){return Object(I.jsx)("div",{className:Object(h.a)("py-4",e?"w-full flex justify-center":"px-6"),children:Object(I.jsx)("div",{className:"text-gray-400 text-sm font-medium antialiased",children:"v0.0.0"})})}})})},Ps=function(e){var t=e.children;return Object(I.jsx)(I.Fragment,{children:t})};console.log("process.env",Object({NODE_ENV:"production",PUBLIC_URL:"/nzdrc-mockup",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COMMIT:"e75e27d089ecca6346a6b2134616e852837b34f8"}));var Fs=function(){var e="sidebar"===O.siteSettings.get("layout")?lt:ut,t=O.entities.all();return Object(I.jsx)(i.Suspense,{fallback:null,children:Object(I.jsxs)(s.d,{basepath:"/nzdrc-mockup",children:[Object(I.jsx)(en,{path:"/login"}),Object(I.jsx)(hs,{path:"/settings/workflows/create",mode:"create"}),Object(I.jsx)(hs,{path:"/settings/workflows/:id/edit",mode:"edit"}),Object(I.jsxs)(e,{path:"/",children:[Object(I.jsx)(s.c,{from:"/",to:"home",noThrow:false}),Object(I.jsx)(on,{default:!0}),Object(I.jsx)(sn,{path:"/home"}),Object(I.jsx)(sn,{path:"/events"}),Object(I.jsx)(sn,{path:"/users"}),t.map((function(e){return Object(I.jsxs)(Ps,{path:"/".concat(e.key),children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(dn,{path:"/",entityId:e.id}),Object(I.jsx)(Ya,{path:":id"}),Object(I.jsx)(lr,{path:"/create",entityId:e.id,mode:"create"}),Object(I.jsx)(xr,{path:":id/history"}),Object(I.jsx)(lr,{path:":id/edit",entityId:e.id,mode:"edit"})]},e.id)})),Object(I.jsx)(fr,{path:"/value-history/:id"}),Object(I.jsxs)(vr,{path:"/settings",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(s.c,{from:"/",to:"entities",noThrow:false}),Object(I.jsxs)(Ps,{path:"/entities",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(Wc,{path:"/"}),Object(I.jsx)(ns,{path:"/create",mode:"create"}),Object(I.jsx)(ns,{path:":id/edit",mode:"edit"})]}),Object(I.jsxs)(Ps,{path:"/roles",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(qc,{path:"/"}),Object(I.jsx)(Bc,{path:"/create",mode:"create"}),Object(I.jsx)(Bc,{path:":id/edit",mode:"edit"})]}),Object(I.jsxs)(Ps,{path:"/pages",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(Xr,{path:"/"}),Object(I.jsx)(Vc,{path:"/create",mode:"create"}),Object(I.jsx)(Vc,{path:":id/edit",mode:"edit"})]}),Object(I.jsxs)(Ps,{path:"/forms",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(Lc,{path:"/"})]}),Object(I.jsxs)(Ps,{path:"/templates",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(Rc,{path:"/"}),Object(I.jsx)(zc,{path:"/create",mode:"create"}),Object(I.jsx)(zc,{path:":id/edit",mode:"edit"})]}),Object(I.jsxs)(Ps,{path:"/notifications",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(Dr,{path:"/"}),Object(I.jsx)($r,{path:"/create",mode:"create"}),Object(I.jsx)($r,{path:":id/edit",mode:"edit"})]}),Object(I.jsxs)(Ps,{path:"/workflows",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(is,{path:"/"})]}),Object(I.jsxs)(Ps,{path:"/modules",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(gs,{path:"/"}),Object(I.jsx)(Cs,{path:"/add"})]}),Object(I.jsxs)(Ps,{path:"/site-settings",children:[Object(I.jsx)(on,{default:!0}),Object(I.jsx)(Is,{path:"/"}),Object(I.jsx)(Es,{path:"/edit"})]})]})]}),Object(I.jsx)(Ts,{path:"/test"})]})})},Ms=(n(521),n(522),function(){var e=Object(i.useReducer)((function(){return{}}),{}),t=Object(c.a)(e,2)[1];return Object(i.useEffect)((function(){j.current=t}),[t]),Object(I.jsx)(Fs,{})});console.log("build #e75e27d089ecca6346a6b2134616e852837b34f8"),r.a.render(Object(I.jsx)(i.Suspense,{fallback:null,children:Object(I.jsx)(Ms,{})}),document.getElementById("root"))}},[[523,1,2]]]);
//# sourceMappingURL=main.20118792.chunk.js.map