{"version":3,"sources":["db/index.ts","types/db.ts","assets/img/workflow-logo-white-text.svg","assets/img/workflow-logo.svg","@primer/components/AlertTransition.tsx","@primer/utils/alert.tsx","@primer/components/Divider.tsx","@primer/components/AutoHeight.tsx","@primer/types/index.ts","@primer/components/Stack.tsx","@primer/hooks/useAutoFocus.ts","@primer/components/Button.tsx","@primer/alerts/Confirm.tsx","@primer/alerts/Slideout.tsx","@primer/utils/toast.tsx","@primer/utils/constants.ts","config.ts","@primer/hooks/usePopper.tsx","@primer/hooks/useDismissable.ts","@primer/components/CustomMenu.tsx","@primer/components/ActionMenu.tsx","@primer/components/Inline.tsx","@primer/components/Actions.tsx","@primer/components/BasicTruncate.tsx","@primer/components/Table.tsx","@primer/utils/funcs.tsx","@primer/components/Icon.tsx","@primer/components/Loader.tsx","@primer/hooks/useLocalStorage.ts","@primer/components/Tooltip.tsx","@primer/components/Sidebar.tsx","@primer/hooks/useDarkMode.ts","@primer/components/Topbar.tsx","@primer/components/MobileMenu.tsx","assets/img/ICRA_WhiteRev.png","@primer/components/OnRouteChange.tsx","@primer/utils/versions.ts","@primer/components/Layouts/PageSidebar.tsx","@primer/components/Layouts/PageTopbar.tsx","@primer/components/Card.tsx","@primer/components/ButtonSpacer.tsx","@primer/components/PageHeading.tsx","@primer/components/PageContent.tsx","db/seed.ts","pages/Home.tsx","assets/img/undraw_not_found_60pq.svg","pages/NotFound.tsx","utils/funcs.tsx","pages/Units/Units.tsx","@primer/components/DataListColumns.tsx","db/types/Action.ts","db/types/ActionPermission.ts","db/types/Entity.ts","db/types/EntityPermission.ts","db/types/Field.ts","db/types/FieldPermission.ts","db/types/Relation.ts","db/types/RelationPermission.ts","db/types/Role.ts","db/types/Unit.ts","db/types/Value.ts","pages/Units/ViewUnit.tsx","@primer/components/Form/Form.tsx","@primer/components/Form/utils.ts","@primer/components/Form/FormInput.tsx","@primer/components/Form/FormSelect.tsx","@primer/components/Form/FormDate.tsx","@primer/components/Form/FormToggle.tsx","pages/Units/UnitForm.tsx","pages/Values/ValueHistory.tsx","pages/Settings/Settings.tsx","@primer/components/NavList.tsx","@primer/components/PageNavbar.tsx","@primer/components/Badge.tsx","@primer/components/SectionHeader.tsx","pages/Settings/Notifications/Notifications.tsx","@primer/components/Form/FormLabel.tsx","@primer/components/Form/FormSection.tsx","@primer/components/Tabs.tsx","pages/Settings/Notifications/utils/options.tsx","@primer/components/Form/useFieldArray.ts","@primer/components/Form/FormEditor.tsx","@primer/components/Expandable.tsx","pages/Settings/Templates/utils/actions.tsx","components/FormTemplateEditor.tsx","pages/Settings/Notifications/NotificationForm.tsx","pages/Settings/Templates/Templates.tsx","pages/Settings/Templates/TemplateForm.tsx","pages/Settings/Roles/Roles.tsx","@primer/components/Form/FormCheckbox.tsx","@primer/components/CardHeader.tsx","@primer/components/TableFrame.tsx","pages/Settings/Roles/RoleForm.tsx","pages/Settings/Entities/Entities.tsx","@primer/components/Suspender.tsx","@primer/hooks/openSlideout.tsx","@primer/components/Form/FormInputRaw.tsx","slideouts/openField.tsx","slideouts/openAction.tsx","slideouts/openRelation.tsx","pages/Settings/Entities/EntityForm.tsx","pages/Settings/Modules/Modules.tsx","@primer/components/Checkbox.tsx","pages/Settings/Modules/AddModule.tsx","pages/Settings/SiteSettings/SiteSettings.tsx","assets/img/layout-sidebar.svg","assets/img/layout-topbar.svg","pages/Settings/SiteSettings/SiteSettingsForm.tsx","pages/Test.tsx","Router.tsx","App.tsx","index.tsx"],"names":["initialSettings","title","layout","storage","siteSettings","units","values","entities","entityPermissions","fields","fieldPermissions","actions","actionPermissions","relations","relationPermissions","notifications","templates","roles","renderContainer","current","dataActions","prop","all","filter","Array","prototype","call","find","id","x","save","data","uuid","created","Date","toISOString","push","persist","added","map","remove","set","key","val","get","localStorage","setItem","JSON","stringify","clear","parse","getItem","restore","AlertTransition","show","className","children","motion","div","clsx","style","originY","variants","hidden","y","visible","transition","type","ease","duration","initial","animate","exit","BackdropTransition","AnimatePresence","opacity","mountedAlerts","alert","DialogContent","Promise","resolvePromise","alertRoot","document","createElement","body","appendChild","ReactDOM","resolve","close","splice","findIndex","contains","removeChild","Divider","AutoHeight","useState","initialState","setInitialState","isAnimating","setAnimating","isVisible","setVisible","useEffect","setTimeout","padding","margin","overflow","height","onAnimationComplete","isNotNone","undefined","isLinkActionType","action","to","isButtonActionType","onClick","isSubmitActionType","isActionMenuActionType","isCustomMenuActionType","menu","isLinkRouteConfig","isAnchorRouteConfig","url","isLinkTabType","isButtonTabType","spaces","Stack","space","dividers","filteredItems","Children","toArray","reduce","list","i","props","omit","Fragment","concat","item","useAutoFocus","enabled","ref","useRef","focus","sizes","xs","sm","md","lg","xl","inline","roundedness","none","rounded","full","intents","primary","span","button","secondary","light","danger","borderless","invisible","Button","forwardRef","intent","size","disabled","isLoading","as","Comp","attrs","Confirm","message","buttonLabel","dismissable","onAccept","open","setOpen","loading","setLoading","autoFocusRef","closeAlert","handleAccept","a","e","target","stroke","fill","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","buttonIntents","buttonRoundness","buttonSizes","tabIndex","confirm","answer","Slideout","mode","closeSlideout","useCallback","backdropRef","slideout","toastRoot","holidays","name","date","site","process","REACT_APP_ENV","REACT_APP_SITE","usePopper","options","reference","popper","cleanupCallback","instantiatePopper","createPopper","modifiers","flip","offset","preventOverflow","destroy","useMemo","referenceDomNode","popperDomNode","useDismissable","Math","floor","random","ignoreClass","onClose","prevState","setPrevState","onOpen","handle","window","addEventListener","removeEventListener","useClickOutside","CustomMenu","placement","maxWidth","strategy","tooltip","scale","submit","cancel","anchor","ActionInner","side","iconSide","icon","ActionMenu","hoverable","isHover","setHover","hoverTimer","setHoverTimer","actionList","index","divider","prevOpen","onMouseOver","clearTimeout","onMouseOut","dispatchEvent","Event","ButtonIntents","ButtonRoundness","ButtonSizes","Items","static","Item","active","state","replace","console","log","disableDismiss","preventDefault","stopPropagation","isDividerActionType","wrapper","Inline","items","Actions","render","isRenderActionType","BasicTruncate","timer","isOverflowing","setOverflowing","check","clientWidth","clientHeight","scrollWidth","scrollHeight","handler","colSpan","breakpoints","xxl","visibilities","pass","vis","visibility","Table","schema","getKey","_","isStriped","queries","mediaQueryLists","q","matchMedia","getValue","mql","matches","value","setValue","forEach","addListener","removeListener","useMedia","Object","mqs","cols","responsive","tmplCols","width","join","gridTemplateColumns","col","j","truncate","onlyText","length","smartReplaceClasses","fixes","names","split","fix","pattern","test","defaultValue","isValidDate","isNaN","valueOf","ensureDate","getReservedDate","isSameDay","ordinal","k","slugify","trim","toLowerCase","fixClasses","Spinner","xmlns","cx","cy","r","Loader","spin","useLocalStorage","initialValue","error","storedValue","setStoredValue","valueToStore","Function","Tooltip","hover","X","setX","Y","setY","offsetLeft","offsetWidth","offsetTop","left","top","originX","link","inactive","white","getProps","route","min","isCurrent","isPartiallyCurrent","exact","MenuLink","href","rel","NavLink","loc","useLocation","pathname","indexOf","Sidebar","header","footer","links","setMin","changeDarkMode","querySelector","classList","useDarkMode","setDarkMode","matchesMedia","func","hasOwnProperty","Topbar","logout","darkMode","MobileMenu","withTopbar","src","alt","block","OnRouteChangeWorker","prevProps","this","location","Component","OnRouteChange","versions","number","new","change","bug","PageSidebar","releases","sort","b","semver","gt","db","mainNav","entity","plural","smallLogo","logo","fallback","scrollTo","PageTopbar","CardWrapper","CardContent","CardFooter","Card","ButtonSpacer","PageHeading","pageTitle","infoList","info","PageContent","seed","userEntity","caseEntity","eventEntity","entityId","changes","relatedId","triggerType","triggerRepeat","triggerEvery","triggerYearIn","triggerMonthOn","triggerWeekOn","triggerDayAt","triggerAction","obeyTriggerTiming","triggerTimingType","triggerTiming","triggerDate","ruleGroups","rules","field","operator","subject","content","adminRole","caseManagerRole","reviewerRole","applicantRole","role","roleId","view","modify","entityField","fieldId","entityAction","actionId","perform","relation","relationId","entityType","Home","NotFound","illustration","getEntityFieldValue","stringValue","dateValue","format","numberValue","booleanValue","sortValuesByLatest","Units","visibleFields","setVisibleFields","includes","unitId","f","columnClassNames","DataListColumns","columns","lists","actionResource","entityResource","actionPermissionResource","permission","roleResource","fieldResource","relationResource","unitResource","entityPermissionResource","unit","valueResource","fieldPermissionResource","relationPermissionResource","fieldPermission","actionPermission","relationPermission","ViewEntity","hasHistory","history","Form","context","useForm","onSubmit","handleSubmit","formData","helpers","setSubmitting","useFormik","validate","validations","required","max","watch","getIn","FormInput","label","autoFocus","hideOptional","placeholder","description","inputProps","isRequired","useField","touched","setTouched","formik","useFormikContext","uuidv4","token","extraClassName","extraProps","onChange","onBlur","isSubmitting","FormSelect","clearable","onChangeProp","option","autoComplete","autoCorrect","spellCheck","classNamePrefix","isClearable","isDisabled","menuPlacement","components","ClearIndicator","hasValue","innerProps","restInnerProps","DropdownIndicator","weekDays","isDate","FormDate","minDate","maxDate","inputDisabled","disableHolidays","inputClassName","display","setDisplay","startOfMonth","setContext","prevValue","setPrevValue","ensuredDate","dismissableRef","preDays","getISODay","subDays","endOfMonth","subMonths","reverse","postDays","addDays","addMonths","days","getDaysInMonth","composeRefs","onKeyDown","event","displayDate","c","day","select","isBefore","isAfter","Toggle","checked","color","FormCheckbox","UnitForm","valueData","initialValues","formContext","newUnit","entries","navigate","FormToggle","ValueHistory","Admin","toggle","NavList","PageNavbar","themes","gray","red","orange","yellow","green","teal","blue","indigo","purple","pink","Badge","SectionHeader","subtitle","Notifications","FormLabel","isOptional","FormSection","vertical","dark","border","tab","tabInactive","tabActive","card","buttons","Tabs","theme","activeIndex","getActiveIndex","tabs","simpleTitle","errors","types","repeatOptions","weekOnOptions","yearInOptions","generateMonthList","getMonthOnOptions","str","january","february","march","april","may","june","july","august","september","october","november","december","entityTiming","entityTimingType","useFieldArray","setFieldValue","getFieldProps","meta","getFieldMeta","fieldArray","update","$push","swap","indexA","indexB","swapA","swapB","$splice","move","from","toMove","insert","unshift","$unshift","removedItem","pop","lastIndex","poppedItem","arrayHelpers","defaultEditorModules","toolbar","align","FormEditor","modules","readOnly","Expandable","isExpanded","setExpanded","templateTagActions","insertFn","level","FormTemplateEditor","insertTag","editor","getEditor","selection","getSelection","text","getText","deleteText","insertText","RuleGroup","appendRule","removeRule","groupIndex","prefix","Rule","string","boolean","users","user","NotificationForm","originalNotification","enabledDate","appendRuleGroup","removeRuleGroup","Infinity","Templates","CreateTemplate","originalTemplate","Roles","CardHeader","TableFrame","RoleForm","originalRole","formValues","entityTypeKey","Entities","ErrorBoundary","Sentry","dir","defaultError","Suspender","loader","withSuspense","SlideoutInner","SlideoutHeader","SlideoutContent","openSlideout","typeOptions","permissions","optionsHelpers","permissionsSchema","FormInputRaw","openField","openAction","relationTypeOptions","oppositeRelationTypeOptions","openRelation","EntityForm","original","originalFields","originalActions","originalRelations","formSchema","newEntityType","toDelete","fieldsHelpers","actionsHelpers","relationsHelpers","setToDelete","fieldSchema","editedField","produce","draft","actionsSchema","editedAction","relationSchema","editedRelation","template","newField","newAction","newRelation","Modules","Checkbox","AddModule","selected","setSelected","s","SiteSettingsForm","nav","signature","navSchema","perms","LayoutSidebar","LayoutTopbar","Test","startDate","hash","Route","Router2","Wrapper","basepath","path","noThrow","default","ViewUnit","Settings","TemplateForm","SiteSettings","App","useReducer","dispatch","Router","getElementById"],"mappings":"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","file":"static/js/main.65645558.chunk.js","sourcesContent":["import { isUnsaved, Unsaved } from 'types/db'\nimport {\n\tEntityModel,\n\tFieldModel,\n\tActionModel,\n\tRelationModel,\n\tNotificationModel,\n\tTemplateModel,\n\tRoleModel,\n\tActionPermissionModel,\n\tRelationPermissionModel,\n\tFieldPermissionModel,\n\tEntityPermissionModel,\n\tUnitModel,\n\tValueModel,\n\tSiteSettings,\n} from 'db/types'\nimport { v4 as uuid } from 'uuid'\n\ninterface Storage {\n\tsiteSettings: SiteSettings\n\tunits: UnitModel[]\n\tvalues: ValueModel[]\n\tentities: EntityModel[]\n\tentityPermissions: EntityPermissionModel[]\n\tfields: FieldModel[]\n\tfieldPermissions: FieldPermissionModel[]\n\tactions: ActionModel[]\n\tactionPermissions: ActionPermissionModel[]\n\trelations: RelationModel[]\n\trelationPermissions: RelationPermissionModel[]\n\tnotifications: NotificationModel[]\n\ttemplates: TemplateModel[]\n\troles: RoleModel[]\n}\n\nconst initialSettings: SiteSettings = { title: 'NZDRC2', layout: 'sidebar' }\n\nconst storage: Storage = {\n\tsiteSettings: initialSettings,\n\tunits: [],\n\tvalues: [],\n\tentities: [],\n\tentityPermissions: [],\n\tfields: [],\n\tfieldPermissions: [],\n\tactions: [],\n\tactionPermissions: [],\n\trelations: [],\n\trelationPermissions: [],\n\tnotifications: [],\n\ttemplates: [],\n\troles: [],\n}\n\nexport const renderContainer = {\n\tcurrent: () => {},\n}\n\nconst dataActions = <T extends Storage[K][0], K extends keyof Omit<Storage, 'siteSettings'>>(prop: K) => ({\n\tall: (filter?: (x: T) => boolean): T[] => {\n\t\tif (filter && storage[prop]) return Array.prototype.filter.call(storage[prop], filter)\n\t\t// @ts-ignore\n\t\treturn storage[prop] || []\n\t},\n\tfind: (id?: string | ((x: T) => boolean)): T | undefined => {\n\t\treturn Array.prototype.find.call(storage[prop], typeof id === 'function' ? id : (x) => x.id === id)\n\t},\n\tsave: (data: T | Unsaved<T>) => {\n\t\tif (isUnsaved<T>(data)) {\n\t\t\tlet x = {\n\t\t\t\t...data,\n\t\t\t\tid: uuid(),\n\t\t\t\tcreated: new Date().toISOString(),\n\t\t\t}\n\t\t\tArray.prototype.push.call(storage[prop], x)\n\t\t\tpersist()\n\t\t\trenderContainer.current()\n\t\t\treturn x\n\t\t} else {\n\t\t\tlet added = false\n\n\t\t\t// @ts-ignore\n\t\t\tstorage[prop] = storage[prop].map((x) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (x.id === data.id) {\n\t\t\t\t\tadded = true\n\t\t\t\t\treturn data\n\t\t\t\t}\n\t\t\t\treturn x\n\t\t\t})\n\n\t\t\tif (!added) Array.prototype.push.call(storage[prop], data)\n\n\t\t\tpersist()\n\t\t\trenderContainer.current()\n\t\t\treturn data\n\t\t}\n\t},\n\tremove: (id: string) => {\n\t\t// @ts-ignore\n\t\tstorage[prop] = storage[prop].filter((x) => x.id !== id)\n\t\tpersist()\n\t\trenderContainer.current()\n\t},\n})\n\nconst data = {\n\tsiteSettings: {\n\t\tset: <K extends keyof SiteSettings>(key: K, val: SiteSettings[K]) => {\n\t\t\tstorage.siteSettings[key] = val\n\t\t\trenderContainer.current()\n\t\t\tpersist()\n\t\t},\n\t\tget: <K extends keyof SiteSettings>(key: K) => {\n\t\t\treturn storage.siteSettings[key]\n\t\t},\n\t},\n\tunits: dataActions('units'),\n\tvalues: dataActions('values'),\n\tentities: dataActions('entities'),\n\tentityPermissions: dataActions('entityPermissions'),\n\tfields: dataActions('fields'),\n\tfieldPermissions: dataActions('fieldPermissions'),\n\tactions: dataActions('actions'),\n\tactionPermissions: dataActions('actionPermissions'),\n\trelations: dataActions('relations'),\n\trelationPermissions: dataActions('relationPermissions'),\n\tnotifications: dataActions('notifications'),\n\ttemplates: dataActions('templates'),\n\troles: dataActions('roles'),\n}\n\nexport const persist = () => localStorage.setItem('data', JSON.stringify(storage))\n\nexport const restore = () => {\n\tconst data = JSON.parse(localStorage.getItem('data') || 'null')\n\n\tif (data) {\n\t\tstorage.siteSettings = data.siteSettings || {}\n\t\tstorage.units = data.units || []\n\t\tstorage.values = data.values || []\n\t\tstorage.entities = data.entities || []\n\t\tstorage.entityPermissions = data.entityPermissions || []\n\t\tstorage.fields = data.fields || []\n\t\tstorage.fieldPermissions = data.fieldPermissions || []\n\t\tstorage.actions = data.actions || []\n\t\tstorage.actionPermissions = data.actionPermissions || []\n\t\tstorage.relations = data.relations || []\n\t\tstorage.relationPermissions = data.relationPermissions || []\n\t\tstorage.notifications = data.notifications || []\n\t\tstorage.templates = data.templates || []\n\t\tstorage.roles = data.roles || []\n\t}\n}\n\nexport const clear = () => {\n\tstorage.siteSettings = initialSettings\n\tstorage.units = []\n\tstorage.values = []\n\tstorage.entities = []\n\tstorage.entityPermissions = []\n\tstorage.fields = []\n\tstorage.fieldPermissions = []\n\tstorage.actions = []\n\tstorage.actionPermissions = []\n\tstorage.relations = []\n\tstorage.relationPermissions = []\n\tstorage.notifications = []\n\tstorage.templates = []\n\tstorage.roles = []\n\n\tpersist()\n}\n\nrestore()\n\nexport default data\n","export type Unsaved<T> = Omit<T, 'id'>\n\nexport const isUnsaved = <T>(x: any): x is Unsaved<T> => typeof x === 'object' && typeof x.id === 'undefined'\nexport const isSaved = <T>(x: any): x is Unsaved<T> => typeof x === 'object' && typeof x.id === 'string'\n\nexport type Identifier<T> = string | ((x: T) => boolean) | T\n\nexport type PK = string\nexport type FK = string\n\nexport interface Model {\n\tid: PK\n\tcreated?: string\n}\n","export default __webpack_public_path__ + \"static/media/workflow-logo-white-text.c64a9d8e.svg\";","export default __webpack_public_path__ + \"static/media/workflow-logo.b7adb00c.svg\";","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\n\ninterface AlertTransitionProps {\n\tshow: boolean\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nexport const AlertTransition: FC<AlertTransitionProps> = ({ show, className, children }) => (\n\t<motion.div\n\t\tclassName={clsx(className, 'relative z-40')}\n\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\tvariants={{\n\t\t\thidden: { y: -24 },\n\t\t\tvisible: { y: 0 },\n\t\t}}\n\t\ttransition={{\n\t\t\ttype: 'tween',\n\t\t\tease: 'easeOut',\n\t\t\tduration: 0.2,\n\t\t}}\n\t\tinitial=\"hidden\"\n\t\tanimate=\"visible\"\n\t\texit=\"hidden\"\n\t>\n\t\t{children}\n\t</motion.div>\n)\n\nexport const BackdropTransition: FC<AlertTransitionProps> = ({ show, className, children }) => (\n\t<AnimatePresence>\n\t\t{show && (\n\t\t\t<motion.div\n\t\t\t\tclassName={clsx(className, 'relative z-40')}\n\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\tvariants={{\n\t\t\t\t\thidden: { opacity: 0 },\n\t\t\t\t\tvisible: { opacity: 1 },\n\t\t\t\t}}\n\t\t\t\ttransition={{\n\t\t\t\t\ttype: 'tween',\n\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\tduration: 0.2,\n\t\t\t\t}}\n\t\t\t\tinitial=\"hidden\"\n\t\t\t\tanimate=\"visible\"\n\t\t\t\texit=\"hidden\"\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</motion.div>\n\t\t)}\n\t</AnimatePresence>\n)\n\ninterface SlideoutTransitionProps {\n\tshow: boolean\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nexport const SlideoutTransition: FC<SlideoutTransitionProps> = ({ show, className, children }) => (\n\t<motion.div\n\t\tclassName={clsx(className)}\n\t\tvariants={{\n\t\t\thidden: { opacity: 0 },\n\t\t\tvisible: { opacity: 1 },\n\t\t}}\n\t\ttransition={{\n\t\t\ttype: 'tween',\n\t\t\tease: 'easeOut',\n\t\t\tduration: 0.2,\n\t\t}}\n\t\tinitial=\"hidden\"\n\t\tanimate=\"visible\"\n\t\texit=\"hidden\"\n\t>\n\t\t{children}\n\t</motion.div>\n)\n\ninterface ToastTransitionProps {\n\tshow: boolean\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nexport const ToastTransition: FC<ToastTransitionProps> = ({ show, className, children }) => (\n\t<AnimatePresence>\n\t\t{show && (\n\t\t\t<motion.div\n\t\t\t\tclassName={clsx(className, 'z-40')}\n\t\t\t\tstyle={{ originY: 1, originX: 1 } as MotionStyle}\n\t\t\t\tvariants={{\n\t\t\t\t\thidden: { scale: 0.95, opacity: 0 },\n\t\t\t\t\tvisible: { scale: 1, opacity: 1 },\n\t\t\t\t}}\n\t\t\t\ttransition={{\n\t\t\t\t\ttype: 'tween',\n\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\tduration: 0.3,\n\t\t\t\t}}\n\t\t\t\tinitial=\"hidden\"\n\t\t\t\tanimate=\"visible\"\n\t\t\t\texit=\"hidden\"\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</motion.div>\n\t\t)}\n\t</AnimatePresence>\n)\n","import { FC } from 'react'\nimport * as ReactDOM from 'react-dom'\n\nconst mountedAlerts: HTMLDivElement[] = []\n\ninterface DialogContentType<T> {\n\tresolve: (x?: T) => void\n\tclose: () => void\n}\n\nfunction alert<T>(DialogContent: FC<DialogContentType<T>>): Promise<T | undefined> {\n\treturn new Promise((resolvePromise) => {\n\t\tconst alertRoot = document.createElement('div')\n\t\tconst body = document.body\n\t\tbody.appendChild(alertRoot)\n\t\tmountedAlerts.push(alertRoot)\n\n\t\tconst close = () => {\n\t\t\tReactDOM.unmountComponentAtNode(alertRoot)\n\t\t\tmountedAlerts.splice(\n\t\t\t\tmountedAlerts.findIndex((x) => x === alertRoot),\n\t\t\t\t1\n\t\t\t)\n\t\t\tif (document.contains(alertRoot)) {\n\t\t\t\tdocument.body.removeChild(alertRoot)\n\t\t\t}\n\t\t}\n\n\t\tconst resolve = (x?: T) => resolvePromise(x)\n\n\t\tReactDOM.render(<DialogContent resolve={resolve} close={close} />, alertRoot)\n\t})\n}\n\nexport default alert\n","import { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface DividerProps {\n\tclassName?: ClassValue\n}\n\nconst Divider: FC<DividerProps> = ({ className }) => (\n\t<div\n\t\tclassName={clsx('border-t border-black dark:border-white border-opacity-10 dark:border-opacity-10', className)}\n\t/>\n)\n\nexport default Divider\n","import { FC, ReactNode, useEffect, useState } from 'react'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\n\ninterface AutoHeightProps {\n\tshow: boolean\n\tchildren: ReactNode\n\tstyle?: { [x: string]: string }\n}\n\nconst AutoHeight: FC<AutoHeightProps> = ({ show, style, children }) => {\n\tconst [initialState, setInitialState] = useState(show)\n\tconst [isAnimating, setAnimating] = useState(false)\n\tconst [isVisible, setVisible] = useState<boolean>(show)\n\n\tuseEffect(() => {\n\t\tif (show) {\n\t\t\tsetAnimating(true)\n\t\t\tsetTimeout(() => setVisible(true), 1)\n\t\t\tsetTimeout(() => setAnimating(false), 400)\n\t\t} else {\n\t\t\tsetAnimating(true)\n\t\t\tsetTimeout(() => setVisible(false), 1)\n\t\t\tsetTimeout(() => setAnimating(false), 400)\n\t\t}\n\t}, [show])\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{isVisible && (\n\t\t\t\t<motion.div\n\t\t\t\t\tstyle={\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toriginY: 0,\n\t\t\t\t\t\t\tpadding: '0.5rem',\n\t\t\t\t\t\t\tmargin: '-0.5rem',\n\t\t\t\t\t\t\toverflow: isAnimating ? 'hidden' : 'visible',\n\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t} as MotionStyle\n\t\t\t\t\t}\n\t\t\t\t\tvariants={{\n\t\t\t\t\t\thidden: { height: 0 },\n\t\t\t\t\t\tvisible: { height: 'auto' },\n\t\t\t\t\t}}\n\t\t\t\t\ttransition={{\n\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\tduration: 0.3,\n\t\t\t\t\t}}\n\t\t\t\t\tonAnimationComplete={() => setInitialState(false)}\n\t\t\t\t\tinitial={initialState ? 'visible' : 'hidden'}\n\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\texit=\"hidden\"\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</motion.div>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t)\n}\n\nexport default AutoHeight\n","import { ReactNode, SetStateAction } from 'react'\nimport { AxiosError } from 'axios'\nimport { Placement } from '@popperjs/core/index'\n\nexport const isAxiosError = (obj: any): obj is AxiosError => typeof obj === 'object' && obj.isAxiosError === true\n\nexport type IntentType =\n\t| 'primary'\n\t| 'secondary'\n\t| 'light'\n\t| 'save'\n\t| 'danger'\n\t| 'menu'\n\t| 'menu-danger'\n\t| 'sidebar-menu'\n\t| 'sub-menu'\n\t| 'borderless'\n\t| 'invisible'\n\t| 'none'\n\nexport type ButtonSize = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'inline'\n\nexport type ButtonRoundness = 'none' | 'sm' | 'rounded' | 'md' | 'lg' | 'full'\n\nexport type None = undefined | '' | false | null\n\nexport const isNotNone = <T>(x: T | None): x is T => {\n\treturn x !== undefined && x !== '' && x !== false && x !== null\n}\n\nexport type Nullish = undefined | null\n\nexport const isNotNullish = <T>(x: T | Nullish): x is T => {\n\treturn typeof x !== 'undefined' && x !== null\n}\n\nexport interface BaseActionType {\n\ttitle?: ReactNode\n\tintent?: IntentType\n\tclassName?: string\n\ticon?: ReactNode\n\ticonSide?: 'left' | 'right'\n\tdisabled?: boolean\n\tsize?: ButtonSize\n\trounded?: ButtonRoundness\n}\n\nexport interface LinkActionType extends BaseActionType {\n\tto: string\n\tstate?: { [x: string]: any }\n\treplace?: boolean\n}\n\nexport const isLinkActionType = (action: any): action is LinkActionType => typeof action.to === 'string'\n\nexport interface ButtonActionType extends BaseActionType {\n\tonClick: (e: any) => void\n\ttype?: 'button' | 'submit'\n\tisLoading?: boolean\n\tdisableDismiss?: boolean\n}\n\nexport const isButtonActionType = (action: any): action is ButtonActionType => typeof action.onClick === 'function'\n\nexport interface SubmitActionType extends BaseActionType {\n\ttype: 'submit'\n\tisLoading?: boolean\n}\n\nexport const isSubmitActionType = (action: any): action is ButtonActionType => action.type === 'submit'\n\nexport interface DividerActionType extends BaseActionType {\n\tdivider: true\n}\n\nexport const isDividerActionType = (action: any): action is DividerActionType => action?.divider === true\n\nexport interface ActionMenuActionType extends BaseActionType {\n\tactions: ActionType[] | (ActionType[] | None)[]\n\tplacement?: Placement\n\toffset?: number | [number, number]\n\thoverable?: boolean\n}\n\nexport const isActionMenuActionType = (action: any): action is ActionMenuActionType => action.actions instanceof Array\n\nexport interface CustomMenuActionType extends BaseActionType {\n\tmenu: ReactNode\n\tmaxWidth?: number\n\tplacement?: Placement\n}\n\nexport const isCustomMenuActionType = (action: any): action is CustomMenuActionType => !!action.menu\n\nexport interface RenderActionType extends BaseActionType {\n\trender: ReactNode\n}\n\nexport const isRenderActionType = (action: any): action is RenderActionType => !!action.render\n\nexport type ActionType =\n\t| LinkActionType\n\t| ButtonActionType\n\t| SubmitActionType\n\t| ActionMenuActionType\n\t| CustomMenuActionType\n\t| DividerActionType\n\t| RenderActionType\n\t| None\n\nexport interface RouteConfig {\n\ttitle: string\n\ticon: ReactNode\n\tshow?: () => boolean\n\texact: boolean\n\tchildren?: RouteConfig[]\n\ttooltip?: ReactNode\n}\n\nexport interface LinkRouteConfig extends RouteConfig {\n\tto: string\n}\n\nexport const isLinkRouteConfig = (x: any): x is LinkRouteConfig => typeof x.to !== 'undefined'\n\nexport interface AnchorRouteConfig extends RouteConfig {\n\turl: string\n}\n\nexport const isAnchorRouteConfig = (x: any): x is AnchorRouteConfig => typeof x.url !== 'undefined'\n\nexport type SetState<T> = (x: SetStateAction<T>) => void\n\nexport interface BaseTabType {\n\ttitle: ReactNode\n\tsimpleTitle?: string\n\terrors?: number\n\tkey?: number | string\n}\n\nexport interface LinkTabType extends BaseTabType {\n\tto: string\n\tstate?: { [x: string]: any }\n\treplace?: boolean\n}\n\nexport const isLinkTabType = (action: any): action is LinkTabType => typeof action.to === 'string'\n\nexport interface ButtonTabType extends BaseTabType {\n\tonClick: (item: TabType, n: number) => void\n}\n\nexport const isButtonTabType = (action: any): action is ButtonTabType => typeof action.onClick === 'function'\n\nexport type TabType = LinkTabType | ButtonTabType\n\nexport interface PaginatedSet<T> {\n\titems: T[]\n\tpageNumber: number\n\tpageSize: number\n\ttotalCount: number\n\ttotalPages: number\n}\n\nexport interface FilterFormProps {\n\tclear: () => void\n}\n\nexport const isFile = (x: any): x is File => x instanceof File\n\nexport type RefetchFn = () => Promise<unknown>\n\nexport type ModalResolveFn<T = unknown> = (answer?: T) => void\nexport type SlideoutResolveFn<T = unknown> = (answer?: T) => void\n\nexport interface PresetValue<T> {\n\tvalue: T\n\tlocked?: boolean\n}\n\nexport type Keyed<T> = T & { key: string }\n\nexport interface PaginationSearch {\n\t[x: string]: any\n}\n\nexport interface PaginationState {\n\tpage: number\n\tpageSize: number\n\torderBy?: string\n\torderDir: number\n\tsearch?: PaginationSearch\n}\n\nexport interface InitialPaginationState {\n\tpage?: number\n\tpageSize?: number\n\torderBy?: string\n\torderDir?: number\n\tsearch?: PaginationSearch\n}\n","import { Children, FC, Fragment, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport Divider from '@primer/components/Divider'\nimport AutoHeight from '@primer/components/AutoHeight'\nimport { omit } from 'ramda'\nimport { isNotNone } from '@primer/types'\n\ninterface StackProps {\n\tspace?: SpaceType\n\tdividers?: boolean\n\tchildren: ReactNode\n\tclassName?: ClassValue\n}\n\ntype SpaceType = 0 | 1 | 2 | 3 | 4 | 6 | 8\n\nconst spaces = {\n\t0: '',\n\t1: 'pt-1',\n\t2: 'pt-2',\n\t3: 'pt-3',\n\t4: 'pt-4',\n\t6: 'pt-6',\n\t8: 'pt-8',\n}\n\nconst Stack: FC<StackProps> = ({ space = 6, dividers, className, children }: StackProps) => {\n\tconst items = Children.toArray(children)\n\n\tconst filteredItems = items.reduce<ReactNode[]>((list, x, i) => {\n\t\t// @ts-ignore\n\t\tconst type = x?.type\n\t\t// @ts-ignore\n\t\tconst children: ReactNode[] | null = x?.props?.children || null\n\t\t// @ts-ignore\n\t\tconst props = omit(['children', 'show'], x.props) || null\n\t\t// @ts-ignore\n\t\tconst show = x?.props?.show || null\n\n\t\tif (type === Fragment) {\n\t\t\treturn list.concat(children)\n\t\t}\n\n\t\treturn [\n\t\t\t...list,\n\t\t\ttype === AutoHeight ? (\n\t\t\t\t<AutoHeight show={show} {...props}>\n\t\t\t\t\t<div className={clsx(i > 0 && spaces[space || 0])}>\n\t\t\t\t\t\t{dividers && i > 0 && <Divider className={spaces[space || 0]} />}\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</div>\n\t\t\t\t</AutoHeight>\n\t\t\t) : (\n\t\t\t\tx\n\t\t\t),\n\t\t]\n\t}, [])\n\n\treturn (\n\t\t<div className={clsx(`flex flex-col`, className)}>\n\t\t\t{filteredItems.filter(isNotNone).map((item, i) =>\n\t\t\t\t// @ts-ignore\n\t\t\t\titem.type === AutoHeight ? (\n\t\t\t\t\t<Fragment key={i}>{item}</Fragment>\n\t\t\t\t) : (\n\t\t\t\t\t<div key={i} className={clsx(i > 0 && spaces[space || 0])}>\n\t\t\t\t\t\t{dividers && i > 0 && <Divider className={spaces[space || 0]} />}\n\t\t\t\t\t\t{item}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default Stack\n","import { useEffect, useRef } from \"react\"\n\nconst useAutoFocus = <T = HTMLElement>(enabled: boolean = true) => {\n\tconst ref = useRef<T>(null)\n\n\tuseEffect(() => {\n\t\tif (ref.current && enabled) { \n\t\t\t// @ts-ignore\n\t\t\tif (typeof ref.current?.focus === 'function') {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tref.current?.focus()\n\t\t\t\t}, 100)\n\t\t\t}\n\t\t}\n\t}, [enabled])\n\n\treturn ref\n}\n\nexport default useAutoFocus","import { ReactNode, MouseEvent, forwardRef, ElementType } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { IntentType, ButtonSize, ButtonRoundness } from '@primer/types'\nimport { Spinner } from './Icon'\n\nexport const sizes = {\n\txs: 'px-2.5 py-1.5 text-xs leading-4',\n\tsm: 'px-3 py-2 text-sm leading-4',\n\tmd: 'px-4 py-2 text-sm leading-5',\n\tlg: 'px-4 py-2 text-base leading-6',\n\txl: 'px-6 py-3 text-base leading-6',\n\tinline: '',\n}\n\nexport const roundedness = {\n\tnone: '',\n\tsm: 'rounded-sm',\n\trounded: 'rounded',\n\tmd: 'rounded-md',\n\tlg: 'rounded-lg',\n\tfull: 'rounded-full',\n}\n\nexport const intents = {\n\tprimary: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-white dark:text-white',\n\t\t\t'border-0 border-primary-500',\n\t\t\t'bg-primary-600 hover:bg-primary-700 dark:bg-primary-600 dark:hover:bg-primary-500 active:bg-primary-700 dark:active:bg-primary-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-primary-300 dark:focus:ring-primary-300 dark:ring-offset-gray-800',\n\t\t\t'disabled:opacity-50'\n\t\t),\n\t},\n\tsecondary: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'border-gray-300 focus:border-primary-500 dark:border-gray-600 dark:focus:border-primary-500',\n\t\t\t'text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white',\n\t\t\t'bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-1 focus:ring-primary-500 dark:focus:ring-primary-500',\n\t\t\t'disabled:opacity-50'\n\t\t),\n\t},\n\tlight: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-gray-800 dark:text-white',\n\t\t\t'border-0 border-gray-500',\n\t\t\t'bg-gray-100 hover:bg-gray-200 dark:bg-gray-600 dark:hover:bg-gray-500 active:bg-gray-300 dark:active:bg-gray-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-300 dark:ring-offset-gray-800',\n\t\t\t'disabled:opacity-50'\n\t\t),\n\t},\n\tsave: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-white dark:text-white',\n\t\t\t'border-0',\n\t\t\t'bg-emerald-500 hover:bg-emerald-600 dark:bg-emerald-500 hover:bg-emerald-400 dark:hover:bg-emerald-400 active:bg-emerald-600 dark:active:bg-emerald-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-emerald-300 dark:focus:ring-emerald-700'\n\t\t),\n\t},\n\tdanger: {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center font-medium border transition ease-in-out duration-150 antialiased',\n\t\t\t'disabled:cursor-not-allowed',\n\t\t\t'text-white dark:text-white',\n\t\t\t'border-0',\n\t\t\t'bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-500 active:bg-red-700 dark:active:bg-red-700',\n\t\t\t'focus:outline-none dark:focus:outline-none focus:ring-2 focus:ring-red-300 dark:focus:ring-red-300'\n\t\t),\n\t},\n\tmenu: {\n\t\tspan: 'flex',\n\t\tbutton: clsx(\n\t\t\t'w-8 h-8 inline-flex items-center justify-center rounded-full',\n\t\t\t'bg-transparent hover:bg-primary-300 hover:bg-opacity-25 dark:hover:bg-primary-300 dark:hover:bg-opacity-25 focus:bg-primary-200',\n\t\t\t'text-gray-400 hover:text-gray-500 focus:text-gray-500 dark:hover:text-gray-300',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t'transition ease-in-out duration-100',\n\t\t\t'dark:hover:bg-gray-800 dark:focus:bg-gray-900 dark:hover:text-gray-400'\n\t\t),\n\t},\n\t'menu-danger': {\n\t\tspan: 'inline-flex', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'w-8 h-8 inline-flex items-center justify-center rounded-full',\n\t\t\t'bg-transparent hover:bg-red-300 hover:bg-opacity-25 dark:hover:bg-red-300 dark:hover:bg-opacity-25 focus:bg-red-200',\n\t\t\t'text-red-400 hover:text-red-500 focus:text-red-500 dark:hover:text-red-300',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t'transition ease-in-out duration-100',\n\t\t\t'dark:hover:bg-red-800 dark:focus:bg-red-900 dark:hover:text-red-400'\n\t\t),\n\t},\n\t'sidebar-menu': {\n\t\tspan: 'flex',\n\t\tbutton: clsx(\n\t\t\t'w-8 h-8 inline-flex items-center justify-center rounded-full',\n\t\t\t'bg-transparent hover:bg-gray-700 focus:bg-gray-600',\n\t\t\t'text-gray-400 hover:text-gray-300 focus:text-gray-200',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t'transition ease-in-out duration-100',\n\t\t\t'dark:hover:bg-gray-800 dark:focus:bg-gray-900 dark:hover:text-gray-400'\n\t\t),\n\t},\n\t'sub-menu': {\n\t\tspan: 'flex',\n\t\tbutton: 'flex items-center justify-between text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 transition duration-150 ease-in-out font-normal dark:text-gray-200 dark:hover:bg-gray-800 dark:focus:bg-gray-750',\n\t},\n\tborderless: {\n\t\tspan: 'inline hover', // shadow-sm\n\t\tbutton: clsx(\n\t\t\t'inline text-left border border-transparent hover:border-gray-300 focus:bg-gray-50 transition ease-in-out duration-150 dark:hover:border-gray-600 dark:focus:bg-gray-750',\n\t\t\t'focus:border-primary-500 dark:focus:border-primary-500',\n\t\t\t'focus:outline-none focus:ring-1 focus:ring-primary-500'\n\t\t),\n\t},\n\tinvisible: {\n\t\tspan: 'inline',\n\t\tbutton: clsx(\n\t\t\t'inline-flex items-center text-left border border-transparent',\n\t\t\t'hover:bg-gray-800 dark:hover:bg-gray-100 bg-opacity-10 hover:bg-opacity-10 dark:hover:bg-opacity-10',\n\t\t\t'focus:outline-none focus:ring-2 focus:ring-primary-500'\n\t\t),\n\t},\n\tnone: {\n\t\tspan: '',\n\t\tbutton: '',\n\t},\n}\n\ninterface ButtonProps {\n\tonClick?: (e: MouseEvent) => void\n\tchildren: ReactNode\n\tclassName?: ClassValue\n\tintent?: IntentType\n\ttype?: 'button' | 'submit'\n\tdisabled?: boolean\n\tisLoading?: boolean\n\tsize?: ButtonSize\n\trounded?: ButtonRoundness\n\tas?: ElementType\n}\n\nconst Button = forwardRef<HTMLElement, ButtonProps>(\n\t(\n\t\t{\n\t\t\tonClick,\n\t\t\ttype = 'button',\n\t\t\tintent = 'secondary',\n\t\t\tsize = 'md',\n\t\t\trounded = 'rounded',\n\t\t\tdisabled,\n\t\t\tisLoading,\n\t\t\tclassName,\n\t\t\tas = 'button',\n\t\t\tchildren,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst Comp = as\n\n\t\tconst attrs = {}\n\n\t\tif (as === 'button') {\n\t\t\t// @ts-ignore\n\t\t\tattrs.type = type\n\t\t}\n\n\t\treturn (\n\t\t\t<span className={clsx('inline-flex select-none', intents[intent].span, roundedness[rounded])} ref={ref}>\n\t\t\t\t<Comp\n\t\t\t\t\t{...attrs}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'focus:outline-none',\n\t\t\t\t\t\tintents[intent].button,\n\t\t\t\t\t\tsizes[size],\n\t\t\t\t\t\troundedness[rounded],\n\t\t\t\t\t\tclassName\n\t\t\t\t\t)}\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tdisabled={disabled || isLoading || false}\n\t\t\t\t>\n\t\t\t\t\t{isLoading && <Spinner className=\"animate-spin -ml-1 mr-3 h-4 w-4\" />}\n\t\t\t\t\t{children}\n\t\t\t\t</Comp>\n\t\t\t</span>\n\t\t)\n\t}\n)\n\nexport default Button\n","import { FC, ReactNode, useState, useRef, MouseEvent } from 'react'\nimport { BackdropTransition, AlertTransition } from '@primer/components/AlertTransition'\nimport alert from '@primer/utils/alert'\nimport { Spinner } from '@primer/components/Icon'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport {\n\tintents as buttonIntents,\n\troundedness as buttonRoundness,\n\tsizes as buttonSizes,\n} from '@primer/components/Button'\nimport clsx from 'clsx'\n\ntype ConfirmIntent = 'danger' | 'primary'\n\ninterface ConfirmProps {\n\tresolve: (x?: boolean | undefined) => void\n\tclose: () => void\n\ttitle: ReactNode\n\tmessage?: ReactNode\n\tbuttonLabel?: ReactNode\n\tdismissable?: boolean\n\tintent?: ConfirmIntent\n\tonAccept?: () => Promise<any> | void\n}\n\nconst Confirm: FC<ConfirmProps> = ({\n\tresolve,\n\tclose,\n\ttitle,\n\tmessage,\n\tbuttonLabel = 'Yes',\n\tdismissable = true,\n\tintent = 'danger',\n\tonAccept,\n}) => {\n\tconst [open, setOpen] = useState(true)\n\tconst [loading, setLoading] = useState(false)\n\tconst ref = useRef<HTMLDivElement>(null)\n\n\tconst autoFocusRef = useAutoFocus<HTMLButtonElement>()\n\n\tconst closeAlert = (x: boolean) => {\n\t\tsetOpen(false)\n\t\tresolve(x)\n\t\tsetTimeout(() => {\n\t\t\tclose()\n\t\t}, 300)\n\t}\n\n\tconst handleAccept = async () => {\n\t\tif (onAccept) {\n\t\t\tsetLoading(true)\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 500))\n\t\t\tawait onAccept()\n\t\t\tcloseAlert(true)\n\t\t} else {\n\t\t\tcloseAlert(true)\n\t\t}\n\t}\n\n\treturn (\n\t\t<BackdropTransition show={open}>\n\t\t\t<div\n\t\t\t\tclassName=\"fixed inset-0 w-screen h-screen flex p-4 justify-center bg-black bg-opacity-50 overflow-y-auto z-60 backdrop-filter backdrop-grayscale\"\n\t\t\t\tonClick={(e: MouseEvent) => {\n\t\t\t\t\tif (e.target === ref.current) {\n\t\t\t\t\t\tdismissable && !loading && closeAlert(false)\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tref={ref}\n\t\t\t>\n\t\t\t\t<AlertTransition\n\t\t\t\t\tshow={open}\n\t\t\t\t\tclassName=\"w-full pointer-events-none sm:flex sm:justify-center sm:items-start\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"bg-white dark:bg-gray-700 rounded-lg overflow-hidden shadow-xl sm:max-w-lg sm:w-full pointer-events-auto\"\n\t\t\t\t\t\tref={dismissable ? ref : undefined}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"bg-white dark:bg-gray-700 px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n\t\t\t\t\t\t\t<div className=\"sm:flex sm:items-start\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-red-100 text-red-600': intent === 'danger',\n\t\t\t\t\t\t\t\t\t\t\t'bg-indigo-100 text-indigo-600': intent === 'primary',\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg className=\"h-6 w-6\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n\t\t\t\t\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 dark:text-white\">\n\t\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t\t\t\t{message && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-2 text-sm leading-5 text-gray-500 dark:text-gray-300\">\n\t\t\t\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"bg-gray-50 dark:bg-gray-750 px-4 py-3 sm:px-6 flex flex-col-reverse sm:flex-row justify-end sm:space-x-3\">\n\t\t\t\t\t\t\t<span className={clsx(buttonIntents.danger.span, buttonRoundness.md)}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={() => closeAlert(false)}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t// className=\"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:ring transition ease-in-out duration-150 sm:text-sm sm:leading-5 antialiased disabled:opacity-50 disabled:cursor-not-allowed dark:border-gray-600 dark:text-gray-200 dark:bg-gray-700 dark:hover:text-white dark:focus:bg-gray-700\"\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\tbuttonIntents.secondary.button,\n\t\t\t\t\t\t\t\t\t\tbuttonSizes.md,\n\t\t\t\t\t\t\t\t\t\tbuttonRoundness.md,\n\t\t\t\t\t\t\t\t\t\t'w-full sm:w-auto justify-center'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t\ttabIndex={1}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<span className={clsx(buttonIntents[intent].span, buttonRoundness.md)}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tonClick={handleAccept}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t// className=\"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-red-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-red-500 focus:outline-none focus:border-red-700 focus:ring-red transition ease-in-out duration-150 sm:text-sm sm:leading-5 antialiased\"\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\tbuttonIntents[intent].button,\n\t\t\t\t\t\t\t\t\t\tbuttonSizes.md,\n\t\t\t\t\t\t\t\t\t\tbuttonRoundness.md,\n\t\t\t\t\t\t\t\t\t\t'w-full sm:w-auto justify-center mb-3 sm:mb-0'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t\t\tref={autoFocusRef}\n\t\t\t\t\t\t\t\t\ttabIndex={2}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t{loading && <Spinner className=\"animate-spin -ml-1 mr-3 w-4 h-4\" />}\n\t\t\t\t\t\t\t\t\t\t{buttonLabel}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</AlertTransition>\n\t\t\t</div>\n\t\t</BackdropTransition>\n\t)\n}\n\nexport default Confirm\n\nexport const confirm = async ({\n\ttitle,\n\tmessage,\n\tintent,\n\tbuttonLabel,\n\tonAccept,\n}: {\n\ttitle: ReactNode\n\tmessage?: ReactNode\n\tintent?: ConfirmIntent\n\tbuttonLabel?: ReactNode\n\tonAccept?: () => Promise<any> | void\n}) => {\n\tconst answer = await alert<boolean>(({ resolve, close }) => (\n\t\t<Confirm\n\t\t\tresolve={resolve}\n\t\t\tclose={close}\n\t\t\ttitle={title}\n\t\t\tmessage={message}\n\t\t\tbuttonLabel={buttonLabel}\n\t\t\tonAccept={onAccept}\n\t\t\tdismissable={true}\n\t\t\tintent={intent}\n\t\t/>\n\t))\n\n\treturn answer\n}\n","import { ReactNode, useRef, MouseEvent, useCallback, useState } from 'react'\n// import { BackdropTransition, SlideoutTransition } from '@primer/components/AlertTransition'\nimport alert from '@primer/utils/alert'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\nimport { SlideoutResolveFn } from '@primer/types'\nimport clsx from 'clsx'\n\nconst sizes = {\n\tsm: 'max-w-sm',\n\tmd: 'max-w-md',\n\tlg: 'max-w-lg',\n\txl: 'max-w-xl',\n\t'2xl': 'max-w-2xl',\n}\n\nexport type SizeValue = keyof typeof sizes\n\ninterface SlideoutProps<T> {\n\tresolve: SlideoutResolveFn<T>\n\tclose: () => void\n\tdismissable?: boolean\n\tsize?: SizeValue\n\tmode?: 'dark' | ''\n\tchildren: (close: SlideoutResolveFn<T>) => ReactNode\n}\n\nfunction Slideout<T>({ close, resolve, children, size = 'md', mode = '', dismissable = true }: SlideoutProps<T>) {\n\tconst [open, setOpen] = useState(true)\n\n\tconst closeSlideout = useCallback(\n\t\t(x) => {\n\t\t\tresolve(x)\n\n\t\t\tsetOpen(false)\n\t\t\tsetTimeout(() => {\n\t\t\t\tclose()\n\t\t\t}, 500)\n\t\t},\n\t\t[close, resolve]\n\t)\n\n\tconst backdropRef = useRef<HTMLDivElement>(null)\n\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{open && (\n\t\t\t\t<motion.div\n\t\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\t\tvariants={{\n\t\t\t\t\t\thidden: { opacity: 0 },\n\t\t\t\t\t\tvisible: { opacity: 1 },\n\t\t\t\t\t}}\n\t\t\t\t\ttransition={{\n\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\tduration: 0.2,\n\t\t\t\t\t}}\n\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\texit=\"hidden\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx('fixed z-40 inset-0 overflow-hidden', mode)}\n\t\t\t\t\t\tonClick={(e: MouseEvent) => {\n\t\t\t\t\t\t\tif (e.target === backdropRef.current) {\n\t\t\t\t\t\t\t\tdismissable && closeSlideout(false)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={backdropRef}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"absolute z-40 inset-0 overflow-hidden\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"absolute z-40 inset-0 bg-black bg-opacity-50 transition-opacity backdrop-filter backdrop-grayscale\"\n\t\t\t\t\t\t\t\tonClick={() => closeSlideout(false)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<section className={clsx('absolute z-40 inset-y-0 right-0 w-full flex', sizes[size])}>\n\t\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\t\tclassName=\"pointer-events-none flex-1\"\n\t\t\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\t\t\thidden: { x: '100%' },\n\t\t\t\t\t\t\t\t\t\tvisible: { x: '0%' },\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\t\t\tduration: 0.2,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"pointer-events-auto h-full w-full\">{children(closeSlideout)}</div>\n\t\t\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</motion.div>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t)\n}\n\nexport default Slideout\n\ninterface slideoutProps<T> {\n\tdismissable?: boolean\n\tsize?: SizeValue\n\tmode: 'dark' | ''\n\tchildren: (close: SlideoutResolveFn<T>) => ReactNode\n}\n\nexport function slideout<T = boolean>({ dismissable, size, mode = '', children }: slideoutProps<T>) {\n\treturn alert<T>(({ resolve, close }) => {\n\t\treturn (\n\t\t\t<Slideout\n\t\t\t\tresolve={resolve}\n\t\t\t\tclose={close}\n\t\t\t\tchildren={children}\n\t\t\t\tdismissable={dismissable}\n\t\t\t\tsize={size}\n\t\t\t\tmode={mode}\n\t\t\t/>\n\t\t)\n\t})\n}\n","import { ReactElement } from 'react'\nimport * as ReactDOM from 'react-dom'\n\nconst toastRoot = document.createElement('div')\ntoastRoot.className = 'flex flex-col justify-start fixed inset-0 pointer-events-none z-50'\ndocument.body.appendChild(toastRoot)\n\nconst toast = (DialogContent: (props: { giveAnswer: (answer: boolean) => void }) => ReactElement): Promise<boolean> =>\n\tnew Promise((res) => {\n\t\tconst toastContainer = document.createElement('div')\n\t\ttoastRoot.appendChild(toastContainer)\n\n\t\tconst giveAnswer = (answer: boolean) => {\n\t\t\tReactDOM.unmountComponentAtNode(toastContainer)\n\t\t\tres(answer)\n\t\t}\n\n\t\tReactDOM.render(<DialogContent giveAnswer={giveAnswer} />, toastContainer)\n\t})\n\nexport default toast\n","export const holidays = [\n\t{ name: \"New Year's Day\", date: new Date('1 Jan 2021') },\n\t{ name: \"Day after New Year's Day\", date: new Date('4 Jan 2021') },\n\t{ name: 'Waitangi Day', date: new Date('8 Feb 2021') },\n\t{ name: 'Good Friday', date: new Date('2 Apr 2021') },\n\t{ name: 'Easter Monday', date: new Date('5 Apr 2021') },\n\t{ name: 'Anzac Day', date: new Date('26 Apr 2021') },\n\t{ name: \"Queen's Birthday\", date: new Date('7 Jun 2021') },\n\t{ name: 'Labour Day', date: new Date('25 Oct 2021') },\n\t{ name: 'Christmas Day', date: new Date('27 Dec 2021') },\n\t{ name: 'Boxing Day', date: new Date('28 Dec 2021') },\n\n\t{ name: \"New Year's Day\", date: new Date('3 Jan 2022') },\n\t{ name: \"Day after New Year's Day\", date: new Date('4 Jan 2022') },\n\t{ name: 'Waitangi Day', date: new Date('7 Feb 2022') },\n\t{ name: 'Good Friday', date: new Date('15 Apr 2022') },\n\t{ name: 'Easter Monday', date: new Date('18 Apr 2022') },\n\t{ name: 'Anzac Day', date: new Date('25 Apr 2022') },\n\t{ name: \"Queen's Birthday\", date: new Date('6 Jun 2022') },\n\t{ name: 'Matariki', date: new Date('24 Jun 2022') },\n\t{ name: 'Labour Day', date: new Date('24 Oct 2022') },\n\t{ name: 'Christmas Day', date: new Date('26 Dec 2022') },\n\t{ name: 'Boxing Day', date: new Date('27 Dec 2022') },\n]\n","export const env = process.env.REACT_APP_ENV || 'dev'\nexport const site = process.env.REACT_APP_SITE || 'dev'\n\nconst registry = 'nzdrc-icra.azurewebsites.net'\n\ninterface Environment {\n\turl: string\n\tregistry: string\n}\n\nconst environments: { [x: string]: Environment } = {\n\tdev: {\n\t\turl: 'https://nzdrc-api-dev.azurewebsites.net/api',\n\t\tregistry,\n\t},\n\tstaging: {\n\t\turl: 'https://nzdrc-api-stage.azurewebsites.net/api',\n\t\tregistry,\n\t},\n\tdemo: {\n\t\turl: 'https://nzdrc-api-demo.azurewebsites.net/api',\n\t\tregistry,\n\t},\n\tlivetest: {\n\t\turl: 'https://nzdrc-api.azurewebsites.net/api', //temporary\n\t\tregistry,\n\t},\n\tproduction: {\n\t\turl: 'https://nzdrc-api.azurewebsites.net/api',\n\t\tregistry,\n\t},\n}\n\nexport default environments[site]\n","import { useRef, useCallback, RefCallback, useMemo } from 'react'\nimport { createPopper, Options } from '@popperjs/core/lib/popper-lite'\nimport flip from '@popperjs/core/lib/modifiers/flip'\nimport offset from '@popperjs/core/lib/modifiers/offset'\nimport preventOverflow from '@popperjs/core/lib/modifiers/preventOverflow'\n\n/**\n * Example implementation to use Popper: https://popper.js.org/\n */\nexport function usePopper(options?: Partial<Options>): [RefCallback<Element | null>, RefCallback<HTMLElement | null>] {\n\tconst reference = useRef<Element | null>(null)\n\tconst popper = useRef<HTMLElement | null>(null)\n\n\tconst cleanupCallback = useRef(() => {})\n\n\tconst instantiatePopper = useCallback(() => {\n\t\tif (!reference.current) return\n\t\tif (!popper.current) return\n\n\t\tif (cleanupCallback.current) cleanupCallback.current()\n\n\t\tcleanupCallback.current = createPopper(reference.current, popper.current, {\n\t\t\t...options,\n\t\t\tmodifiers: [flip, offset, preventOverflow, ...(options?.modifiers || [])],\n\t\t}).destroy\n\t}, [reference, popper, cleanupCallback, options])\n\n\treturn useMemo(\n\t\t() => [\n\t\t\t(referenceDomNode) => {\n\t\t\t\treference.current = referenceDomNode\n\t\t\t\tinstantiatePopper()\n\t\t\t},\n\t\t\t(popperDomNode) => {\n\t\t\t\tpopper.current = popperDomNode\n\t\t\t\tinstantiatePopper()\n\t\t\t},\n\t\t],\n\t\t[reference, popper, instantiatePopper]\n\t)\n}\n","import { useState, useEffect, useCallback } from 'react'\nimport useClickOutside from 'react-cool-onclickoutside'\n\ninterface DismissableOptions {\n\tonOpen?: () => void\n\tonClose?: () => void\n}\n\nconst useDismissable = (options: DismissableOptions = {}) => {\n\tconst [open, setOpen] = useState(false)\n\n\tconst [ignoreClass] = useState(`ignore-dismissable-${Math.floor(Math.random() * 999999)}`)\n\n\tconst close = useCallback(() => {\n\t\toptions.onClose && options.onClose()\n\t\tsetOpen(false)\n\t}, [options])\n\n\tconst [prevState, setPrevState] = useState(open)\n\tuseEffect(() => {\n\t\tif (open !== prevState) {\n\t\t\toptions.onOpen && open && options.onOpen()\n\t\t\tsetPrevState(open)\n\t\t}\n\t}, [open, options, prevState])\n\n\tuseEffect(() => {\n\t\tconst handle = (e: KeyboardEvent) => e.key === 'Escape' && setOpen(false)\n\n\t\tif (open) {\n\t\t\twindow.addEventListener('keyup', handle)\n\t\t} else {\n\t\t\twindow.removeEventListener('keyup', handle)\n\t\t}\n\n\t\treturn () => window.removeEventListener('keyup', handle)\n\t}, [open, close])\n\n\tconst ref = useClickOutside(\n\t\t(e) => {\n\t\t\tsetOpen(false)\n\t\t},\n\t\t{ ignoreClass }\n\t)\n\n\treturn { open, setOpen, ignoreClass, ref }\n}\n\nexport default useDismissable\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { usePopper } from '@primer/hooks/usePopper'\nimport { Placement } from '@popperjs/core/index'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\nimport useDismissable from '@primer/hooks/useDismissable'\n\ninterface CustomMenuProps {\n\tmenu: ReactNode\n\tchildren: (x: { onClick: () => void }) => ReactNode\n\tclassName?: ClassValue\n\tplacement?: Placement\n\tmaxWidth?: number\n}\n\nconst CustomMenu: FC<CustomMenuProps> = ({ placement = 'bottom-end', className, children, menu, maxWidth }) => {\n\tconst [reference, tooltip] = usePopper({\n\t\tplacement,\n\t\tstrategy: 'fixed',\n\t\tmodifiers: [\n\t\t\t{\n\t\t\t\tname: 'offset',\n\t\t\t\toptions: { offset: [0, 0] },\n\t\t\t},\n\t\t],\n\t})\n\n\tconst { open, setOpen, ignoreClass, ref } = useDismissable()\n\n\treturn (\n\t\t<div className={clsx('block text-left', className)}>\n\t\t\t{/*\n\t\t\t\t// @ts-ignore */}\n\t\t\t<div ref={reference} className={ignoreClass}>\n\t\t\t\t{children({ onClick: () => setOpen((x) => !x) })}\n\t\t\t</div>\n\n\t\t\t<div ref={tooltip} className=\"z-20\">\n\t\t\t\t<div ref={ref}>\n\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t{open && (\n\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\tclassName={clsx(className, 'relative z-60')}\n\t\t\t\t\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\t\thidden: { scale: 0.95, opacity: 0 },\n\t\t\t\t\t\t\t\t\tvisible: { scale: 1, opacity: 1 },\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\t\tduration: 0.2,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName=\"mt-2 rounded-md shadow-lg focus:outline-none\"\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tmaxWidth: maxWidth\n\t\t\t\t\t\t\t\t\t\t\t? typeof maxWidth === 'number'\n\t\t\t\t\t\t\t\t\t\t\t\t? maxWidth + 'px'\n\t\t\t\t\t\t\t\t\t\t\t\t: maxWidth\n\t\t\t\t\t\t\t\t\t\t\t: 'auto',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"rounded-md ring-1 ring-black ring-opacity-5 whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t{menu}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</AnimatePresence>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default CustomMenu\n","import { FC, ReactNode, useRef, useState } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { usePopper } from '@primer/hooks/usePopper'\nimport { Placement } from '@popperjs/core/index'\nimport { Menu } from '@headlessui/react'\nimport { AnimatePresence, motion, MotionStyle } from 'framer-motion'\nimport { Link } from '@reach/router'\nimport {\n\tActionType,\n\tisActionMenuActionType,\n\tisButtonActionType,\n\tisSubmitActionType,\n\tisLinkActionType,\n\tisCustomMenuActionType,\n\tisDividerActionType,\n\tisNotNone,\n\tIntentType,\n\tButtonSize,\n\tButtonRoundness as ButtonRoundnessType,\n\tNone,\n} from '@primer/types'\nimport Button, {\n\tintents as ButtonIntents,\n\tsizes as ButtonSizes,\n\troundedness as ButtonRoundness,\n} from '@primer/components/Button'\nimport CustomMenu from '@primer/components/CustomMenu'\n\nconst intents = {\n\tprimary:\n\t\t'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:hover:bg-gray-700 dark:focus:bg-gray-750 h-10',\n\tsecondary:\n\t\t'rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-primary-300 hover:bg-opacity-25 dark:hover:bg-primary-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:focus:bg-gray-750 active:bg-gray-200 dark:active:bg-gray-700 h-10',\n\tsave: 'rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-green-300 hover:bg-opacity-25 dark:hover:bg-green-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-green-100 hover:text-green-600 font-normal dark:text-green-200 dark:hover:bg-opacity-50 dark:hover:text-green-100 dark:focus:bg-green-400 active:bg-green-200 dark:active:bg-green-300 h-10',\n\tdanger: 'rounded-md block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-red-300 hover:bg-opacity-25 dark:hover:bg-red-300 dark:hover:bg-opacity-25 focus:outline-none focus:bg-red-100 hover:text-red-600 font-normal dark:text-red-200 dark:hover:bg-opacity-50 dark:hover:text-red-100 dark:focus:bg-red-400 active:bg-red-200 dark:active-bg-red-300 h-10',\n\tsubmit: 'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal h-10',\n\tcancel: 'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal',\n\tmenu: 'block',\n\t'sidebar-menu': '',\n\t'sub-menu':\n\t\t'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal dark:text-gray-200 dark:hover:bg-gray-800 dark:focus:bg-gray-750',\n\tanchor: 'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal',\n\tborderless:\n\t\t'block px-4 py-2 text-sm text-left w-full leading-5 text-gray-700 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 font-normal',\n\tinvisible: '',\n\tnone: '',\n\tlight: '',\n\t'menu-danger': '',\n}\n\ninterface ActionMenuProps {\n\tactions: ActionType[] | (ActionType[] | None)[]\n\tintent?: IntentType\n\tplacement?: Placement\n\toffset?: number | [number, number]\n\thoverable?: boolean\n\tdisabled?: boolean\n\tsize?: ButtonSize\n\trounded?: ButtonRoundnessType\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nconst ActionMenu: FC<ActionMenuProps> = ({\n\tactions,\n\tintent,\n\tplacement = 'bottom-end',\n\toffset = 10,\n\thoverable = false,\n\tdisabled = false,\n\tsize,\n\trounded = 'rounded',\n\tclassName,\n\tchildren,\n}) => {\n\tconst [reference, tooltip] = usePopper({\n\t\tplacement,\n\t\tstrategy: 'fixed',\n\t\tmodifiers: [\n\t\t\t{\n\t\t\t\tname: 'offset',\n\t\t\t\toptions: { offset: offset instanceof Array ? offset : [0, offset] },\n\t\t\t},\n\t\t],\n\t})\n\n\tconst [isHover, setHover] = useState(false)\n\tconst [hoverTimer, setHoverTimer] = useState<ReturnType<typeof setTimeout> | null>()\n\n\tconst isDeepArray = (x: Array<any>): x is (ActionType[] | None)[] => x.filter(isNotNone)[0] instanceof Array\n\n\tconst actionList: ActionType[] = isDeepArray(actions)\n\t\t? actions.filter(isNotNone).reduce((list: ActionType[], actions: ActionType[], index) => {\n\t\t\t\tif (index === 0) return [...actions]\n\t\t\t\treturn [...list, { divider: true }, ...actions.filter(isNotNone)]\n\t\t  }, [])\n\t\t: actions.filter(isNotNone)\n\n\tconst prevOpen = useRef(false)\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx('block text-left w-full', className)}\n\t\t\tonMouseOver={() => {\n\t\t\t\tif (hoverable) {\n\t\t\t\t\tsetHover(true)\n\t\t\t\t\tif (hoverTimer) {\n\t\t\t\t\t\tclearTimeout(hoverTimer)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t\tonMouseOut={() => {\n\t\t\t\tif (hoverable) {\n\t\t\t\t\tsetHoverTimer(\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tsetHover(false)\n\t\t\t\t\t\t}, 100)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t<Menu>\n\t\t\t\t{({ open }) => {\n\t\t\t\t\t/// I dunno man, triggering a window resize event fixes this usePopper hook, which I think is jank af\n\t\t\t\t\tif (open !== prevOpen.current) {\n\t\t\t\t\t\tprevOpen.current = open\n\t\t\t\t\t\tif (open) {\n\t\t\t\t\t\t\twindow.dispatchEvent(new Event('resize'))\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<span className={clsx(intent && ButtonIntents[intent].span, ButtonRoundness[rounded])}>\n\t\t\t\t\t\t\t\t<Menu.Button\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\tintent && ButtonIntents[intent].button,\n\t\t\t\t\t\t\t\t\t\tsize && ButtonSizes[size],\n\t\t\t\t\t\t\t\t\t\tButtonRoundness[rounded]\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\tref={reference}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t\t\t</Menu.Button>\n\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t<div ref={tooltip} className=\"z-20 whitespace-nowrap\">\n\t\t\t\t\t\t\t\t<AnimatePresence>\n\t\t\t\t\t\t\t\t\t{(open || isHover) && !disabled && (\n\t\t\t\t\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ originY: 0 } as MotionStyle}\n\t\t\t\t\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\t\t\t\t\thidden: { scale: 0.95, opacity: 0 },\n\t\t\t\t\t\t\t\t\t\t\t\tvisible: { scale: 1, opacity: 1 },\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 0.3,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Menu.Items\n\t\t\t\t\t\t\t\t\t\t\t\tstatic\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"max-w-screen origin-top-right bg-white dark:bg-gray-900 rounded-md shadow-lg outline-none\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 rounded-md ring-1 ring-black ring-opacity-5\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{actionList.filter(isNotNone).map((action, i) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisLinkActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item key={i} disabled={action.disabled}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${action.to}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex items-center',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstate={action.state}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treplace={action.replace}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isButtonActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!action.disabled && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('menu.item click')\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (action.disableDismiss) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.onClick(e)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isSubmitActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t!action.disabled && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item key={i} disabled={action.disabled}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isActionMenuActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactions={action.actions}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintent={action.intent || 'sub-menu'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toffset={action.offset || [-4, -1]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thoverable={action.hoverable}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Menu.Item disabled={action.disabled}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ active }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintents[action.intent || 'secondary'],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'flex items-center',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'ring-2 ring-indigo-500 hover:ring-0':\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ActionMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isCustomMenuActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomMenu\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmenu={action.menu}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth={action.maxWidth}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{({ onClick }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"block\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintent={action.intent || 'secondary'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CustomMenu>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : isDividerActionType(action) ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"border-t border-gray-100 dark:border-gray-700 my-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Menu.Items>\n\t\t\t\t\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</AnimatePresence>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</Menu>\n\t\t</div>\n\t)\n}\n\ninterface ActionInnerProps {\n\taction: ActionType\n}\n\nconst ActionInner: FC<ActionInnerProps> = ({ action }) => {\n\tif (!isNotNone(action)) return null\n\n\tlet side = action.iconSide || 'left'\n\n\treturn (\n\t\t<div className=\"flex items-center justify-between\">\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t{side === 'left' && action.icon ? (\n\t\t\t\t\t<span className={clsx(action.title ? '-ml-1 mr-3 opacity-75' : '-ml-1 -mr-1')}>{action.icon}</span>\n\t\t\t\t) : null}\n\t\t\t\t{action.title}\n\t\t\t</div>\n\t\t\t{side === 'right' && action.icon ? <span className=\"-mr-1 ml-2\">{action.icon}</span> : null}\n\t\t</div>\n\t)\n}\n\nexport default ActionMenu\n","import { Children, FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface InlineProps {\n\tspace?: SpaceType\n\tchildren: ReactNode\n\tclassName?: ClassValue\n}\n\ntype SpaceType = 0 | 1 | 2 | 3 | 4 | 6 | 8\n\nconst spaces = {\n\t0: {\n\t\twrapper: '',\n\t\titem: '',\n\t},\n\t1: {\n\t\twrapper: '-ml-1 -mt-1',\n\t\titem: 'pl-1 pt-1',\n\t},\n\t2: {\n\t\twrapper: '-ml-2 -mt-2',\n\t\titem: 'pl-2 pt-2',\n\t},\n\t3: {\n\t\twrapper: '-ml-3 -mt-3',\n\t\titem: 'pl-3 pt-3',\n\t},\n\t4: {\n\t\twrapper: '-ml-4 -mt-4',\n\t\titem: 'pl-4 pt-4',\n\t},\n\t6: {\n\t\twrapper: '-ml-6 -mt-6',\n\t\titem: 'pl-6 pt-6',\n\t},\n\t8: {\n\t\twrapper: '-ml-8 -mt-8',\n\t\titem: 'pl-8 pt-8',\n\t},\n}\n\nconst Inline: FC<InlineProps> = ({ space = 3, children, className }) => {\n\tconst items = Children.toArray(children)\n\n\treturn (\n\t\t<div className={clsx('flex flex-wrap', spaces[space || 0].wrapper, className)}>\n\t\t\t{items.map((item, i) => (\n\t\t\t\t<div key={i} className={clsx('flex items-center', spaces[space || 0].item)}>\n\t\t\t\t\t{item}\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t)\n}\n\nexport default Inline\n","import { FC } from 'react'\nimport { Link } from '@reach/router'\nimport {\n\tActionType,\n\tisActionMenuActionType,\n\tisButtonActionType,\n\tisSubmitActionType,\n\tisLinkActionType,\n\tisCustomMenuActionType,\n\tisNotNone,\n\tisRenderActionType,\n} from '@primer/types'\nimport ActionMenu from './ActionMenu'\nimport CustomMenu from './CustomMenu'\nimport Inline from './Inline'\nimport Button from './Button'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface ActionsProps {\n\tactions?: ActionType[] | ActionType\n\tclassName?: ClassValue\n}\n\nconst Actions: FC<ActionsProps> = ({ actions = [], className }) => {\n\tconst actionList = (actions instanceof Array ? actions : [actions]).filter(isNotNone)\n\n\treturn (\n\t\t<Inline className={clsx('inline-flex', className)}>\n\t\t\t{actionList.map((action, i) =>\n\t\t\t\tisLinkActionType(action) ? (\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${action.to}`}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\tstate={action.state}\n\t\t\t\t\t\treplace={action.replace}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button intent={action.intent} size={action.size} rounded={action.rounded}>\n\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Link>\n\t\t\t\t) : isButtonActionType(action) ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tintent={action.intent}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\taction.onClick && action.onClick(e)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={action.disabled || action.isLoading || false}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\ttype={action.type}\n\t\t\t\t\t\tisLoading={action.isLoading}\n\t\t\t\t\t\tsize={action.size}\n\t\t\t\t\t\trounded={action.rounded}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t</Button>\n\t\t\t\t) : isSubmitActionType(action) ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tintent={action.intent}\n\t\t\t\t\t\tdisabled={action.disabled || action.isLoading || false}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\ttype={action.type}\n\t\t\t\t\t\tisLoading={action.isLoading}\n\t\t\t\t\t\tsize={action.size}\n\t\t\t\t\t\trounded={action.rounded}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t</Button>\n\t\t\t\t) : isActionMenuActionType(action) ? (\n\t\t\t\t\t<ActionMenu\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tactions={action.actions}\n\t\t\t\t\t\tintent={action.intent || 'secondary'}\n\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\toffset={action.offset}\n\t\t\t\t\t\thoverable={action.hoverable}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\tsize={action.size || 'md'}\n\t\t\t\t\t\trounded={action.rounded}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t</ActionMenu>\n\t\t\t\t) : isCustomMenuActionType(action) ? (\n\t\t\t\t\t<CustomMenu\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tmenu={action.menu}\n\t\t\t\t\t\tplacement={action.placement}\n\t\t\t\t\t\tclassName={action.className}\n\t\t\t\t\t\tmaxWidth={action.maxWidth}\n\t\t\t\t\t>\n\t\t\t\t\t\t{({ onClick }) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tintent={action.intent}\n\t\t\t\t\t\t\t\tdisabled={action.disabled}\n\t\t\t\t\t\t\t\tsize={action.size}\n\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ActionInner action={action} />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</CustomMenu>\n\t\t\t\t) : isRenderActionType(action) ? (\n\t\t\t\t\t<div key={i}>{action.render}</div>\n\t\t\t\t) : null\n\t\t\t)}\n\t\t</Inline>\n\t)\n}\n\ninterface ActionInnerProps {\n\taction: ActionType\n}\n\nconst ActionInner: FC<ActionInnerProps> = ({ action }) => {\n\tif (!isNotNone(action)) return null\n\n\tif ((isButtonActionType(action) || isSubmitActionType(action)) && action.isLoading) return <>{action.title}</>\n\n\treturn (\n\t\t<>\n\t\t\t{(action.iconSide === 'left' || !action.iconSide) && action.icon ? (\n\t\t\t\t<span className={clsx(action.title ? '-ml-1 mr-2' : '')}>{action.icon}</span>\n\t\t\t) : null}\n\t\t\t{action.title}\n\t\t\t{action.iconSide === 'right' && action.icon ? <span className=\"-mr-1 ml-2\">{action.icon}</span> : null}\n\t\t</>\n\t)\n}\n\nexport default Actions\n","import { FC, useState, useRef, useCallback, useEffect, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface BasicTruncateProps {\n\ttitle: string\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nconst BasicTruncate: FC<BasicTruncateProps> = ({ title, className, children }) => {\n\tconst ref = useRef<HTMLSpanElement>(null)\n\tconst timer = useRef<NodeJS.Timeout | undefined>(undefined)\n\tconst [isOverflowing, setOverflowing] = useState(false)\n\n\tconst check = useCallback(() => {\n\t\tif (ref.current) {\n\t\t\tconst { clientWidth, clientHeight, scrollWidth, scrollHeight } = ref.current\n\t\t\tsetOverflowing(scrollHeight > clientHeight || scrollWidth > clientWidth)\n\t\t}\n\t}, [])\n\n\tuseEffect(() => {\n\t\tconst handler = () => {\n\t\t\tif (timer.current) clearTimeout(timer.current)\n\t\t\ttimer.current = setTimeout(check, 500)\n\t\t}\n\t\twindow.addEventListener('resize', handler)\n\t\treturn () => window.removeEventListener('resize', handler)\n\t}, [check])\n\n\tuseEffect(check, [check])\n\n\treturn (\n\t\t<span\n\t\t\tref={ref}\n\t\t\tclassName={clsx('overflow-ellipsis overflow-hidden', className)}\n\t\t\ttitle={isOverflowing ? title : ''}\n\t\t>\n\t\t\t{children}\n\t\t</span>\n\t)\n}\n\nexport default BasicTruncate\n","import { useEffect, useState, useCallback, useMemo, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport Actions from '@primer/components/Actions'\nimport Truncate from '@primer/components/BasicTruncate'\nimport { ActionType, isNotNone, None } from '@primer/types'\nimport { onlyText } from 'react-children-utilities'\n\nconst colSpan: { [key: number]: string } = {\n\t1: 'col-span-1',\n\t2: 'col-span-2',\n\t3: 'col-span-3',\n\t4: 'col-span-4',\n\t5: 'col-span-5',\n\t6: 'col-span-6',\n\t7: 'col-span-7',\n\t8: 'col-span-8',\n\t9: 'col-span-9',\n\t10: 'col-span-10',\n\t11: 'col-span-11',\n\t12: 'col-span-12',\n}\n\nconst useMedia = (queries: string[]) => {\n\tconst mediaQueryLists = useMemo(() => queries.map((q) => window.matchMedia(q)), [queries])\n\n\tconst getValue = useCallback(() => {\n\t\tconst matches = mediaQueryLists.map((mql) => mql.matches)\n\t\treturn matches\n\t}, [mediaQueryLists])\n\n\tconst [value, setValue] = useState<boolean[]>(getValue)\n\n\tuseEffect(() => {\n\t\tconst handler = () => setValue(getValue)\n\t\tmediaQueryLists.forEach((mql) => mql.addListener(handler))\n\t\treturn () => mediaQueryLists.forEach((mql) => mql.removeListener(handler))\n\t}, [getValue, mediaQueryLists])\n\n\treturn value\n}\n\nconst breakpoints = {\n\tsm: '640px',\n\tmd: '768px',\n\tlg: '1024px',\n\txl: '1280px',\n\txxl: '1536px',\n}\n\ntype Breakpoint = 'sm' | 'md' | 'lg' | 'xl' | 'xxl'\n\ntype OnClickParams = { [x: string]: any }\n\nexport const isVisible =\n\t(visibilities: Array<Visibility | None>) =>\n\t<T,>(x: TableCol<T>) =>\n\t\tvisibilities.reduce<boolean>((pass, vis) => pass || x.visibility === vis, false)\n\ntype Visibility = 'copy-only' | 'screen-only' | 'all'\n\nexport interface TableCol<T> {\n\ttitle: ReactNode\n\tvalue: (x: T, i: number) => ReactNode\n\tcopyValue?: (x: T, i: number) => string\n\ttruncate?: boolean\n\twidth?: string\n\tclassName?: ClassValue\n\tresponsive?: Breakpoint\n\tonClick?: (x: string, y: OnClickParams) => void\n\tvisibility?: Visibility\n}\n\nexport interface TableSchema<T> {\n\tcols: (TableCol<T> | None)[]\n\tactions?: (x: T, i: number) => ActionType[] | None\n}\n\ninterface TableProps<T> {\n\tschema: TableSchema<T>\n\titems: T[]\n\tgetKey?: (x: T, i: number) => number | string\n\tisStriped?: boolean\n\tclassName?: ClassValue\n}\n\nconst Table = <T,>({ schema, items, getKey = (_, i) => i, isStriped = false, className }: TableProps<T>) => {\n\tconst [sm, md, lg, xl, xxl] = useMedia(Object.values(breakpoints).map((x) => `(min-width: ${x})`))\n\tconst mqs = { sm, md, lg, xl, xxl }\n\n\tconst cols = schema.cols\n\t\t.filter(isNotNone)\n\t\t.filter(isVisible([undefined, 'all', 'screen-only']))\n\t\t.filter((x) => {\n\t\t\tif (x.responsive) {\n\t\t\t\treturn mqs[x.responsive]\n\t\t\t}\n\n\t\t\treturn true\n\t\t})\n\n\tconst tmplCols = cols.map((x) => x.width || 'minmax(0, auto)').join(' ')\n\n\tconst actions = schema.actions\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div\n\t\t\t\tclassName=\"grid border-t border-gray-200 dark:border-gray-600\"\n\t\t\t\tstyle={{\n\t\t\t\t\tgridTemplateColumns: isNotNone(actions) ? tmplCols.concat(' minmax(auto, max-content)') : tmplCols,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{cols.map((col, i) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap dark:border-gray-600 dark:bg-gray-750 dark:text-gray-300',\n\t\t\t\t\t\t\tcol.className\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{col.title}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\n\t\t\t\t{isNotNone(actions) && (\n\t\t\t\t\t<div className=\"px-5 py-3 border-b border-gray-200 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap dark:border-gray-600 dark:bg-gray-750 dark:text-gray-300\"></div>\n\t\t\t\t)}\n\n\t\t\t\t{items.map((item, i) => (\n\t\t\t\t\t<div key={getKey(item, i)} className=\"contents group\">\n\t\t\t\t\t\t{cols.map((col, j) => (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tkey={j}\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'min-h-11 whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 group-hover:text-gray-700 dark:group-hover:text-gray-100 flex items-center border-b border-gray-100 dark:border-gray-600 group-hover:bg-primary-50 dark:group-hover:bg-gray-600',\n\t\t\t\t\t\t\t\t\tj === 0 && 'font-medium',\n\t\t\t\t\t\t\t\t\t!col.truncate && 'px-5 py-4',\n\t\t\t\t\t\t\t\t\tisStriped && i % 2 && 'bg-gray-50 dark:bg-gray-750',\n\t\t\t\t\t\t\t\t\tcol.className\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{col.truncate ? (\n\t\t\t\t\t\t\t\t\t<Truncate title={onlyText(col.value(item, i))} className=\"px-6 py-4\">\n\t\t\t\t\t\t\t\t\t\t{col.value(item, i)}\n\t\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t\t) : col.value ? (\n\t\t\t\t\t\t\t\t\tcol.value(item, i)\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t{actions?.length ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'px-5 whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 group-hover:text-gray-700 dark:group-hover:text-gray-100 flex items-center justify-center border-b border-gray-100 dark:border-gray-600 group-hover:bg-primary-50 dark:group-hover:bg-gray-600',\n\t\t\t\t\t\t\t\t\tisStriped && i % 2 && 'bg-gray-50 dark:bg-gray-750'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Actions actions={actions(item, i)} className=\"flex-nowrap\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\n\t\t\t\t{items.length === 0 && (\n\t\t\t\t\t<div className=\"contents group\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\tcolSpan[cols.length + (actions?.length ? 1 : 0)],\n\t\t\t\t\t\t\t\t'px-6 py-3',\n\t\t\t\t\t\t\t\t'whitespace-nowrap text-sm leading-5 text-gray-500 dark:text-gray-300 flex items-center justify-center border-b border-gray-100 dark:border-gray-600 select-none'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNo items\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Table\n","import { ReactNode } from 'react'\nimport { AxiosError } from 'axios'\nimport { warning } from '../alerts'\nimport { WindowLocation } from '@reach/router'\nimport { isNotNone, None } from '@primer/types'\nimport { differenceInDays, format, formatRelative, parseISO, isSameDay } from 'date-fns'\nimport { holidays } from './constants'\nimport { env } from 'config'\nimport * as Sentry from '@sentry/react'\nimport { utcToZonedTime, format as formatTZ } from 'date-fns-tz'\nimport { TableSchema, isVisible } from '@primer/components/Table'\nimport { onlyText } from 'react-children-utilities'\n\nexport const nzDate = (x: Date) => utcToZonedTime(x, 'Pacific/Auckland')\nexport const isNZ = () => formatTZ(new Date(), 'zzzz').indexOf('New Zealand') > -1\n\ninterface ClassFixType {\n\tpattern: RegExp\n\tdefaultValue: string\n}\n\nexport const smartReplaceClasses = (className: string, fixes: ClassFixType[]) => {\n\tlet names = className.split(' ')\n\n\tfor (let i = 0; i < fixes.length; i++) {\n\t\tlet fix = fixes[i]\n\t\tif (!names.find((x) => fix.pattern.test(x))) names.push(fix.defaultValue)\n\t}\n\n\treturn names.join(' ')\n}\n\nexport const handleError = (error: AxiosError) => {\n\tlet message: ReactNode = null\n\n\tif (error?.response?.data.title) {\n\t\tmessage = <p>{error.response.data.title}</p>\n\t}\n\n\tif (error?.response?.data.errors) {\n\t\t// @ts-ignore\n\t\tmessage = Object.values(error.response.data.errors).map((x: string, i: number) => <p key={i}>{x}</p>)\n\t}\n\n\twarning({ title: 'An error occurred', message })\n}\n\nexport const enumToOption = (item: any) => {\n\treturn Object.keys(item)\n\t\t.filter((x) => isNaN(+x))\n\t\t.map((label) => ({ label, value: item[label] }))\n}\n\n// https://stackoverflow.com/questions/10420352/converting-file-size-in-bytes-to-human-readable-string\nexport const humanFileSize = (bytes: number, si = true) => {\n\tvar thresh = si ? 1000 : 1024\n\tif (Math.abs(bytes) < thresh) {\n\t\treturn bytes + ' B'\n\t}\n\tvar units = si\n\t\t? ['kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\t\t: ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\n\tvar u = -1\n\tdo {\n\t\tbytes /= thresh\n\t\t++u\n\t} while (Math.abs(bytes) >= thresh && u < units.length - 1)\n\treturn bytes.toFixed(1) + ' ' + units[u]\n}\n\nexport const getState = <T,>(location?: WindowLocation) => location?.state as T | null\n\nexport const queryString = (obj: Object) => {\n\treturn Object.entries(obj)\n\t\t.filter(([_, val]) => !!val)\n\t\t.map(([key, val]) => [key, encodeURIComponent(val)].join('='))\n\t\t.join('&')\n}\n\nexport const getDateFromTime = (time: string, rootDate?: Date) =>\n\tnew Date(`${rootDate ? format(rootDate, 'yyyy-MM-dd') : '1970-01-01'} ` + time)\n\nexport const blobUrl = (blob: Blob) => {\n\treturn window.URL.createObjectURL(blob)\n}\n\nexport const series = async <T,>(items: T[], fn: (x: T) => Promise<any>) => {\n\tlet output = []\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\toutput.push(await fn(items[i]))\n\t}\n\n\treturn output\n}\n\nexport function isValidDate(d: Date) {\n\treturn !isNaN(d.valueOf())\n}\n\nexport const last = <T,>(arr: T[]): T => arr[arr.length - 1]\n\nexport const detectIE = () => {\n\tvar ua = window.navigator.userAgent\n\n\tvar msie = ua.indexOf('MSIE ')\n\tif (msie > 0) {\n\t\t// IE 10 or older => return version number\n\t\treturn parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10)\n\t}\n\n\tvar trident = ua.indexOf('Trident/')\n\tif (trident > 0) {\n\t\t// IE 11 => return version number\n\t\tvar rv = ua.indexOf('rv:')\n\t\treturn parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10)\n\t}\n\n\t// other browser\n\treturn false\n}\n\nconst errorIsStatus = (error: AxiosError, status: number) => {\n\treturn error.response && error.response.status === status\n}\n\nexport const getErrorMessage = (error: AxiosError) => {\n\tlet data = error ? (error.response ? error.response.data : null) : null\n\tlet message = []\n\n\tif (errorIsStatus(error, 404)) {\n\t\tmessage.push('Not found')\n\t}\n\n\tif (data) {\n\t\tif (data.title) {\n\t\t\tmessage.push(data.title)\n\t\t}\n\n\t\tif (data.errors instanceof Array) {\n\t\t\tmessage.push(data.errors[0].message.split(', ')[0])\n\t\t} else if (data.errors && typeof data.errors === 'object') {\n\t\t\tObject.values(data.errors).forEach((msg) => {\n\t\t\t\tmessage.push(msg)\n\t\t\t})\n\t\t}\n\t}\n\n\treturn message.join('\\n')\n}\n\nexport const reportError = (request: any, error: AxiosError) => {\n\tSentry.withScope((scope) => {\n\t\tscope.setExtra('request', request)\n\t\tif (error && error.response) {\n\t\t\tscope.setExtra('response', {\n\t\t\t\tdata: error.response.data,\n\t\t\t\tstatus: error.response.status,\n\t\t\t\tstatusText: error.response.statusText,\n\t\t\t\theaders: error.response.headers,\n\t\t\t})\n\t\t} else {\n\t\t\tscope.setExtra('error', error)\n\t\t}\n\n\t\tSentry.captureException(new Error('Request Failure'))\n\t})\n\n\tif (env === 'dev') {\n\t\tconsole.group('Captured Error')\n\t\tconsole.log('request', request)\n\t\tif (error && error.response) {\n\t\t\tconsole.log(\n\t\t\t\t'response',\n\t\t\t\tJSON.stringify(\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: error.response.data,\n\t\t\t\t\t\tstatus: error.response.status,\n\t\t\t\t\t\tstatusText: error.response.statusText,\n\t\t\t\t\t\theaders: error.response.headers,\n\t\t\t\t\t},\n\t\t\t\t\tnull,\n\t\t\t\t\t4\n\t\t\t\t)\n\t\t\t)\n\t\t} else {\n\t\t\tconsole.log('error', error)\n\t\t}\n\t\tconsole.groupEnd()\n\t}\n}\n\n// this thing is insane, type it later\nexport const includer = (data: any, map: any): any => {\n\tif (map instanceof Array) {\n\t\treturn data.reduce((res: any, val: any, i: any) => {\n\t\t\treturn map[i] ? [...res, includer(val, map[i])] : res\n\t\t}, [])\n\t} else if (typeof map === 'object') {\n\t\treturn Object.keys(map).reduce((res, key) => {\n\t\t\treturn map[key] ? { ...res, [key]: includer(data[key], map[key]) } : res\n\t\t}, {})\n\t} else if (typeof map === 'boolean') {\n\t\tif (map) return data\n\t}\n}\n\nexport const parseQueryCode = (str: string): { [x: string]: string } => {\n\treturn str\n\t\t.replace('?', '')\n\t\t.split('&')\n\t\t.reduce((a, x) => {\n\t\t\tlet [key, val] = x.split('=')\n\t\t\treturn { ...a, [key]: val }\n\t\t}, {})\n}\n\nexport const ensureDate = (val: string | Date | None): Date => (val instanceof Date ? val : new Date(val || ''))\n\nexport const split = (str: string) => {\n\treturn str.replace(/\\[/g, '.').replace(/\\]/g, '').split('.')\n}\n\nexport const getGSTfromIncl = (x: number) => (x * 3) / 23\n\nexport const createNumberedFileName = (filename: string) => {\n\tconst reg = /\\(([\\d]+)\\)$/\n\tconst match = filename.match(reg)\n\tif (!match) return `${filename} (2)`\n\treturn filename.replace(reg, `(${+match[1] + 1})`)\n}\n\nexport const fixedFormatRelative = (x: string) => {\n\tlet target = parseISO(x)\n\n\tlet diff = differenceInDays(new Date(), target)\n\n\tif (diff >= 6) {\n\t\treturn format(target, 'dd/MM/yyyy')\n\t} else {\n\t\treturn formatRelative(target, new Date())\n\t}\n}\n\nexport const getReservedDate = (d: Date) => {\n\treturn holidays.find((x) => isSameDay(x.date, d))?.name\n}\n\nexport const copyTabularData = async <T,>(schema: TableSchema<T>, items: T[]) => {\n\tconst rows: string[] = []\n\n\tconst cols = schema.cols.filter(isNotNone).filter(isVisible([undefined, 'all', 'copy-only']))\n\n\trows.push(cols.map((x) => onlyText(x.title)).join('\\t'))\n\n\titems.forEach((item) => {\n\t\trows.push(cols.map((x, i) => onlyText(!!x.copyValue ? x.copyValue(item, i) : x.value(item, i))).join('\\t'))\n\t})\n\n\t// it doesn't like clipboard-write as an option\n\t// @ts-ignore\n\tawait navigator.permissions.query({ name: 'clipboard-write' })\n\n\tnavigator.clipboard.writeText(rows.join('\\n'))\n}\n\nexport const ordinal = (i: number) => {\n\tvar j = i % 10,\n\t\tk = i % 100\n\tif (j === 1 && k !== 11) {\n\t\treturn i + 'st'\n\t}\n\tif (j === 2 && k !== 12) {\n\t\treturn i + 'nd'\n\t}\n\tif (j === 3 && k !== 13) {\n\t\treturn i + 'rd'\n\t}\n\treturn i + 'th'\n}\n\nexport const slugify = (name: string) => name.trim().replace(/\\s/g, '-').toLowerCase()\n","import { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { smartReplaceClasses } from '@primer/utils/funcs'\n\ninterface IconProps {\n\tclassName?: ClassValue\n}\n\nconst fixClasses = (className = '') =>\n\tsmartReplaceClasses(className, [\n\t\t{ pattern: /^w-\\d+$/, defaultValue: 'w-5' },\n\t\t{ pattern: /^h-\\d+$/, defaultValue: 'h-5' },\n\t])\n\nexport const Spinner: FC<IconProps> = ({ className }) => (\n\t<svg className={fixClasses(clsx(className))} xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t<circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n\t\t<path\n\t\t\tclassName=\"opacity-75\"\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FilePlus: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\tclassName={fixClasses(clsx(className))}\n\t\tfill=\"none\"\n\t\tstrokeLinecap=\"round\"\n\t\tstrokeLinejoin=\"round\"\n\t\tstrokeWidth=\"1\"\n\t\tstroke=\"currentColor\"\n\t\tviewBox=\"0 0 24 24\"\n\t>\n\t\t<path d=\"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n\t</svg>\n)\n\nexport const History: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\tclassName={fixClasses(clsx(className))}\n\t\tfill=\"currentColor\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 512 512\"\n\t>\n\t\t<g transform=\"scale(0.8)\" style={{ transformOrigin: 'center' }}>\n\t\t\t<path d=\"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z\" />\n\t\t</g>\n\t</svg>\n)\n\nexport const Undo: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 512 512\"\n\t>\n\t\t<g transform=\"scale(0.8)\" style={{ transformOrigin: 'center' }}>\n\t\t\t<path\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\td=\"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z\"\n\t\t\t/>\n\t\t</g>\n\t</svg>\n)\n\nexport const FilePdf: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileImage: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M384 121.941V128H256V0h6.059a24 24 0 0 1 16.97 7.029l97.941 97.941a24.002 24.002 0 0 1 7.03 16.971zM248 160c-13.2 0-24-10.8-24-24V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248zm-135.455 16c26.51 0 48 21.49 48 48s-21.49 48-48 48-48-21.49-48-48 21.491-48 48-48zm208 240h-256l.485-48.485L104.545 328c4.686-4.686 11.799-4.201 16.485.485L160.545 368 264.06 264.485c4.686-4.686 12.284-4.686 16.971 0L320.545 304v112z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileWord: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileText: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileArchive: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zM128.4 336c-17.9 0-32.4 12.1-32.4 27 0 15 14.6 27 32.5 27s32.4-12.1 32.4-27-14.6-27-32.5-27zM224 136V0h-63.6v32h-32V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM95.9 32h32v32h-32zm32.3 384c-33.2 0-58-30.4-51.4-62.9L96.4 256v-32h32v-32h-32v-32h32v-32h-32V96h32V64h32v32h-32v32h32v32h-32v32h32v32h-32v32h22.1c5.7 0 10.7 4.1 11.8 9.7l17.3 87.7c6.4 32.4-18.4 62.6-51.4 62.6z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileExcel: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const File: FC<IconProps> = ({ className }) => (\n\t<svg\n\t\taria-hidden=\"true\"\n\t\tfocusable=\"false\"\n\t\tclassName={fixClasses(clsx(className))}\n\t\trole=\"img\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tviewBox=\"0 0 600 600\"\n\t>\n\t\t<path\n\t\t\tfill=\"currentColor\"\n\t\t\td=\"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z\"\n\t\t/>\n\t</svg>\n)\n\nexport const FileIcon: FC<IconProps & { type: string }> = ({ type, className }) =>\n\ttype === '.pdf' ? (\n\t\t<FilePdf className={className} />\n\t) : type === '.xlsx' ? (\n\t\t<FileExcel className={className} />\n\t) : type === '.docx' ? (\n\t\t<FileWord className={className} />\n\t) : type === '.jpg' || type === '.png' || type === '.gif' ? (\n\t\t<FileImage className={className} />\n\t) : type === '.zip' || type === '.7z' || type === '.rar' ? (\n\t\t<FileArchive className={className} />\n\t) : (\n\t\t<File className={className} />\n\t)\n","import { Spinner } from '@primer/components/Icon'\n\nconst Loader = ({ size = '3x', spin = true, className = '', ...props }) => {\n\treturn (\n\t\t<div className={`flex flex-col justify-center items-center p-2 ${className}`} {...props}>\n\t\t\t<Spinner className=\"w-10 h-10 animate-spin\" />\n\t\t</div>\n\t)\n}\nexport default Loader\n","import { useState } from 'react'\n\n// https://usehooks.com/useLocalStorage\n\nfunction useLocalStorage<T = any>(key: string, initialValue: T) {\n\tconst [storedValue, setStoredValue] = useState(() => {\n\t\ttry {\n\t\t\tconst item = window.localStorage.getItem(key)\n\t\t\treturn item ? JSON.parse(item) : initialValue\n\t\t} catch (error) {\n\t\t\treturn initialValue\n\t\t}\n\t})\n\n\tconst setValue = (value: T) => {\n\t\tconst valueToStore = value instanceof Function ? value(storedValue) : value\n\t\tsetStoredValue(valueToStore)\n\t\twindow.localStorage.setItem(key, JSON.stringify(valueToStore))\n\t}\n\n\treturn [storedValue, setValue]\n}\n\nexport default useLocalStorage\n","import { FC, ReactNode, useRef, useState } from 'react'\nimport { motion, AnimatePresence, MotionStyle } from 'framer-motion'\nimport clsx from 'clsx'\n\ninterface TooltipProps {\n\tmessage: ReactNode\n\tenabled?: boolean\n\tintent?: 'light' | 'dark'\n\tchildren: ReactNode\n}\n\nconst Tooltip: FC<TooltipProps> = ({ message, enabled = true, intent = 'light', children }) => {\n\tlet ref = useRef<HTMLDivElement>(null)\n\tconst [hover, setHover] = useState(false)\n\tconst [X, setX] = useState(0)\n\tconst [Y, setY] = useState(0)\n\n\tconst show = () => {\n\t\tif (!ref.current) return null\n\t\tif (!enabled) return null\n\n\t\tsetX(ref.current.offsetLeft + ref.current.offsetWidth)\n\t\tsetY(ref.current.offsetTop)\n\t\tsetHover(true)\n\t}\n\n\tconst hide = () => {\n\t\tsetHover(false)\n\t}\n\n\treturn (\n\t\t<div ref={ref} onMouseOver={show} onMouseOut={hide}>\n\t\t\t<div>{children}</div>\n\n\t\t\t<div\n\t\t\t\tclassName=\"flex items-center absolute z-10 ml-6 w-80 pointer-events-none\"\n\t\t\t\tstyle={{\n\t\t\t\t\tleft: `${X}px`,\n\t\t\t\t\ttop: `${Y}px`,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<AnimatePresence>\n\t\t\t\t\t{hover && (\n\t\t\t\t\t\t<motion.div\n\t\t\t\t\t\t\tstyle={{ originX: 0 } as MotionStyle}\n\t\t\t\t\t\t\tvariants={{\n\t\t\t\t\t\t\t\thidden: { opacity: 0, x: -30 },\n\t\t\t\t\t\t\t\tvisible: { opacity: 1, x: 0 },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttransition={{\n\t\t\t\t\t\t\t\ttype: 'tween',\n\t\t\t\t\t\t\t\tease: 'easeOut',\n\t\t\t\t\t\t\t\tduration: 0.1,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tinitial=\"hidden\"\n\t\t\t\t\t\t\tanimate=\"visible\"\n\t\t\t\t\t\t\texit=\"hidden\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx('rounded px-3 py-2 text-sm font-medium shadow-lg', {\n\t\t\t\t\t\t\t\t\t'bg-white text-gray-900 dark:bg-primary-900 dark:text-white': intent === 'light',\n\t\t\t\t\t\t\t\t\t'bg-primary-900 text-white dark:bg-primary-200 dark:text-primary-900 antialiased':\n\t\t\t\t\t\t\t\t\t\tintent === 'dark',\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</motion.div>\n\t\t\t\t\t)}\n\t\t\t\t</AnimatePresence>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Tooltip\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { Link, LinkGetProps, useLocation } from '@reach/router'\nimport useLocalStorage from '@primer/hooks/useLocalStorage'\nimport { RouteConfig, isLinkRouteConfig, isAnchorRouteConfig, isNotNone } from '@primer/types'\nimport { ExternalLinkIcon } from '@heroicons/react/outline'\nimport Tooltip from '@primer/components/Tooltip'\n\ntype IntentValue = 'primary' | 'secondary' | 'white'\n\nconst intents = {\n\tprimary: {\n\t\twrapper: 'bg-gray-800 dark:bg-gray-900 antialiased',\n\t\tlink: {\n\t\t\tactive: 'text-white bg-gradient-to-r from-primary-600 to-primary-500 text-white dark:bg-gray-700 focus:bg-gray-900 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-200 hover:text-white hover:bg-gray-700 focus:text-white focus:bg-gray-700 dark:hover:bg-gray-800',\n\t\t},\n\t},\n\tsecondary: {\n\t\twrapper: 'bg-white dark:bg-gray-700 antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-800 focus:bg-gray-200 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-600 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-200 dark:hover:bg-gray-900 hover:bg-gray-100 focus:text-gray-900 focus:bg-gray-100',\n\t\t},\n\t},\n\twhite: {\n\t\twrapper: 'bg-white antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-gray-900 bg-gray-50 focus:bg-gray-200',\n\t\t\tinactive: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:text-gray-900 focus:bg-gray-100',\n\t\t},\n\t},\n}\n\nconst getProps =\n\t(route: RouteConfig, min: boolean, intent: IntentValue) =>\n\t({ isCurrent, isPartiallyCurrent }: LinkGetProps) => {\n\t\treturn (route.exact ? isCurrent : isPartiallyCurrent)\n\t\t\t? {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center py-2 px-2.5 text-sm font-medium leading-5 rounded focus:outline-none transition ease-in-out duration-150',\n\t\t\t\t\t\tmin && 'justify-center',\n\t\t\t\t\t\tintents[intent].link.active\n\t\t\t\t\t),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center py-2 px-2.5 text-sm font-medium leading-5 rounded focus:outline-none transition ease-in-out duration-150',\n\t\t\t\t\t\tmin && 'justify-center',\n\t\t\t\t\t\tintents[intent].link.inactive\n\t\t\t\t\t),\n\t\t\t  }\n\t}\n\nconst MenuLink = ({\n\troute,\n\tmin,\n\tintent,\n\tchildren,\n}: {\n\troute: RouteConfig\n\tmin: boolean\n\tintent: IntentValue\n\tchildren: ReactNode\n}) => {\n\treturn isAnchorRouteConfig(route) ? (\n\t\t<a\n\t\t\thref={route.url}\n\t\t\tclassName={clsx(\n\t\t\t\t'group flex items-center justify-center py-2 px-2.5 text-sm leading-5 rounded focus:outline-none transition ease-in-out duration-150',\n\t\t\t\tintents[intent].link.inactive,\n\t\t\t\tmin && 'justify-center'\n\t\t\t)}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noopener noreferrer\"\n\t\t>\n\t\t\t<div className=\"flex items-center justify-center\">{children}</div>\n\t\t\t{!min && (\n\t\t\t\t<div className=\"flex-1 flex justify-end\">\n\t\t\t\t\t<ExternalLinkIcon className=\"opacity-25 w-4 h-4\" />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</a>\n\t) : isLinkRouteConfig(route) ? (\n\t\t<Link to={`${process.env.PUBLIC_URL}${route.to}`} getProps={getProps(route, min, intent)}>\n\t\t\t{children}\n\t\t</Link>\n\t) : null\n}\n\ninterface SidebarProps {\n\theader?: (min: boolean) => ReactNode\n\tfooter?: (min: boolean) => ReactNode\n\tlinks: RouteConfig[]\n\tintent: IntentValue\n\tname: string\n\tclassName?: ClassValue\n}\n\nconst Sidebar: FC<SidebarProps> = ({ header, footer, links, intent, name, className }) => {\n\tconst [min, setMin] = useLocalStorage(`sidebar-${name}-min`, false)\n\n\treturn (\n\t\t<div\n\t\t\tclassName={clsx(\n\t\t\t\t'flex flex-col h-screen relative',\n\t\t\t\tmin ? 'w-16' : 'w-64',\n\t\t\t\tintents[intent].wrapper,\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={clsx('absolute right-0 top-0 h-full -mr-2 w-4 z-40 group', {\n\t\t\t\t\t'cursor-right': min,\n\t\t\t\t\t'cursor-left': !min,\n\t\t\t\t})}\n\t\t\t\tonClick={() => setMin((x: boolean) => !x)}\n\t\t\t>\n\t\t\t\t<div className=\"group-hover:opacity-100 opacity-0 transition-opacity ease-in-out duration-200 w-1 h-full ml-1.5 bg-primary-600\" />\n\t\t\t</div>\n\n\t\t\t<div className=\"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto overflow-x-visible\">\n\t\t\t\t{header && header(min)}\n\n\t\t\t\t<nav className=\"mt-5 flex-1 px-3 space-y-1\">\n\t\t\t\t\t{links.filter(isNotNone).map((link, i) => (\n\t\t\t\t\t\t<NavLink key={i} link={link} intent={intent} min={min} />\n\t\t\t\t\t))}\n\t\t\t\t</nav>\n\t\t\t</div>\n\n\t\t\t{footer && footer(min)}\n\t\t</div>\n\t)\n}\n\ninterface NavLinkProps {\n\tlink: RouteConfig\n\tmin: boolean\n\tintent: IntentValue\n}\n\nconst NavLink: FC<NavLinkProps> = ({ link, min, intent }) => {\n\tconst loc = useLocation()\n\n\tconst matches = isLinkRouteConfig(link) ? loc.pathname.indexOf(link.to) === 0 : false\n\n\treturn (\n\t\t<div>\n\t\t\t{link && (\n\t\t\t\t<Tooltip message={link.tooltip || link.title} enabled={min}>\n\t\t\t\t\t<MenuLink route={link} min={min} intent={intent}>\n\t\t\t\t\t\t<div className={clsx('opacity-75 pointer-events-none', min ? 'mr-0' : 'mr-3')}>{link.icon}</div>\n\t\t\t\t\t\t{!min && link.title}\n\t\t\t\t\t</MenuLink>\n\t\t\t\t</Tooltip>\n\t\t\t)}\n\t\t\t{matches && link.children && link.children.length > 0 && (\n\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t<div className=\"p-1 rounded-md space-y-1 border-2 border-gray-700\">\n\t\t\t\t\t\t{link.children\n\t\t\t\t\t\t\t.filter((x) => x)\n\t\t\t\t\t\t\t.map((link, i) => (\n\t\t\t\t\t\t\t\t<NavLink key={i} link={link} intent={intent} min={min} />\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default Sidebar\n","import { useEffect, useState } from 'react'\n\ntype MediaChange = (this: MediaQueryList, ev: MediaQueryListEvent) => any\n\nconst changeDarkMode = (x: boolean) => document.querySelector('html')?.classList[x ? 'add' : 'remove']('dark')\n\nconst useDarkMode = (): [boolean | null, (x: boolean | null) => void] => {\n\t// const [value, setDarkMode] = useStore((store) => [store.darkMode, store.setDarkMode])\n\tconst [value, setDarkMode] = useState<boolean | null>(false)\n\tconst matchesMedia = window.matchMedia('(prefers-color-scheme: dark)')\n\n\tuseEffect(() => {\n\t\tif (value !== null) {\n\t\t\tchangeDarkMode(value)\n\t\t} else {\n\t\t\tconst func: MediaChange = (e) => changeDarkMode(e.matches)\n\t\t\tchangeDarkMode(matchesMedia.matches)\n\n\t\t\tif (matchesMedia.hasOwnProperty('addEventListener')) {\n\t\t\t\tmatchesMedia.addEventListener('change', func)\n\t\t\t\treturn () => matchesMedia.removeEventListener('change', func)\n\t\t\t}\n\t\t}\n\t}, [value, matchesMedia])\n\n\treturn [value, setDarkMode]\n}\n\nexport default useDarkMode\n","import { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { ChevronDownIcon, CheckIcon, ChevronLeftIcon, LogoutIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport useDarkMode from '@primer/hooks/useDarkMode'\n// import { useLocation } from '@reach/router'\n\ninterface TopbarProps {\n\tintent?: 'light' | 'dark'\n\tclassName?: ClassValue\n}\n\nconst Topbar: FC<TopbarProps> = ({ intent = 'light', className }) => {\n\tconst profile = {}\n\n\tconst logout = async () => {\n\t\t// store.getState().logout()\n\t}\n\n\tconst [darkMode, setDarkMode] = useDarkMode()\n\n\t// const location = useLocation()\n\t// const state = location?.state as { term?: string } | null\n\t// const [search, setSearch] = useState(state?.term || '')\n\t// const timer = useRef<NodeJS.Timeout | undefined>()\n\n\t// useEffect(() => {\n\t// \tsetSearch(state?.term || '')\n\t// }, [state?.term])\n\n\treturn (\n\t\t<div className={clsx('max-w-7xl mx-auto py-3 px-4 sm:px-6 lg:px-8 flex items-center justify-end', className)}>\n\t\t\t{profile && (\n\t\t\t\t<div className=\"flex items-center space-x-2\">\n\t\t\t\t\t<Actions\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: (\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-4\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'text-sm font-medium',\n\t\t\t\t\t\t\t\t\t\t\t\tintent === 'dark' && 'text-gray-200 antialiased'\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tYour Name\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t<ChevronDownIcon\n\t\t\t\t\t\t\t\t\t\tclassName={clsx('w-5 h-5 opacity-75', intent === 'dark' && 'text-white')}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\tplacement: 'bottom-end',\n\t\t\t\t\t\t\t\tsize: 'xs',\n\t\t\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Colour Scheme',\n\t\t\t\t\t\t\t\t\t\t\ticon: <ChevronLeftIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\tplacement: 'left-start',\n\t\t\t\t\t\t\t\t\t\t\thoverable: true,\n\t\t\t\t\t\t\t\t\t\t\tactions: [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Dark Mode',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'w-4 h-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarkMode === true ? 'opacity-100' : 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => setDarkMode(true),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Light Mode',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'w-4 h-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarkMode === false ? 'opacity-100' : 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => setDarkMode(false),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'System Preference',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'w-4 h-4',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdarkMode === null ? 'opacity-100' : 'opacity-0'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => setDarkMode(null),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t// {\n\t\t\t\t\t\t\t\t\t\t// \ttitle: 'Manage Devices',\n\t\t\t\t\t\t\t\t\t\t// \ticon: <DeviceMobileIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t// \ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t// \tto: '/devices',\n\t\t\t\t\t\t\t\t\t\t// },\n\t\t\t\t\t\t\t\t\t],\n\n\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Logout',\n\t\t\t\t\t\t\t\t\t\t\ticon: <LogoutIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\t\tonClick: logout,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default Topbar\n","import { FC, useState } from 'react'\nimport clsx from 'clsx'\nimport { Link } from '@reach/router'\nimport logo from 'assets/img/ICRA_WhiteRev.png'\nimport { RouteConfig, isLinkRouteConfig, isAnchorRouteConfig, isNotNone } from '@primer/types'\nimport AutoHeight from '@primer/components/AutoHeight'\nimport Topbar from '@primer/components/Topbar'\n\ninterface MobileMenuProps {\n\tlinks: RouteConfig[]\n\twithTopbar?: boolean\n}\n\nconst MobileMenu: FC<MobileMenuProps> = ({ links, withTopbar = false }) => {\n\tconst [open, setOpen] = useState(false)\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"md:hidden bg-gray-800 dark:bg-gray-900 flex justify-between p-4\">\n\t\t\t\t<Link to=\"/dashboard\">\n\t\t\t\t\t<img src={logo} alt=\"ICRA\" className=\"h-10\" />\n\t\t\t\t</Link>\n\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:bg-gray-700 focus:text-white\"\n\t\t\t\t\tonClick={() => setOpen((x) => !x)}\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\tclassName={clsx('h-6 w-6', { block: !open, hidden: open })}\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\t\t\td=\"M4 6h16M4 12h16M4 18h16\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\n\t\t\t\t\t<svg\n\t\t\t\t\t\tclassName={clsx('h-6 w-6', { block: open, hidden: !open })}\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div className={clsx('md:hidden bg-gray-800 dark:bg-gray-900 antialiased')}>\n\t\t\t\t<AutoHeight show={open}>\n\t\t\t\t\t<div className=\"px-2 pt-2 pb-3 sm:px-3\">\n\t\t\t\t\t\t{links.filter(isNotNone).map((link, i) =>\n\t\t\t\t\t\t\tisLinkRouteConfig(link) ? (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tto={link.to}\n\t\t\t\t\t\t\t\t\tgetProps={({ isCurrent }) => ({\n\t\t\t\t\t\t\t\t\t\tclassName: clsx({\n\t\t\t\t\t\t\t\t\t\t\t'flex items-center px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700':\n\t\t\t\t\t\t\t\t\t\t\t\t!isCurrent,\n\t\t\t\t\t\t\t\t\t\t\t'flex items-center px-3 py-2 rounded-md text-base font-medium text-white bg-gray-900 focus:outline-none focus:text-white focus:bg-gray-700':\n\t\t\t\t\t\t\t\t\t\t\t\tisCurrent,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={() => setOpen(false)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"mr-3\">{link.icon}</div>\n\t\t\t\t\t\t\t\t\t{link.title}\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : isAnchorRouteConfig(link) ? (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\thref={link.url}\n\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:text-white focus:bg-gray-700\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"mr-3\">{link.icon}</div>\n\t\t\t\t\t\t\t\t\t{link.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t{withTopbar && <Topbar intent=\"dark\" />}\n\t\t\t\t\t</div>\n\t\t\t\t</AutoHeight>\n\t\t\t</div>\n\t\t</>\n\t)\n}\n\nexport default MobileMenu\n","export default \"data:image/png;base64,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\"","import { FC, Component } from 'react'\nimport { Location, WindowLocation } from '@reach/router'\n\ninterface OnRouteChangeProps {\n\taction: () => void\n}\n\nconst OnRouteChange: FC<OnRouteChangeProps> = ({ action }) => (\n\t<Location>\n\t\t{({ location }: { location: WindowLocation }) => <OnRouteChangeWorker location={location} action={action} />}\n\t</Location>\n)\n\ninterface OnRouteChangeWorkerProps {\n\tlocation: WindowLocation\n\taction: () => void\n}\n\nclass OnRouteChangeWorker extends Component<OnRouteChangeWorkerProps, {}> {\n\tcomponentDidUpdate(prevProps: OnRouteChangeWorkerProps) {\n\t\tif (this.props.location.pathname !== prevProps.location.pathname) {\n\t\t\tthis.props.action()\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null\n\t}\n}\n\nexport default OnRouteChange\n","interface Version {\n\tnumber: string\n\tdate: string\n\tnew: string[]\n\tchange: string[]\n\tbug: string[]\n}\n\nconst versions: Version[] = [\n\t{\n\t\tnumber: '0.0.0',\n\t\tdate: '2021-07-29',\n\t\tnew: ['Everything is new'],\n\t\tchange: [],\n\t\tbug: []\n\t},\n\t\n]\n\nexport default versions\n","import { FC, Suspense, useMemo, useRef } from 'react'\nimport clsx from 'clsx'\nimport { RouteComponentProps, Link } from '@reach/router'\nimport logo from 'assets/img/workflow-logo-white-text.svg'\nimport smallLogo from 'assets/img/workflow-logo.svg'\nimport Loader from '@primer/components/Loader'\nimport Sidebar from '@primer/components/Sidebar'\nimport MobileMenu from '@primer/components/MobileMenu'\nimport { CogIcon, QuestionMarkCircleIcon, ViewGridIcon } from '@heroicons/react/outline'\nimport Topbar from '@primer/components/Topbar'\nimport OnRouteChange from '@primer/components/OnRouteChange'\nimport versions from '@primer/utils/versions'\nimport semver from 'semver'\nimport { site } from 'config'\nimport db from 'db'\n\nconst PageSidebar: FC<RouteComponentProps> = ({ children }) => {\n\tconst releases = versions.sort((a, b) => (semver.gt(a.number, b.number) ? -1 : 1))\n\n\tconst ref = useRef<HTMLDivElement>(null)\n\n\tconst entities = db.entities.all()\n\n\tconst links = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\ttitle: 'Home',\n\t\t\t\tto: '/home',\n\t\t\t\ticon: <ViewGridIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: true,\n\t\t\t},\n\t\t\t...entities\n\t\t\t\t.filter((x) => x.mainNav)\n\t\t\t\t.map((entity) => ({\n\t\t\t\t\ttitle: entity.plural || entity.name,\n\t\t\t\t\tto: `/${entity.key}`,\n\t\t\t\t\ticon: <QuestionMarkCircleIcon className=\"w-5 h-5\" />,\n\t\t\t\t\texact: true,\n\t\t\t\t})),\n\t\t\t{\n\t\t\t\ttitle: 'Settings',\n\t\t\t\tto: '/settings',\n\t\t\t\ticon: <CogIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: false,\n\t\t\t},\n\t\t],\n\t\t[entities]\n\t)\n\n\treturn (\n\t\t<div className=\"h-screen flex flex-col md:flex-row md:overflow-hidden bg-gray-200 dark:bg-gray-800\">\n\t\t\t<MobileMenu links={links} />\n\t\t\t<Sidebar\n\t\t\t\tname=\"main\"\n\t\t\t\tintent=\"primary\"\n\t\t\t\tlinks={links}\n\t\t\t\tclassName=\"hidden md:flex\"\n\t\t\t\theader={(min) => (\n\t\t\t\t\t<div className={clsx('flex items-center', min ? 'justify-center' : 'pl-5')}>\n\t\t\t\t\t\t<Link to={`${process.env.PUBLIC_URL}/dashboard`}>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={min ? smallLogo : logo}\n\t\t\t\t\t\t\t\talt=\"ICRA\"\n\t\t\t\t\t\t\t\tclassName={clsx('my-5 h-12', min ? 'ml-2' : '')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tfooter={(min) => (\n\t\t\t\t\t<div className={clsx('flex justify-between items-center', min ? 'flex-col space-y-2' : 'p-4')}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t'text-gray-400 text-sm font-medium cursor-default',\n\t\t\t\t\t\t\t\tmin ? 'text-center' : ''\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{!min ? `Version: ${releases[0].number}` : `v${releases[0].number}`}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{site === 'livetest' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-red-300 bg-red-400 dark:bg-red-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tLiveTest\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : site === 'demo' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-green-300 bg-green-400 dark:bg-green-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDemo\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : site === 'staging' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-green-300 bg-green-400 dark:bg-green-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tStaging\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : site === 'dev' ? (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t'py-0.5 -my-0.5 font-medium text-sm leading-6 text-indigo-300 bg-indigo-400 dark:bg-indigo-500 bg-opacity-25 dark:bg-opacity-25',\n\t\t\t\t\t\t\t\t\tmin ? 'w-full text-center' : 'px-2.5 rounded-full'\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tDev\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\n\t\t\t<div className=\"flex flex-col flex-1 md:w-0 md:overflow-hidden\">\n\t\t\t\t<main className=\"flex-1 relative z-0 md:overflow-y-auto focus:outline-none\" ref={ref}>\n\t\t\t\t\t<div className=\"max-w-7xl mx-auto\">\n\t\t\t\t\t\t<div className=\"border-b border-gray-300 dark:border-gray-700\">\n\t\t\t\t\t\t\t<Topbar />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<Suspense\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<div className=\"flex justify-center items-center h-screen\">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative z-10\">{children}</div>\n\t\t\t\t\t</Suspense>\n\t\t\t\t</main>\n\t\t\t</div>\n\n\t\t\t<OnRouteChange\n\t\t\t\taction={() => {\n\t\t\t\t\tif (ref?.current?.scrollTo) ref.current.scrollTo(0, 0)\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\nexport default PageSidebar\n","import { FC, Suspense, useMemo, useRef } from 'react'\nimport { RouteComponentProps, Link } from '@reach/router'\nimport logo from 'assets/img/workflow-logo-white-text.svg'\nimport Loader from '@primer/components/Loader'\nimport Topbar from '@primer/components/Topbar'\nimport OnRouteChange from '@primer/components/OnRouteChange'\nimport MobileMenu from '@primer/components/MobileMenu'\nimport { isNotNone } from '@primer/types'\nimport { CogIcon, QuestionMarkCircleIcon, ViewGridIcon } from '@heroicons/react/outline'\nimport db from 'db'\n\nconst PageTopbar: FC<RouteComponentProps> = ({ children }) => {\n\tconst ref = useRef<HTMLDivElement>(null)\n\n\tconst entities = db.entities.all()\n\n\tconst links = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\ttitle: 'Home',\n\t\t\t\tto: '/home',\n\t\t\t\ticon: <ViewGridIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: true,\n\t\t\t},\n\t\t\t...entities\n\t\t\t\t.filter((x) => x.mainNav)\n\t\t\t\t.map((entity) => ({\n\t\t\t\t\ttitle: entity.plural || entity.name,\n\t\t\t\t\tto: `/${entity.key}`,\n\t\t\t\t\ticon: <QuestionMarkCircleIcon className=\"w-5 h-5\" />,\n\t\t\t\t\texact: true,\n\t\t\t\t})),\n\t\t\t{\n\t\t\t\ttitle: 'Settings',\n\t\t\t\tto: '/settings',\n\t\t\t\ticon: <CogIcon className=\"w-5 h-5\" />,\n\t\t\t\texact: false,\n\t\t\t},\n\t\t],\n\t\t[entities]\n\t)\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"min-h-screen bg-gray-200 dark:bg-gray-800\">\n\t\t\t\t<MobileMenu links={links.filter(isNotNone)} withTopbar />\n\n\t\t\t\t<div className=\"bg-gray-800 dark:bg-gray-900 hidden md:block\">\n\t\t\t\t\t<nav className=\"bg-gray-800 dark:bg-gray-900\">\n\t\t\t\t\t\t<div className=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between h-16 px-4 sm:px-0\">\n\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<Link to={`${process.env.PUBLIC_URL}/dashboard`}>\n\t\t\t\t\t\t\t\t\t\t\t<img src={logo} alt=\"ICRA\" className=\"h-10\" />\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"hidden md:block\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"ml-10 flex items-baseline space-x-4\">\n\t\t\t\t\t\t\t\t\t\t\t{links.filter(isNotNone).map((x, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${x.to}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{x.title}\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"hidden md:block\">\n\t\t\t\t\t\t\t\t\t<Topbar intent=\"dark\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</nav>\n\t\t\t\t</div>\n\n\t\t\t\t<main ref={ref} className=\"relative z-0\">\n\t\t\t\t\t<Suspense\n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<div className=\"flex justify-center items-center h-screen\">\n\t\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"relative z-20\">{children}</div>\n\t\t\t\t\t</Suspense>\n\t\t\t\t</main>\n\t\t\t</div>\n\n\t\t\t<OnRouteChange\n\t\t\t\taction={() => {\n\t\t\t\t\twindow.scrollTo(0, 0)\n\t\t\t\t\tref?.current?.scrollTo(0, 0)\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t)\n}\n\nexport default PageTopbar\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface CardProps {\n\tclassName?: ClassValue\n\theader?: ReactNode\n\tfooter?: ReactNode\n\tchildren?: ReactNode\n}\n\nconst Card: FC<CardProps> = ({ className, header, footer, children }) => (\n\t<CardWrapper className={clsx(className)}>\n\t\t{header}\n\t\t{children && <CardContent>{children}</CardContent>}\n\t\t{footer && <CardFooter>{footer}</CardFooter>}\n\t</CardWrapper>\n)\n\nexport const CardWrapper: FC<{ children: ReactNode; className?: ClassValue }> = ({ className, children }) => (\n\t<div className={clsx('bg-white dark:bg-gray-700 shadow rounded-none sm:rounded-md', className)}>{children}</div>\n)\n\nexport const CardContent: FC<{ children: ReactNode; className?: ClassValue }> = ({ className, children }) => (\n\t<div className={clsx('px-4 py-5 sm:p-6', className)}>{children}</div>\n)\n\nexport const CardFooter: FC<{ children: ReactNode; className?: ClassValue }> = ({ className, children }) => (\n\t<div className={clsx('bg-gray-50 dark:bg-gray-750 sm:rounded-b-md px-4 py-4 sm:px-6', className)}>{children}</div>\n)\n\nexport default Card\n","import { FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface ButtonSpacerProps {\n\tclassName?: ClassValue\n}\n\nconst ButtonSpacer: FC<ButtonSpacerProps> = ({ className }) => (\n\t<div className={clsx('px-4 py-2 text-sm opacity-0 leading-5 pointer-events-none', className)}>&nbsp;</div>\n)\n\nexport default ButtonSpacer\n","import { FC, ReactNode, useEffect } from 'react'\nimport Actions from '@primer/components/Actions'\nimport ButtonSpacer from '@primer/components/ButtonSpacer'\nimport { ActionType, isNotNone, None } from '@primer/types'\nimport clsx, { ClassValue } from 'clsx'\nimport db from 'db'\n\ninterface PageInfo {\n\ttitle: ReactNode\n\ticon?: ReactNode\n}\n\ntype PageInfoType = PageInfo | None\n\ninterface PageHeadingProps {\n\ttitle?: ReactNode\n\tpageTitle?: string\n\tactions?: ActionType[]\n\tinfoList?: PageInfoType[]\n\tclassName?: ClassValue\n}\n\nconst PageHeading: FC<PageHeadingProps> = ({ title = '', pageTitle, actions = [], infoList, className }) => {\n\tuseEffect(() => {\n\t\tconst value = pageTitle || title\n\t\tdocument.title = `${value} - ${db.siteSettings.get('title')}`\n\t}, [title, pageTitle])\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div className=\"pt-3 lg:pt-6 antialiased\">\n\t\t\t\t<div className=\"max-w-7xl mx-auto px-4 mb-8 sm:px-6 lg:px-8\">\n\t\t\t\t\t<div className=\"md:flex md:items-start md:justify-between flex-wrap\">\n\t\t\t\t\t\t<div className=\"mr-4 my-3 flex-1 mb-6 md:mb-0\">\n\t\t\t\t\t\t\t<h2 className=\"flex items-center text-2xl leading-8 font-bold text-gray-900 dark:text-white sm:text-3xl sm:leading-9 whitespace-nowrap\">\n\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t{infoList && (\n\t\t\t\t\t\t\t\t<div className=\"mt-1 flex flex-col sm:mt-0 sm:flex-row sm:flex-wrap\">\n\t\t\t\t\t\t\t\t\t{infoList.filter(isNotNone).map((info, i) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2 flex items-center text-sm leading-5 text-gray-600 dark:text-gray-300 sm:mr-6\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{info.icon && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 mr-1.5 text-gray-500 dark:text-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{info.icon}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{info.title}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{actions.filter(isNotNone).length > 0 ? (\n\t\t\t\t\t\t\t<div className=\"my-3 flex\">\n\t\t\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<div className=\"my-3 hidden md:block\">\n\t\t\t\t\t\t\t\t<ButtonSpacer />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default PageHeading\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { smartReplaceClasses } from '@primer/utils/funcs'\n\nconst fixClasses = (className = '') =>\n\tsmartReplaceClasses(className, [{ pattern: /^max-w-\\dxl$/, defaultValue: 'max-w-7xl' }])\n\ninterface PageContentProps {\n\tclassName?: ClassValue\n\twidth?: number\n\tchildren: ReactNode\n}\n\nconst PageContent: FC<PageContentProps> = ({ className, children }) => {\n\treturn <div className={fixClasses(clsx('w-full mx-auto pb-8 sm:px-6 lg:px-8', className))}>{children}</div>\n}\n\nexport default PageContent\n","import { ActionModel, EntityModel, FieldModel, RoleModel } from 'db/types'\nimport { v4 as id } from 'uuid'\nimport db, { clear, persist } from './index'\n\nexport const seed = () => {\n\tclear()\n\tpersist()\n\n\tdb.siteSettings.set('title', 'NZDRC2')\n\tdb.siteSettings.set('layout', 'sidebar')\n\n\t// ENTITY TYPES\n\n\tconst userEntity: EntityModel = {\n\t\tid: id(),\n\t\tkey: 'user',\n\t\tname: 'User',\n\t\tplural: 'Users',\n\t\tmainNav: true,\n\t}\n\n\tconst caseEntity: EntityModel = {\n\t\tid: id(),\n\t\tkey: 'case',\n\t\tname: 'Case',\n\t\tplural: 'Cases',\n\t\tmainNav: true,\n\t}\n\n\tconst eventEntity: EntityModel = {\n\t\tid: id(),\n\t\tkey: 'event',\n\t\tname: 'Event',\n\t\tplural: 'Events',\n\t\tmainNav: false,\n\t}\n\n\tdb.entities.save(userEntity)\n\tdb.entities.save(caseEntity)\n\tdb.entities.save(eventEntity)\n\n\t// META TYPES\n\n\t// CASE\n\n\tconst caseFields: FieldModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: caseEntity.id,\n\t\t\tkey: 'case-number',\n\t\t\tname: 'Case Number',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: caseEntity.id,\n\t\t\tkey: 'type',\n\t\t\tname: 'Type',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Review', 'Mediation', 'Hybrid'],\n\t\t\tdefaultValue: 'Review',\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: caseEntity.id,\n\t\t\tkey: 'claim-number',\n\t\t\tname: 'Claim Number',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: caseEntity.id,\n\t\t\tkey: 'complexity',\n\t\t\tname: 'Complexity',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Standard', 'Complex'],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: caseEntity.id,\n\t\t\tkey: 'closed-date',\n\t\t\tname: 'Closed Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: caseEntity.id,\n\t\t\tkey: 'status',\n\t\t\tname: 'Status',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Pending', 'Open', 'Closed'],\n\t\t},\n\t]\n\n\tcaseFields.forEach(db.fields.save)\n\n\t// EVENTS\n\n\tconst eventFields: FieldModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: eventEntity.id,\n\t\t\tkey: 'start-date',\n\t\t\tname: 'Start Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: eventEntity.id,\n\t\t\tkey: 'end-date',\n\t\t\tname: 'End Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: eventEntity.id,\n\t\t\tkey: 'type',\n\t\t\tname: 'Type',\n\t\t\ttype: 'option',\n\t\t\toptions: ['Review', 'Mediation', 'CMC'],\n\t\t\tdefaultValue: 'CMC',\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: eventEntity.id,\n\t\t\tkey: 'decision-date',\n\t\t\tname: 'Decision Date',\n\t\t\ttype: 'date',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: eventEntity.id,\n\t\t\tkey: 'postponed',\n\t\t\tname: 'Postponed',\n\t\t\ttype: 'boolean',\n\t\t\toptions: [],\n\t\t},\n\t]\n\n\teventFields.forEach(db.fields.save)\n\n\t// USERS\n\n\tconst userFields: FieldModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: userEntity.id,\n\t\t\tkey: 'first-name',\n\t\t\tname: 'First Name',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: userEntity.id,\n\t\t\tkey: 'last-name',\n\t\t\tname: 'Last Name',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: userEntity.id,\n\t\t\tkey: 'email',\n\t\t\tname: 'Email',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: userEntity.id,\n\t\t\tkey: 'phone',\n\t\t\tname: 'Phone',\n\t\t\ttype: 'string',\n\t\t\toptions: [],\n\t\t},\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: userEntity.id,\n\t\t\tkey: 'active',\n\t\t\tname: 'Active',\n\t\t\ttype: 'boolean',\n\t\t\toptions: [],\n\t\t\tdefaultValue: 'true',\n\t\t},\n\t]\n\n\tuserFields.forEach(db.fields.save)\n\n\t// ACTIONS\n\n\t// CASE\n\n\tconst caseActions: ActionModel[] = [\n\t\t{\n\t\t\tid: id(),\n\t\t\tentityId: caseEntity.id,\n\t\t\tkey: 'close-case',\n\t\t\tname: 'Close Case',\n\t\t\tchanges: [],\n\t\t},\n\t]\n\n\tcaseActions.forEach(db.actions.save)\n\n\t// EVENTS\n\n\tconst eventActions: ActionModel[] = []\n\n\teventActions.forEach(db.actions.save)\n\n\t// CONNECTIONS\n\n\tdb.relations.save({\n\t\tid: id(),\n\t\tkey: 'events',\n\t\tname: 'Events',\n\t\tentityId: caseEntity.id,\n\t\trelatedId: eventEntity.id,\n\t\ttype: 'one-to-many',\n\t})\n\n\tdb.relations.save({\n\t\tid: id(),\n\t\tkey: 'attendees',\n\t\tname: 'Attendees',\n\t\tentityId: eventEntity.id,\n\t\trelatedId: userEntity.id,\n\t\ttype: 'one-to-many',\n\t})\n\n\tdb.relations.save({\n\t\tid: id(),\n\t\tkey: 'applicant',\n\t\tname: 'Applicant',\n\t\tentityId: userEntity.id,\n\t\trelatedId: caseEntity.id,\n\t\ttype: 'one-to-many',\n\t})\n\n\t// NOTIFICATIONS\n\n\tdb.notifications.save({\n\t\tid: id(),\n\t\tname: 'Event Reminder 2 days',\n\t\tfocus: eventEntity.id,\n\t\tenabled: true,\n\t\ttriggerType: 'date',\n\t\ttriggerRepeat: 2,\n\t\ttriggerEvery: '',\n\t\ttriggerYearIn: '',\n\t\ttriggerMonthOn: '',\n\t\ttriggerWeekOn: '',\n\t\ttriggerDayAt: '',\n\t\ttriggerAction: '',\n\t\tobeyTriggerTiming: true,\n\t\ttriggerTimingType: 'before',\n\t\ttriggerTiming: 'day',\n\t\ttriggerDate: db.fields.find((x) => x.entityId === eventEntity.id && x.key === 'start-date')?.id || '',\n\t\truleGroups: [\n\t\t\t{\n\t\t\t\trules: [\n\t\t\t\t\t{\n\t\t\t\t\t\tentity: eventEntity.id,\n\t\t\t\t\t\tfield: db.fields.find((x) => x.entityId === eventEntity.id && x.key === 'postponed')?.id || '',\n\t\t\t\t\t\toperator: 'false',\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tsubject: 'Upcoming Conference',\n\t\tcontent:\n\t\t\t'<h1>Hello {{recipient-first-name}}</h1><p><br></p><p>You have a {{event-type}} coming up on {{event-start-date}}</p>',\n\t})\n\n\tdb.templates.save({\n\t\tid: id(),\n\t\tname: 'Event Reminder 2 days',\n\t\tcontent:\n\t\t\t'<h1>Hello {{recipient-first-name}}</h1><p><br></p><p>You have a {{event-type}} coming up on {{event-start-date}}</p>',\n\t})\n\n\tconst adminRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Administrator',\n\t})\n\n\tconst caseManagerRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Case Manager',\n\t})\n\n\tconst reviewerRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Reviewer',\n\t})\n\n\tconst applicantRole = db.roles.save({\n\t\tid: id(),\n\t\tname: 'Applicant',\n\t})\n\n\t;([adminRole, caseManagerRole, reviewerRole] as RoleModel[]).forEach((role) => {\n\t\tdb.entities.all().forEach((entity) => {\n\t\t\tdb.entityPermissions.save({\n\t\t\t\tid: id(),\n\t\t\t\tentityId: entity.id,\n\t\t\t\troleId: role.id,\n\t\t\t\tview: true,\n\t\t\t\tmodify: true,\n\t\t\t\tremove: true,\n\t\t\t})\n\n\t\t\tdb.fields\n\t\t\t\t.all((x) => x.entityId === entity.id)\n\t\t\t\t.forEach((entityField) => {\n\t\t\t\t\tdb.fieldPermissions.save({\n\t\t\t\t\t\tid: id(),\n\t\t\t\t\t\tfieldId: entityField.id,\n\t\t\t\t\t\troleId: role.id,\n\t\t\t\t\t\tview: true,\n\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\tdb.actions\n\t\t\t\t.all((x) => x.entityId === entity.id)\n\t\t\t\t.forEach((entityAction) => {\n\t\t\t\t\tdb.actionPermissions.save({\n\t\t\t\t\t\tid: id(),\n\t\t\t\t\t\tactionId: entityAction.id,\n\t\t\t\t\t\troleId: role.id,\n\t\t\t\t\t\tperform: true,\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\tdb.relations\n\t\t\t\t.all((x) => x.entityId === entity.id)\n\t\t\t\t.forEach((relation) => {\n\t\t\t\t\tdb.relationPermissions.save({\n\t\t\t\t\t\tid: id(),\n\t\t\t\t\t\trelationId: relation.id,\n\t\t\t\t\t\troleId: role.id,\n\t\t\t\t\t\tview: true,\n\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\tremove: true,\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t})\n\t})\n\n\tdb.entities.all().forEach((entityType) => {\n\t\tdb.entityPermissions.save({\n\t\t\tid: id(),\n\t\t\tentityId: entityType.id,\n\t\t\troleId: applicantRole.id,\n\t\t\tview: true,\n\t\t\tmodify: false,\n\t\t\tremove: false,\n\t\t})\n\n\t\tdb.fields\n\t\t\t.all((x) => x.entityId === entityType.id)\n\t\t\t.forEach((entityField) => {\n\t\t\t\tdb.fieldPermissions.save({\n\t\t\t\t\tid: id(),\n\t\t\t\t\tfieldId: entityField.id,\n\t\t\t\t\troleId: applicantRole.id,\n\t\t\t\t\tview: true,\n\t\t\t\t\tmodify: false,\n\t\t\t\t})\n\t\t\t})\n\n\t\tdb.actions\n\t\t\t.all((x) => x.entityId === entityType.id)\n\t\t\t.forEach((entityAction) => {\n\t\t\t\tdb.actionPermissions.save({\n\t\t\t\t\tid: id(),\n\t\t\t\t\tactionId: entityAction.id,\n\t\t\t\t\troleId: applicantRole.id,\n\t\t\t\t\tperform: false,\n\t\t\t\t})\n\t\t\t})\n\n\t\tdb.relations\n\t\t\t.all((x) => x.entityId === entityType.id)\n\t\t\t.forEach((relation) => {\n\t\t\t\tdb.relationPermissions.save({\n\t\t\t\t\tid: id(),\n\t\t\t\t\trelationId: relation.id,\n\t\t\t\t\troleId: applicantRole.id,\n\t\t\t\t\tview: true,\n\t\t\t\t\tmodify: false,\n\t\t\t\t\tremove: false,\n\t\t\t\t})\n\t\t\t})\n\t})\n}\n\nif (!localStorage.getItem('data')) {\n\tseed()\n}\n","import { FC } from 'react'\nimport Card from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport { RouteComponentProps } from '@reach/router'\nimport Actions from '@primer/components/Actions'\nimport { clear } from 'db'\nimport { seed } from 'db/seed'\nimport Stack from '@primer/components/Stack'\n\nconst Home: FC<RouteComponentProps> = () => {\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Home\" />\n\n\t\t\t<PageContent>\n\t\t\t\t<Card>\n\t\t\t\t\t<Stack>\n\t\t\t\t\t\t<div className=\"rounded-md bg-red-400 text-red-800 dark:bg-red-500 dark:text-red-300 bg-opacity-25 dark:bg-opacity-25 p-4\">\n\t\t\t\t\t\t\t<span className=\"font-medium\">Note:</span> Modules haven't been properly figured out yet, so\n\t\t\t\t\t\t\tthat stuff is only a visual mockup\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"rounded-md bg-primary-400 text-primary-800 dark:bg-primary-500 dark:text-primary-300 bg-opacity-25 dark:bg-opacity-25 p-4 space-y-3\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\tFeel free to play around with the forms, create stuff, edit stuff, delete stuff. You can\n\t\t\t\t\t\t\t\tcome back to this page to reset the data.\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>Any changes you make are contained within your browser, so nothing is real.</p>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Clear Database',\n\t\t\t\t\t\t\t\t\tonClick: () => clear(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Reset Database',\n\t\t\t\t\t\t\t\t\tonClick: () => seed(),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Card>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default Home\n","export default __webpack_public_path__ + \"static/media/undraw_not_found_60pq.faf05e44.svg\";","import { FC } from 'react'\nimport { RouteComponentProps } from '@reach/router'\nimport illustration from 'assets/img/undraw_not_found_60pq.svg'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\n\nconst NotFound: FC<RouteComponentProps> = () => {\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Not Found\" />\n\n\t\t\t<PageContent>\n\t\t\t\t<div className=\"p-4\">\n\t\t\t\t\t<img src={illustration} alt=\"not found\" width=\"500\" className=\"mx-auto\" />\n\t\t\t\t</div>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default NotFound\n","import { CheckIcon, XIcon } from '@heroicons/react/outline'\nimport { format } from 'date-fns'\nimport db from 'db'\nimport { ValueModel } from 'db/types'\n\nexport const getEntityFieldValue = (val?: ValueModel) => {\n\tif (!val) return\n\n\tlet field = db.fields.find(val.fieldId)\n\n\tswitch (field?.type) {\n\t\tcase 'string':\n\t\tcase 'option':\n\t\t\treturn val.stringValue\n\t\tcase 'date':\n\t\t\treturn val.dateValue ? format(val.dateValue, 'dd/MM/yyyy') : undefined\n\t\tcase 'number':\n\t\t\treturn val.numberValue\n\t\tcase 'boolean':\n\t\t\treturn val.booleanValue ? <CheckIcon className=\"w-4 h-4\" /> : <XIcon className=\"w-4 h-4\" />\n\t}\n}\n\nexport const sortValuesByLatest = (a: ValueModel, b: ValueModel) => {\n\tif (a.created && b.created) return new Date(b.created).valueOf() - new Date(a.created).valueOf()\n\treturn 0\n}\n","import { FC, useState } from 'react'\nimport { CardWrapper } from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport { Link, RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { FieldModel, UnitModel } from 'db/types'\nimport { AdjustmentsIcon, CheckIcon, DotsHorizontalIcon, PencilIcon, TrashIcon } from '@heroicons/react/outline'\nimport { confirm } from '@primer/alerts'\nimport { getEntityFieldValue, sortValuesByLatest } from 'utils/funcs'\nimport Actions from '@primer/components/Actions'\n\nconst Units: FC<RouteComponentProps<{ entityId: string }>> = ({ entityId }) => {\n\tconst entityType = db.entities.find(entityId)\n\n\tconst fields = db.fields.all((x) => x.entityId === entityId)\n\n\tconst getValue = (entity: UnitModel, field?: FieldModel) =>\n\t\tdb.values.all((y) => y.unitId === entity.id && y.fieldId === field?.id).sort(sortValuesByLatest)[0]\n\n\tconst [visibleFields, setVisibleFields] = useState(fields)\n\n\tconst schema: TableSchema<UnitModel> = {\n\t\tcols: fields\n\t\t\t.filter((x) => visibleFields.includes(x))\n\t\t\t.map((field, i) => ({\n\t\t\t\ttitle: field.name,\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tlet val = getEntityFieldValue(getValue(x, field))\n\t\t\t\t\treturn i === 0 ? (\n\t\t\t\t\t\t<Link to={x.id} className=\"anchor\">\n\t\t\t\t\t\t\t{val || '-'}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tval || '-'\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t})),\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: `Edit ${entityType?.name}`,\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/${entityType?.key}/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: `Delete ${entityType?.name}`,\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.units.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\ttitle={entityType?.plural || entityType?.name || '-'}\n\t\t\t\tactions={[\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: `Create ${entityType?.name}`,\n\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\tto: `/${entityType?.key}/create`,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<CardWrapper className=\"overflow-hidden\">\n\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t<div className=\"absolute top-0 right-0 h-[42px] flex items-center mr-1\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\ticon: <AdjustmentsIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\tintent: 'menu',\n\t\t\t\t\t\t\t\t\tactions: fields.map((x) => ({\n\t\t\t\t\t\t\t\t\t\ttitle: x.name,\n\t\t\t\t\t\t\t\t\t\ticon: visibleFields.includes(x) ? (\n\t\t\t\t\t\t\t\t\t\t\t<CheckIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\ticonSide: 'left',\n\t\t\t\t\t\t\t\t\t\tdisableDismiss: true,\n\t\t\t\t\t\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t\t\t\t\t\tsetVisibleFields((f) =>\n\t\t\t\t\t\t\t\t\t\t\t\tvisibleFields.includes(x) ? f.filter((y) => y !== x) : [...f, x]\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\tschema={schema}\n\t\t\t\t\t\t\titems={db.units.all((x) => x.entityId === entityType?.id)}\n\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</CardWrapper>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default Units\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { isNotNone, None } from '@primer/types'\n\ninterface DataItemType {\n\ttitle?: string\n\tvalue?: ReactNode\n}\n\ninterface DataListColumnsProps {\n\titems: (DataItemType | None)[]\n\tcolumns?: 1 | 2 | 3\n\tclassName?: ClassValue\n}\n\nconst columnClassNames = {\n\t1: '',\n\t2: 'sm:w-1/2',\n\t3: 'sm:w-1/3',\n}\n\nconst DataListColumns: FC<DataListColumnsProps> = ({ items, columns = 2, className }) => {\n\tconst cols = items\n\t\t.filter(isNotNone)\n\t\t.filter((x) => x.value)\n\t\t.reduce(\n\t\t\t(list: DataItemType[][], item: DataItemType) => {\n\t\t\t\tif (list[list.length - 1].length < columns) {\n\t\t\t\t\tlist[list.length - 1].push(item)\n\t\t\t\t\treturn list\n\t\t\t\t} else {\n\t\t\t\t\treturn [...list, [item]]\n\t\t\t\t}\n\t\t\t},\n\t\t\t[[]]\n\t\t)\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<dl className=\"flex flex-col space-y-8\">\n\t\t\t\t{cols.map((lists, i) => (\n\t\t\t\t\t<div key={i} className=\"flex flex-col sm:flex-row sm:space-x-8 space-y-8 sm:space-y-0\">\n\t\t\t\t\t\t{lists.map((item, j) => (\n\t\t\t\t\t\t\t<div key={j} className={clsx('w-full', columnClassNames[columns])}>\n\t\t\t\t\t\t\t\t{item.title && (\n\t\t\t\t\t\t\t\t\t<dt className=\"text-sm leading-5 text-gray-500 dark:text-gray-300\">{item.title}</dt>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<dd className=\"mt-1 text-sm leading-5 break-all text-gray-900 dark:text-white\">\n\t\t\t\t\t\t\t\t\t{item.value}\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</dl>\n\t\t</div>\n\t)\n}\n\nexport default DataListColumns\n","import { isNotNone } from '@primer/types'\nimport db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { actionPermissionResource, ActionPermissionResource, EntityResource, entityResource, RoleModel } from '.'\n\nexport interface ActionModel extends Model {\n\tentityId: FK\n\tkey: string\n\tname: string\n\tchanges?: ActionChangeModel[]\n}\n\nexport interface ActionChangeModel extends Model {\n\tactionId: FK\n\tfieldId: FK\n\tuserDefined: boolean\n}\n\nexport interface ActionResource extends ActionModel {\n\treadonly entity: EntityResource | null\n\treadonly permissions: ActionPermissionResource[]\n\treadonly permission: (roleId: Identifier<RoleModel>) => ActionPermissionResource | null\n}\n\nexport const actionResource = (id: Identifier<ActionModel>): ActionResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.actions.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget entity() {\n\t\t\treturn entityResource((x) => x.id === data?.entityId)\n\t\t},\n\t\tget permissions() {\n\t\t\treturn db.actionPermissions\n\t\t\t\t.all((x) => x.actionId === data?.id)\n\t\t\t\t.map(actionPermissionResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tpermission: (roleId) => {\n\t\t\tlet role = typeof roleId === 'string' || typeof roleId === 'function' ? db.roles.find(roleId) : roleId\n\t\t\treturn actionPermissionResource((x) => x.actionId === data?.id && x.roleId === role?.id)\n\t\t},\n\t}\n}\n","import db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { RoleResource, ActionResource, roleResource, actionResource } from '.'\n\nexport interface ActionPermissionModel extends Model {\n\troleId: FK\n\tactionId: FK\n\tperform: boolean\n}\n\nexport interface ActionPermissionResource extends ActionPermissionModel {\n\treadonly role: RoleResource | null\n\treadonly action: ActionResource | null\n}\n\nexport const actionPermissionResource = (id: Identifier<ActionPermissionModel>): ActionPermissionResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.actionPermissions.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget role() {\n\t\t\treturn roleResource((x) => x.id === data?.roleId)\n\t\t},\n\t\tget action() {\n\t\t\treturn actionResource((x) => x.id === data?.actionId)\n\t\t},\n\t}\n}\n","import { isNotNone } from '@primer/types'\nimport db from 'db'\nimport { Identifier, Model } from 'types/db'\nimport {\n\tFieldResource,\n\tActionResource,\n\tRelationResource,\n\tUnitResource,\n\tfieldResource,\n\tactionResource,\n\trelationResource,\n\tunitResource,\n\tEntityPermissionResource,\n\tRoleModel,\n\tentityPermissionResource,\n} from '.'\n\nexport interface EntityModel extends Model {\n\tkey: string\n\tname: string\n\tplural?: string\n\tmainNav: boolean\n}\n\nexport interface EntityResource extends EntityModel {\n\treadonly fields: FieldResource[]\n\treadonly actions: ActionResource[]\n\treadonly relations: RelationResource[]\n\treadonly units: UnitResource[]\n\treadonly permissions: EntityPermissionResource[]\n\treadonly permission: (roleId: Identifier<RoleModel>) => EntityPermissionResource | null\n}\n\nexport const entityResource = (id: Identifier<EntityModel>): EntityResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.entities.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget fields() {\n\t\t\treturn db.fields\n\t\t\t\t.all((x) => x.entityId === data?.id)\n\t\t\t\t.map(fieldResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tget actions() {\n\t\t\treturn db.actions\n\t\t\t\t.all((x) => x.entityId === data?.id)\n\t\t\t\t.map(actionResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tget relations() {\n\t\t\treturn db.relations\n\t\t\t\t.all((x) => x.entityId === data?.id)\n\t\t\t\t.map(relationResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tget units() {\n\t\t\treturn db.fields\n\t\t\t\t.all((x) => x.entityId === data?.id)\n\t\t\t\t.map(unitResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tget permissions() {\n\t\t\treturn db.entityPermissions\n\t\t\t\t.all((x) => x.entityId === data?.id)\n\t\t\t\t.map(entityPermissionResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tpermission: (roleId) => {\n\t\t\tlet role = typeof roleId === 'string' || typeof roleId === 'function' ? db.roles.find(roleId) : roleId\n\t\t\treturn entityPermissionResource((x) => x.entityId === data?.id && x.roleId === role?.id)\n\t\t},\n\t}\n}\n","import db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { RoleResource, EntityResource, roleResource, entityResource } from '.'\n\nexport interface EntityPermissionModel extends Model {\n\troleId: FK\n\tentityId: FK\n\tview: boolean\n\tmodify: boolean\n\tremove: boolean\n}\n\nexport interface EntityPermissionResource extends EntityPermissionModel {\n\treadonly role: RoleResource | null\n\treadonly entity: EntityResource | null\n}\n\nexport const entityPermissionResource = (id: Identifier<EntityPermissionModel>): EntityPermissionResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.entityPermissions.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget role() {\n\t\t\treturn roleResource((x) => x.id === data?.roleId)\n\t\t},\n\t\tget entity() {\n\t\t\treturn entityResource((x) => x.id === data?.entityId)\n\t\t},\n\t}\n}\n","import { isNotNone } from '@primer/types'\nimport db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { sortValuesByLatest } from 'utils/funcs'\nimport {\n\tEntityResource,\n\tUnitModel,\n\tValueResource,\n\tFieldPermissionResource,\n\tRoleModel,\n\tentityResource,\n\tvalueResource,\n\tfieldPermissionResource,\n} from '.'\n\nexport type FieldType = 'string' | 'number' | 'date' | 'boolean' | 'option'\n\nexport interface FieldModel extends Model {\n\tentityId: FK\n\tkey: string\n\tname: string\n\tplural?: string\n\ttemplate?: string\n\ttype: FieldType\n\toptions: Array<string>\n\tdefaultValue?: string\n}\n\nexport interface FieldResource extends FieldModel {\n\treadonly entity: EntityResource | null\n\treadonly value: (unitId: Identifier<UnitModel>) => ValueResource | null\n\treadonly values: (unitId: Identifier<UnitModel>) => ValueResource[]\n\treadonly permissions: FieldPermissionResource[]\n\treadonly permission: (roleId: Identifier<RoleModel>) => FieldPermissionResource | null\n}\n\nexport const fieldResource = (id: Identifier<FieldModel>): FieldResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.fields.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget entity() {\n\t\t\treturn entityResource((x) => x.id === data?.entityId)\n\t\t},\n\t\tvalue: (unitId) => {\n\t\t\tlet unit = typeof unitId === 'string' || typeof unitId === 'function' ? db.units.find(unitId) : unitId\n\t\t\treturn valueResource(\n\t\t\t\tdb.values.all((x) => x.unitId === unit?.id && x.fieldId === data?.id).sort(sortValuesByLatest)[0]\n\t\t\t)\n\t\t},\n\t\tvalues: (unitId) => {\n\t\t\tlet unit = typeof unitId === 'string' || typeof unitId === 'function' ? db.units.find(unitId) : unitId\n\t\t\treturn db.values\n\t\t\t\t.all((x) => x.unitId === unit?.id && x.fieldId === data?.id)\n\t\t\t\t.sort(sortValuesByLatest)\n\t\t\t\t.map(valueResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tget permissions() {\n\t\t\treturn db.fieldPermissions\n\t\t\t\t.all((x) => x.fieldId === data?.id)\n\t\t\t\t.map(fieldPermissionResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t\tpermission: (roleId) => {\n\t\t\tlet role = typeof roleId === 'string' || typeof roleId === 'function' ? db.roles.find(roleId) : roleId\n\t\t\treturn fieldPermissionResource((x) => x.fieldId === data?.id && x.roleId === role?.id)\n\t\t},\n\t}\n}\n","import db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { RoleResource, FieldResource, roleResource, fieldResource } from '.'\n\nexport interface FieldPermissionModel extends Model {\n\troleId: FK\n\tfieldId: FK\n\tview: boolean\n\tmodify: boolean\n}\n\nexport interface FieldPermissionResource extends FieldPermissionModel {\n\treadonly role: RoleResource | null\n\treadonly field: FieldResource | null\n}\n\nexport const fieldPermissionResource = (id: Identifier<FieldPermissionModel>): FieldPermissionResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.fieldPermissions.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget role() {\n\t\t\treturn roleResource((x) => x.id === data?.roleId)\n\t\t},\n\t\tget field() {\n\t\t\treturn fieldResource((x) => x.id === data?.fieldId)\n\t\t},\n\t}\n}\n","import db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { EntityResource, entityResource } from '.'\n\nexport type RelationType = 'one-to-one' | 'one-to-many' | 'many-to-many'\n\nexport interface RelationModel extends Model {\n\tkey: string\n\tname: string\n\tentityId: FK\n\trelatedId: FK\n\ttype: RelationType\n}\n\nexport interface RelationResource extends RelationModel {\n\treadonly entity: EntityResource | null\n\treadonly related: EntityResource | null\n}\n\nexport const relationResource = (id: Identifier<RelationModel>): RelationResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.relations.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget entity() {\n\t\t\treturn entityResource((x) => x.id === data?.entityId)\n\t\t},\n\t\tget related() {\n\t\t\treturn entityResource((x) => x.id === data?.relatedId)\n\t\t},\n\t}\n}\n","import db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { RoleResource, RelationResource, roleResource, relationResource } from '.'\n\nexport interface RelationPermissionModel extends Model {\n\troleId: FK\n\trelationId: FK\n\tview: boolean\n\tmodify: boolean\n\tremove: boolean\n}\n\nexport interface RelationPermissionResource extends RelationPermissionModel {\n\treadonly role: RoleResource | null\n\treadonly relation: RelationResource | null\n}\n\nexport const relationPermissionResource = (\n\tid: Identifier<RelationPermissionModel>\n): RelationPermissionResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.relationPermissions.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget role() {\n\t\t\treturn roleResource((x) => x.id === data?.roleId)\n\t\t},\n\t\tget relation() {\n\t\t\treturn relationResource((x) => x.id === data?.relationId)\n\t\t},\n\t}\n}\n","import { isNotNone } from '@primer/types'\nimport db from 'db'\nimport { Identifier, Model } from 'types/db'\nimport {\n\tFieldModel,\n\tEntityModel,\n\tfieldPermissionResource,\n\tFieldPermissionResource,\n\tActionModel,\n\tActionPermissionResource,\n\tactionPermissionResource,\n\tRelationModel,\n\tRelationPermissionResource,\n\trelationPermissionResource,\n} from '.'\n\nexport interface RoleModel extends Model {\n\tname: string\n}\n\nexport interface RoleResource extends RoleModel {\n\treadonly fieldPermission: (x: Identifier<FieldModel>) => FieldPermissionResource | null\n\treadonly fieldPermissions: (x: Identifier<EntityModel>) => FieldPermissionResource[]\n\treadonly actionPermission: (x: Identifier<ActionModel>) => ActionPermissionResource | null\n\treadonly actionPermissions: (x: Identifier<EntityModel>) => ActionPermissionResource[]\n\treadonly relationPermission: (x: Identifier<RelationModel>) => RelationPermissionResource | null\n\treadonly relationPermissions: (x: Identifier<EntityModel>) => RelationPermissionResource[]\n}\n\nexport const roleResource = (id: Identifier<RoleModel>): RoleResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.roles.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tfieldPermission: (fieldId) => {\n\t\t\tlet field = typeof fieldId === 'string' || typeof fieldId === 'function' ? db.fields.find(fieldId) : fieldId\n\t\t\treturn fieldPermissionResource((y) => y.fieldId === field?.id && y.roleId === data?.id)\n\t\t},\n\t\tfieldPermissions: (entityId) => {\n\t\t\tlet entity =\n\t\t\t\ttypeof entityId === 'string' || typeof entityId === 'function' ? db.entities.find(entityId) : entityId\n\t\t\tlet fields = db.fields.all((x) => x.entityId === entity?.id)\n\t\t\treturn fields\n\t\t\t\t.map((x) => db.fieldPermissions.find((y) => y.fieldId === x.id && y.roleId === data?.id))\n\t\t\t\t.filter(isNotNone)\n\t\t\t\t.map(fieldPermissionResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\n\t\tactionPermission: (actionId) => {\n\t\t\tlet action =\n\t\t\t\ttypeof actionId === 'string' || typeof actionId === 'function' ? db.actions.find(actionId) : actionId\n\t\t\treturn actionPermissionResource((y) => y.actionId === action?.id && y.roleId === data?.id)\n\t\t},\n\t\tactionPermissions: (entityId) => {\n\t\t\tlet entity =\n\t\t\t\ttypeof entityId === 'string' || typeof entityId === 'function' ? db.entities.find(entityId) : entityId\n\t\t\tlet actions = db.actions.all((x) => x.entityId === entity?.id)\n\t\t\treturn actions\n\t\t\t\t.map((x) => db.actionPermissions.find((y) => y.actionId === x.id && y.roleId === data?.id))\n\t\t\t\t.filter(isNotNone)\n\t\t\t\t.map(actionPermissionResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\n\t\trelationPermission: (relationId) => {\n\t\t\tlet relation =\n\t\t\t\ttypeof relationId === 'string' || typeof relationId === 'function'\n\t\t\t\t\t? db.relations.find(relationId)\n\t\t\t\t\t: relationId\n\t\t\treturn relationPermissionResource((y) => y.relationId === relation?.id && y.roleId === data?.id)\n\t\t},\n\t\trelationPermissions: (entityId) => {\n\t\t\tlet entity =\n\t\t\t\ttypeof entityId === 'string' || typeof entityId === 'function' ? db.entities.find(entityId) : entityId\n\t\t\tlet relations = db.relations.all((x) => x.entityId === entity?.id)\n\t\t\treturn relations\n\t\t\t\t.map((x) => db.relationPermissions.find((y) => y.relationId === x.id && y.roleId === data?.id))\n\t\t\t\t.filter(isNotNone)\n\t\t\t\t.map(relationPermissionResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t}\n}\n","import { isNotNone } from '@primer/types'\nimport db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { sortValuesByLatest } from 'utils/funcs'\nimport { EntityResource, ValueResource, entityResource, valueResource } from '.'\n\nexport interface UnitModel extends Model {\n\tentityId: FK\n}\n\nexport interface UnitResource extends UnitModel {\n\treadonly entity: EntityResource | null\n\treadonly values: ValueResource[]\n}\n\nexport const unitResource = (id: Identifier<UnitModel>): UnitResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.units.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget entity() {\n\t\t\treturn entityResource((x) => x.id === data?.entityId)\n\t\t},\n\t\tget values() {\n\t\t\tlet entity = db.entities.find((x) => x.id === data?.entityId)\n\t\t\tlet fields = db.fields.all((x) => x.entityId === entity?.id)\n\t\t\treturn fields\n\t\t\t\t.map((x) => db.values.all((y) => y.fieldId === x.id).sort(sortValuesByLatest)[0])\n\t\t\t\t.map(valueResource)\n\t\t\t\t.filter(isNotNone)\n\t\t},\n\t}\n}\n","import db from 'db'\nimport { Model, FK, Identifier } from 'types/db'\nimport { sortValuesByLatest } from 'utils/funcs'\nimport { FieldResource, UnitResource, fieldResource, unitResource } from '.'\n\nexport interface ValueModel extends Model {\n\tunitId: FK\n\tfieldId: FK\n\tstringValue?: string\n\tdateValue?: Date\n\tbooleanValue?: boolean\n\tnumberValue?: number\n}\n\nexport interface ValueResource extends ValueModel {\n\treadonly field: FieldResource | null\n\treadonly unit: UnitResource | null\n\treadonly history: ValueModel[]\n}\n\nexport const valueResource = (id: Identifier<ValueModel>): ValueResource | null => {\n\tlet data = typeof id === 'string' || typeof id === 'function' ? db.values.find(id) : id\n\n\tif (!data) return null\n\n\treturn {\n\t\t...data,\n\t\tget field() {\n\t\t\treturn fieldResource((x) => x.id === data?.fieldId)\n\t\t},\n\t\tget unit() {\n\t\t\treturn unitResource((x) => x.id === data?.unitId)\n\t\t},\n\t\tget history() {\n\t\t\treturn db.values\n\t\t\t\t.all((x) => x.fieldId === data?.fieldId && x.unitId === data?.unitId)\n\t\t\t\t.sort(sortValuesByLatest)\n\t\t},\n\t}\n}\n","import { FC } from 'react'\nimport { Link, RouteComponentProps } from '@reach/router'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport Actions from '@primer/components/Actions'\nimport { ArrowLeftIcon } from '@heroicons/react/outline'\nimport DataListColumns from '@primer/components/DataListColumns'\nimport { getEntityFieldValue } from 'utils/funcs'\nimport { unitResource } from 'db/types'\n\nconst ViewEntity: FC<RouteComponentProps<{ entityId: string; id: string }>> = ({ id = '' }) => {\n\tconst unit = unitResource(id)\n\tconst entity = unit?.entity\n\tconst values = unit?.values\n\n\tconst title = `View ${entity?.name}`\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: `/${entity?.key}`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Card>\n\t\t\t\t\t<DataListColumns\n\t\t\t\t\t\titems={\n\t\t\t\t\t\t\tvalues?.map((x, i) => {\n\t\t\t\t\t\t\t\tlet hasHistory = x.history.length > 1\n\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\ttitle: x.field?.name,\n\t\t\t\t\t\t\t\t\tvalue: (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div>{getEntityFieldValue(x)}</div>\n\t\t\t\t\t\t\t\t\t\t\t{hasHistory && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={`${process.env.PUBLIC_URL}/value-history/${x?.id}`}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tSee history\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}) || []\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default ViewEntity\n","import { ReactNode } from 'react'\nimport { FormikConfig, Form as FormikForm, FormikProps, FormikHelpers, FormikProvider, useFormik } from 'formik'\n\ntype FormikRenderProp<T> = (props: FormikProps<T>) => ReactNode\n\nexport function isFormikRenderProp<T>(prop: any): prop is FormikRenderProp<T> {\n\treturn typeof prop === 'function'\n}\n\ninterface FormProps<T> {\n\tchildren: ReactNode | FormikRenderProp<T>\n\tcontext: FormikProps<T>\n\tclassName?: string\n}\n\nexport function Form<T>({ children, className, context }: FormProps<T>) {\n\treturn (\n\t\t<FormikProvider value={context}>\n\t\t\t<FormikForm className={className}>\n\t\t\t\t{isFormikRenderProp<T>(children) ? children(context) : children}\n\t\t\t</FormikForm>\n\t\t</FormikProvider>\n\t)\n}\n\nexport default Form\n\nexport const useForm = <T,>({ onSubmit, ...props }: FormikConfig<T>) => {\n\t// https://github.com/formium/formik/issues/739\n\tconst handleSubmit = async (formData: T, helpers: FormikHelpers<T>) => {\n\t\tawait onSubmit(formData, helpers)\n\t\thelpers.setSubmitting(false)\n\t}\n\n\tconst context = useFormik({\n\t\tonSubmit: handleSubmit,\n\t\t...props,\n\t})\n\n\treturn context\n}\n","import { FormikContextType, getIn } from 'formik'\nimport { FieldPath, FieldPathValue, FieldValues } from '@primer/types/form'\n\nexport interface FormValidations {\n\trequired?: string\n\tmin?: {\n\t\tvalue: number\n\t\tmessage: string\n\t}\n\tmax?: {\n\t\tvalue: number\n\t\tmessage: string\n\t}\n}\n\nexport const validate =\n\t(validations?: FormValidations) =>\n\t(value: any): string | undefined => {\n\t\tif (validations?.required && !value) {\n\t\t\treturn validations.required\n\t\t}\n\n\t\tif (validations?.min && +value < +validations.min.value) {\n\t\t\treturn validations.min.message\n\t\t}\n\n\t\tif (validations?.max && +value > +validations.max.value) {\n\t\t\treturn validations.max.message\n\t\t}\n\n\t\treturn undefined\n\t}\n\nexport function watch<\n\tTFieldValues extends FieldValues = FieldValues,\n\tTFieldName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>(name: TFieldName, context: FormikContextType<TFieldValues>): FieldPathValue<TFieldValues, TFieldName> {\n\treturn getIn(context?.values, name)\n}\n","import { ChangeEvent, ElementType, FC, ReactNode, useState } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport { FormValidations, validate } from './utils'\nimport { v4 as uuidv4 } from 'uuid'\n\ninterface FormInputProps {\n\tas?: ElementType | string\n\tname: string\n\tlabel?: ReactNode\n\ttype?: string\n\tclassName?: ClassValue\n\tautoFocus?: boolean\n\thideOptional?: boolean\n\tvalidations?: FormValidations\n\tplaceholder?: string\n\tdisabled?: boolean\n\tstep?: number\n\tdescription?: string\n\tinputProps?: {\n\t\tmin?: number\n\t\tmax?: number\n\t\tstep?: number\n\t\tclassName?: string\n\t}\n}\n\nconst FormInput: FC<FormInputProps> = ({\n\tas = 'input',\n\tname,\n\tlabel,\n\ttype = 'text',\n\tclassName,\n\tautoFocus = false,\n\thideOptional = false,\n\tvalidations = {},\n\tplaceholder,\n\tdisabled = false,\n\tdescription,\n\tinputProps = {},\n}) => {\n\tconst isRequired = validations?.required\n\n\tconst ref = useAutoFocus<HTMLInputElement>(autoFocus)\n\n\tconst Comp = as\n\n\tconst [{ value }, { error, touched }, { setValue, setTouched }] = useField({\n\t\tname,\n\t\ttype,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [token] = useState(uuidv4())\n\n\tconst { className: extraClassName, ...extraProps } = inputProps\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t{label && (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default\"\n\t\t\t\t\tonClick={() => ref.current?.focus()}\n\t\t\t\t>\n\t\t\t\t\t{label}{' '}\n\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className=\"text-[0px] leading-none select-none\">{token}</div>\n\n\t\t\t<div className={clsx('relative rounded-md', label && 'mt-1')}>\n\t\t\t\t<Comp\n\t\t\t\t\tref={ref}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={(e: ChangeEvent<HTMLInputElement>) => setValue(e.target.value)}\n\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t}}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'form-input block w-full sm:text-sm sm:leading-5',\n\t\t\t\t\t\textraClassName,\n\t\t\t\t\t\terror &&\n\t\t\t\t\t\t\ttouched &&\n\t\t\t\t\t\t\t'pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500'\n\t\t\t\t\t)}\n\t\t\t\t\t{...(Comp === 'input' ? extraProps : {})}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{description && <p className=\"mt-2 text-xs text-gray-500\">{description}</p>}\n\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t</div>\n\t)\n}\n\nexport default FormInput\n","import { FC, ReactNode, useState } from 'react'\nimport Select from 'react-select'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport { XIcon } from '@heroicons/react/outline'\nimport { v4 as uuidv4 } from 'uuid'\nimport { FormValidations, validate } from './utils'\n\nexport interface Option {\n\tlabel: string\n\tvalue: any\n}\n\ninterface FormSelectProps {\n\tname: string\n\tlabel?: ReactNode\n\toptions: Option[]\n\tclearable?: boolean\n\tdisabled?: boolean\n\tdescription?: string\n\tplaceholder?: string\n\tvalidations?: FormValidations\n\thideOptional?: boolean\n\tclassName?: ClassValue\n\tautoFocus?: boolean\n\tonChange?: (value: any) => void\n}\n\nconst FormSelect: FC<FormSelectProps> = ({\n\tname,\n\tlabel,\n\toptions,\n\tclearable,\n\tdisabled = false,\n\tdescription,\n\tplaceholder,\n\tvalidations = {},\n\thideOptional = false,\n\tclassName,\n\tautoFocus,\n\tonChange: onChangeProp,\n}) => {\n\tconst isRequired = validations?.required\n\n\tconst [{ value, onBlur }, { error, touched }, { setValue, setTouched }] = useField({\n\t\tname,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [token] = useState(uuidv4())\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<label className=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200\">\n\t\t\t\t{label && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{label}{' '}\n\t\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t)}\n\n\t\t\t\t<div className=\"text-[0px] leading-none select-none\">{token}</div>\n\n\t\t\t\t<Select\n\t\t\t\t\toptions={options}\n\t\t\t\t\tvalue={\n\t\t\t\t\t\toptions.find((x) => {\n\t\t\t\t\t\t\t// console.log('x.value', x.value, name)\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tx.value === value ||\n\t\t\t\t\t\t\t\t(value !== null && x.value === +value) ||\n\t\t\t\t\t\t\t\t(x.value?.id !== undefined && x.value?.id === value?.id)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}) || null\n\t\t\t\t\t}\n\t\t\t\t\tonChange={(option: any) => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\tsetValue(option ? option.value : null)\n\t\t\t\t\t\tif (onChangeProp) onChangeProp(option ? option.value : null)\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={(e) => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\tonBlur(e)\n\t\t\t\t\t}}\n\t\t\t\t\tinputProps={{ autoComplete: 'none', autoCorrect: 'off', spellCheck: 'off' }}\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t'react-select-container font-normal',\n\t\t\t\t\t\tlabel && 'mt-1',\n\t\t\t\t\t\terror && touched && 'react-select-container-error'\n\t\t\t\t\t)}\n\t\t\t\t\tclassNamePrefix=\"react-select\"\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tisClearable={clearable}\n\t\t\t\t\tisDisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tautoFocus={autoFocus}\n\t\t\t\t\tmenuPlacement=\"auto\"\n\t\t\t\t\tcomponents={{\n\t\t\t\t\t\tClearIndicator: ({ hasValue, innerProps: { ref, ...restInnerProps } }) => {\n\t\t\t\t\t\t\treturn hasValue ? (\n\t\t\t\t\t\t\t\t<span ref={ref} {...restInnerProps}>\n\t\t\t\t\t\t\t\t\t<XIcon className=\"mr-8 w-5 h-5 cursor-pointer text-gray-400 hover:text-red-500\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t},\n\t\t\t\t\t\tDropdownIndicator: ({ innerProps: { ref } }) => null,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</label>\n\n\t\t\t{description && !error && !touched && <p className=\"mt-2 text-sm text-gray-500\">{description}</p>}\n\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t</div>\n\t)\n}\n\nexport default FormSelect\n","import { FC, useEffect, useState } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport { usePopper } from '@primer/hooks/usePopper'\nimport { Placement } from '@popperjs/core/index'\nimport { ArrowLeftIcon, ArrowRightIcon } from '@heroicons/react/outline'\nimport useDismissable from '@primer/hooks/useDismissable'\nimport {\n\taddDays,\n\taddMonths,\n\tendOfMonth,\n\tformat,\n\tgetDaysInMonth,\n\tgetISODay,\n\tisAfter,\n\tisBefore,\n\tisSameDay,\n\tparse,\n\tstartOfMonth,\n\tsubDays,\n\tsubMonths,\n} from 'date-fns'\nimport { ensureDate, getReservedDate, isValidDate } from '@primer/utils/funcs'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport composeRefs from '@seznam/compose-react-refs'\nimport { FormValidations, validate } from './utils'\n\nconst weekDays = ['Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa', 'Su']\n\nconst isDate = (x: any): x is Date => x && x instanceof Date && isValidDate(x)\n\ninterface FormDateProps {\n\tname: string\n\tlabel?: string\n\tdescription?: string\n\tplaceholder?: string\n\thideOptional?: boolean\n\tvalidations?: FormValidations\n\tplacement?: Placement\n\toffset?: number | [number, number]\n\tdisabled?: boolean\n\tminDate?: Date\n\tmaxDate?: Date\n\tdisableHolidays?: boolean\n\tinputDisabled?: boolean\n\tautoFocus?: boolean\n\tclassName?: ClassValue\n\tinputClassName?: ClassValue\n}\n\nconst FormDate: FC<FormDateProps> = ({\n\tname,\n\tlabel,\n\tdescription,\n\tplaceholder = 'DD/MM/YYYY',\n\thideOptional,\n\tvalidations = {},\n\tplacement = 'bottom-end',\n\toffset = 10,\n\tdisabled,\n\tminDate,\n\tmaxDate,\n\tinputDisabled,\n\tdisableHolidays = false,\n\tautoFocus = false,\n\tclassName,\n\tinputClassName,\n}) => {\n\tconst isRequired = validations?.required\n\n\tconst [{ value, onBlur }, { error, touched }, { setValue, setTouched }] = useField({\n\t\tname,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [display, setDisplay] = useState(isDate(value) ? format(value, 'dd/MM/yyyy') : '')\n\tconst [context, setContext] = useState<Date>(startOfMonth(isDate(value) ? value : new Date()))\n\tconst [prevValue, setPrevValue] = useState<Date | null | undefined>()\n\n\tuseEffect(() => {\n\t\tif (prevValue !== value) {\n\t\t\tif (value) {\n\t\t\t\tlet ensuredDate = ensureDate(value)\n\t\t\t\tsetDisplay(isDate(ensuredDate) ? format(ensuredDate, 'dd/MM/yyyy') : '')\n\t\t\t\tsetPrevValue(value)\n\t\t\t} else {\n\t\t\t\tsetDisplay('')\n\t\t\t\tsetContext(new Date())\n\t\t\t}\n\t\t}\n\t}, [prevValue, value])\n\n\tconst {\n\t\topen,\n\t\tsetOpen,\n\t\tignoreClass,\n\t\tref: dismissableRef,\n\t} = useDismissable({\n\t\tonOpen: () => {\n\t\t\ttry {\n\t\t\t\tif (value) {\n\t\t\t\t\tlet dateValue = ensureDate(value)\n\t\t\t\t\tsetDisplay(format(dateValue, 'dd/MM/yyyy'))\n\t\t\t\t\tsetContext(dateValue)\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log('error', error)\n\t\t\t\tsetDisplay('')\n\t\t\t\tsetContext(new Date())\n\t\t\t}\n\t\t},\n\t})\n\n\tconst [reference, tooltip] = usePopper({\n\t\tplacement,\n\t\tstrategy: 'fixed',\n\t\tmodifiers: [\n\t\t\t{\n\t\t\t\tname: 'offset',\n\t\t\t\toptions: { offset: offset instanceof Array ? offset : [0, offset] },\n\t\t\t},\n\t\t],\n\t})\n\n\tconst preDays = new Array(getISODay(startOfMonth(context)) - 1)\n\t\t.fill(null)\n\t\t.map((_, i) => subDays(endOfMonth(subMonths(context, 1)), i))\n\t\t.reverse()\n\n\tconst postDays = new Array(7 - getISODay(endOfMonth(context)))\n\t\t.fill(null)\n\t\t.map((_, i) => addDays(startOfMonth(addMonths(context, 1)), i))\n\n\tconst days = new Array(getDaysInMonth(context)).fill(null).map((_, i) => addDays(startOfMonth(context), i))\n\n\tconst select = (day: Date) => {\n\t\tsetValue(day)\n\t\tsetTouched(true)\n\t\tsetOpen(false)\n\n\t\tsetDisplay(format(day, 'dd/MM/yyyy'))\n\t}\n\n\tconst autoFocusRef = useAutoFocus<HTMLInputElement>(autoFocus)\n\n\treturn (\n\t\t<div className={clsx(className)} ref={dismissableRef}>\n\t\t\t<label>\n\t\t\t\t{label && (\n\t\t\t\t\t<div className=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200\">\n\t\t\t\t\t\t{label}{' '}\n\t\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className={clsx('relative rounded-md', label && 'mt-1')}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tvalue={display}\n\t\t\t\t\t\tonChange={(e) => setDisplay(e.target.value)}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\tdisabled={formik.isSubmitting || disabled}\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tref={composeRefs(reference, autoFocusRef)}\n\t\t\t\t\t\tonClick={() => setOpen(true)}\n\t\t\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\t\t\tif (inputDisabled) {\n\t\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetOpen(false)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonBlur={(event) => {\n\t\t\t\t\t\t\tif (!display) {\n\t\t\t\t\t\t\t\tsetValue(null)\n\t\t\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet displayDate = parse(display, 'dd/MM/yyyy', new Date())\n\n\t\t\t\t\t\t\t\tif (isValidDate(displayDate)) {\n\t\t\t\t\t\t\t\t\tsetValue(displayDate)\n\t\t\t\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetDisplay(isDate(value) ? format(value, 'dd/MM/yyyy') : '')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tonBlur(event)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'form-input block w-full sm:text-sm sm:leading-5',\n\t\t\t\t\t\t\terror &&\n\t\t\t\t\t\t\t\ttouched &&\n\t\t\t\t\t\t\t\t'pr-10 border-red-300 text-red-900 placeholder-red-300 focus:outline-none focus:ring-red-500 focus:border-red-500',\n\t\t\t\t\t\t\tinputClassName,\n\t\t\t\t\t\t\tignoreClass\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div className={clsx(!open && 'hidden', 'z-10')} ref={tooltip}>\n\t\t\t\t\t\t<div className=\"mt rounded-md shadow-lg bg-white dark:bg-gray-700 w-80 overflow-hidden\">\n\t\t\t\t\t\t\t<div className=\"flex items-center dark:bg-gray-750 p-4 border-b border-gray-100 dark:border-gray-600\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => setContext((c) => subMonths(c, 1))}\n\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ArrowLeftIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<div className=\"flex-1 flex items-center justify-center text-sm font-medium\">\n\t\t\t\t\t\t\t\t\t{format(context, 'MMMM yyyy')}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tonClick={() => setContext((c) => addMonths(c, 1))}\n\t\t\t\t\t\t\t\t\tclassName=\"inline-flex items-center font-medium border transition ease-in-out duration-150 disabled:cursor-not-allowed border-gray-300 focus:border-indigo-500 dark:border-gray-600 dark:focus:border-indigo-500 text-gray-700 active:text-gray-800 hover:text-gray-500 dark:text-gray-200 dark:active:text-white dark:hover:text-white bg-white active:bg-gray-50 dark:bg-gray-800 dark:active:bg-gray-900 dark:hover:bg-gray-750 focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-indigo-700 px-3 py-2 text-sm leading-5 rounded-md\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ArrowRightIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"p-4 grid grid-cols-7\">\n\t\t\t\t\t\t\t\t{weekDays.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName=\"col-span-1 w-8 h-8 flex items-center justify-center rounded m-1 cursor-default text-sm text-gray-400\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{day}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{preDays.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName=\"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(day, 'd')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{days.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'col-span-1 w-7 h-7 flex items-center justify-center rounded m-2 cursor-pointer disabled:pointer-events-none text-sm font-medium hover:bg-indigo-100 dark:hover:bg-gray-800 disabled:opacity-50',\n\t\t\t\t\t\t\t\t\t\t\tisSameDay(new Date(), day) && 'text-indigo-400 ring-2 ring-indigo-300',\n\t\t\t\t\t\t\t\t\t\t\tvalue && isSameDay(ensureDate(value), day) && 'bg-indigo-600 text-white'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => select(day)}\n\t\t\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t\t\t(minDate && isBefore(day, minDate)) ||\n\t\t\t\t\t\t\t\t\t\t\t(maxDate && isAfter(day, maxDate)) ||\n\t\t\t\t\t\t\t\t\t\t\t(disableHolidays && !!getReservedDate(day))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttitle={getReservedDate(day)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(day, 'd')}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t{postDays.map((day, i) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\tclassName=\"col-span-1 w-8 h-8 flex items-center justify-center rounded text-gray-300 dark:text-gray-500 m-1 cursor-default text-sm font-medium\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{format(day, 'd')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</label>\n\n\t\t\t{description && !error && !touched && <p className=\"mt-2 text-sm text-gray-500\">{description}</p>}\n\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t</div>\n\t)\n}\n\nexport default FormDate\n","import { FC, ReactNode } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface FormCheckboxProps {\n\tname: string\n\tlabel?: ReactNode\n\tdefaultValue?: any\n\tdisabled?: boolean\n\tinputClassName?: ClassValue\n\tclassName?: ClassValue\n\tcolor?: string\n\tautoFocus?: boolean\n}\n\nconst FormCheckbox: FC<FormCheckboxProps> = ({\n\tname,\n\tlabel,\n\tdisabled,\n\tcolor = 'bg-primary-500 dark:bg-primary-500',\n\tclassName,\n\tautoFocus,\n}) => {\n\t// helpers: {setValue: , setTouched: , setError: }\n\tconst [field] = useField({\n\t\tname,\n\t\ttype: 'checkbox',\n\t})\n\n\tconst { value } = field\n\n\tconst formik = useFormikContext()\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<label className=\"text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-center cursor-pointer\">\n\t\t\t\t<Toggle checked={value} color={color} />\n\t\t\t\t{label && <span className=\"ml-3\">{label}</span>}\n\t\t\t\t<input\n\t\t\t\t\t{...field}\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tclassName=\"hidden\"\n\t\t\t\t\tautoFocus={autoFocus}\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t)\n}\n\ninterface ToggleProps {\n\tchecked: boolean\n\tcolor: string\n}\n\nconst Toggle: FC<ToggleProps> = ({ checked, color }) => {\n\treturn (\n\t\t<span\n\t\t\trole=\"checkbox\"\n\t\t\ttabIndex={0}\n\t\t\taria-checked=\"false\"\n\t\t\tclassName={clsx(\n\t\t\t\t'relative inline-block flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:shadow-outline',\n\t\t\t\t{\n\t\t\t\t\t[color]: checked,\n\t\t\t\t\t'bg-gray-200 dark:bg-gray-800': !checked,\n\t\t\t\t}\n\t\t\t)}\n\t\t>\n\t\t\t<span\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'translate-x-0 inline-block h-5 w-5 rounded-full shadow transform transition ease-in-out duration-200',\n\t\t\t\t\t{\n\t\t\t\t\t\t'translate-x-5 bg-white dark:bg-white': checked,\n\t\t\t\t\t\t'translate-x-0 bg-white dark:bg-gray-400': !checked,\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t></span>\n\t\t</span>\n\t)\n}\n\nexport default FormCheckbox\n","import { FC, useState } from 'react'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport FormSelect from '@primer/components/Form/FormSelect'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport db from 'db'\nimport Actions from '@primer/components/Actions'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Stack from '@primer/components/Stack'\nimport FormDate from '@primer/components/Form/FormDate'\nimport FormToggle from '@primer/components/Form/FormToggle'\nimport { entityResource } from 'db/types'\n\ninterface FormSchema {\n\tfields: {\n\t\t[x: string]: {\n\t\t\tid?: string\n\t\t\tstringValue?: string\n\t\t\tdateValue?: Date\n\t\t\tbooleanValue?: boolean\n\t\t\tnumberValue?: number\n\t\t}\n\t}\n}\n\nconst UnitForm: FC<RouteComponentProps<{ entityId: string; mode: 'create' | 'edit'; id: string }>> = ({\n\tentityId = '',\n\tmode,\n\tid = '',\n}) => {\n\tconst entity = entityResource(entityId)\n\tconst fields = entity?.fields\n\n\tconst [initialValues] = useState<FormSchema>({\n\t\tfields:\n\t\t\tfields?.reduce((list, field) => {\n\t\t\t\tlet value = field.value(id)\n\t\t\t\tlet key = field?.key || ''\n\t\t\t\tlet defaultValue = field?.defaultValue\n\t\t\t\tlet type = field?.type\n\t\t\t\tlet valueData = value\n\n\t\t\t\tif (valueData) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...list,\n\t\t\t\t\t\t[key]: {\n\t\t\t\t\t\t\tid: valueData?.id,\n\t\t\t\t\t\t\tstringValue: valueData?.stringValue || '',\n\t\t\t\t\t\t\tdateValue: valueData?.dateValue || '',\n\t\t\t\t\t\t\tbooleanValue: valueData?.booleanValue || false,\n\t\t\t\t\t\t\tnumberValue: valueData?.numberValue || '',\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...list,\n\t\t\t\t\t\t[key]: {\n\t\t\t\t\t\t\tid: undefined,\n\t\t\t\t\t\t\tstringValue: type === 'string' ? defaultValue : '',\n\t\t\t\t\t\t\tdateValue: type === 'date' ? new Date(defaultValue || '') : '',\n\t\t\t\t\t\t\tbooleanValue: type === 'boolean' ? defaultValue?.toLowerCase() === 'true' : false,\n\t\t\t\t\t\t\tnumberValue: type === 'number' ? +(defaultValue || '') : '',\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, {}) || {},\n\t})\n\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues,\n\t\tonSubmit: (formData) => {\n\t\t\tif (!entityId) return\n\n\t\t\tlet newUnit = db.units.save({ entityId, ...(id ? { id } : {}) })\n\n\t\t\tObject.entries(formData.fields).forEach(([key, field]) => {\n\t\t\t\tlet entityField = db.fields.find((x) => x.key === key)\n\n\t\t\t\tif (!entityField) return\n\n\t\t\t\tlet save = false\n\n\t\t\t\tswitch (entityField.type) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\tcase 'option':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].stringValue !== field.stringValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'number':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].numberValue !== field.numberValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].booleanValue !== field.booleanValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tif (initialValues.fields[entityField.key].dateValue !== field.dateValue) {\n\t\t\t\t\t\t\tsave = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tif (save || !field.id) {\n\t\t\t\t\tdb.values.save({\n\t\t\t\t\t\t...field,\n\t\t\t\t\t\tid: undefined,\n\t\t\t\t\t\tunitId: newUnit.id,\n\t\t\t\t\t\tfieldId: entityField?.id,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/${entity?.key}`)\n\t\t},\n\t})\n\n\tconst title = mode === 'create' ? `Create ${entity?.plural}` : `Edit ${entity?.name}`\n\n\treturn (\n\t\t<Form context={formContext}>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: `/${entity?.key}`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Stack>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t{fields?.map((field) =>\n\t\t\t\t\t\t\t\tfield?.type === 'string' ? (\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tkey={field?.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field?.key}.stringValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field?.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field?.type === 'number' ? (\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tkey={field?.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field?.key}.numberValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field?.name}\n\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field?.type === 'date' ? (\n\t\t\t\t\t\t\t\t\t<FormDate\n\t\t\t\t\t\t\t\t\t\tkey={field?.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field?.key}.dateValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field?.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field?.type === 'boolean' ? (\n\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\tkey={field?.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field?.key}.booleanValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field?.name}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : field?.type === 'option' ? (\n\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\tkey={field?.key}\n\t\t\t\t\t\t\t\t\t\tname={`fields.${field?.key}.stringValue`}\n\t\t\t\t\t\t\t\t\t\tlabel={field?.name}\n\t\t\t\t\t\t\t\t\t\toptions={field?.options.map((x) => ({ label: x, value: x })) || []}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</Card>\n\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\tdisabled: formContext.isSubmitting,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageContent>\n\t\t</Form>\n\t)\n}\n\nexport default UnitForm\n","import { FC } from 'react'\nimport Card from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport { RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon } from '@heroicons/react/outline'\nimport { getEntityFieldValue } from 'utils/funcs'\nimport Actions from '@primer/components/Actions'\nimport { valueResource } from 'db/types'\n\nconst ValueHistory: FC<RouteComponentProps<{ id: string }>> = ({ id = '' }) => {\n\tconst value = valueResource(id)\n\tconst field = value?.field\n\tconst entity = field?.entity\n\tconst unit = value?.unit\n\n\tconst title = `History of ${field?.name}`\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: `/${entity?.key}/${unit?.id}`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Card>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{value?.history.map((x) => (\n\t\t\t\t\t\t\t<li key={x.id}>{getEntityFieldValue(x)}</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</Card>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default ValueHistory\n","import { FC } from 'react'\nimport { useLocation, navigate, RouteComponentProps } from '@reach/router'\nimport { MailIcon, AcademicCapIcon, CubeIcon, PuzzleIcon, DocumentTextIcon, CogIcon } from '@heroicons/react/outline'\n\nexport const links = [\n\t{\n\t\ttitle: 'Entities',\n\t\tto: '/settings/entities',\n\t\ticon: <CubeIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Roles',\n\t\tto: `/settings/roles`,\n\t\ticon: <AcademicCapIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Templates',\n\t\tto: `/settings/templates`,\n\t\ticon: <DocumentTextIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Notifications',\n\t\tto: '/settings/notifications',\n\t\ticon: <MailIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Modules',\n\t\tto: '/settings/modules',\n\t\ticon: <PuzzleIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n\t{\n\t\ttitle: 'Site Settings',\n\t\tto: '/settings/site-settings',\n\t\ticon: <CogIcon className=\"w-5 h-5\" />,\n\t\tshow: () => true,\n\t\texact: true,\n\t},\n]\n\nconst Admin: FC<RouteComponentProps> = ({ children }) => {\n\tconst location = useLocation()\n\n\tif (location.pathname === '/settings') {\n\t\tnavigate(links[0].to)\n\t\treturn null\n\t}\n\n\treturn <>{children}</>\n}\n\nexport default Admin\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport { isAnchorRouteConfig, isLinkRouteConfig, isNotNone, RouteConfig } from '@primer/types'\nimport { LinkGetProps, Link } from '@reach/router'\nimport { ExternalLinkIcon } from '@heroicons/react/outline'\nimport Tooltip from './Tooltip'\n\ntype IntentValue = 'primary' | 'secondary' | 'white'\n\nconst intents = {\n\tprimary: {\n\t\twrapper: 'bg-gray-800 dark:bg-gray-900 antialiased',\n\t\tlink: {\n\t\t\tactive: 'text-white bg-gray-700 dark:bg-gray-700 focus:bg-gray-900 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-200 hover:text-white hover:bg-gray-900 focus:text-white focus:bg-gray-700 dark:hover:bg-gray-800',\n\t\t},\n\t\ttoggle: 'text-gray-400 hover:text-gray-300 hover:bg-gray-700',\n\t},\n\tsecondary: {\n\t\twrapper: 'bg-white dark:bg-gray-700 antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-primary-900 dark:text-gray-100 bg-primary-100 dark:bg-gray-800 focus:bg-gray-200 dark:focus:bg-gray-800',\n\t\t\tinactive:\n\t\t\t\t'text-gray-600 dark:text-gray-200 hover:text-gray-900 dark:hover:text-gray-200 dark:hover:bg-gray-600 hover:bg-primary-50 focus:text-gray-900 focus:bg-gray-100 dark:focus:bg-gray-800 dark:focus:text-gray-200',\n\t\t},\n\t\ttoggle: 'text-gray-400 hover:text-gray-500 hover:bg-gray-100',\n\t},\n\twhite: {\n\t\twrapper: 'bg-white antialiased shadow',\n\t\tlink: {\n\t\t\tactive: 'text-gray-900 bg-gray-50 focus:bg-gray-200',\n\t\t\tinactive: 'text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:text-gray-900 focus:bg-gray-100',\n\t\t},\n\t\ttoggle: 'text-gray-400 hover:text-gray-500 hover:bg-gray-100',\n\t},\n}\n\ninterface NavListProps {\n\tlinks: RouteConfig[]\n\tintent?: IntentValue\n\tmin?: boolean\n\tclassName?: ClassValue\n}\n\nconst NavList: FC<NavListProps> = ({ links, intent = 'secondary', min = false, className = null }) => {\n\treturn (\n\t\t<nav className={clsx('space-y-1', className)}>\n\t\t\t{links.filter(isNotNone).map((link, i) => (\n\t\t\t\t<NavLink key={i} link={link} intent={intent} min={min} />\n\t\t\t))}\n\t\t</nav>\n\t)\n}\n\ninterface NavLinkProps {\n\tlink: RouteConfig\n\tintent: IntentValue\n\tmin?: boolean\n}\n\nconst NavLink: FC<NavLinkProps> = ({ link, intent, min = false }) => {\n\treturn (\n\t\t<div>\n\t\t\t{link && (\n\t\t\t\t<Tooltip message={link.tooltip || link.title} enabled={min} intent=\"dark\">\n\t\t\t\t\t<MenuLink route={link} intent={intent}>\n\t\t\t\t\t\t<div className=\"opacity-75 pointer-events-none mr-3\">{link.icon}</div>\n\t\t\t\t\t\t<div className={clsx(min && 'lg:hidden')}>{link.title}</div>\n\t\t\t\t\t</MenuLink>\n\t\t\t\t</Tooltip>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nconst getProps =\n\t(route: RouteConfig, intent: IntentValue) =>\n\t({ isCurrent, isPartiallyCurrent }: LinkGetProps) => {\n\t\treturn (route.exact ? isCurrent : isPartiallyCurrent)\n\t\t\t? {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center p-2 text-sm font-medium leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t\t\t\tintents[intent].link.active\n\t\t\t\t\t),\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t'group flex items-center p-2 text-sm font-medium leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t\t\t\tintents[intent].link.inactive\n\t\t\t\t\t),\n\t\t\t  }\n\t}\n\nconst MenuLink = ({ route, intent, children }: { route: RouteConfig; intent: IntentValue; children: ReactNode }) => {\n\treturn isAnchorRouteConfig(route) ? (\n\t\t<a\n\t\t\thref={route.url}\n\t\t\tclassName={clsx(\n\t\t\t\t'group flex items-center justify-center p-2 text-sm leading-5 rounded-l rounded-r transition ease-in-out duration-150 focus:outline-none focus:ring-2 focus:ring-primary-500',\n\t\t\t\tintents[intent].link.inactive,\n\t\t\t\t'justify-center'\n\t\t\t)}\n\t\t\ttarget=\"_blank\"\n\t\t\trel=\"noopener noreferrer\"\n\t\t>\n\t\t\t<div className=\"flex items-center justify-center\">{children}</div>\n\n\t\t\t<div className=\"flex-1 flex justify-end\">\n\t\t\t\t<ExternalLinkIcon className=\"opacity-25 w-4 h-4\" />\n\t\t\t</div>\n\t\t</a>\n\t) : isLinkRouteConfig(route) ? (\n\t\t<Link to={`${process.env.PUBLIC_URL}${route.to}`} getProps={getProps(route, intent)}>\n\t\t\t{children}\n\t\t</Link>\n\t) : null\n}\n\nexport default NavList\n","import { FC, ReactNode } from 'react'\nimport { RouteConfig } from '@primer/types'\nimport NavList from '@primer/components/NavList'\nimport PageContent from '@primer/components/PageContent'\nimport { CardWrapper } from '@primer/components/Card'\nimport clsx, { ClassValue } from 'clsx'\nimport useLocalStorage from '@primer/hooks/useLocalStorage'\n\ninterface PageNavbarProps {\n\tlinks: RouteConfig[]\n\tclassName?: ClassValue\n\tchildren: ReactNode\n}\n\nconst PageNavbar: FC<PageNavbarProps> = ({ links, className, children }) => {\n\tconst [min, setMin] = useLocalStorage('case-min', false)\n\n\treturn (\n\t\t<PageContent className={className}>\n\t\t\t<CardWrapper className=\"relative\">\n\t\t\t\t<div className=\"max-w-full\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t'grid grid-cols-1 max-w-full',\n\t\t\t\t\t\t\tmin ? 'md:grid-cols-[62px,minmax(0,1fr)]' : 'md:grid-cols-[20rem,minmax(0,1fr)]'\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"p-3\">\n\t\t\t\t\t\t\t<NavList links={links} min={min} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"relative mt-6 lg:mt-0 border-t lg:border-t-0 lg:border-l border-gray-200 dark:border-gray-600\">\n\t\t\t\t\t\t\t<div className=\"absolute top-0 left-0 h-full group z-10\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'w-1 -ml-0.5 h-full bg-primary-600 opacity-0 group-hover:opacity-100 transition-opacity duration-100 ease-linear',\n\t\t\t\t\t\t\t\t\t\tmin ? 'cursor-right' : 'cursor-left'\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => setMin(!min)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>{children}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</CardWrapper>\n\t\t</PageContent>\n\t)\n}\n\nexport default PageNavbar\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ntype SizeType = 'sm' | 'md'\n\nconst sizes = {\n\tsm: 'px-2 py-0.5 -my-0.5 text-xs leading-5',\n\tmd: 'px-2.5 py-0.5 -my-0.5 text-sm leading-6',\n}\n\ntype ThemeType = 'gray' | 'red' | 'green' | 'yellow' | 'green' | 'teal' | 'blue' | 'indigo' | 'purple' | 'pink'\n\nexport const themes = {\n\tgray: 'bg-gray-400 text-gray-800 dark:bg-gray-500 dark:text-gray-300 bg-opacity-25 dark:bg-opacity-25',\n\tred: 'bg-red-400 text-red-800 dark:bg-red-500 dark:text-red-300 bg-opacity-25 dark:bg-opacity-25',\n\torange: 'bg-green-400 text-green-800 dark:bg-green-500 dark:text-green-300 bg-opacity-25 dark:bg-opacity-25',\n\tyellow: 'bg-yellow-400 text-yellow-800 dark:bg-yellow-500 dark:text-yellow-300 bg-opacity-25 dark:bg-opacity-25',\n\tgreen: 'bg-green-400 text-green-800 dark:bg-green-500 dark:text-green-300 bg-opacity-25 dark:bg-opacity-25',\n\tteal: 'bg-teal-400 text-teal-800 dark:bg-teal-500 dark:text-teal-300 bg-opacity-25 dark:bg-opacity-25',\n\tblue: 'bg-blue-400 text-blue-800 dark:bg-blue-500 dark:text-blue-300 bg-opacity-25 dark:bg-opacity-25',\n\tindigo: 'bg-indigo-400 text-indigo-800 dark:bg-indigo-500 dark:text-indigo-300 bg-opacity-25 dark:bg-opacity-25',\n\tpurple: 'bg-purple-400 text-purple-800 dark:bg-purple-500 dark:text-purple-300 bg-opacity-25 dark:bg-opacity-25',\n\tpink: 'bg-pink-400 text-pink-800 dark:bg-pink-500 dark:text-pink-300 bg-opacity-25 dark:bg-opacity-25',\n}\n\nexport interface BadgeProps {\n\tcolor: ThemeType\n\tsize?: SizeType\n\ticon?: ReactNode\n\tclassName?: ClassValue\n\tchildren?: ReactNode\n}\n\nconst Badge: FC<BadgeProps> = ({ color, size = 'md', icon, className, children }) => {\n\treturn (\n\t\t<span\n\t\t\tclassName={clsx(`inline-flex items-center font-medium`, themes[color], sizes[size], 'rounded', className)}\n\t\t>\n\t\t\t{icon !== undefined ? (\n\t\t\t\ticon\n\t\t\t) : (\n\t\t\t\t<svg className=\"mr-2 h-2 w-2\" fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t\t<circle cx=\"4\" cy=\"4\" r=\"3\" />\n\t\t\t\t</svg>\n\t\t\t)}\n\t\t\t{children}\n\t\t</span>\n\t)\n}\n\nexport default Badge\n","import { FC, ReactNode } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport Actions from './Actions'\nimport { ActionType, isNotNone } from '@primer/types'\nimport ButtonSpacer from './ButtonSpacer'\n\ninterface SectionHeaderProps {\n\ttitle: ReactNode\n\tsubtitle?: ReactNode\n\tactions?: ActionType[]\n\tclassName?: ClassValue\n}\n\nconst SectionHeader: FC<SectionHeaderProps> = ({ title, subtitle, actions, className }) => (\n\t<div className={clsx('flex justify-between items-center flex-wrap sm:flex-nowrap', className)}>\n\t\t<div>\n\t\t\t<h3 className=\"text-lg leading-5 font-medium text-gray-900 dark:text-white\">{title}</h3>\n\t\t\t{subtitle && <p className=\"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-300\">{subtitle}</p>}\n\t\t</div>\n\t\t<div className=\"flex-shrink-0\">\n\t\t\t{actions && actions.filter(isNotNone).length > 0 ? <Actions actions={actions} /> : <ButtonSpacer />}\n\t\t</div>\n\t</div>\n)\n\nexport default SectionHeader\n","import { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport {\n\tBeakerIcon,\n\tCheckIcon,\n\tDotsHorizontalIcon,\n\tPencilIcon,\n\tPlusIcon,\n\tTrashIcon,\n\tXIcon,\n} from '@heroicons/react/outline'\nimport Badge from '@primer/components/Badge'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport db from 'db'\nimport { NotificationModel } from 'db/types'\nimport { confirm } from '@primer/alerts'\n\nconst Notifications: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<NotificationModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Enabled',\n\t\t\t\tvalue: (x) => (\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tcolor={x.enabled ? 'green' : 'red'}\n\t\t\t\t\t\ticon={x.enabled ? <CheckIcon className=\"w-5 h-5\" /> : <XIcon className=\"w-5 h-5\" />}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/notifications/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.notifications.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Notifications\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Notification',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/notifications/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.notifications.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Notifications\n","import { FC } from 'react'\n\ninterface FormLabelProps {\n\tonClick?: () => void\n\tisOptional?: boolean\n}\n\nconst FormLabel: FC<FormLabelProps> = ({ children, isOptional, onClick }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default\"\n\t\t\tonClick={onClick}\n\t\t>\n\t\t\t{children && (\n\t\t\t\t<>\n\t\t\t\t\t{children}{' '}\n\t\t\t\t\t{isOptional && (\n\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport default FormLabel\n","import { FC, ReactNode } from 'react'\nimport clsx from 'clsx'\nimport { ActionType } from '@primer/types'\nimport Actions from '@primer/components/Actions'\n\ninterface FormSectionProps {\n\ttitle: ReactNode\n\tsubtitle?: ReactNode\n\tactions?: ActionType | ActionType[]\n\tvertical?: boolean\n\tchildren: ReactNode\n}\n\nconst FormSection: FC<FormSectionProps> = ({ title, subtitle, actions, vertical = false, children }) => {\n\treturn (\n\t\t<div className={clsx(vertical ? 'flex flex-col space-y-6' : 'md:grid md:grid-cols-3 md:gap-6')}>\n\t\t\t<div className=\"md:col-span-1\">\n\t\t\t\t<h3 className=\"-mt-1 text-lg font-medium leading-6 text-gray-900 dark:text-white\">{title}</h3>\n\t\t\t\t{subtitle && <div className=\"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-300\">{subtitle}</div>}\n\t\t\t\t{actions && (\n\t\t\t\t\t<div className=\"mt-2\">\n\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"mt-5 md:mt-0 md:col-span-2\">{children}</div>\n\t\t</div>\n\t)\n}\n\nexport default FormSection\n","import { FC, ChangeEvent } from 'react'\nimport { Link, navigate } from '@reach/router'\nimport { TabType, isLinkTabType, isButtonTabType, None, isNotNone } from '@primer/types'\nimport Badge from './Badge'\nimport clsx, { ClassValue } from 'clsx'\n\nconst themes = {\n\tdark: {\n\t\tborder: 'border-b border-gray-600',\n\t\ttab: '',\n\t\ttabInactive:\n\t\t\t'whitespace-nowrap py-2 border-b border-transparent font-medium text-sm leading-5 text-white hover:text-gray-100 hover:border-gray-500 focus:outline-none focus:text-gray-100 focus:border-gray-300 antialiased',\n\t\ttabActive:\n\t\t\t'whitespace-nowrap py-2 border-b border-indigo-500 font-medium text-sm leading-5 text-indigo-300 focus:outline-none focus:text-indigo-600 focus:border-indigo-400 antialiased',\n\t},\n\tlight: {\n\t\tborder: 'border-b border-gray-300 dark:border-gray-600 font-medium text-sm leading-5',\n\t\ttab: 'whitespace-nowrap py-4 px-4 border-b -mb-px',\n\t\ttabInactive:\n\t\t\t'border-transparent text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300',\n\t\ttabActive:\n\t\t\t'border-indigo-600 text-indigo-600 dark:border-white dark:text-white focus:outline-none focus:text-indigo-800 dark:focus:text-indigo-400 focus:border-indigo-700',\n\t},\n\tcard: {\n\t\tborder: '',\n\t\ttab: 'whitespace-nowrap px-4 py-3 dark:bg-gray-700 rounded-tl-md rounded-tr-md px-4 mr-2 font-medium text-sm leading-5 shadow',\n\t\ttabInactive:\n\t\t\t'bg-gray-100 dark:bg-gray-750 hover:bg-white transition transition-background text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300 relative z-10',\n\t\ttabActive:\n\t\t\t'bg-white text-black dark:text-white focus:outline-none focus:text-indigo-800 focus:border-indigo-700 relative z-20',\n\t},\n\tbuttons: {\n\t\tborder: '',\n\t\ttab: 'whitespace-nowrap px-4 py-2 rounded-md mr-2 font-medium text-sm leading-5',\n\t\ttabInactive:\n\t\t\t'bg-gray-200 hover:bg-white transition transition-background text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300',\n\t\ttabActive:\n\t\t\t'bg-gray-700 text-white dark:text-white focus:outline-none focus:text-indigo-800 focus:border-indigo-700',\n\t},\n\tlinks: {\n\t\tborder: '',\n\t\ttab: 'whitespace-nowrap px-4 py-2 rounded-md mr-2 font-medium text-sm leading-5',\n\t\ttabInactive:\n\t\t\t'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none focus:text-gray-700',\n\t\ttabActive: 'text-indigo-600 dark:text-indigo-300 focus:outline-none focus:text-indigo-800',\n\t},\n}\n\ninterface TabsProps {\n\titems: (TabType | None)[]\n\tactiveIndex?: number\n\ttheme?: 'light' | 'dark' | 'card' | 'buttons' | 'links'\n\tgetActiveIndex?: (x: TabType[]) => number\n\tclassName?: ClassValue\n}\n\nconst Tabs: FC<TabsProps> = ({ items, theme = 'dark', activeIndex, getActiveIndex, className }) => {\n\tlet tabs = items.filter(isNotNone)\n\tlet index = getActiveIndex !== undefined ? getActiveIndex(tabs) : activeIndex || 0\n\n\tconst handleSelect = (e: ChangeEvent<HTMLSelectElement>) => {\n\t\tlet index = +e.target.value\n\t\tlet item = tabs[index]\n\n\t\tif (isLinkTabType(item)) {\n\t\t\tnavigate(item.to, { state: item.state, replace: item.replace })\n\t\t} else if (isButtonTabType(item)) {\n\t\t\titem.onClick(item, index)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div className=\"sm:hidden\">\n\t\t\t\t<select\n\t\t\t\t\tclassName=\"form-input block w-full dark:bg-gray-800 dark:placeholder-gray-400 dark:border-gray-600\"\n\t\t\t\t\tvalue={index}\n\t\t\t\t\tonChange={handleSelect}\n\t\t\t\t>\n\t\t\t\t\t{tabs.map((item, i) => (\n\t\t\t\t\t\t<option key={i} value={i}>\n\t\t\t\t\t\t\t{item.simpleTitle || item.title}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t<div className=\"hidden sm:block py-2\">\n\t\t\t\t<div className={themes[theme].border}>\n\t\t\t\t\t<div className=\"flex items-end overflow-x-auto px-2 -m-2 overflow-y-hidden -mb-2\">\n\t\t\t\t\t\t{tabs.map((item, i) =>\n\t\t\t\t\t\t\tisLinkTabType(item) ? (\n\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tto={`${process.env.PUBLIC_URL}${item.to}`}\n\t\t\t\t\t\t\t\t\tstate={item.state}\n\t\t\t\t\t\t\t\t\treplace={item.replace}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\tthemes[theme].tab,\n\t\t\t\t\t\t\t\t\t\t\ti === index ? themes[theme].tabActive : themes[theme].tabInactive\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t\t\t\t\t{item.errors && item.errors > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<Badge color=\"red\" className=\"ml-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t{item.errors}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t) : isButtonTabType(item) ? (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'cursor-pointer',\n\t\t\t\t\t\t\t\t\t\tthemes[theme].tab,\n\t\t\t\t\t\t\t\t\t\t(item.key !== undefined ? item.key : i) === index\n\t\t\t\t\t\t\t\t\t\t\t? themes[theme].tabActive\n\t\t\t\t\t\t\t\t\t\t\t: themes[theme].tabInactive\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => item.onClick(item, i)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{item.title}\n\t\t\t\t\t\t\t\t\t{item.errors && item.errors > 0 && (\n\t\t\t\t\t\t\t\t\t\t<Badge color=\"red\" className=\"ml-2\">\n\t\t\t\t\t\t\t\t\t\t\t{item.errors}\n\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default Tabs\n","import { CalendarIcon, CursorClickIcon, RefreshIcon } from '@heroicons/react/outline'\nimport { ordinal } from '@primer/utils/funcs'\n\nexport const types = [\n\t{\n\t\tlabel: (\n\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t<CursorClickIcon className=\"w-5 h-5 text-gray-500\" />\n\t\t\t\t<div>Action</div>\n\t\t\t</div>\n\t\t),\n\t\tvalue: 'action',\n\t},\n\t{\n\t\tlabel: (\n\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t<RefreshIcon className=\"w-5 h-5 text-gray-500\" />\n\t\t\t\t<div>Repeat</div>\n\t\t\t</div>\n\t\t),\n\t\tvalue: 'repeat',\n\t},\n\t{\n\t\tlabel: (\n\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t<CalendarIcon className=\"w-5 h-5 text-gray-500\" />\n\t\t\t\t<div>Date</div>\n\t\t\t</div>\n\t\t),\n\t\tvalue: 'date',\n\t},\n]\n\nexport const repeatOptions = [\n\t{ label: 'day', value: 'day' },\n\t{ label: 'week', value: 'week' },\n\t{ label: 'month', value: 'month' },\n\t{ label: 'year', value: 'year' },\n]\n\nexport const weekOnOptions = [\n\t{ label: 'monday', value: 'monday' },\n\t{ label: 'tuesday', value: 'tuesday' },\n\t{ label: 'wednesday', value: 'wednesday' },\n\t{ label: 'thursday', value: 'thursday' },\n\t{ label: 'friday', value: 'friday' },\n\t{ label: 'saturday', value: 'saturday' },\n\t{ label: 'sunday', value: 'sunday' },\n]\n\nexport const yearInOptions = [\n\t{ label: 'january', value: 'january' },\n\t{ label: 'february', value: 'february' },\n\t{ label: 'march', value: 'march' },\n\t{ label: 'april', value: 'april' },\n\t{ label: 'may', value: 'may' },\n\t{ label: 'june', value: 'june' },\n\t{ label: 'july', value: 'july' },\n\t{ label: 'august', value: 'august' },\n\t{ label: 'september', value: 'september' },\n\t{ label: 'october', value: 'october' },\n\t{ label: 'november', value: 'november' },\n\t{ label: 'december', value: 'december' },\n]\n\nexport const generateMonthList = (length: number) =>\n\tnew Array(length).fill(null).map((_, i) => ({ label: ordinal(i + 1), value: i + 1 }))\n\nexport const getMonthOnOptions = (str: string) => {\n\t// @ts-ignore\n\treturn {\n\t\tjanuary: generateMonthList(31),\n\t\tfebruary: generateMonthList(28),\n\t\tmarch: generateMonthList(31),\n\t\tapril: generateMonthList(30),\n\t\tmay: generateMonthList(31),\n\t\tjune: generateMonthList(30),\n\t\tjuly: generateMonthList(31),\n\t\taugust: generateMonthList(31),\n\t\tseptember: generateMonthList(30),\n\t\toctober: generateMonthList(31),\n\t\tnovember: generateMonthList(30),\n\t\tdecember: generateMonthList(31),\n\t}[str]\n}\n\nexport const entityTiming = [\n\t{ label: 'minute', value: 'minute' },\n\t{ label: 'hour', value: 'hour' },\n\t{ label: 'day', value: 'day' },\n\t{ label: 'week', value: 'week' },\n\t{ label: 'month', value: 'month' },\n\t{ label: 'year', value: 'year' },\n]\n\nexport const entityTimingType = [\n\t{ label: 'before', value: 'before' },\n\t{ label: 'after', value: 'after' },\n]\n\nexport const getRuleOperatorOptions = (str: string) => {\n\t// @ts-ignore\n\treturn {\n\t\tdate: [\n\t\t\t{ label: 'is before', value: 'isBefore' },\n\t\t\t{ label: 'is after', value: 'isAfter' },\n\t\t\t{ label: 'is same minute as', value: 'sameMinute' },\n\t\t\t{ label: 'is same hour as', value: 'sameHour' },\n\t\t\t{ label: 'is same day as', value: 'sameDay' },\n\t\t],\n\t\tstring: [\n\t\t\t{ label: 'is', value: 'stringIs' },\n\t\t\t{ label: 'is not', value: 'stringNot' },\n\t\t\t{ label: 'includes', value: 'stringIncludes' },\n\t\t\t{ label: \"doesn't include\", value: 'stringNotIncludes' },\n\t\t\t{ label: 'starts with', value: 'stringStarts' },\n\t\t\t{ label: 'ends with', value: 'stringEnds' },\n\t\t\t{ label: 'is empty', value: 'stringEmpty' },\n\t\t\t{ label: 'is not empty', value: 'stringNotEmpty' },\n\t\t],\n\t\tnumber: [\n\t\t\t{ label: 'is', value: 'numberEquals' },\n\t\t\t{ label: 'is greater than', value: 'numberGT' },\n\t\t\t{ label: 'is at least', value: 'numberGTE' },\n\t\t\t{ label: 'is lesser than', value: 'numberLT' },\n\t\t\t{ label: 'is at most', value: 'numberLTE' },\n\t\t],\n\t\tboolean: [\n\t\t\t{ label: 'is true', value: 'true' },\n\t\t\t{ label: 'is false', value: 'false' },\n\t\t],\n\t\tusers: [\n\t\t\t{ label: 'includes', value: 'collectionIncludes' },\n\t\t\t{ label: \"doesn't include\", value: 'collectionNotIncludes' },\n\t\t],\n\t\tuser: [\n\t\t\t{ label: 'is', value: 'stringIs' },\n\t\t\t{ label: 'is not', value: 'stringNot' },\n\t\t],\n\t\toption: [\n\t\t\t{ label: 'is', value: 'stringIs' },\n\t\t\t{ label: 'is not', value: 'stringNot' },\n\t\t],\n\t}[str]\n}\n","import { useCallback, useRef, useEffect } from 'react'\nimport { FormikContextType } from 'formik'\nimport update from 'immutability-helper'\nimport { FieldArray, FieldArrayPath, FieldValues } from '@primer/types/form'\n\n\n// problem: https://github.com/formium/formik/issues/1476\n// solution: https://gist.github.com/joshsalverda/d808d92f46a7085be062b2cbde978ae6\n// plus some types from react-hook-form\nconst useFieldArray = <\n  TFieldValues extends FieldValues = FieldValues,\n  TFieldArrayName extends FieldArrayPath<TFieldValues> = FieldArrayPath<TFieldValues>,\n>(\n\tname: TFieldArrayName,\n\tcontext: FormikContextType<TFieldValues>\n) => {\n\tlet setFieldValue = context.setFieldValue\n\n\tlet field = context.getFieldProps<FieldArray<TFieldValues, TFieldArrayName>[]>(name)\n\tlet meta = context.getFieldMeta(field.name)\n\n\tlet fieldArray = useRef(field.value)\n\n\tuseEffect(() => {\n\t\tfieldArray.current = field.value\n\t}, [field.value])\n\n\tconst push = useCallback(\n\t\t(value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$push: [value],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst swap = useCallback(\n\t\t(indexA, indexB) => {\n\t\t\tconst swapA = fieldArray.current[indexA]\n\t\t\tconst swapB = fieldArray.current[indexB]\n\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [\n\t\t\t\t\t[indexA, 1, swapB],\n\t\t\t\t\t[indexB, 1, swapA],\n\t\t\t\t],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst move = useCallback(\n\t\t(from, to) => {\n\t\t\tconst toMove = fieldArray.current[from]\n\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [\n\t\t\t\t\t[from, 1],\n\t\t\t\t\t[to, 0, toMove],\n\t\t\t\t],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst insert = useCallback(\n\t\t(index, value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [[index, 0, value]],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst unshift = useCallback(\n\t\t(value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$unshift: [value],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t\treturn fieldArray.current.length\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst remove = useCallback(\n\t\t(index) => {\n\t\t\tconst removedItem = fieldArray.current[index]\n\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [[index, 1]],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t\treturn removedItem\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\tconst pop = useCallback(() => {\n\t\tconst lastIndex = fieldArray.current.length - 1\n\t\tconst poppedItem = fieldArray.current[lastIndex]\n\n\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t$splice: [[lastIndex, 1]],\n\t\t})\n\n\t\tsetFieldValue(field.name, fieldArray.current)\n\t\treturn poppedItem\n\t}, [field.name, setFieldValue])\n\n\tconst replace = useCallback(\n\t\t(index, value) => {\n\t\t\tfieldArray.current = update(fieldArray.current, {\n\t\t\t\t$splice: [[index, 1, value]],\n\t\t\t})\n\n\t\t\tsetFieldValue(field.name, fieldArray.current)\n\t\t},\n\t\t[field.name, setFieldValue]\n\t)\n\n\treturn {\n\t\tfield,\n\t\t// this is kind of weird, if the type of this field in your form is an array, then cool.\n\t\t// If you're trying to use useFieldArray on a field in your form that is not an array, then, you're an idiot\n\t\t// and the \"values\" property will be incorrectly typed as an arrayed version of the fields type\n\t\tvalues: field.value || [],\n\t\tmeta,\n\t\tarrayHelpers: {\n\t\t\tpush,\n\t\t\tswap,\n\t\t\tmove,\n\t\t\tinsert,\n\t\t\tunshift,\n\t\t\tremove,\n\t\t\tpop,\n\t\t\treplace,\n\t\t},\n\t}\n}\n\nexport default useFieldArray\n","import { forwardRef } from 'react'\nimport clsx, { ClassValue } from 'clsx'\nimport ReactQuill from 'react-quill'\nimport Actions from '../Actions'\nimport { ActionType } from '@primer/types'\nimport { useField, useFormikContext } from 'formik'\nimport { FormValidations, validate } from './utils'\n\nexport const defaultEditorModules = {\n\ttoolbar: [\n\t\t[{ header: [1, 2, false] }],\n\t\t['bold', 'italic', { color: [] }],\n\t\t[{ list: 'ordered' }, { list: 'bullet' }],\n\t\t[{ align: [] }],\n\t\t['clean'],\n\t],\n}\n\ninterface FormEditorProps {\n\tname: string\n\tlabel?: string\n\tclassName?: ClassValue\n\tvalidations?: FormValidations\n\thideOptional?: boolean\n\tdisabled?: boolean\n\tmodules?: any\n\tactions?: ActionType[]\n}\n\nconst FormEditor = forwardRef<ReactQuill, FormEditorProps>(\n\t({ name, label, className, validations = {}, hideOptional, disabled, modules, actions }, ref) => {\n\t\tconst formik = useFormikContext()\n\n\t\tconst [{ value }, { error, touched }, { setValue, setTouched }] = useField({\n\t\t\tname,\n\t\t\tvalidate: validate(validations),\n\t\t})\n\n\t\tconst isRequired = !!validations.required\n\n\t\treturn (\n\t\t\t<div className={clsx(className)}>\n\t\t\t\t{label && (\n\t\t\t\t\t<div className=\"block text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 cursor-default\">\n\t\t\t\t\t\t{label}{' '}\n\t\t\t\t\t\t{!isRequired && !hideOptional && (\n\t\t\t\t\t\t\t<span className=\"text-gray-400 dark:text-gray-300 font-normal text-xs leading-4 opacity-75\">\n\t\t\t\t\t\t\t\t(optional)\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<div className={clsx('relative h-full', label && 'mt-1')}>\n\t\t\t\t\t{actions && (\n\t\t\t\t\t\t<div className=\"absolute top-0 right-0 mr-1.5 h-11 flex items-center\">\n\t\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ReactQuill\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tvalue={value || ''}\n\t\t\t\t\t\tonChange={(content) => {\n\t\t\t\t\t\t\t// setTouched(true)\n\t\t\t\t\t\t\tsetValue(content)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonBlur={(e) => {\n\t\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tmodules={modules || defaultEditorModules}\n\t\t\t\t\t\treadOnly={disabled || formik.isSubmitting}\n\t\t\t\t\t\tclassName=\"h-full\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{error && touched && <p className=\"mt-2 text-sm text-red-600\">{error}</p>}\n\t\t\t</div>\n\t\t)\n\t}\n)\n\nexport default FormEditor\n","import { Dispatch, FC, ReactNode, SetStateAction, useState } from 'react'\nimport clsx from 'clsx'\n\ninterface ExpandableProps {\n\tchildren: (setOpen: Dispatch<SetStateAction<boolean>>, isExpanded: boolean) => ReactNode\n}\n\nconst Expandable: FC<ExpandableProps> = ({ children }) => {\n\tconst [isExpanded, setExpanded] = useState(false)\n\n\treturn (\n\t\t<div className={clsx(isExpanded ? 'fixed z-[9999] w-screen h-screen' : 'static', 'top-0 left-0')}>\n\t\t\t{children(setExpanded, isExpanded)}\n\t\t</div>\n\t)\n}\n\nexport default Expandable\n","import { ChevronLeftIcon } from '@heroicons/react/outline'\nimport { ActionType } from '@primer/types'\nimport db from 'db'\n\nexport const templateTagActions = (insertFn: (x: string) => void, level: string): ActionType[] => {\n\tlet userEntity = db.entities.find((x) => x.key === 'user')\n\n\treturn [\n\t\t{\n\t\t\ttitle: 'Recipient',\n\t\t\ticon: <ChevronLeftIcon className=\"w-4 h-4\" />,\n\t\t\ticonSide: 'left',\n\t\t\thoverable: true,\n\t\t\tplacement: 'left-start',\n\t\t\tactions: db.fields\n\t\t\t\t.all((x) => x.entityId === userEntity?.id)\n\t\t\t\t.map((x) => ({\n\t\t\t\t\ttitle: x.name,\n\t\t\t\t\tonClick: () => insertFn(`{{recipient-${x.key}}}`),\n\t\t\t\t})),\n\t\t},\n\t\t...db.entities.all().map<ActionType>((entity) => ({\n\t\t\ttitle: entity.name,\n\t\t\ticon: <ChevronLeftIcon className=\"w-4 h-4\" />,\n\t\t\ticonSide: 'left',\n\t\t\thoverable: true,\n\t\t\tplacement: 'left-start',\n\t\t\tactions: db.fields\n\t\t\t\t.all((x) => x.entityId === entity.id)\n\t\t\t\t.map((x) => ({\n\t\t\t\t\ttitle: x.name,\n\t\t\t\t\tonClick: () => insertFn(`{{${entity.key}-${x.key}}}`),\n\t\t\t\t})),\n\t\t})),\n\t]\n}\n","import { FC, ReactNode, useRef } from 'react'\nimport clsx from 'clsx'\nimport ReactQuill from 'react-quill'\nimport { ArrowsExpandIcon, ChevronDownIcon, XIcon } from '@heroicons/react/outline'\nimport { FormValidations } from '@primer/components/Form/utils'\nimport FormEditor from '@primer/components/Form/FormEditor'\nimport FormLabel from '@primer/components/Form/FormLabel'\nimport Expandable from '@primer/components/Expandable'\nimport { templateTagActions } from 'pages/Settings/Templates/utils/actions'\n\ninterface FormTemplateEditorProps {\n\tname: string\n\tlabel?: ReactNode\n\tvalidations?: FormValidations\n\tfocus: string\n}\n\nconst FormTemplateEditor: FC<FormTemplateEditorProps> = ({ name, label, validations, focus }) => {\n\tconst ref = useRef<ReactQuill>(null)\n\n\tconst insertTag = (str: string) => {\n\t\tlet editor = ref.current?.getEditor()\n\t\tlet selection = editor?.getSelection()\n\t\tlet text = editor?.getText()\n\n\t\tif (!editor || !text) return\n\n\t\tconst index = selection?.index\n\t\tconst length = selection?.length\n\n\t\tif (!index) {\n\t\t\teditor.insertText(editor.getText().length - 1, str)\n\t\t} else {\n\t\t\tif (length) editor.deleteText(index, length)\n\t\t\teditor.insertText(index, str)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Expandable>\n\t\t\t{(setExpanded, isExpanded) => (\n\t\t\t\t<div className={clsx(isExpanded && 'bg-white h-full')}>\n\t\t\t\t\t{!isExpanded && label && <FormLabel>{label}</FormLabel>}\n\n\t\t\t\t\t<FormEditor\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tvalidations={validations}\n\t\t\t\t\t\tclassName={clsx(!isExpanded && label && 'mt-1', isExpanded && 'h-full pb-10')}\n\t\t\t\t\t\tref={ref}\n\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: 'Insert Tag',\n\t\t\t\t\t\t\t\ticon: <ChevronDownIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\t\t\tactions: templateTagActions(insertTag, focus) || [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: isExpanded ? (\n\t\t\t\t\t\t\t\t\t<XIcon className=\"w-4 h-4 -mx-1\" />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ArrowsExpandIcon className=\"w-4 h-4 -mx-1\" />\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\t\t\tonClick: () => setExpanded((x) => !x),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Expandable>\n\t)\n}\n\nexport default FormTemplateEditor\n","import { FC, Fragment } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport Card from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Actions from '@primer/components/Actions'\nimport Stack from '@primer/components/Stack'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport FormLabel from '@primer/components/Form/FormLabel'\nimport FormDate from '@primer/components/Form/FormDate'\nimport FormSelect from '@primer/components/Form/FormSelect'\nimport FormSection from '@primer/components/Form/FormSection'\nimport FormToggle from '@primer/components/Form/FormToggle'\nimport AutoHeight from '@primer/components/AutoHeight'\nimport Tabs from '@primer/components/Tabs'\nimport { ArrowLeftIcon, BeakerIcon, CheckIcon, ChevronDownIcon, PlusIcon } from '@heroicons/react/outline'\nimport { XIcon } from '@heroicons/react/solid'\nimport { onlyText } from 'react-children-utilities'\nimport { ActionType, isNotNone } from '@primer/types'\nimport {\n\ttypes,\n\trepeatOptions,\n\tyearInOptions,\n\tgetMonthOnOptions,\n\tweekOnOptions,\n\tgetRuleOperatorOptions,\n\tentityTiming,\n\tentityTimingType,\n} from './utils/options'\nimport useFieldArray from '@primer/components/Form/useFieldArray'\nimport { watch } from '@primer/components/Form/utils'\nimport { useFormikContext } from 'formik'\nimport FormTemplateEditor from 'components/FormTemplateEditor'\nimport { templateTagActions } from 'pages/Settings/Templates/utils/actions'\nimport db from 'db'\nimport { confirm } from '@primer/alerts'\n\ninterface RuleType {\n\tentity: string\n\tfield: string\n\toperator: string\n\tvalue: string\n}\n\ninterface RuleGroupType {\n\trules: RuleType[]\n}\n\ninterface FormData {\n\tname: string\n\tenabled: boolean\n\tenabledDate: Date | undefined\n\tfocus: string\n\n\ttriggerType: string\n\ttriggerRepeat: number\n\n\ttriggerEvery: string\n\ttriggerYearIn: string\n\ttriggerMonthOn: string\n\ttriggerWeekOn: string\n\ttriggerDayAt: string\n\n\ttriggerAction: string\n\n\tobeyTriggerTiming: boolean\n\ttriggerTimingType: string\n\ttriggerTiming: string\n\ttriggerDate: string\n\n\truleGroups: RuleGroupType[]\n\n\tsubject: string\n\tcontent: string\n}\n\nconst NotificationForm: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst originalNotification = db.notifications.find(id)\n\n\tconst formContext = useForm<FormData>({\n\t\tinitialValues: {\n\t\t\tname: originalNotification?.name || '',\n\t\t\tfocus: originalNotification?.focus || '',\n\t\t\tenabled: originalNotification?.enabled || false,\n\t\t\tenabledDate: originalNotification?.enabledDate || undefined,\n\n\t\t\ttriggerType: originalNotification?.triggerType || 'action',\n\t\t\ttriggerRepeat: originalNotification?.triggerRepeat || 1,\n\n\t\t\ttriggerEvery: originalNotification?.triggerEvery || '',\n\t\t\ttriggerYearIn: originalNotification?.triggerYearIn || '',\n\t\t\ttriggerMonthOn: originalNotification?.triggerMonthOn || '',\n\t\t\ttriggerWeekOn: originalNotification?.triggerWeekOn || '',\n\t\t\ttriggerDayAt: originalNotification?.triggerDayAt || '',\n\n\t\t\ttriggerAction: originalNotification?.triggerAction || '',\n\n\t\t\tobeyTriggerTiming: originalNotification?.obeyTriggerTiming || true,\n\t\t\ttriggerTimingType: originalNotification?.triggerTimingType || '',\n\t\t\ttriggerTiming: originalNotification?.triggerTiming || '',\n\t\t\ttriggerDate: originalNotification?.triggerDate || '',\n\n\t\t\truleGroups: originalNotification?.ruleGroups || [],\n\n\t\t\tsubject: originalNotification?.subject || '',\n\t\t\tcontent: originalNotification?.content || '',\n\t\t},\n\t\tonSubmit: (formData) => {\n\t\t\tdb.notifications.save({\n\t\t\t\tid: uuid(),\n\t\t\t\t...(originalNotification || {}),\n\t\t\t\t...formData,\n\t\t\t})\n\n\t\t\tnavigate('/settings/notifications')\n\t\t},\n\t})\n\n\tconst {\n\t\tvalues: ruleGroups,\n\t\tarrayHelpers: { push: appendRuleGroup, remove: removeRuleGroup },\n\t} = useFieldArray('ruleGroups', formContext)\n\n\t// obeyTriggerTiming,\n\n\tconst triggerType = watch('triggerType', formContext)\n\tconst triggerRepeat = watch('triggerRepeat', formContext)\n\tconst triggerEvery = watch('triggerEvery', formContext)\n\tconst triggerYearIn = watch('triggerYearIn', formContext)\n\tconst triggerMonthOn = watch('triggerMonthOn', formContext)\n\tconst triggerWeekOn = watch('triggerWeekOn', formContext)\n\tconst triggerTiming = watch('triggerTiming', formContext)\n\tconst triggerTimingType = watch('triggerTimingType', formContext)\n\tconst enabled = watch('enabled', formContext)\n\tconst subject = watch('subject', formContext)\n\tconst focus = watch('focus', formContext)\n\n\tconst activeIndex: number = types.findIndex((x) => x.value === triggerType)\n\n\tconst title = mode === 'create' ? 'Create Notification' : 'Edit Notification'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/notifications',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Stack dividers>\n\t\t\t\t\t\t<FormSection title=\"Details\" subtitle=\"Basic information about the notification\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t<FormLabel>Notification is about</FormLabel>\n\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\tname=\"focus\"\n\t\t\t\t\t\t\t\t\t\t\toptions={db.entities.all().map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Focus is required' }}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-[150px]\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<FormToggle name=\"enabled\" label=\"Enabled\" />\n\n\t\t\t\t\t\t\t\t\t<AutoHeight show={!!enabled}>\n\t\t\t\t\t\t\t\t\t\t<FormDate name=\"enabledDate\" label=\"Enabled from\" />\n\t\t\t\t\t\t\t\t\t</AutoHeight>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Trigger\"\n\t\t\t\t\t\t\tsubtitle={\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<div>Choose how to trigger the notification</div>\n\t\t\t\t\t\t\t\t\t<ul className=\"list-disc pl-5 text-xs\">\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<strong>Action</strong>: When a certain action occurs within the platform\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<strong>Repeat</strong>: On a recurring schedule\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<strong>Date</strong>: Relative to a defined date\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"pl-2\">\n\t\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\t\tactiveIndex={activeIndex}\n\t\t\t\t\t\t\t\t\ttheme=\"card\"\n\t\t\t\t\t\t\t\t\titems={types.map((x, i) => ({\n\t\t\t\t\t\t\t\t\t\ttitle: <div className=\"flex items-center space-x-3\">{x.label}</div>,\n\t\t\t\t\t\t\t\t\t\tsimpleTitle: onlyText(x.label),\n\t\t\t\t\t\t\t\t\t\tonClick: () => formContext.setFieldValue('triggerType', x.value),\n\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"relative z-10\">\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<Stack className={triggerType === 'action' ? '' : 'hidden'}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[300px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerAction\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={db.actions\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all((x) => x.entityId === focus)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// validations={{ required: 'Action is required' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Select action...\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\n\t\t\t\t\t\t\t\t\t\t\t<Stack className={triggerType === 'repeat' ? '' : 'hidden'}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>Every</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[60px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerRepeat\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'Every must be at least 1',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerEvery\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={repeatOptions.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tx.label + ((triggerRepeat || 1) > 1 ? 's' : ''),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerEvery === 'year' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>in</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerYearIn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={yearInOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'Time is required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(triggerEvery === 'month' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(triggerEvery === 'year' && isNotNone(triggerYearIn))) && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>on the</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerMonthOn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerEvery === 'month'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetMonthOnOptions(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerYearIn || 'february'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) || []\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ).concat([\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'last day',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: Infinity,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: getMonthOnOptions(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttriggerYearIn || 'february'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ) || []\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'Time is required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerEvery === 'week' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>on</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerWeekOn\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={weekOnOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'Time is required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(triggerEvery === 'day' ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisNotNone(triggerWeekOn) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisNotNone(triggerMonthOn)) && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>at</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[130px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput name=\"triggerDayAt\" type=\"time\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\n\t\t\t\t\t\t\t\t\t\t\t<Stack className={triggerType === 'date' ? '' : 'hidden'}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[60px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerRepeat\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequired: 'required',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: 'min 1',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin: 1,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerTiming\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={entityTiming.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: x.label + ((triggerRepeat || 1) > 1 ? 's' : ''),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x.value,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerTiming && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[100px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerTimingType\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={entityTimingType}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'required' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{triggerTimingType && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"triggerDate\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={db.fields\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(x) => x.entityId === focus && x.type === 'date'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'required' }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Conditions\"\n\t\t\t\t\t\t\tsubtitle=\"Fine grained controls over if the notification gets sent\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t{ruleGroups.map((x, i) => (\n\t\t\t\t\t\t\t\t\t\t<Fragment key={i}>\n\t\t\t\t\t\t\t\t\t\t\t<RuleGroup index={i} remove={() => removeRuleGroup(i)} />\n\t\t\t\t\t\t\t\t\t\t\t{i !== ruleGroups.length - 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-medium px-4 py-1 rounded-full bg-indigo-600 text-white\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tOR\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add condition set',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => appendRuleGroup({ rules: [] }),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Template\"\n\t\t\t\t\t\t\tsubtitle={\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<div>Customise the content of the email message</div>\n\t\t\t\t\t\t\t\t\t<div>Use the tag reference to add placeholders for real values</div>\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Import Template',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: <ChevronDownIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\t\t\t\t\tplacement: 'bottom-start',\n\t\t\t\t\t\t\t\t\t\t\t\tactions: db.templates.all().map<ActionType>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: x.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet pass = false\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.values.content !== '' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.values.content !== '<p><br></p>'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tawait confirm({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'This will overwrite your existing email content',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpass = true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpass = true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (pass) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue('content', x.content)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start\">\n\t\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\t\tname=\"subject\"\n\t\t\t\t\t\t\t\t\t\t\tlabel=\"Subject line\"\n\t\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Subject line is required' }}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1 mr-3\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Insert Tag',\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: <ChevronDownIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\t\t\ticonSide: 'right',\n\t\t\t\t\t\t\t\t\t\t\t\t\tactions:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemplateTagActions((x) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'subject',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubject?.length ? `${subject}${x}` : `${x}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, focus) || [],\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<FormTemplateEditor\n\t\t\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Content\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Content is required' }}\n\t\t\t\t\t\t\t\t\t\tfocus={focus}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t{/* <AutoHeight show={focus !== '' && focus !== 'user'}>\n\t\t\t\t\t\t\t<FormSection title=\"Recipients\" subtitle=\"Who will receive this email notification\">\n\t\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t\t<MultiColumns\n\t\t\t\t\t\t\t\t\t\tcolumns={2}\n\t\t\t\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t\t\t\t(focus === 'case' || focus === 'event') && (\n\t\t\t\t\t\t\t\t\t\t\t\t<FormCheckbox name=\"recipients.caseApplicant\" label=\"Case Applicant\" />\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t(focus === 'case' || focus === 'event') && (\n\t\t\t\t\t\t\t\t\t\t\t\t<FormCheckbox\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"recipients.caseRespondent\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Case Respondent\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tfocus === 'event' && (\n\t\t\t\t\t\t\t\t\t\t\t\t<FormCheckbox name=\"recipients.eventAttendee\" label=\"Event Attendees\" />\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</FormSection>\n\t\t\t\t\t\t</AutoHeight> */}\n\n\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\t\t\t\tdisabled: !isNotNone(focus) || true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t\tdisabled: !isNotNone(focus),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nconst RuleGroup: FC<{ index: number; remove: () => void }> = ({ index, remove }) => {\n\tconst formContext = useFormikContext<FormData>()\n\n\tconst {\n\t\tvalues: rules,\n\t\tarrayHelpers: { push: appendRule, remove: removeRule },\n\t} = useFieldArray(`ruleGroups.${index}.rules`, formContext)\n\n\treturn (\n\t\t<div className=\"relative\">\n\t\t\t<div className=\"absolute top-0 right-0 -mr-3 -my-3\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={{\n\t\t\t\t\t\ticon: <XIcon className=\"w-4 h-4 -mx-1 text-red-500\" />,\n\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\tonClick: remove,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<Stack className=\"p-4 rounded-md bg-gray-100 dark:bg-gray-750\">\n\t\t\t\t{rules.map((_, i) => (\n\t\t\t\t\t<Rule\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tgroupIndex={index}\n\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\tremove={() => removeRule(i)}\n\t\t\t\t\t\tprefix={i === 0 ? 'IF' : 'AND'}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\n\t\t\t\t<Actions\n\t\t\t\t\tactions={{\n\t\t\t\t\t\ttitle: 'Add condition',\n\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\tonClick: () => appendRule({ entity: '', field: '', operator: '', value: '' }),\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Stack>\n\t\t</div>\n\t)\n}\n\nconst Rule: FC<{ groupIndex: number; index: number; prefix: string; remove: () => void }> = ({\n\tgroupIndex,\n\tindex,\n\tprefix,\n\tremove,\n}) => {\n\tconst formContext = useFormikContext<FormData>()\n\n\tconst entity = watch(`ruleGroups.${groupIndex}.rules.${index}.entity`, formContext)\n\tconst field = watch(`ruleGroups.${groupIndex}.rules.${index}.field`, formContext)\n\tconst operator = watch(`ruleGroups.${groupIndex}.rules.${index}.operator`, formContext)\n\tconst entityField = db.fields.find(field)\n\tconst type = entityField?.type || 'string'\n\tconst options = entityField?.options || []\n\n\treturn (\n\t\t<div className=\"flex items-center justify-between space-x-3\">\n\t\t\t<div className=\"flex items-center space-x-3 flex-1\">\n\t\t\t\t<span className=\"text-sm font-medium text-center p-1 w-full max-w-[50px] rounded-full bg-white dark:bg-gray-800 text-indigo-600 dark:text-indigo-400 border border-gray-300 dark:border-gray-600\">\n\t\t\t\t\t{prefix}\n\t\t\t\t</span>\n\n\t\t\t\t<FormSelect\n\t\t\t\t\tname={`ruleGroups.${groupIndex}.rules.${index}.entity`}\n\t\t\t\t\toptions={db.entities.all().map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\tclassName=\"w-full max-w-[100px]\"\n\t\t\t\t/>\n\n\t\t\t\t<FormSelect\n\t\t\t\t\tname={`ruleGroups.${groupIndex}.rules.${index}.field`}\n\t\t\t\t\toptions={\n\t\t\t\t\t\tdb.fields.all((x) => x.entityId === entity).map((x) => ({ value: x.id, label: x.name })) || []\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"w-full max-w-[200px]\"\n\t\t\t\t/>\n\n\t\t\t\t<FormSelect\n\t\t\t\t\tname={`ruleGroups.${groupIndex}.rules.${index}.operator`}\n\t\t\t\t\toptions={getRuleOperatorOptions(type) || []}\n\t\t\t\t\tclassName=\"w-full max-w-[200px]\"\n\t\t\t\t/>\n\n\t\t\t\t{type === 'date' ? (\n\t\t\t\t\t<FormDate name={`ruleGroups.${groupIndex}.rules.${index}.value`} className=\"w-full max-w-[200px]\" />\n\t\t\t\t) : type === 'string' && operator !== 'stringEmpty' && operator !== 'stringNotEmpty' ? (\n\t\t\t\t\t<FormInput\n\t\t\t\t\t\tname={`ruleGroups.${groupIndex}.rules.${index}.value`}\n\t\t\t\t\t\tclassName=\"w-full max-w-[200px]\"\n\t\t\t\t\t/>\n\t\t\t\t) : type === 'option' ? (\n\t\t\t\t\t<FormSelect\n\t\t\t\t\t\tname={`ruleGroups.${groupIndex}.rules.${index}.value`}\n\t\t\t\t\t\toptions={options.map((x) => ({ value: x, label: x }))}\n\t\t\t\t\t\tclassName=\"w-full max-w-[200px]\"\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<Actions\n\t\t\t\t\tactions={{\n\t\t\t\t\t\ticon: <XIcon className=\"w-4 h-4 text-red-500 -mx-2\" />,\n\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\tonClick: remove,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default NotificationForm\n","import { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { BeakerIcon, DotsHorizontalIcon, PencilIcon, PlusIcon, TrashIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport { TemplateModel } from 'db/types'\nimport db from 'db'\nimport { confirm } from '@primer/alerts'\n\nconst Templates: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<TemplateModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/templates/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.templates.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Templates\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Template',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/templates/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.templates.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Templates\n","import { FC } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, BeakerIcon, CheckIcon } from '@heroicons/react/outline'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport PageHeading from '@primer/components/PageHeading'\nimport { CardWrapper, CardContent, CardFooter } from '@primer/components/Card'\nimport Stack from '@primer/components/Stack'\nimport FormTemplateEditor from 'components/FormTemplateEditor'\nimport db from 'db'\n\ninterface FormData {\n\tname: string\n\tcontent: string\n}\n\nconst CreateTemplate: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst originalTemplate = db.templates.find(id)\n\n\tconst formContext = useForm<FormData>({\n\t\tinitialValues: {\n\t\t\tname: originalTemplate?.name || '',\n\t\t\tcontent: originalTemplate?.content || '',\n\t\t},\n\t\tonSubmit: (formData) => {\n\t\t\tdb.templates.save({\n\t\t\t\tid: uuid(),\n\t\t\t\t...(originalTemplate || {}),\n\t\t\t\t...formData,\n\t\t\t})\n\n\t\t\tnavigate('/settings/templates')\n\t\t},\n\t})\n\n\tconst title = mode === 'create' ? 'Create Template' : 'Edit Template'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/templates',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<CardWrapper>\n\t\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<FormInput name=\"name\" label=\"Name\" validations={{ required: 'Name is required' }} />\n\n\t\t\t\t\t\t\t\t<FormTemplateEditor\n\t\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\t\tlabel=\"Content\"\n\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Content is required' }}\n\t\t\t\t\t\t\t\t\tfocus={'all'}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</CardContent>\n\n\t\t\t\t\t\t<CardFooter>\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Test',\n\t\t\t\t\t\t\t\t\t\t\tintent: 'secondary',\n\t\t\t\t\t\t\t\t\t\t\ticon: <BeakerIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\t\t\t\t\tdisabled: true,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardFooter>\n\t\t\t\t\t</CardWrapper>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default CreateTemplate\n","import { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport { RoleModel } from 'db/types'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { DotsHorizontalIcon, PencilIcon, PlusIcon, TrashIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport { confirm } from '@primer/alerts'\n\nconst Roles: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/roles/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.roles.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Roles\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Role',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/roles/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.roles.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Roles\n","import { FC, ReactNode } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface FormCheckboxProps {\n\tname: string\n\tlabel?: ReactNode\n\tdefaultValue?: any\n\tdisabled?: boolean\n\tinputClassName?: ClassValue\n\tclassName?: ClassValue\n\tcolor?: string\n}\n\nconst FormCheckbox: FC<FormCheckboxProps> = ({\n\tname,\n\tlabel,\n\tdisabled,\n\tinputClassName,\n\tcolor = 'text-primary-500 dark:text-primary-600',\n\tclassName,\n}) => {\n\t// helpers: {setValue: , setTouched: , setError: }\n\tconst [field] = useField({\n\t\tname,\n\t\ttype: 'checkbox',\n\t})\n\n\tconst formik = useFormikContext()\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<label className=\"text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-center cursor-pointer\">\n\t\t\t\t<input\n\t\t\t\t\t{...field}\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tclassName={clsx('form-checkbox', inputClassName, {\n\t\t\t\t\t\t[color]: !disabled,\n\t\t\t\t\t\t'text-gray-400': disabled,\n\t\t\t\t\t})}\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t/>\n\t\t\t\t{label && <span className=\"ml-3\">{label}</span>}\n\t\t\t</label>\n\t\t</div>\n\t)\n}\n\nexport default FormCheckbox\n","import { FC } from 'react'\nimport Actions from './Actions'\nimport { ActionType } from '@primer/types'\nimport clsx, { ClassValue } from 'clsx'\nimport ButtonSpacer from './ButtonSpacer'\n\ninterface CardHeaderProps {\n\ttitle: string\n\tsubtitle?: string\n\tactions?: ActionType[]\n\tclassName?: ClassValue\n}\n\nconst CardHeader: FC<CardHeaderProps> = ({ title, subtitle, actions, className }) => {\n\treturn (\n\t\t<div className=\"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-600\">\n\t\t\t<div\n\t\t\t\tclassName={clsx(\n\t\t\t\t\t'flex flex-col sm:flex-row justify-between items-start sm:items-center flex-wrap sm:flex-nowrap space-y-4 sm:space-y-0',\n\t\t\t\t\tclassName\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<h3 className=\"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100\">{title}</h3>\n\t\t\t\t\t{subtitle && <p className=\"mt-1 text-sm leading-5 text-gray-500 dark:text-gray-400\">{subtitle}</p>}\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"flex-shrink-0 my-0 sm:-my-2\">\n\t\t\t\t\t{actions && actions.length > 0 ? (\n\t\t\t\t\t\t<Actions actions={actions} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"hidden sm:block\">\n\t\t\t\t\t\t\t<ButtonSpacer />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default CardHeader\n","import clsx, { ClassValue } from 'clsx'\nimport { FC } from 'react'\n\ninterface TableFrameProps {\n\tclassName?: ClassValue\n}\n\nconst TableFrame: FC<TableFrameProps> = ({ children, className }) => {\n\treturn (\n\t\t<div className={clsx('border border-gray-200 dark:border-gray-600 rounded-md overflow-hidden', className)}>\n\t\t\t{children}\n\t\t</div>\n\t)\n}\n\nexport default TableFrame\n","import { FC } from 'react'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport PageHeading from '@primer/components/PageHeading'\nimport Card, { CardWrapper } from '@primer/components/Card'\nimport Stack from '@primer/components/Stack'\nimport FormCheckbox from '@primer/components/Form/FormCheckbox'\nimport CardHeader from '@primer/components/CardHeader'\nimport db from 'db'\nimport FormSection from '@primer/components/Form/FormSection'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport TableFrame from '@primer/components/TableFrame'\nimport { FieldPermissionModel, ActionPermissionModel, RelationPermissionModel } from 'db/types'\n\ninterface PermissionSet<T> {\n\t[key: string]: T\n}\n\ninterface Permissions {\n\t[key: string]: {\n\t\tfields: PermissionSet<FieldPermissionModel>\n\t\tactions: PermissionSet<ActionPermissionModel>\n\t\trelations: PermissionSet<RelationPermissionModel>\n\t}\n}\n\ninterface FormSchema {\n\tname: string\n\tentities: Permissions\n}\n\nconst RoleForm: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst originalRole = db.roles.find(id)\n\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: {\n\t\t\tname: originalRole?.name || '',\n\t\t\tentities: db.entities.all().reduce<Permissions>((list, entity) => {\n\t\t\t\treturn {\n\t\t\t\t\t...list,\n\t\t\t\t\t[entity.key]: {\n\t\t\t\t\t\tfields: db.fields\n\t\t\t\t\t\t\t.all((x) => x.entityId === entity.id)\n\t\t\t\t\t\t\t.reduce<PermissionSet<FieldPermissionModel>>(\n\t\t\t\t\t\t\t\t(items, x) => ({\n\t\t\t\t\t\t\t\t\t...items,\n\t\t\t\t\t\t\t\t\t[x.key]: db.fieldPermissions.find((y) => y.fieldId === x.id && y.roleId === id) || {\n\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\troleId: id || '',\n\t\t\t\t\t\t\t\t\t\tfieldId: x.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\tactions: db.actions\n\t\t\t\t\t\t\t.all((x) => x.entityId === entity.id)\n\t\t\t\t\t\t\t.reduce<PermissionSet<ActionPermissionModel>>(\n\t\t\t\t\t\t\t\t(items, x) => ({\n\t\t\t\t\t\t\t\t\t...items,\n\t\t\t\t\t\t\t\t\t[x.key]: db.actionPermissions.find(\n\t\t\t\t\t\t\t\t\t\t(y) => y.actionId === x.id && y.roleId === id\n\t\t\t\t\t\t\t\t\t) || {\n\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\tperform: true,\n\t\t\t\t\t\t\t\t\t\troleId: id || '',\n\t\t\t\t\t\t\t\t\t\tactionId: x.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\trelations: db.relations\n\t\t\t\t\t\t\t.all((x) => x.entityId === entity.id)\n\t\t\t\t\t\t\t.reduce<PermissionSet<RelationPermissionModel>>(\n\t\t\t\t\t\t\t\t(items, x) => ({\n\t\t\t\t\t\t\t\t\t...items,\n\t\t\t\t\t\t\t\t\t[x.key]: db.relationPermissions.find(\n\t\t\t\t\t\t\t\t\t\t(y) => y.relationId === x.id && y.roleId === id\n\t\t\t\t\t\t\t\t\t) || {\n\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\tremove: true,\n\t\t\t\t\t\t\t\t\t\troleId: id || '',\n\t\t\t\t\t\t\t\t\t\trelationId: x.id,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t}, {}),\n\t\t},\n\t\tonSubmit: (formValues) => {\n\t\t\tdb.roles.save({\n\t\t\t\t...(originalRole || {}),\n\t\t\t\tname: formValues.name,\n\t\t\t})\n\n\t\t\tdb.entities.all().forEach((entityType) => {\n\t\t\t\tObject.values(formValues.entities[entityType.key].fields).forEach((val) => {\n\t\t\t\t\tdb.fieldPermissions.save({ ...val, id: val.id || undefined })\n\t\t\t\t})\n\n\t\t\t\tObject.values(formValues.entities[entityType.key].actions).forEach((val) => {\n\t\t\t\t\tdb.actionPermissions.save({ ...val, id: val.id || undefined })\n\t\t\t\t})\n\n\t\t\t\tObject.values(formValues.entities[entityType.key].relations).forEach((val) => {\n\t\t\t\t\tdb.relationPermissions.save({ ...val, id: val.id || undefined })\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/settings/roles`)\n\t\t},\n\t})\n\n\tconst fieldSchema = (entityTypeKey: string): TableSchema<any> => ({\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Field',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entities.${entityTypeKey}.fields.${x.key}.view`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entities.${entityTypeKey}.fields.${x.key}.modify`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t})\n\n\tconst actionSchema = (entityTypeKey: string): TableSchema<any> => ({\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Action',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Perform',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entities.${entityTypeKey}.actions.${x.key}.perform`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t})\n\n\tconst relationSchema = (entityTypeKey: string): TableSchema<any> => ({\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Relation',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entities.${entityTypeKey}.relations.${x.key}.view`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entities.${entityTypeKey}.relations.${x.key}.modify`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Remove',\n\t\t\t\tvalue: (x, i) => (\n\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t<FormCheckbox name={`entities.${entityTypeKey}.relations.${x.key}.remove`} />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t})\n\n\tconst title = mode === 'create' ? 'Create Role' : 'Edit Role'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/roles',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Stack>\n\t\t\t\t\t\t<FormSection title=\"Details\" subtitle=\"Basic details about the role\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Permissions\"\n\t\t\t\t\t\t\tsubtitle=\"A view of permissions for all existing entity types and their fields/actions/relations\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t{db.entities.all().map((entityType) => (\n\t\t\t\t\t\t\t\t\t<CardWrapper key={entityType.key}>\n\t\t\t\t\t\t\t\t\t\t<CardHeader title={entityType.name} />\n\t\t\t\t\t\t\t\t\t\t<div className=\"rounded-b-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t\t\t<Stack className=\"p-6\">\n\t\t\t\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet items = db.fields.all((x) => x.entityId === entityType.id)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titems.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschema={fieldSchema(entityType.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})()}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet items = db.actions.all((x) => x.entityId === entityType.id)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titems.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschema={actionSchema(entityType.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})()}\n\n\t\t\t\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet items = db.relations.all((x) => x.entityId === entityType.id)\n\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titems.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tschema={relationSchema(entityType.key)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titems={items}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"-my-px\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</CardWrapper>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default RoleForm\n","import { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport { RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport { EntityModel } from 'db/types'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { DotsHorizontalIcon, PencilIcon, PlusIcon, TrashIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport Stack from '@primer/components/Stack'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport { confirm } from '@primer/alerts'\n\nconst Entities: FC<RouteComponentProps> = () => {\n\tconst schema: TableSchema<EntityModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Fields',\n\t\t\t\tvalue: (x) => db.fields.all((y) => y.entityId === x.id).length || '',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Actions',\n\t\t\t\tvalue: (x) => db.actions.all((y) => y.entityId === x.id).length || '',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Relations',\n\t\t\t\tvalue: (x) => db.relations.all((y) => y.entityId === x.id).length || '',\n\t\t\t},\n\t\t],\n\t\tactions: (x) => [\n\t\t\t{\n\t\t\t\ticon: <DotsHorizontalIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tactions: [\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Edit',\n\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tto: `/settings/entities/${x.id}/edit`,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\t\t\tintent: 'danger',\n\t\t\t\t\t\t\ticon: <TrashIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconfirm({\n\t\t\t\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\t\t\t\tdb.entities.remove(x.id)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Entities\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Create Entity',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/entities/create',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={db.entities.all()} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Entities\n","import { FC, Component, ElementType, Suspense } from 'react'\nimport DefaultLoader from '@primer/components/Loader'\nimport * as Sentry from '@sentry/react'\nimport { isNotNone } from '@primer/types'\n\ninterface ErrorBoundaryProps {\n\trender: ElementType\n}\n\ninterface ErrorBoundaryState {\n\terror?: Error\n}\n\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n\tstatic getDerivedStateFromError(error: Error) {\n\t\treturn { error }\n\t}\n\n\tcomponentDidCatch(error: Error) {\n\t\t// You can also log the error to an error reporting service\n\t\t// logErrorToMyService(error, info)\n\t\tSentry.captureException(error)\n\t\tconsole.dir(error)\n\t}\n\n\trender() {\n\t\tif (isNotNone(this.state?.error)) {\n\t\t\treturn <this.props.render error={this.state.error} />\n\t\t}\n\n\t\treturn this.props.children\n\t}\n}\n\ninterface DefaultErrorProps {\n\terror: Error\n}\n\nexport const defaultError: FC<DefaultErrorProps> = ({ error }) => (\n\t<div className=\"alert alert-danger\" role=\"alert\">\n\t\t<h4 className=\"alert-heading\">Something went wrong</h4>\n\t\t<hr />\n\t\t{error.message && <p className=\"m-0\">{error.message}</p>}\n\t</div>\n)\n\nconst withSuspense =\n\t(Component: ElementType, { loader = <DefaultLoader />, error = defaultError } = {}) =>\n\t(props: any) => {\n\t\treturn (\n\t\t\t<ErrorBoundary render={error}>\n\t\t\t\t<Suspense fallback={loader}>\n\t\t\t\t\t<Component {...props} />\n\t\t\t\t</Suspense>\n\t\t\t</ErrorBoundary>\n\t\t)\n\t}\n\nconst Suspender = withSuspense(({ render }) => render)\n\nexport default Suspender\n","import { FC, ReactNode } from 'react'\nimport { slideout } from '@primer/alerts'\nimport Suspender from '@primer/components/Suspender'\nimport Actions from '@primer/components/Actions'\nimport { ActionType, SlideoutResolveFn } from '@primer/types'\nimport { SizeValue } from '@primer/alerts/Slideout'\nimport { XIcon } from '@heroicons/react/outline'\nimport clsx, { ClassValue } from 'clsx'\n\ntype CloseFn = () => void\n\ninterface OpenSlideoutProps<T> {\n\trender: (close: SlideoutResolveFn<boolean | T>) => ReactNode\n\tsize?: SizeValue\n\tmode?: 'dark' | ''\n}\n\nasync function openSlideout<T>({ render, size = 'md', mode = '' }: OpenSlideoutProps<T>) {\n\treturn await slideout<T>({\n\t\tsize,\n\t\tmode,\n\t\tchildren: (close) => <SlideoutInner render={render} close={close} />,\n\t})\n}\n\ninterface SlideoutInnerProps {\n\trender: (x: CloseFn) => ReactNode\n\tclose: CloseFn\n}\n\nconst SlideoutInner: FC<SlideoutInnerProps> = ({ render, close }) => {\n\treturn (\n\t\t<div className=\"h-full w-full relative\">\n\t\t\t<div className=\"absolute top-0 left-0 -mx-12 mt-2\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: <XIcon className=\"w-5 h-5 -mx-2 text-white\" />,\n\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"h-full divide-y divide-gray-200 dark:divide-gray-600 flex flex-col bg-white dark:bg-gray-700 shadow-xl\">\n\t\t\t\t<div className=\"flex-1 h-0 flex flex-col\">\n\t\t\t\t\t<Suspender render={render(close)} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\ninterface SlideoutHeaderProps {\n\ttitle: ReactNode\n\tsubtitle?: ReactNode\n\tactions?: ActionType[]\n}\n\nexport const SlideoutHeader: FC<SlideoutHeaderProps> = ({ title, subtitle, actions }) => {\n\treturn (\n\t\t<div className=\"py-6 px-4 bg-primary-500 dark:bg-primary-600 sm:px-6 flex-shrink-0\">\n\t\t\t<div className=\"flex items-center justify-between\">\n\t\t\t\t<div className=\"text-lg font-medium text-white antialiased\">{title}</div>\n\t\t\t\t<div className=\"ml-3 h-7 flex items-center\">{actions && <Actions actions={actions} />}</div>\n\t\t\t</div>\n\t\t\t{subtitle && (\n\t\t\t\t<div className=\"mt-1\">\n\t\t\t\t\t<div className=\"text-sm text-white opacity-75 antialiased\">{subtitle}</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\ninterface SlideoutContentProps {\n\tclassName?: ClassValue\n}\n\nexport const SlideoutContent: FC<SlideoutContentProps> = ({ className, children }) => {\n\treturn <div className={clsx('flex-1 flex flex-col justify-between overflow-y-auto', className)}>{children}</div>\n}\n\nexport default openSlideout\n","import { ChangeEvent, ElementType, FC, ReactNode, useState } from 'react'\nimport { useField, useFormikContext } from 'formik'\nimport clsx, { ClassValue } from 'clsx'\nimport useAutoFocus from '@primer/hooks/useAutoFocus'\nimport { FormValidations, validate } from './utils'\nimport { v4 as uuidv4 } from 'uuid'\n\ninterface FormInputProps {\n\tas?: ElementType | string\n\tname: string\n\tlabel?: ReactNode\n\ttype?: string\n\tclassName?: ClassValue\n\tautoFocus?: boolean\n\tvalidations?: FormValidations\n\tplaceholder?: string\n\tdisabled?: boolean\n\tstep?: number\n\tinputProps?: {\n\t\tmin?: number\n\t\tmax?: number\n\t\tstep?: number\n\t\tclassName?: string\n\t}\n}\n\nconst FormInput: FC<FormInputProps> = ({\n\tas = 'input',\n\tname,\n\tlabel,\n\ttype = 'text',\n\tclassName,\n\tautoFocus = false,\n\tvalidations = {},\n\tplaceholder,\n\tdisabled = false,\n\tinputProps = {},\n}) => {\n\tconst ref = useAutoFocus<HTMLInputElement>(autoFocus)\n\n\tconst Comp = as\n\n\tconst [{ value }, , { setValue, setTouched }] = useField({\n\t\tname,\n\t\ttype,\n\t\tvalidate: validate(validations),\n\t})\n\n\tconst formik = useFormikContext()\n\n\tconst [token] = useState(uuidv4())\n\n\tconst { className: extraClassName, ...extraProps } = inputProps\n\n\treturn (\n\t\t<div className={clsx(className)}>\n\t\t\t<div className=\"text-[0px] leading-none select-none\">{token}</div>\n\n\t\t\t<div className={clsx('relative rounded-md', label && 'mt-1')}>\n\t\t\t\t<Comp\n\t\t\t\t\tref={ref}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={(e: ChangeEvent<HTMLInputElement>) => setValue(e.target.value)}\n\t\t\t\t\tonBlur={() => {\n\t\t\t\t\t\tsetTouched(true)\n\t\t\t\t\t}}\n\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\tdisabled={disabled || formik.isSubmitting}\n\t\t\t\t\tclassName={clsx(extraClassName)}\n\t\t\t\t\t{...(Comp === 'input' ? extraProps : {})}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport default FormInput\n","import { FC } from 'react'\nimport openSlideout, { SlideoutHeader, SlideoutContent } from '@primer/hooks/openSlideout'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport { watch } from '@primer/components/Form/utils'\nimport FormInput from '@primer/components/Form/FormInput'\nimport FormSelect from '@primer/components/Form/FormSelect'\nimport Stack from '@primer/components/Stack'\nimport { FieldModel, FieldPermissionModel, RoleModel } from 'db/types'\nimport FormDate from '@primer/components/Form/FormDate'\nimport { CheckIcon, PlusIcon, XIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport FormInputRaw from '@primer/components/Form/FormInputRaw'\nimport useFieldArray from '@primer/components/Form/useFieldArray'\nimport clsx from 'clsx'\nimport { SlideoutResolveFn } from '@primer/types'\nimport { slugify } from '@primer/utils/funcs'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport FormLabel from '@primer/components/Form/FormLabel'\nimport TableFrame from '@primer/components/TableFrame'\nimport db from 'db'\nimport FormCheckbox from '@primer/components/Form/FormCheckbox'\n\nexport const typeOptions = [\n\t{ value: 'string', label: 'Text' },\n\t{ value: 'number', label: 'Number' },\n\t{ value: 'boolean', label: 'Boolean' },\n\t{ value: 'date', label: 'Date' },\n\t{ value: 'option', label: 'Options' },\n]\n\ntype FormFieldModel = FieldModel & { permissions: FieldPermissionModel[] }\n\ninterface OpenFieldProps {\n\tmode?: 'create' | 'edit'\n\tfield: FormFieldModel\n}\n\nconst openField = (props: OpenFieldProps) => {\n\treturn openSlideout<FormFieldModel>({\n\t\trender: (close) => <Component close={close} {...props} />,\n\t})\n}\n\ntype FormSchema = FormFieldModel\n\nconst Component: FC<OpenFieldProps & { close: SlideoutResolveFn<FormFieldModel> }> = ({\n\tmode = 'create',\n\tfield,\n\tclose,\n}) => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: field as FormSchema,\n\t\tonSubmit: (formData) => {\n\t\t\tclose({\n\t\t\t\t...formData,\n\t\t\t\tkey: slugify(formData.name),\n\t\t\t})\n\t\t},\n\t})\n\n\tconsole.log('field', field)\n\n\tconst type = watch('type', formContext)\n\tconst permissions = watch('permissions', formContext)\n\tconst { values: options, arrayHelpers: optionsHelpers } = useFieldArray('options', formContext)\n\n\tconst permissionsSchema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Role',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].view`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].modify`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<Form context={formContext} className=\"contents\">\n\t\t\t<SlideoutHeader title={mode === 'create' ? 'Create Entity Field' : 'Edit Entity Field'} />\n\n\t\t\t<SlideoutContent>\n\t\t\t\t<Stack className=\"py-6\">\n\t\t\t\t\t<div className=\"px-6\">\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\t\t\tlabel=\"Type\"\n\t\t\t\t\t\t\t\toptions={typeOptions}\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Type is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{type === 'string' && <FormInput name=\"defaultValue\" label=\"Default Value\" />}\n\t\t\t\t\t\t\t{type === 'number' && <FormInput name=\"defaultValue\" label=\"Default Value\" type=\"number\" />}\n\t\t\t\t\t\t\t{type === 'boolean' && (\n\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\tname=\"defaultValue\"\n\t\t\t\t\t\t\t\t\tlabel=\"Default Value\"\n\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t{ value: 'false', label: 'False' },\n\t\t\t\t\t\t\t\t\t\t{ value: 'true', label: 'True' },\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{type === 'date' && <FormDate name=\"defaultValue\" label=\"Default Value\" />}\n\t\t\t\t\t\t\t{type === 'option' && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t{options.map((x, i) => (\n\t\t\t\t\t\t\t\t\t\t<div key={i} className=\"relative\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute z-[2] top-0 left-0 ml-3 h-full flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs font-medium rounded-full w-5 h-5 bg-gray-200 dark:bg-gray-700 dark:text-gray-100 flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{i + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<FormInputRaw\n\t\t\t\t\t\t\t\t\t\t\t\tname={`options[${i}]`}\n\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName: clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'py-2 pl-12 pr-8 -mb-px relative text-sm w-full border border-gray-300 dark:border-gray-600 focus:z-[1] focus:ring-1 focus:ring-primary-500 focus:border-primary-500 dark:focus:border-primary-500 bg-white dark:bg-gray-800 dark:text-gray-100',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ti === 0 && 'rounded-t-md',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ti === options.length - 1 && 'rounded-b-md'\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{options.length > 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute z-[1] top-0 right-0 mr-3 h-full flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"rounded-full w-5 h-5 bg-red-100 dark:bg-red-500 dark:bg-opacity-25 text-red-500 flex items-center justify-center focus:ring-2 focus:ring-red-500 transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => optionsHelpers.remove(i)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<XIcon className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t<div className=\"mt-2 flex justify-end\">\n\t\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add option',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-4 h-4\" />,\n\t\t\t\t\t\t\t\t\t\t\t\tsize: 'sm',\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: () => optionsHelpers.push(''),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<FormInput name=\"defaultValue\" label=\"Default Value\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<FormInput name=\"description\" label=\"Description\" />\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormLabel>Permissions</FormLabel>\n\n\t\t\t\t\t\t\t\t<TableFrame className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Table schema={permissionsSchema} items={db.roles.all()} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</SlideoutContent>\n\n\t\t\t<div className=\"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Cancel',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n\nexport default openField\n","import { FC } from 'react'\nimport openSlideout, { SlideoutHeader, SlideoutContent } from '@primer/hooks/openSlideout'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport Stack from '@primer/components/Stack'\nimport { ActionModel, ActionPermissionModel, FieldModel, RoleModel } from 'db/types'\nimport { CheckIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport FormLabel from '@primer/components/Form/FormLabel'\nimport { SlideoutResolveFn } from '@primer/types'\nimport { slugify } from '@primer/utils/funcs'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport TableFrame from '@primer/components/TableFrame'\nimport db from 'db'\nimport FormCheckbox from '@primer/components/Form/FormCheckbox'\nimport { watch } from '@primer/components/Form/utils'\n\ntype FormActionModel = ActionModel & { permissions: ActionPermissionModel[] }\n\ninterface OpenActionProps {\n\tmode?: 'create' | 'edit'\n\taction: FormActionModel\n\tfields: FieldModel[]\n}\n\nconst openAction = (props: OpenActionProps) => {\n\treturn openSlideout<FormActionModel>({\n\t\tsize: '2xl',\n\t\trender: (close) => <Component close={close} {...props} />,\n\t})\n}\n\ntype FormSchema = FormActionModel\n\nconst Component: FC<OpenActionProps & { close: SlideoutResolveFn<FormActionModel> }> = ({\n\tmode = 'create',\n\taction,\n\tfields,\n\tclose,\n}) => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: action as FormSchema,\n\t\tonSubmit: (formData) => {\n\t\t\tclose({\n\t\t\t\t...formData,\n\t\t\t\tkey: slugify(formData.name),\n\t\t\t})\n\t\t},\n\t})\n\n\tconst permissions = watch('permissions', formContext)\n\t// const { values: changes, arrayHelpers: changesHelpers } = useFieldArray('changes', formContext)\n\n\t// const getEntityField = (id?: string) => fields.find((x) => x.id === id)\n\n\tconst permissionsSchema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Role',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Perform',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].perform`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<Form context={formContext} className=\"contents\">\n\t\t\t<SlideoutHeader title={mode === 'create' ? 'Create Action' : 'Edit Action'} />\n\n\t\t\t<SlideoutContent>\n\t\t\t\t<Stack className=\"py-6\">\n\t\t\t\t\t<div className=\"px-6\">\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/* <div>\n\t\t\t\t\t\t\t\t<FormLabel>Changes</FormLabel>\n\t\t\t\t\t\t\t\t<Well className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t\t{changes.filter(isNotNone).map((change, i) => {\n\t\t\t\t\t\t\t\t\t\t\tlet entityField = getEntityField(change.fieldId)\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={i} className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>Set</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].fieldId`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={fields.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: x.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'boolean' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].newValue`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'True', value: 'true' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'False', value: 'false' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'string' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[200px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormInput name={`changes[${i}].newValue`} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'date' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[300px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].newValue`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: 'Current Time',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 'current-time',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t{entityField?.type === 'option' && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormLabel>to</FormLabel>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"w-[300px]\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={`changes[${i}].newValue`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions={entityField.options.map((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: x,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: x,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add change',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\t\tonClick: () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tchangesHelpers.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: uuid(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserDefined: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t</Well>\n\t\t\t\t\t\t\t</div> */}\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormLabel>Permissions</FormLabel>\n\t\t\t\t\t\t\t\t<TableFrame className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Table schema={permissionsSchema} items={db.roles.all()} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</SlideoutContent>\n\n\t\t\t<div className=\"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Cancel',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n\nexport default openAction\n","import { FC } from 'react'\nimport openSlideout, { SlideoutHeader, SlideoutContent } from '@primer/hooks/openSlideout'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport Stack from '@primer/components/Stack'\nimport { RelationModel, RelationPermissionModel, RoleModel } from 'db/types'\nimport { CheckIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport { SlideoutResolveFn } from '@primer/types'\nimport FormSelect from '@primer/components/Form/FormSelect'\nimport db from 'db'\nimport { slugify } from '@primer/utils/funcs'\nimport FormInput from '@primer/components/Form/FormInput'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport FormLabel from '@primer/components/Form/FormLabel'\nimport TableFrame from '@primer/components/TableFrame'\nimport FormCheckbox from '@primer/components/Form/FormCheckbox'\nimport { watch } from '@primer/components/Form/utils'\n\nexport const relationTypeOptions = [\n\t{ value: 'one-to-one', label: 'Single' },\n\t{ value: 'one-to-many', label: 'Many' },\n]\n\nexport const oppositeRelationTypeOptions = [\n\t{ value: 'one-to-one', label: 'Single' },\n\t{ value: 'one-to-many', label: 'Single' },\n]\n\ntype FormRelationModel = RelationModel & { permissions: RelationPermissionModel[] }\n\ninterface OpenConnectionProps {\n\tmode?: 'create' | 'edit'\n\trelation: FormRelationModel\n}\n\nconst openRelation = (props: OpenConnectionProps) => {\n\treturn openSlideout<FormRelationModel>({\n\t\trender: (close) => <Component close={close} {...props} />,\n\t})\n}\n\ntype FormSchema = FormRelationModel\n\nconst Component: FC<OpenConnectionProps & { close: SlideoutResolveFn<FormRelationModel> }> = ({\n\tmode = 'create',\n\trelation,\n\tclose,\n}) => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: relation as FormSchema,\n\t\tonSubmit: (formData) => {\n\t\t\tclose({\n\t\t\t\t...formData,\n\t\t\t\tkey: slugify(formData.name),\n\t\t\t})\n\t\t},\n\t})\n\n\tconst permissions = watch('permissions', formContext)\n\n\tconst permissionsSchema: TableSchema<RoleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Role',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'View',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].view`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Modify',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].modify`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Remove',\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tconst index = permissions.findIndex((y) => y.roleId === x.id)\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<FormCheckbox name={`permissions[${index}].remove`} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<Form context={formContext} className=\"contents\">\n\t\t\t<SlideoutHeader title={mode === 'create' ? 'Create Connection' : 'Edit Connection'} />\n\n\t\t\t<SlideoutContent>\n\t\t\t\t<Stack className=\"py-6\">\n\t\t\t\t\t<div className=\"px-6\">\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput name=\"name\" label=\"Name\" validations={{ required: 'Name is required' }} />\n\n\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\tname=\"relatedId\"\n\t\t\t\t\t\t\t\tlabel=\"Entity\"\n\t\t\t\t\t\t\t\toptions={db.entities.all().map((x) => ({ value: x.id, label: x.name }))}\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Entity is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<FormSelect\n\t\t\t\t\t\t\t\tname=\"type\"\n\t\t\t\t\t\t\t\tlabel=\"Cardinality\"\n\t\t\t\t\t\t\t\toptions={relationTypeOptions}\n\t\t\t\t\t\t\t\tvalidations={{ required: 'Cardinality is required' }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormLabel>Permissions</FormLabel>\n\t\t\t\t\t\t\t\t<TableFrame className=\"mt-2\">\n\t\t\t\t\t\t\t\t\t<Table schema={permissionsSchema} items={db.roles.all()} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</TableFrame>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</SlideoutContent>\n\n\t\t\t<div className=\"p-6 border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-750 flex justify-end\">\n\t\t\t\t<Actions\n\t\t\t\t\tactions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Cancel',\n\t\t\t\t\t\t\tonClick: () => close(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n\nexport default openRelation\n","import { FC, useState } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport Card, { CardWrapper } from '@primer/components/Card'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon, PencilIcon, PlusIcon, XIcon } from '@heroicons/react/outline'\nimport Actions from '@primer/components/Actions'\nimport Stack from '@primer/components/Stack'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport db from 'db'\nimport {\n\tActionModel,\n\tActionPermissionModel,\n\tRelationModel,\n\tRelationPermissionModel,\n\tFieldModel,\n\tFieldPermissionModel,\n} from 'db/types'\nimport useFieldArray from '@primer/components/Form/useFieldArray'\nimport FormSection from '@primer/components/Form/FormSection'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport openField, { typeOptions } from 'slideouts/openField'\nimport openAction from 'slideouts/openAction'\nimport { confirm } from '@primer/alerts'\nimport { slugify } from '@primer/utils/funcs'\nimport openRelation, { relationTypeOptions, oppositeRelationTypeOptions } from 'slideouts/openRelation'\nimport produce from 'immer'\nimport FormToggle from '@primer/components/Form/FormToggle'\n\ntype FormFieldModel = FieldModel & { permissions: FieldPermissionModel[] }\ntype FormActionModel = ActionModel & { permissions: ActionPermissionModel[] }\ntype FormRelationModel = RelationModel & { permissions: RelationPermissionModel[] }\n\ninterface FormSchema {\n\tname: string\n\tplural: string\n\tmainNav: boolean\n\tfields: FormFieldModel[]\n\tactions: FormActionModel[]\n\trelations: FormRelationModel[]\n}\n\nconst EntityForm: FC<RouteComponentProps<{ id: string; mode: 'create' | 'edit' }>> = ({ id, mode }) => {\n\tconst original = db.entities.find(id)\n\n\tconst originalFields = db.fields.all((x) => x.entityId === id)\n\tconst originalActions = db.actions.all((x) => x.entityId === id)\n\tconst originalRelations = db.relations.all((x) => x.entityId === id || x.relatedId === id)\n\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: {\n\t\t\tname: original?.name || '',\n\t\t\tplural: original?.plural || '',\n\t\t\tmainNav: original?.mainNav || false,\n\t\t\tfields: originalFields\n\t\t\t\t? originalFields.map((x) => ({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\tpermissions: db.fieldPermissions.all((y) => y.fieldId === x.id),\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t\tactions: originalActions\n\t\t\t\t? originalActions.map((x) => ({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\tpermissions: db.actionPermissions.all((y) => y.actionId === x.id),\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t\trelations: originalRelations\n\t\t\t\t? originalRelations.map((x) => ({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\tpermissions: db.relationPermissions.all((y) => y.relationId === x.id),\n\t\t\t\t  }))\n\t\t\t\t: [],\n\t\t},\n\t\tonSubmit: (formSchema) => {\n\t\t\tconst newEntityType = db.entities.save({\n\t\t\t\t...original,\n\t\t\t\tkey: slugify(formSchema.name),\n\t\t\t\tname: formSchema.name,\n\t\t\t\tplural: formSchema.plural,\n\t\t\t\tmainNav: formSchema.mainNav,\n\t\t\t})\n\n\t\t\tformSchema.fields.forEach(({ permissions, ...entityField }) => {\n\t\t\t\tdb.fields.save({\n\t\t\t\t\t...entityField,\n\t\t\t\t\tentityId: newEntityType.id,\n\t\t\t\t})\n\n\t\t\t\tpermissions.forEach((x) => {\n\t\t\t\t\tdb.fieldPermissions.save({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\t...(x.id ? {} : { id: uuid() }), // set id if it's not a thing\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tformSchema.actions.forEach(({ permissions, ...entityAction }) => {\n\t\t\t\tdb.actions.save({\n\t\t\t\t\t...entityAction,\n\t\t\t\t\tentityId: newEntityType.id,\n\t\t\t\t})\n\n\t\t\t\tpermissions.forEach((x) => {\n\t\t\t\t\tdb.actionPermissions.save({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\t...(x.id ? {} : { id: uuid() }), // set id if it's not a thing\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\tformSchema.relations.forEach(({ permissions, ...relation }) => {\n\t\t\t\tdb.relations.save({\n\t\t\t\t\t...relation,\n\t\t\t\t\tentityId: newEntityType.id,\n\t\t\t\t})\n\n\t\t\t\tpermissions.forEach((x) => {\n\t\t\t\t\tdb.relationPermissions.save({\n\t\t\t\t\t\t...x,\n\t\t\t\t\t\t...(x.id ? {} : { id: uuid() }), // set id if it's not a thing\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\n\t\t\ttoDelete.fields.forEach(db.fields.remove)\n\t\t\ttoDelete.actions.forEach(db.actions.remove)\n\t\t\ttoDelete.relations.forEach(db.relations.remove)\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/settings/entities`)\n\t\t},\n\t})\n\n\tconst { values: fields, arrayHelpers: fieldsHelpers } = useFieldArray('fields', formContext)\n\tconst { values: actions, arrayHelpers: actionsHelpers } = useFieldArray('actions', formContext)\n\tconst { values: relations, arrayHelpers: relationsHelpers } = useFieldArray('relations', formContext)\n\n\tconst [toDelete, setToDelete] = useState<{\n\t\tfields: string[]\n\t\tactions: string[]\n\t\trelations: string[]\n\t}>({\n\t\tfields: [],\n\t\tactions: [],\n\t\trelations: [],\n\t})\n\n\tconst fieldSchema: TableSchema<FormFieldModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Type',\n\t\t\t\tvalue: (x) => typeOptions.find((y) => y.value === x.type)?.label || '',\n\t\t\t},\n\t\t],\n\t\tactions: (x, i) => [\n\t\t\t{\n\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tonClick: async () => {\n\t\t\t\t\tconst editedField = await openField({ mode: 'edit', field: x })\n\t\t\t\t\tif (editedField) {\n\t\t\t\t\t\tfieldsHelpers.replace(i, editedField)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <XIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu-danger',\n\t\t\t\tonClick: () => {\n\t\t\t\t\tconfirm({\n\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\tfieldsHelpers.remove(i)\n\t\t\t\t\t\t\tsetToDelete(\n\t\t\t\t\t\t\t\tproduce((draft) => {\n\t\t\t\t\t\t\t\t\tdraft.fields.push(x.id)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t}\n\n\tconst actionsSchema: TableSchema<FormActionModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t\tactions: (x, i) => [\n\t\t\t{\n\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tonClick: async () => {\n\t\t\t\t\tconst editedAction = await openAction({ mode: 'edit', action: x, fields })\n\t\t\t\t\tif (editedAction) {\n\t\t\t\t\t\tactionsHelpers.replace(i, editedAction)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: <XIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu-danger',\n\t\t\t\tonClick: () => {\n\t\t\t\t\tconfirm({\n\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\tactionsHelpers.remove(i)\n\t\t\t\t\t\t\tsetToDelete(\n\t\t\t\t\t\t\t\tproduce((draft) => {\n\t\t\t\t\t\t\t\t\tdraft.actions.push(x.id)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t}\n\n\tconst relationSchema: TableSchema<FormRelationModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Related Entity',\n\t\t\t\tvalue: (x) =>\n\t\t\t\t\tx.entityId === id\n\t\t\t\t\t\t? db.entities.find((y) => y.id === x.relatedId)?.name\n\t\t\t\t\t\t: db.entities.find((y) => y.id === x.entityId)?.name,\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Cardinality',\n\t\t\t\tvalue: (x) =>\n\t\t\t\t\tx.entityId === id\n\t\t\t\t\t\t? relationTypeOptions.find((y) => y.value === x.type)?.label\n\t\t\t\t\t\t: oppositeRelationTypeOptions.find((y) => y.value === x.type)?.label,\n\t\t\t},\n\t\t],\n\t\tactions: (x, i) => [\n\t\t\tx.entityId === id && {\n\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu',\n\t\t\t\tonClick: async () => {\n\t\t\t\t\tconst editedRelation = await openRelation({ mode: 'edit', relation: x })\n\t\t\t\t\tif (editedRelation) {\n\t\t\t\t\t\trelationsHelpers.replace(i, editedRelation)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tx.entityId === id && {\n\t\t\t\ticon: <XIcon className=\"w-5 h-5\" />,\n\t\t\t\tintent: 'menu-danger',\n\t\t\t\tonClick: () => {\n\t\t\t\t\tconfirm({\n\t\t\t\t\t\ttitle: 'Are you sure?',\n\t\t\t\t\t\tmessage: 'This cannot be undone',\n\t\t\t\t\t\tonAccept: () => {\n\t\t\t\t\t\t\trelationsHelpers.remove(i)\n\t\t\t\t\t\t\tsetToDelete(\n\t\t\t\t\t\t\t\tproduce((draft) => {\n\t\t\t\t\t\t\t\t\tdraft.relations.push(x.id)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t}\n\n\tconst title = mode === 'create' ? 'Create Entity' : 'Edit Entity'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/entities',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<Form context={formContext}>\n\t\t\t\t<PageContent>\n\t\t\t\t\t<Stack dividers>\n\t\t\t\t\t\t<FormSection title=\"Details\" subtitle=\"The name and different types of labels for the entity\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t\t<FormInput\n\t\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\n\t\t\t\t\t\t\t\t\t\tvalidations={{ required: 'Name is required' }}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<FormInput name=\"plural\" label=\"Plural\" />\n\n\t\t\t\t\t\t\t\t\t<FormToggle name=\"mainNav\" label=\"Show in Main Nav\" />\n\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Fields\"\n\t\t\t\t\t\t\tsubtitle=\"Fields are custom fields that are attached to this entity, that can be configured to contain many different kinds of data\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<CardWrapper className=\"rounded-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t<Table items={fields} schema={fieldSchema} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</CardWrapper>\n\n\t\t\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add Field Type',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet id = uuid()\n\t\t\t\t\t\t\t\t\t\t\t\tconst newField = await openField({\n\t\t\t\t\t\t\t\t\t\t\t\t\tfield: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplural: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemplate: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\toptions: [''],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpermissions: db.roles.all().map<FieldPermissionModel>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troleId: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfieldId: id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (newField) fieldsHelpers.push(newField)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Actions\"\n\t\t\t\t\t\t\tsubtitle=\"Actions are custom interactions that the user can use do to this entity. They can modify a field, or be used as triggers for notifications.\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<CardWrapper className=\"rounded-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t<Table items={actions} schema={actionsSchema} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</CardWrapper>\n\n\t\t\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add Action',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet id = uuid()\n\t\t\t\t\t\t\t\t\t\t\t\tconst newAction = await openAction({\n\t\t\t\t\t\t\t\t\t\t\t\t\taction: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchanges: [],\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpermissions: db.roles.all().map<ActionPermissionModel>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troleId: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactionId: id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tperform: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tfields,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (newAction) actionsHelpers.push(newAction)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Relations\"\n\t\t\t\t\t\t\tsubtitle={\n\t\t\t\t\t\t\t\t<div className=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tRelations are a way to define a relationship between this entity type, and\n\t\t\t\t\t\t\t\t\t\tanother entity type.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tFor example, if a \"case has many events\", then a case should have a relation\n\t\t\t\t\t\t\t\t\t\tnamed \"Events\", set to the Event entity and a cardinality of \"Many\"\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t\t<CardWrapper className=\"rounded-md overflow-hidden\">\n\t\t\t\t\t\t\t\t\t<Table items={relations} schema={relationSchema} className=\"-my-px\" />\n\t\t\t\t\t\t\t\t</CardWrapper>\n\n\t\t\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Add Relation',\n\t\t\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\t\tintent: 'invisible',\n\t\t\t\t\t\t\t\t\t\t\tonClick: async () => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet id = uuid()\n\t\t\t\t\t\t\t\t\t\t\t\tconst newRelation = await openRelation({\n\t\t\t\t\t\t\t\t\t\t\t\t\trelation: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentityId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedId: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'one-to-many',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpermissions: db.roles\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.all()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map<RelationPermissionModel>((x) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\troleId: x.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trelationId: id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tview: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodify: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tremove: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (newRelation) relationsHelpers.push(newRelation)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: mode === 'create' ? 'Create' : 'Save',\n\t\t\t\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</PageContent>\n\t\t\t</Form>\n\t\t</>\n\t)\n}\n\nexport default EntityForm\n","import { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport Table, { TableSchema } from '@primer/components/Table'\nimport { PlusIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\n\ninterface ModuleModel {\n\tname: string\n}\n\nconst modules = [{ name: 'Shared Workspace' }, { name: 'Document Production' }, { name: 'Document Exchange' }]\n\nconst Modules: FC<RouteComponentProps> = () => {\n\t// const editNotification = (x: ModuleModel) => null\n\t// const deleteNotification = (x: ModuleModel) => null\n\n\tconst schema: TableSchema<ModuleModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Name',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t},\n\t\t],\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Modules\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Add Module',\n\t\t\t\t\t\t\t\t\ticon: <PlusIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\tto: '/settings/modules/add',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"overflow-hidden rounded-br-md\">\n\t\t\t\t\t\t<Table schema={schema} items={modules} className=\"-mb-px\" />\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Modules\n","import { ChangeEvent, FC } from 'react'\nimport clsx, { ClassValue } from 'clsx'\n\ninterface CheckboxProps {\n\tchecked: boolean\n\tname?: string\n\tlabel?: string\n\tclassName?: ClassValue\n\tdisabled?: boolean\n\tonChange?: (event: ChangeEvent<HTMLInputElement>) => void\n\tcolor?: string\n}\n\nconst Checkbox: FC<CheckboxProps> = ({\n\tchecked,\n\tname,\n\tlabel = '',\n\tclassName,\n\tdisabled,\n\tonChange,\n\tcolor = 'text-emerald-600 dark:text-emerald-500',\n}) => {\n\treturn (\n\t\t<label\n\t\t\tclassName={clsx(\n\t\t\t\t'text-sm font-medium leading-5 text-gray-700 dark:text-gray-200 inline-flex items-start cursor-pointer',\n\t\t\t\tclassName\n\t\t\t)}\n\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tname={name}\n\t\t\t\tid={name}\n\t\t\t\tchecked={checked}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tonChange={onChange}\n\t\t\t\tclassName={clsx('form-checkbox rounded-sm border-gray-300 mt-1', {\n\t\t\t\t\t[color]: !disabled,\n\t\t\t\t\t'text-gray-400': disabled,\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t{label && <span className=\"ml-3 mt-0.5 select-none\">{label}</span>}\n\t\t</label>\n\t)\n}\n\nexport default Checkbox\n","import { FC, useState } from 'react'\nimport { v4 as uuid } from 'uuid'\nimport PageHeading from '@primer/components/PageHeading'\nimport { RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Stack from '@primer/components/Stack'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport clsx from 'clsx'\nimport DataListColumns from '@primer/components/DataListColumns'\nimport Checkbox from '@primer/components/Checkbox'\n\nconst modules = [\n\t{ id: uuid(), name: 'Shared Workspace' },\n\t{ id: uuid(), name: 'Document Production' },\n\t{ id: uuid(), name: 'Document Exchange' },\n\t{ id: uuid(), name: 'Video Conferencing' },\n\t{ id: uuid(), name: 'Peer Review' },\n]\n\nconst AddModule: FC<RouteComponentProps> = () => {\n\tconst [selected, setSelected] = useState<string[]>([])\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle=\"Add Module\"\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/modules',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>Add Module</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Stack>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<div className=\"grid grid-cols-3 gap-6\">\n\t\t\t\t\t\t\t{modules.map((x) => (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tkey={x.id}\n\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t'border rounded relative cursor-pointer shadow-sm',\n\t\t\t\t\t\t\t\t\t\t'col-span-1 min-h-[300px]',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'bg-white dark:bg-gray-750 border-gray-200 dark:border-gray-600':\n\t\t\t\t\t\t\t\t\t\t\t\t!selected.includes(x.id),\n\t\t\t\t\t\t\t\t\t\t\t'bg-primary-50 dark:bg-primary-500 dark:bg-opacity-25 border-primary-500 dark:border-primary-500 ring-1 ring-primary-500':\n\t\t\t\t\t\t\t\t\t\t\t\tselected.includes(x.id),\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tif (selected.includes(x.id)) {\n\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => s.filter((y) => y !== x.id))\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => [...s, x.id])\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Stack className=\"p-4\">\n\t\t\t\t\t\t\t\t\t\t<DataListColumns\n\t\t\t\t\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: <span className=\"text-lg font-medium\">{x.name}</span>,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'Includes',\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ul className=\"list-disc pl-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>3 Entities</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>5 Templates</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>5 Notifications</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\tcolumns={1}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<button className=\"text-primary-600 text-sm font-medium underline\">\n\t\t\t\t\t\t\t\t\t\t\tView More\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t<div className=\"p-4 absolute top-0 right-0\">\n\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\tchecked={selected.includes(x.id)}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.target.checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => s.filter((y) => y !== x.id))\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelected((s) => [...s, x.id])\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Card>\n\n\t\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ttitle: 'Save',\n\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\tintent: 'save',\n\t\t\t\t\t\t\t\tonClick: () => {},\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default AddModule\n","import { FC } from 'react'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageNavbar from '@primer/components/PageNavbar'\nimport { RouteComponentProps } from '@reach/router'\nimport db from 'db'\nimport { PencilIcon } from '@heroicons/react/outline'\nimport { links } from '../Settings'\nimport SectionHeader from '@primer/components/SectionHeader'\nimport Stack from '@primer/components/Stack'\nimport DataListColumns from '@primer/components/DataListColumns'\n\nconst Roles: FC<RouteComponentProps> = () => {\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"Settings\" />\n\n\t\t\t<PageNavbar links={links}>\n\t\t\t\t<Stack>\n\t\t\t\t\t<div className=\"px-6 pt-6\">\n\t\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\t\ttitle=\"Site Settings\"\n\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Edit Site Settings',\n\t\t\t\t\t\t\t\t\ticon: <PencilIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\tto: '/settings/site-settings/edit',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"p-6\">\n\t\t\t\t\t\t<DataListColumns\n\t\t\t\t\t\t\titems={[\n\t\t\t\t\t\t\t\t{ title: 'Title', value: db.siteSettings.get('title') },\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttitle: 'Layout',\n\t\t\t\t\t\t\t\t\tvalue: db.siteSettings.get('layout') === 'sidebar' ? 'Nav on side' : 'Nav on top',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Stack>\n\t\t\t</PageNavbar>\n\t\t</>\n\t)\n}\n\nexport default Roles\n","export default __webpack_public_path__ + \"static/media/layout-sidebar.55a16042.svg\";","export default __webpack_public_path__ + \"static/media/layout-topbar.ff4c6906.svg\";","import { FC } from 'react'\nimport { navigate, RouteComponentProps } from '@reach/router'\nimport { ArrowLeftIcon, CheckIcon } from '@heroicons/react/outline'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport Actions from '@primer/components/Actions'\nimport PageContent from '@primer/components/PageContent'\nimport PageHeading from '@primer/components/PageHeading'\nimport Card, { CardWrapper } from '@primer/components/Card'\nimport Stack from '@primer/components/Stack'\nimport db from 'db'\nimport FormSection from '@primer/components/Form/FormSection'\nimport { EntityModel, SiteSettings } from 'db/types'\nimport LayoutSidebar from 'assets/img/layout-sidebar.svg'\nimport LayoutTopbar from 'assets/img/layout-topbar.svg'\nimport { watch } from '@primer/components/Form/utils'\nimport clsx from 'clsx'\nimport Table, { TableCol, TableSchema } from '@primer/components/Table'\nimport { getIn } from 'formik'\nimport Checkbox from '@primer/components/Checkbox'\nimport FormEditor from '@primer/components/Form/FormEditor'\n\ntype FormSchema = SiteSettings & {\n\tnav: {\n\t\t[x: string]: {\n\t\t\tlink: string\n\t\t\tpermissions: string[]\n\t\t}\n\t}\n\tsignature: string\n}\n\nconst SiteSettingsForm: FC<RouteComponentProps> = () => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: {\n\t\t\ttitle: db.siteSettings.get('title') || '',\n\t\t\tlayout: db.siteSettings.get('layout') || 'sidebar',\n\t\t\tnav: db.entities.all().reduce(\n\t\t\t\t(list, entity) => ({\n\t\t\t\t\t...list,\n\t\t\t\t\t[entity.key]: {\n\t\t\t\t\t\tlink: entity.plural || entity.name,\n\t\t\t\t\t\tpermissions: db.roles.all().map((x) => x.id),\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\t{}\n\t\t\t),\n\t\t\tsignature: '',\n\t\t},\n\t\tonSubmit: (formValues) => {\n\t\t\tdb.siteSettings.set('title', formValues.title)\n\t\t\tdb.siteSettings.set('layout', formValues.layout)\n\n\t\t\tnavigate(`${process.env.PUBLIC_URL}/settings/site-settings`)\n\t\t},\n\t})\n\n\tconsole.log('formContext', formContext.values)\n\n\tconst layout = watch('layout', formContext)\n\n\tconst navSchema: TableSchema<EntityModel> = {\n\t\tcols: [\n\t\t\t{\n\t\t\t\ttitle: 'Entity Type',\n\t\t\t\tvalue: (x) => x.name,\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Link Name',\n\t\t\t\tvalue: (x) => <FormInput name={`nav.${x.key}.link`} />,\n\t\t\t},\n\t\t\t...db.roles.all().map<TableCol<EntityModel>>((role) => ({\n\t\t\t\ttitle: role.name,\n\t\t\t\tvalue: (x) => {\n\t\t\t\t\tlet perms = getIn(formContext.values, `nav.${x.key}.permissions`) as string[]\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"w-full flex justify-center\">\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tchecked={perms?.includes(role.id)}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\tformContext.setFieldValue(\n\t\t\t\t\t\t\t\t\t\t`nav.${x.key}.permissions`,\n\t\t\t\t\t\t\t\t\t\te.target.checked ? [...perms, role.id] : perms.filter((y) => y !== role.id)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\twidth: 'minmax(auto, max-content)',\n\t\t\t})),\n\t\t],\n\t}\n\n\tconst title = 'Edit Site Settings'\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading\n\t\t\t\tpageTitle={title}\n\t\t\t\ttitle={\n\t\t\t\t\t<div className=\"flex items-center space-x-3\">\n\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\tactions={{\n\t\t\t\t\t\t\t\ticon: <ArrowLeftIcon className=\"w-5 h-5 -mx-2\" />,\n\t\t\t\t\t\t\t\tintent: 'borderless',\n\t\t\t\t\t\t\t\trounded: 'full',\n\t\t\t\t\t\t\t\tto: '/settings/site-settings',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div>{title}</div>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t/>\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Stack>\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Page Title\"\n\t\t\t\t\t\t\tsubtitle=\"This title appears in the browser tab, is important for SEO\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<FormInput name=\"title\" label=\"Title\" validations={{ required: 'Title is required' }} />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection title=\"Layout\" subtitle=\"Control the sites layout design\">\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<div className=\"flex space-x-6\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'w-[200px] h-[200px] relative rounded-md hover:opacity-80 cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\tlayout === 'sidebar' && 'ring-2 ring-green-500'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue('layout', 'sidebar')\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img src={LayoutSidebar} alt=\"Sidebar\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t'w-[200px] h-[200px] relative rounded-md hover:opacity-80 cursor-pointer',\n\t\t\t\t\t\t\t\t\t\t\tlayout === 'topbar' && 'ring-2 ring-green-500'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tformContext.setFieldValue('layout', 'topbar')\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img src={LayoutTopbar} alt=\"Topbar\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection title=\"Navigation\" subtitle=\"Set up what pages are visible in the nav bar\">\n\t\t\t\t\t\t\t<CardWrapper className=\"overflow-hidden\">\n\t\t\t\t\t\t\t\t<Table schema={navSchema} items={db.entities.all()} />\n\t\t\t\t\t\t\t</CardWrapper>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<FormSection\n\t\t\t\t\t\t\ttitle=\"Email Signature\"\n\t\t\t\t\t\t\tsubtitle=\"This signature will be included at the bottom of every notification.\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Card>\n\t\t\t\t\t\t\t\t<FormEditor name=\"signature\" />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</FormSection>\n\n\t\t\t\t\t\t<div className=\"flex items-center justify-end\">\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Update',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ticon: <CheckIcon className=\"w-5 h-5\" />,\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Stack>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default SiteSettingsForm\n","import { FC } from 'react'\nimport { RouteComponentProps } from '@reach/router'\nimport PageHeading from '@primer/components/PageHeading'\nimport PageContent from '@primer/components/PageContent'\nimport Card from '@primer/components/Card'\nimport Form, { useForm } from '@primer/components/Form/Form'\nimport FormInput from '@primer/components/Form/FormInput'\nimport Actions from '@primer/components/Actions'\nimport Stack from '@primer/components/Stack'\n\ninterface FormSchema {\n\tname: string\n\tstartDate: Date\n\toptions: {\n\t\tlabel: string\n\t\tvalue: number\n\t}[]\n\tlist: string[]\n\thash: {\n\t\t[x: string]: boolean\n\t}\n}\n\nconst Test: FC<RouteComponentProps> = () => {\n\tconst formContext = useForm<FormSchema>({\n\t\tinitialValues: {\n\t\t\tname: '',\n\t\t\tstartDate: new Date(),\n\t\t\toptions: [\n\t\t\t\t{ label: 'Gold', value: 1 },\n\t\t\t\t{ label: 'Silver', value: 2 },\n\t\t\t\t{ label: 'Bronze', value: 3 },\n\t\t\t],\n\t\t\tlist: [],\n\t\t\thash: {\n\t\t\t\ta: true,\n\t\t\t\tb: false,\n\t\t\t},\n\t\t},\n\t\tonSubmit: (formData) => {\n\t\t\tconsole.log('formData', formData)\n\t\t},\n\t})\n\n\t// const { values, arrayHelpers } = useFieldArray('options', formContext)\n\n\treturn (\n\t\t<>\n\t\t\t<PageHeading title=\"New Form Components\" />\n\n\t\t\t<PageContent>\n\t\t\t\t<Form context={formContext}>\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<Stack>\n\t\t\t\t\t\t\t<FormInput name=\"name\" label=\"Name\" validations={{ required: 'Name is required' }} />\n\n\t\t\t\t\t\t\t<Actions\n\t\t\t\t\t\t\t\tactions={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttitle: 'Submit',\n\t\t\t\t\t\t\t\t\t\tintent: 'primary',\n\t\t\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Stack>\n\t\t\t\t\t</Card>\n\t\t\t\t</Form>\n\t\t\t</PageContent>\n\t\t</>\n\t)\n}\n\nexport default Test\n\n// test\n","import { FC, Suspense } from 'react'\nimport { Router, Redirect, RouteComponentProps } from '@reach/router'\nimport db from 'db'\n\nimport PageSidebar from '@primer/components/Layouts/PageSidebar'\nimport PageTopbar from '@primer/components/Layouts/PageTopbar'\n\n// logged in\nimport Home from 'pages/Home'\nimport NotFound from 'pages/NotFound'\n\n// entity\nimport Units from 'pages/Units/Units'\nimport ViewUnit from 'pages/Units/ViewUnit'\nimport UnitForm from 'pages/Units/UnitForm'\n\n// entity value\nimport ValueHistory from 'pages/Values/ValueHistory'\n\n// settings\nimport Settings from 'pages/Settings/Settings'\n\n// notifications\nimport Notifications from 'pages/Settings/Notifications/Notifications'\nimport NotificationForm from 'pages/Settings/Notifications/NotificationForm'\n\n// templates\nimport Templates from 'pages/Settings/Templates/Templates'\nimport TemplateForm from 'pages/Settings/Templates/TemplateForm'\n\n// roles\nimport Roles from 'pages/Settings/Roles/Roles'\nimport RoleForm from 'pages/Settings/Roles/RoleForm'\n\n// entities\nimport Entities from 'pages/Settings/Entities/Entities'\nimport EntityForm from 'pages/Settings/Entities/EntityForm'\n\n// Modules\nimport Modules from 'pages/Settings/Modules/Modules'\nimport AddModule from 'pages/Settings/Modules/AddModule'\n\n// SiteSettings\nimport SiteSettings from 'pages/Settings/SiteSettings/SiteSettings'\nimport SiteSettingsForm from 'pages/Settings/SiteSettings/SiteSettingsForm'\n\nimport Test from 'pages/Test'\n\nconst isDev = !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\n\nconst Route: FC<RouteComponentProps> = ({ children }) => <>{children}</>\n\nconsole.log('process.env', process.env)\n\nconst Router2 = () => {\n\tconst Wrapper = db.siteSettings.get('layout') === 'sidebar' ? PageSidebar : PageTopbar\n\n\tconst entities = db.entities.all()\n\n\treturn (\n\t\t<Suspense fallback={null}>\n\t\t\t<Router basepath={process.env.PUBLIC_URL}>\n\t\t\t\t<Wrapper path=\"/\">\n\t\t\t\t\t<Redirect from=\"/\" to=\"home\" noThrow={isDev} />\n\t\t\t\t\t<NotFound default />\n\t\t\t\t\t<Home path=\"/home\" />\n\t\t\t\t\t<Home path=\"/events\" />\n\t\t\t\t\t<Home path=\"/users\" />\n\n\t\t\t\t\t{entities.map((entity) => (\n\t\t\t\t\t\t<Route key={entity.id} path={`/${entity.key}`}>\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Units path=\"/\" entityId={entity.id} />\n\t\t\t\t\t\t\t<ViewUnit path=\":id\" entityId={entity.id} />\n\t\t\t\t\t\t\t<UnitForm path=\"/create\" entityId={entity.id} mode=\"create\" />\n\t\t\t\t\t\t\t<UnitForm path=\":id/edit\" entityId={entity.id} mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t))}\n\n\t\t\t\t\t<ValueHistory path=\"/value-history/:id\" />\n\n\t\t\t\t\t<Settings path=\"/settings\">\n\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t<Redirect from=\"/\" to=\"entities\" noThrow={isDev} />\n\n\t\t\t\t\t\t<Route path=\"/entities\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Entities path=\"/\" />\n\t\t\t\t\t\t\t<EntityForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<EntityForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/roles\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Roles path=\"/\" />\n\t\t\t\t\t\t\t<RoleForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<RoleForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/templates\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Templates path=\"/\" />\n\t\t\t\t\t\t\t<TemplateForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<TemplateForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/notifications\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Notifications path=\"/\" />\n\t\t\t\t\t\t\t<NotificationForm path=\"/create\" mode=\"create\" />\n\t\t\t\t\t\t\t<NotificationForm path=\":id/edit\" mode=\"edit\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/modules\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<Modules path=\"/\" />\n\t\t\t\t\t\t\t<AddModule path=\"/add\" />\n\t\t\t\t\t\t</Route>\n\n\t\t\t\t\t\t<Route path=\"/site-settings\">\n\t\t\t\t\t\t\t<NotFound default />\n\t\t\t\t\t\t\t<SiteSettings path=\"/\" />\n\t\t\t\t\t\t\t<SiteSettingsForm path=\"/edit\" />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t</Settings>\n\n\t\t\t\t\t<Test path=\"/test\" />\n\t\t\t\t</Wrapper>\n\t\t\t</Router>\n\t\t</Suspense>\n\t)\n}\n\nexport default Router2\n","import { useEffect, useReducer } from 'react'\nimport Router from './Router'\nimport 'react-quill/dist/quill.snow.css'\nimport './main.css'\nimport { renderContainer } from 'db'\n\nconst App = () => {\n\tconst [, dispatch] = useReducer(() => ({}), {})\n\tuseEffect(() => {\n\t\trenderContainer.current = dispatch\n\t}, [dispatch])\n\n\treturn <Router />\n}\n\nexport default App\n","import { Suspense } from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nconsole.log('build #' + process.env.REACT_APP_COMMIT)\n\nReactDOM.render(\n\t<Suspense fallback={null}>\n\t\t<App />\n\t</Suspense>,\n\tdocument.getElementById('root')\n)\n"],"sourceRoot":""}